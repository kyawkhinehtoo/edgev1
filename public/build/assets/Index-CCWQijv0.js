import{r as b,I as S,k as N,c as A,w as i,o as a,a as e,b as d,f as x,u as m,i as f,q as v,v as L,y as V,d as l,g as w,F as h,e as k,N as _,t as n}from"./app-PwYlAjyr.js";import{A as R}from"./AppLayout-Wq7WVyEL.js";import{_ as B}from"./Badge-WTzag7-a.js";import{P as D}from"./Pagination-BmN6hffy.js";import"./DropdownLink-9zd8RCof.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"py-12"},j={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},E={class:"bg-white shadow-xl sm:rounded-lg p-6"},I={class:"flex justify-between mb-6"},M={class:"space-y-4"},P={class:"flex space-x-2"},T=["value"],U={class:"min-w-full divide-y divide-gray-200 mt-4"},$={class:"bg-white divide-y divide-gray-200 text-xs"},q={class:"px-3 py-4"},O={class:"px-3 py-4"},z={class:"px-3 py-4"},G={class:"px-3 py-4 whitespace-nowrap"},H={class:"px-3 py-4 whitespace-nowrap"},J={key:0},te={__name:"Index",props:{subRootCauses:Array,rootCauses:Array,filters:Object},setup(p){var y;const c=p,r=b(""),u=b(((y=c.filters)==null?void 0:y.root_cause_id)||"");S(u,o=>{_.get(route("sub-root-causes.index"),{root_cause_id:o},{preserveState:!0,replace:!0})});const g=N(()=>r.value?c.subRootCauses.data.filter(o=>o.name.toLowerCase().includes(r.value.toLowerCase())||o.root_cause.name.toLowerCase().includes(r.value.toLowerCase())):c.subRootCauses),C=()=>{u.value="",r.value="",_.get(route("sub-root-causes.index"),{},{preserveState:!0,replace:!0})};return(o,t)=>(a(),A(R,{title:"Sub Root Causes"},{header:i(()=>t[3]||(t[3]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"}," Sub Root Causes ",-1)])),default:i(()=>[e("div",F,[e("div",j,[e("div",E,[e("div",I,[t[5]||(t[5]=e("h3",{class:"text-lg font-medium"},"Sub Root Cause List",-1)),d(m(f),{href:o.route("sub-root-causes.create"),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},{default:i(()=>t[4]||(t[4]=[x(" Add New Sub Root Cause ")])),_:1},8,["href"])]),e("div",M,[e("div",null,[v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),type:"text",placeholder:"Search sub root causes...",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,r.value]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Root Cause",-1)),e("div",P,[v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[6]||(t[6]=e("option",{value:""},"All Root Causes",-1)),(a(!0),l(h,null,w(p.rootCauses,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,T))),128))],512),[[V,u.value]]),u.value||r.value?(a(),l("button",{key:0,onClick:C,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"}," Clear ")):k("",!0)])])]),e("table",U,[t[11]||(t[11]=e("thead",null,[e("tr",null,[e("th",{class:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),e("th",{class:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Root Cause"),e("th",{class:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",$,[(a(!0),l(h,null,w(g.value.data,s=>(a(),l("tr",{key:s.id},[e("td",q,n(s.name),1),e("td",O,n(s.root_cause.name),1),e("td",z,n(s.description),1),e("td",G,[d(B,{color:s.status==="active"?"green":"red",text:s.status},null,8,["color","text"])]),e("td",H,[d(m(f),{href:o.route("sub-root-causes.edit",s.id),class:"text-indigo-600 hover:text-indigo-900 mr-3"},{default:i(()=>t[8]||(t[8]=[x(" Edit ")])),_:2},1032,["href"]),d(m(f),{href:o.route("sub-root-causes.destroy",s.id),method:"delete",as:"button",class:"text-red-600 hover:text-red-900",onClick:t[2]||(t[2]=K=>o.confirm("Are you sure you want to delete this sub root cause?"))},{default:i(()=>t[9]||(t[9]=[x(" Delete ")])),_:2},1032,["href"])])]))),128)),g.value.data.length===0?(a(),l("tr",J,t[10]||(t[10]=[e("td",{colspan:"5",class:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},"No sub root causes found",-1)]))):k("",!0)])]),d(D,{links:p.subRootCauses.links,class:"mt-6"},null,8,["links"])])])])]),_:1}))}};export{te as default};
