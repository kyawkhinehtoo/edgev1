import{A as z}from"./AppLayout-BHJZD0HI.js";import{R as A,r as d,z as V,c as C,w as F,N as M,o as a,a as t,i as O,j as T,k as j,d as l,t as n,e as u,F as R,g as U}from"./app-Fl7zx6gD.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-uyYv-WWM.js";const E={name:"NearbySnSplitter",components:{AppLayout:z},setup(){const r=A(),e=d(r.props.location||""),p=d(r.props.radius||10),o=d(r.props.splitters||[]),i=d(r.props.error||null);function _(m){return/^\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?\s*$/.test(m)}function c(){if(!_(e.value)){i.value="Please enter a valid location in 'lat,lng' format.";return}i.value=null,M.get("/sn/nearby",{location:e.value,radius:p.value},{preserveState:!1,replace:!0})}return{location:e,radius:p,splitters:o,error:i,searchNearby:c}}},Q={class:"py-2"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white shadow sm:rounded-lg p-6"},I={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4"},J={key:0,class:"text-red-500 mb-4"},K={key:1},W={class:"min-w-full divide-y divide-gray-200 text-sm"},X={class:"px-4 py-2"},Y={class:"px-4 py-2"},Z={class:"px-4 py-2"},$={class:"px-4 py-2"},tt={class:"px-4 py-2"},et={class:"px-4 py-2"},st={class:"px-4 py-2"},ot={class:"px-4 py-2"},nt={class:"px-4 py-2 capitalize"},at={key:0,class:"block mt-4 text-xs text-gray-600"},lt={key:2,class:"text-gray-500"};function rt(r,e,p,o,i,_){const c=V("pagination"),m=V("app-layout");return a(),C(m,null,{header:F(()=>e[3]||(e[3]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"},"Nearby SN Splitters",-1)])),default:F(()=>{var x;return[t("div",Q,[t("div",G,[t("div",H,[t("form",{onSubmit:e[2]||(e[2]=O((...s)=>o.searchNearby&&o.searchNearby(...s),["prevent"]))},[t("div",I,[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Location (lat,lng)",-1)),T(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.location=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300",placeholder:"e.g. 16.8,96.15",required:""},null,512),[[j,o.location]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Radius (meter)",-1)),T(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.radius=s),type:"number",min:"1",class:"mt-1 block w-full rounded-md border-gray-300"},null,512),[[j,o.radius,void 0,{number:!0}]])]),e[6]||(e[6]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"},"Search")],-1))])],32),o.error?(a(),l("div",J,n(o.error),1)):u("",!0),(x=o.splitters.data)!=null&&x.length?(a(),l("div",K,[t("table",W,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2"},"SN Name"),t("th",{class:"px-4 py-2"},"Location"),t("th",{class:"px-4 py-2"},"Distance (m)"),t("th",{class:"px-4 py-2"},"DN Splitter"),t("th",{class:"px-4 py-2"},"DN Box"),t("th",{class:"px-4 py-2"},"OLT"),t("th",{class:"px-4 py-2"},"POP"),t("th",{class:"px-4 py-2"},"Partner"),t("th",{class:"px-4 py-2"},"Status")])],-1)),t("tbody",null,[(a(!0),l(R,null,U(o.splitters.data,s=>{var y,b,g,h,f,v,k,N,S,w,L,B,D,P;return a(),l("tr",{key:s.id},[t("td",X,n(s.name),1),t("td",Y,n(s.location),1),t("td",Z,n(s.distance?s.distance.toFixed(2):"-"),1),t("td",$,n((y=s.sn_box.dn_splitter)==null?void 0:y.name),1),t("td",tt,n((g=(b=s.sn_box.dn_splitter)==null?void 0:b.dn_box)==null?void 0:g.name)+" "+n((f=(h=s.sn_box.dn_splitter)==null?void 0:h.dn_box)==null?void 0:f.type),1),t("td",et,n((k=(v=s.sn_box.dn_splitter)==null?void 0:v.pop_device)==null?void 0:k.device_name),1),t("td",st,n((w=(S=(N=s.sn_box.dn_splitter)==null?void 0:N.pop_device)==null?void 0:S.pop)==null?void 0:w.site_name),1),t("td",ot,n((P=(D=(B=(L=s.sn_box.dn_splitter)==null?void 0:L.pop_device)==null?void 0:B.pop)==null?void 0:D.partner)==null?void 0:P.name),1),t("td",nt,n(s.status),1)])}),128))])]),o.splitters.total?(a(),l("span",at,n(o.splitters.data.length)+" Splitter in Current Page. Total Number of Splitters: "+n(o.splitters.total),1)):u("",!0),o.splitters.links?(a(),C(c,{key:1,class:"mt-6",links:o.splitters.links},null,8,["links"])):u("",!0)])):(a(),l("div",lt,"No splitters found."))])])])]}),_:1})}const mt=q(E,[["render",rt]]);export{mt as default};
