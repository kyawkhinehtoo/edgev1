import{A as E}from"./AppLayout-C9WIWcWb.js";import{P as B}from"./Pagination-BG22ogT4.js";import{r as v,h as J,x as L,ak as z,z as U,c as K,w as N,N as _,o as n,a as e,j as i,k as f,O as q,d as a,F as T,g as C,f as w,i as G,M as x,e as p,l as Q,A as D,b as W,n as X,t as u}from"./app-DpF-174O.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Cf52uzEg.js";const Z={name:"port-sharing-service",components:{AppLayout:E,Pagination:B},props:{services:Object,errors:Object},setup(R){const t=v([{min:1,fees:8e3}]),m=v([{min:1e4,fees:8e3},{min:10001,fees:7500}]),o=v([{min:1,fees:1e4}]),l=J({id:null,name:null,short_code:null,max_speed:null,rate:m.value,type:"FTTH",currency:"mmk",status:!0}),k=v("");let y=v(!1),h=v(!1);function s(){l.id=null,l.name=null,l.short_code=null,l.max_speed=null,l.rate=m.value,l.type="FTTH",l.currency="mmk",l.status=!0,t.value=null}const g=()=>{l.rate.push({min:"",fess:""})},c=r=>{l.rate.splice(r,1)},S=r=>{const d=r.split("-");if(d.length===1)return[0,parseInt(d[0].replace("<","").trim(),10)];{const V=parseInt(d[0].trim(),10),A=parseInt(d[1].trim(),10);return[V,A]}};function M(r){try{JSON.parse(r)}catch{return!1}return!0}function F(){y.value?(l._method="PUT",_.post("/port-sharing-service/"+l.id,l,{onSuccess:r=>{b(),s(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}})):(l._method="POST",_.post("/port-sharing-service",l,{preserveState:!0,onSuccess:r=>{b(),s(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}}))}function I(r){l.id=r.id,l.name=r.name,l.short_code=r.short_code,l.max_speed=r.max_speed,l.rate=M(r.rate)?JSON.parse(r.rate):m.value,l.type=r.type,t.value=M(r.rate)?JSON.parse(r.rate):m.value,l.currency=r.currency||"mmk",l.status=r.status==1,y.value=!0,P()}function O(r){r=r||window.event;var d=r.which?r.which:r.keyCode;if(d>31&&(d<48||d>57)&&d!==46)r.preventDefault();else return!0}function H(r){confirm("Are you sure want to remove?")&&(r._method="DELETE",_.post("/port-sharing-service/"+r.id,r,{preserveState:!0,onSuccess:d=>{b(),s(),Toast.fire({icon:"success",title:d.props.flash.message})},onError:d=>{b(),console.log("error ..",d)}}),b(),s())}function P(){h.value=!0}const b=()=>{h.value=!1,s(),y.value=!1},j=()=>{_.get("/port-sharing-service",{service:k.value},{preserveState:!0})};return L(z(l,"type"),r=>{r==="FTTH"||r==="DIA"?t.value===null?l.rate=m.value:l.rate=t.value:(l.max_speed=1,t.value===null?l.rate=m.value:l.rate=o.value)}),{form:l,submit:F,editMode:y,isOpen:h,openModal:P,closeModal:b,edit:I,deleteRow:H,searchService:j,isNumber:O,search:k,rateRules:m,rateRulesPerMbps:o,addRule:g,removeRule:c,parseRange:S,isJsonString:M,cacheRate:t}}},$={class:"py-2"},ee={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},te={class:"flex justify-between space-x-2 items-end mb-2 px-1 md:px-0"},se={class:"relative flex flex-wrap z-0"},oe={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},re={class:"min-w-full divide-y divide-gray-200"},le={class:"bg-white divide-y divide-gray-200 text-sm"},ne={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},ae={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},ie={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},de={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},me={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap uppercase"},ue={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},ce={key:0,class:"text-xs text-gray-500"},pe={key:1,class:"text-xs text-gray-500"},fe={key:2,class:"text-xs text-gray-500"},xe={key:3,class:"text-xs text-gray-500"},ye={class:"px-3 py-3 text-left text-md font-medium"},ge={key:0,class:"flex flex-wrap gap-1"},be={class:"font-semibold"},ve={class:"ml-1 font-semibold"},he={class:"ml-1 uppercase"},_e={key:1},we={class:"px-3 py-3 text-md font-medium whitespace-nowrap text-right"},ke=["onClick"],Se=["onClick"],Me={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},Te={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ce={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Pe={class:"shadow sm:rounded-md sm:overflow-hidden"},Ve={class:"px-4 py-5 bg-white space-y-6 sm:p-6"},Ue={class:"col-span-1 sm:col-span-1"},Ne={class:"py-2 grid grid-cols-3 gap-2"},De={class:"col-span-2"},Re={class:"mt-1 flex rounded-md shadow-sm"},Fe={class:"col-span-1"},Ie={class:"mt-1 flex rounded-md shadow-sm"},Oe={class:"py-2"},He={class:"mt-1 flex"},je={class:"flex-auto items-center mt-3"},Ae={class:"flex-auto items-center mt-3"},Ee={class:"flex-auto items-center mt-3"},Be={class:"flex-auto items-center mt-3"},Je={key:0,class:"py-2"},Le={class:"mt-1 flex rounded-md shadow-sm"},ze={key:1,class:"py-2"},Ke={class:"mt-1 flex rounded-md shadow-sm"},qe={class:"py-2"},Ge={class:"mt-2 flex"},Qe={class:"flex-auto items-center"},We={class:"flex-auto items-center"},Xe={class:"flex-auto items-center"},Ye={class:"mb-4"},Ze={class:"block text-gray-700 text-sm font-bold"},$e={class:"mt-1 flex rounded-md shadow-sm"},et=["onUpdate:modelValue"],tt={class:"mt-1 flex rounded-md shadow-sm"},st=["onUpdate:modelValue"],ot={class:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm uppercase"},rt=["onClick"],lt={class:"py-2"},nt={class:"mt-1 flex"},at={key:0,class:"flex-auto items-center ml-1"},it={key:1,class:"flex-auto items-center ml-1"},dt={class:"px-4 py-3 bg-gray-50 text-right sm:px-6"},mt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ut={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},ct={type:"submit",class:"inline-flex justify-center w-full px-4 py-2 bg-gray-800 border border-gray-300 rounded-md font-medium text-base leading-6 sm:text-sm text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150"},pt={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},ft={type:"submit",class:"inline-flex justify-center w-full px-4 py-2 bg-gray-800 border border-gray-300 rounded-md font-medium text-base leading-6 sm:text-sm text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150"},xt={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},yt={key:1};function gt(R,t,m,o,l,k){const y=U("pagination"),h=U("app-layout");return n(),K(h,null,{header:N(()=>t[20]||(t[20]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"Port Sharing Services Setup",-1)])),default:N(()=>[e("div",$,[e("div",ee,[e("div",te,[e("div",se,[t[21]||(t[21]=e("span",{class:"z-10 h-full leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-search"})],-1)),i(e("input",{type:"text",placeholder:"Search here...",class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:ring w-full pl-10",id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>o.search=s),onKeyup:t[1]||(t[1]=q((...s)=>o.searchService&&o.searchService(...s),["enter"]))},null,544),[[f,o.search]])]),e("button",{onClick:t[2]||(t[2]=(...s)=>o.openModal&&o.openModal(...s)),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"Create")]),m.services.data?(n(),a("div",oe,[e("table",re,[t[23]||(t[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No. "),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Service Name"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Short Code"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Service Type"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Unit "),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Prices"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Action")])])],-1)),e("tbody",le,[(n(!0),a(T,null,C(m.services.data,(s,g)=>(n(),a("tr",{key:s.id,class:X({"text-gray-400":!s.status})},[e("td",ne,u(m.services.from+g),1),e("td",ae,u(s.name),1),e("td",ie,[e("span",de,u(s.short_code),1)]),e("td",me,u(s.type),1),e("td",ue,[w(u(s.max_speed)+" ",1),s.type==="FTTH"?(n(),a("span",ce,"Mbps (Max)")):p("",!0),s.type==="DIA"?(n(),a("span",pe,"Port (Per Port)")):p("",!0),s.type==="IPVPN"?(n(),a("span",fe,"Mbps (Per Mbps)")):p("",!0),s.type==="DPLC"?(n(),a("span",xe,"Mbps (Per Mbps)")):p("",!0)]),e("td",ye,[o.isJsonString(s.rate)?(n(),a("div",ge,[(n(!0),a(T,null,C(JSON.parse(s.rate),(c,S)=>(n(),a("span",{key:S,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[e("span",be,u(c.min),1),w("  "+u(s.type=="FTTH"?"Ports:":"Mbps:")+" ",1),e("span",ve,u(c.fees),1),e("span",he,u(s.currency),1)]))),128))])):(n(),a("span",_e,u(s.rate),1))]),e("td",we,[e("a",{href:"#",onClick:c=>o.edit(s),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,ke),t[22]||(t[22]=w(" | ")),e("a",{href:"#",onClick:c=>o.deleteRow(s),class:"text-red-600 hover:text-red-900"},"Delete",8,Se)])],2))),128))])]),o.isOpen?(n(),a("div",Me,[e("div",Te,[t[44]||(t[44]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[45]||(t[45]=w(" ​ ")),e("div",Ce,[e("form",{onSubmit:t[19]||(t[19]=G((...s)=>o.submit&&o.submit(...s),["prevent"]))},[e("div",Pe,[e("div",Ve,[e("div",Ue,[e("div",Ne,[e("div",De,[t[24]||(t[24]=e("label",{for:"name",class:"block text-md font-medium text-gray-700"},"Service Name",-1)),e("div",Re,[i(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.form.name=s),name:"name",id:"name",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Service Name",required:""},null,512),[[f,o.form.name]])])]),e("div",Fe,[t[25]||(t[25]=e("label",{for:"short_code",class:"block text-md font-medium text-gray-700"},"Short Code",-1)),e("div",Ie,[i(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>o.form.short_code=s),name:"short_code",id:"short_code",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Short Code",required:""},null,512),[[f,o.form.short_code]])])])]),e("div",Oe,[t[30]||(t[30]=e("label",{for:"type",class:"block text-md font-medium text-gray-700"},"Service Type",-1)),e("div",He,[e("label",je,[i(e("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:"type","onUpdate:modelValue":t[5]||(t[5]=s=>o.form.type=s),value:"FTTH"},null,512),[[x,o.form.type]]),t[26]||(t[26]=e("span",{class:"ml-2 text-gray-700"},"FTTH",-1))]),e("label",Ae,[i(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:"type","onUpdate:modelValue":t[6]||(t[6]=s=>o.form.type=s),value:"DIA"},null,512),[[x,o.form.type]]),t[27]||(t[27]=e("span",{class:"ml-2 text-gray-700"},"DIA",-1))]),e("label",Ee,[i(e("input",{type:"radio",class:"form-radio h-5 w-5 text-blue-600",name:"type","onUpdate:modelValue":t[7]||(t[7]=s=>o.form.type=s),value:"DPLC"},null,512),[[x,o.form.type]]),t[28]||(t[28]=e("span",{class:"ml-2 text-gray-700"},"DPLC",-1))]),e("label",Be,[i(e("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:"type","onUpdate:modelValue":t[8]||(t[8]=s=>o.form.type=s),value:"IPVPN"},null,512),[[x,o.form.type]]),t[29]||(t[29]=e("span",{class:"ml-2 text-gray-700"},"IPVPN",-1))])])]),o.form.type==="FTTH"?(n(),a("div",Je,[t[32]||(t[32]=e("label",{for:"max_speed",class:"block text-md font-medium text-gray-700"},"Max Speed",-1)),e("div",Le,[i(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=s=>o.form.max_speed=s),name:"max_speed",id:"max_speed",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300",placeholder:"Max Speed",onKeypress:t[10]||(t[10]=s=>o.isNumber(s)),required:""},null,544),[[f,o.form.max_speed]]),t[31]||(t[31]=e("span",{class:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"}," Mbps ",-1))])])):(n(),a("div",ze,[t[34]||(t[34]=e("label",{for:"max_speed",class:"block text-md font-medium text-gray-700"}," Bandwidth",-1)),e("div",Ke,[i(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=s=>o.form.max_speed=s),name:"max_speed",id:"max_speed",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300",placeholder:"Max Speed",onKeypress:t[12]||(t[12]=s=>o.isNumber(s)),required:"",disabled:""},null,544),[[f,o.form.max_speed]]),t[33]||(t[33]=e("span",{class:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"}," Mbps ",-1))])])),e("div",qe,[t[38]||(t[38]=e("label",{for:"currency",class:"block text-md font-medium text-gray-700"},"Currency ",-1)),e("div",Ge,[e("label",Qe,[i(e("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:"currency","onUpdate:modelValue":t[13]||(t[13]=s=>o.form.currency=s),value:"mmk"},null,512),[[x,o.form.currency]]),t[35]||(t[35]=e("span",{class:"ml-2 text-gray-700 text-sm"},"MMK",-1))]),e("label",We,[i(e("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:"currency","onUpdate:modelValue":t[14]||(t[14]=s=>o.form.currency=s),value:"usd"},null,512),[[x,o.form.currency]]),t[36]||(t[36]=e("span",{class:"ml-2 text-gray-700 text-sm"},"USD",-1))]),e("label",Xe,[i(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:"currency","onUpdate:modelValue":t[15]||(t[15]=s=>o.form.currency=s),value:"baht"},null,512),[[x,o.form.currency]]),t[37]||(t[37]=e("span",{class:"ml-2 text-gray-700 text-sm"},"THB",-1))])])]),t[43]||(t[43]=e("label",{for:"rate",class:"block text-gray-700 text-md font-bold"},"Service Rate ",-1)),e("div",Ye,[o.form.rate?(n(!0),a(T,{key:0},C(o.form.rate,(s,g)=>(n(),a("div",{key:g,class:"rule inline-flex items-center"},[e("label",Ze,u(o.form.type=="FTTH"?"Ports":"Min Mbps"),1),e("div",$e,[i(e("input",{type:"number","onUpdate:modelValue":c=>s.min=c,placeholder:"e.g., 10000",class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full m-4 shadow-sm sm:text-sm border-gray-300 rounded-md"},null,8,et),[[f,s.min]])]),t[40]||(t[40]=e("label",{class:"block text-gray-700 text-sm font-bold mr-2"},"Fees : ",-1)),e("div",tt,[i(e("input",{type:"number","onUpdate:modelValue":c=>s.fees=c,placeholder:"e.g., 25000",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300"},null,8,st),[[f,s.fees]]),e("span",ot,u(o.form.currency),1)]),e("button",{type:"button",onClick:c=>o.removeRule(g),class:"m-2 btn"},t[39]||(t[39]=[e("i",{class:"fas fa-minus-circle text-yellow-600"},null,-1)]),8,rt)]))),128)):p("",!0),e("button",{type:"button",onClick:t[16]||(t[16]=(...s)=>o.addRule&&o.addRule(...s)),class:"m-2 btn"},t[41]||(t[41]=[e("i",{class:"fas fa-plus-circle text-indigo-600"},null,-1)]))]),e("div",lt,[t[42]||(t[42]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",nt,[i(e("input",{type:"checkbox",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded mt-1",name:"status","onUpdate:modelValue":t[17]||(t[17]=s=>o.form.status=s),value:"true"},null,512),[[Q,o.form.status]]),o.form.status==!0?(n(),a("label",at,"Enabled")):p("",!0),o.form.status==!1?(n(),a("label",it,"Disabled")):p("",!0)])])])]),e("div",dt,[e("div",mt,[e("span",ut,[i(e("button",ct,"Save",512),[[D,!o.editMode]])]),e("span",pt,[i(e("button",ft,"Update",512),[[D,o.editMode]])]),e("span",xt,[e("button",{onClick:t[18]||(t[18]=(...s)=>o.closeModal&&o.closeModal(...s)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Cancel")])])])])],32)])])],512)):p("",!0)])):p("",!0),m.services.links?(n(),a("span",yt,[W(y,{class:"mt-6",links:m.services.links},null,8,["links"])])):p("",!0)])])]),_:1})}const kt=Y(Z,[["render",gt],["__scopeId","data-v-5ce38719"]]);export{kt as default};
