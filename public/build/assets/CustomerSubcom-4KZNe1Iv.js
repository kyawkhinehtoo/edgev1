import{A as N}from"./AppLayout-CleuMCKR.js";import{P as T}from"./Pagination-DFooNpoE.js";import{A as L,C as P}from"./Card-K2Pws64o.js";import{m as R,G as u,r as _,z as b,c as A,w as y,N as x,o as m,a as s,j,k as G,O as V,i as E,f as r,n as d,e as h,B as U,b as c,d as g,g as O,F as D,t as a}from"./app-Dasm1AVW.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-UiFy-ThI.js";import"./main-DKSwObeI.js";import"./vue3-multiselect.umd.min-zL8mXFfB.js";const z={components:{AppLayout:N,Pagination:T,AdvanceSearch:L,Card:P,Link:R},props:{customers:Object,active:Number,suspense:Number,installation_request:Number,terminate:Number,customers:Object,packages:Object,package_speed:Object,partners:Object,townships:Object,status:Object,errors:Object,dn:Object,radius:Boolean,user:Object,isps:Object,installationTeams:Object,onuSerials:Object},setup(i){u("packages",i.packages),u("partners",i.partners),u("townships",i.townships),u("status",i.status),u("dn",i.dn),u("package_speed",i.package_speed),u("isps",i.isps),u("installationTeams",i.installationTeams),u("onuSerials",i.onuSerials),u("user",i.user);const t=_(""),l=_(!1),o=()=>l.value=!l.value,B=()=>x.post("/customer/search",{keyword:t.value},{preserveState:!0}),I=n=>x.post("/customer/search",n,{preserveState:!0}),f=n=>n==="to_install"?x.post("/customer/search",{status:1},{preserveState:!0}):x.post("/customer/search",{status_type:n},{preserveState:!0}),k=()=>x.post("/customer/search",{status:0},{preserveState:!0}),p=n=>{confirm("Are you sure you want to delete?")&&x.post(`/customer/${n.id}`,{_method:"DELETE"})},C=n=>n.status.color?`text-${n.status.color}`:"",v=_(""),e=_("asc");return{search:t,show_search:l,toggleAdv:o,searchTsp:B,goSearch:I,goAction:f,goAll:k,deleteRow:p,getRowClass:C,sortBy:n=>{v.value===n?e.value=e.value==="asc"?"desc":"asc":(v.value=n,e.value="asc"),x.post("/customer/search",{sort:n,direction:e.value},{preserveState:!0})},getSortIcon:n=>v.value===n?e.value==="asc"?"fa-sort-up":"fa-sort-down":"fa-sort"}}},F={class:"py-2"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},M={class:"relative mb-2"},W={class:"flex justify-between items-center mb-2 px-1 md:px-0"},H={class:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 gap-2 mb-4"},J={class:"grid gap-4 sm:hidden"},Q={class:"flex justify-between items-center mb-2"},X={class:"flex space-x-2"},Y={class:"text-sm text-gray-600"},Z={class:"text-sm text-gray-600"},$={class:"text-sm text-gray-600"},tt={class:"text-sm text-gray-600"},st={class:"text-sm text-gray-600"},et={class:"text-sm text-gray-600"},ot={key:0,class:"hidden sm:block bg-white shadow-xl sm:rounded-lg overflow-auto"},at={class:"min-w-full divide-y divide-gray-200"},nt={class:"bg-gray-50"},rt={class:"px-3 py-3"},lt={class:"bg-white divide-y divide-gray-200"},it={class:"px-3 py-3 text-xs font-medium"},dt={class:"px-3 py-3 text-xs font-medium"},ut={class:"px-3 py-3 text-xs font-medium"},mt={class:"px-3 py-3 text-xs font-medium"},ct={class:"px-3 py-3 text-xs font-medium"},xt={class:"px-3 py-3 text-xs font-medium"},gt={class:"px-3 py-3 text-xs font-medium"},ft={class:"px-3 py-3 text-xs font-medium"},pt={class:"px-3 py-3 text-xs font-medium"},yt={class:"px-3 py-3 text-xs font-medium"},vt={class:"px-3 py-3 text-xs font-medium"},bt={class:"px-3 py-3 text-right"},ht={key:0},_t={key:1,class:"block mt-4 text-xs text-gray-600"};function kt(i,t,l,o,B,I){const f=b("Link"),k=b("advance-search"),p=b("Card"),C=b("pagination"),v=b("app-layout");return m(),A(v,null,{header:y(()=>t[19]||(t[19]=[s("h2",{class:"font-semibold text-xl text-white leading-tight"},"Customer Database ",-1)])),default:y(()=>[s("div",F,[s("div",K,[s("div",M,[t[20]||(t[20]=s("span",{class:"absolute left-3 top-3 text-blueGray-300"},[s("i",{class:"fas fa-search"})],-1)),j(s("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=e=>o.search=e),onKeyup:t[1]||(t[1]=V((...e)=>o.searchTsp&&o.searchTsp(...e),["enter"])),placeholder:"Search here...",class:"w-full md:w-64 pl-10 py-2.5 border-gray-300 rounded shadow text-sm text-blueGray-600 bg-white placeholder-blueGray-300"},null,544),[[G,o.search]])]),s("div",W,[s("a",{href:"#",class:"font-semibold text-xs text-gray-600",onClick:t[2]||(t[2]=E((...e)=>o.toggleAdv&&o.toggleAdv(...e),["prevent"]))},[t[21]||(t[21]=r(" Advance Search ")),s("i",{class:d([o.show_search?"fas fa-chevron-up":"fas fa-chevron-down","ml-2 text-blueGray-400"])},null,2)]),i.$page.props.login_type=="internal"||i.$page.props.login_type=="isp"?(m(),A(f,{key:0,href:"/customer/create",method:"get",as:"button",class:"px-4 py-2 bg-gray-800 text-white rounded-md text-xs font-semibold hover:bg-gray-700"},{default:y(()=>t[22]||(t[22]=[r(" Create ")])),_:1})):h("",!0)]),j(s("div",null,[c(k,{onSearch_parameter:o.goSearch},null,8,["onSearch_parameter"])],512),[[U,o.show_search]]),s("div",H,[c(p,{icon:"fa-users",bgColor:"blue",label:"Active Customers",count:l.active,onClick:t[3]||(t[3]=e=>o.goAction("active"))},null,8,["count"]),c(p,{icon:"fa-chart-line",bgColor:"green",label:"To Install",count:l.installation_request,onClick:t[4]||(t[4]=e=>o.goAction("to_install"))},null,8,["count"]),c(p,{icon:"fa-circle-pause",bgColor:"yellow",label:"Suspended Customers",count:l.suspense,onClick:t[5]||(t[5]=e=>o.goAction("suspense"))},null,8,["count"]),c(p,{icon:"fa-stop",bgColor:"red",label:"Terminated Customers",count:l.terminate,onClick:t[6]||(t[6]=e=>o.goAction("terminate"))},null,8,["count"])]),s("div",J,[(m(!0),g(D,null,O(l.customers.data,e=>(m(),g("div",{key:e.id,class:d(`p-4 bg-white rounded-lg shadow-md ${o.getRowClass(e)}`)},[s("div",Q,[s("h3",{class:d(["text-sm font-bold",o.getRowClass(e)])},"Customer ID: "+a(e.ftth_id),3),s("div",X,[c(f,{href:i.route("customer.edit",e.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600"},{default:y(()=>t[23]||(t[23]=[s("i",{class:"fas fa-edit"},null,-1)])),_:2},1032,["href"])])]),s("p",Y,[t[24]||(t[24]=s("strong",null,"Name:",-1)),r(" "+a(e.name),1)]),s("p",Z,[t[25]||(t[25]=s("strong",null,"Package:",-1)),r(" "+a(e.bandwidth),1)]),s("p",$,[t[26]||(t[26]=s("strong",null,"Township:",-1)),r(" "+a(e.township_name),1)]),s("p",tt,[t[27]||(t[27]=s("strong",null,"Status:",-1)),r(" "+a(e.status.name),1)]),s("p",st,[t[28]||(t[28]=s("strong",null,"Order Date:",-1)),r(" "+a(e.order_date),1)]),s("p",et,[t[29]||(t[29]=s("strong",null,"Prefer Install Date:",-1)),r(" "+a(e.prefer_install_date),1)])],2))),128))]),l.customers.data?(m(),g("div",ot,[s("table",at,[s("thead",nt,[s("tr",null,[s("th",{onClick:t[7]||(t[7]=e=>o.sortBy("ftth_id")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[30]||(t[30]=r(" UID ")),s("i",{class:d([o.getSortIcon("ftth_id"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[8]||(t[8]=e=>o.sortBy("isp_ftth_id")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[31]||(t[31]=r(" CID ")),s("i",{class:d([o.getSortIcon("isp_ftth_id"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[9]||(t[9]=e=>o.sortBy("order_date")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[32]||(t[32]=r(" Order Date ")),s("i",{class:d([o.getSortIcon("order_date"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[10]||(t[10]=e=>o.sortBy("subcom_assign_date")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[33]||(t[33]=r(" Assign Date ")),s("i",{class:d([o.getSortIcon("subcom_assign_date"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[11]||(t[11]=e=>o.sortBy("prefer_install_date")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[34]||(t[34]=r(" Prefer Date ")),s("i",{class:d([o.getSortIcon("prefer_install_date"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[12]||(t[12]=e=>o.sortBy("way_list_date")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[35]||(t[35]=r(" WayList Date ")),s("i",{class:d([o.getSortIcon("way_list_date"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[13]||(t[13]=e=>o.sortBy("name")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[36]||(t[36]=r(" Name ")),s("i",{class:d([o.getSortIcon("name"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[14]||(t[14]=e=>o.sortBy("bandwidth")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[37]||(t[37]=r(" Package ")),s("i",{class:d([o.getSortIcon("bandwidth"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[15]||(t[15]=e=>o.sortBy("township")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[38]||(t[38]=r(" Township ")),s("i",{class:d([o.getSortIcon("township"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[16]||(t[16]=e=>o.sortBy("installation_status")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[39]||(t[39]=r(" Installation Status ")),s("i",{class:d([o.getSortIcon("installation_status"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[17]||(t[17]=e=>o.sortBy("status")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[40]||(t[40]=r(" Status ")),s("i",{class:d([o.getSortIcon("status"),"fas fa-sort ml-1"])},null,2)]),s("th",rt,[s("a",{onClick:t[18]||(t[18]=(...e)=>o.goAll&&o.goAll(...e)),class:"cursor-pointer text-gray-200 hover:text-gray-500"},t[41]||(t[41]=[s("i",{class:"fas fa-undo"},null,-1)]))])])]),s("tbody",lt,[(m(!0),g(D,null,O(l.customers.data,e=>{var S,w;return m(),g("tr",{key:e.id,class:d(o.getRowClass(e))},[s("td",it,a(e.ftth_id),1),s("td",dt,a(e.isp_ftth_id),1),s("td",ut,a(e.order_date),1),s("td",mt,a(e.subcom_assign_date),1),s("td",ct,a(e.prefer_install_date),1),s("td",xt,a(e.way_list_date),1),s("td",gt,a(e.name),1),s("td",ft,a(e.bandwidth),1),s("td",pt,a(e.township_name),1),s("td",yt,a(e.installation_status?e.installation_status.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):""),1),s("td",vt,a(e.status.name),1),s("td",bt,[c(f,{href:i.route("customer.edit",e.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600 mr-2"},{default:y(()=>t[42]||(t[42]=[s("i",{class:"fas fa-folder"},null,-1)])),_:2},1032,["href"]),(w=(S=l.user)==null?void 0:S.role)!=null&&w.delete_customer?(m(),g("span",ht,[c(f,{href:"#",onClick:n=>o.deleteRow(e),class:"text-yellow-600 hover:text-yellow-900 ml-2"},{default:y(()=>t[43]||(t[43]=[s("i",{class:"fas fa-trash"},null,-1)])),_:2},1032,["onClick"])])):h("",!0)])],2)}),128))])])])):h("",!0),l.customers.total?(m(),g("span",_t,a(l.customers.data.length)+" Customers in Current Page. Total Number of Customers: "+a(l.customers.total),1)):h("",!0),l.customers.links?(m(),A(C,{key:2,class:"mt-6",links:l.customers.links},null,8,["links"])):h("",!0)])])]),_:1})}const Dt=q(z,[["render",kt]]);export{Dt as default};
