import{r as w,c as k,w as u,o as r,a as t,i as b,j as c,k as y,v as _,d as i,g as p,F as x,t as o,N as S,n as h}from"./app-D6CVw1H4.js";import{A as T}from"./AppLayout-W1Zz9yNo.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-EPEBtceR.js";const P={class:"py-12"},C={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},D={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},I={class:"p-6 bg-white border-b border-gray-200"},R=["value"],U={class:"bg-white shadow overflow-hidden sm:rounded-lg"},j={class:"px-4 py-5 sm:p-6"},F={class:"overflow-x-auto"},N={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},O={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 border-r"},V={class:"px-6 py-4 whitespace-nowrap text-sm text-center font-bold"},B={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},M={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},L={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},z={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},E={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},q={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},H={class:"bg-gray-100"},J={class:"font-bold"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-center font-bold text-blue-600"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-center font-bold"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-center font-bold"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-center font-bold"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-center font-bold"},$={class:"px-6 py-4 whitespace-nowrap text-sm text-center font-bold"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-center font-bold"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-center font-bold"},st={class:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg"},ot={class:"px-4 py-5 sm:p-6"},dt={class:"mb-4"},at=["value"],rt={class:"overflow-x-auto"},it={class:"min-w-full divide-y divide-gray-200"},nt={class:"bg-white divide-y divide-gray-200"},lt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 border-r"},ct={class:"px-3 py-4 whitespace-nowrap text-sm text-center font-bold text-blue-600"},pt={class:"px-3 py-4 whitespace-nowrap text-sm text-center"},xt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},mt={class:"px-3 py-4 whitespace-nowrap text-sm text-center"},gt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},ut={class:"px-3 py-4 whitespace-nowrap text-sm text-center"},bt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800"},yt={class:"px-3 py-4 whitespace-nowrap text-sm text-center"},_t={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},ht={class:"px-3 py-4 whitespace-nowrap text-sm text-center"},vt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},ft={class:"px-3 py-4 whitespace-nowrap text-sm text-center"},wt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},kt={class:"bg-gray-100"},St={class:"font-bold"},Tt={class:"px-3 py-4 whitespace-nowrap text-sm text-center font-bold text-blue-600"},At={class:"px-3 py-4 whitespace-nowrap text-sm text-center font-bold"},Pt={class:"px-3 py-4 whitespace-nowrap text-sm text-center font-bold"},Ct={class:"px-3 py-4 whitespace-nowrap text-sm text-center font-bold"},Dt={class:"px-3 py-4 whitespace-nowrap text-sm text-center font-bold"},It={class:"px-3 py-4 whitespace-nowrap text-sm text-center font-bold"},Rt={class:"px-3 py-4 whitespace-nowrap text-sm text-center font-bold"},Ut={__name:"IncidentTicketDashboard",props:{supervisor_matrix:Array,grand_total:Object,team_workload_matrix:Array,team_grand_total:Object,subcoms:Array,supervisors:Array,supervisor_id:[String,Number],subcom_id:[String,Number],date_from:String,date_to:String},setup(d){const n=d,a=w({date_from:n.date_from||"",date_to:n.date_to||"",supervisor_id:n.supervisor_id||"",subcom_id:n.subcom_id||""}),v=l=>{const e=["bg-yellow-100","bg-gray-100","bg-green-100","bg-orange-100"];return e[l%e.length]||"bg-white"},f=l=>{const e=["bg-blue-50","bg-green-50","bg-purple-50","bg-pink-50","bg-indigo-50","bg-yellow-50"];return e[l%e.length]||"bg-white"},g=()=>{S.get(route("incident-ticket-dashboard"),a.value,{preserveState:!0,preserveScroll:!0})};return(l,e)=>(r(),k(T,{title:"Rectification Dashboard"},{header:u(()=>e[4]||(e[4]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"}," Rectification Dashboard ",-1)])),default:u(()=>[t("div",P,[t("div",C,[t("div",D,[t("div",I,[e[10]||(e[10]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Total Ticket Within Filter Date Range",-1)),t("form",{onSubmit:b(g,["prevent"]),class:"grid grid-cols-1 md:grid-cols-4 gap-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date From",-1)),c(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.date_from=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[y,a.value.date_from]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date To",-1)),c(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.date_to=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[y,a.value.date_to]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Supervisor",-1)),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.supervisor_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[7]||(e[7]=t("option",{value:""},"All Supervisors",-1)),(r(!0),i(x,null,p(d.supervisors,s=>(r(),i("option",{key:s.id,value:s.id},o(s.name),9,R))),128))],512),[[_,a.value.supervisor_id]])]),e[9]||(e[9]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500"}," Apply Filters ")],-1))],32)])]),t("div",U,[t("div",j,[e[13]||(e[13]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Incident Ticket Status Matrix ",-1)),t("div",F,[t("table",N,[e[12]||(e[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{rowspan:"2",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r"}," Supervisor Name "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b"}," Total Ticket "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b"}," Supervisor Assign Tickets "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b"}," Team Assigned Tickets "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b"}," Pending Team Assign "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b"}," Photo upload completed "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b"}," Photo Approved "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b"}," Resolve Opened "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b"}," Ticket Closed ")])],-1)),t("tbody",W,[(r(!0),i(x,null,p(d.supervisor_matrix,(s,m)=>(r(),i("tr",{key:s.supervisor_id,class:h(v(m))},[t("td",O,o(s.supervisor_name),1),t("td",V,o(s.total_ticket),1),t("td",B,o(s.supervisor_assign_tickets),1),t("td",M,o(s.team_assigned_tickets),1),t("td",L,o(s.pending_team_assign),1),t("td",G,o(s.photo_upload_completed),1),t("td",z,o(s.photo_approved),1),t("td",E,o(s.resolve_opened),1),t("td",q,o(s.ticket_closed),1)],2))),128))]),t("tfoot",H,[t("tr",J,[e[11]||(e[11]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 border-r"}," Grand Total ",-1)),t("td",K,o(d.grand_total.total_ticket),1),t("td",Q,o(d.grand_total.supervisor_assign_tickets),1),t("td",X,o(d.grand_total.team_assigned_tickets),1),t("td",Y,o(d.grand_total.pending_team_assign),1),t("td",Z,o(d.grand_total.photo_upload_completed),1),t("td",$,o(d.grand_total.photo_approved),1),t("td",tt,o(d.grand_total.resolve_opened),1),t("td",et,o(d.grand_total.ticket_closed),1)])])])])])]),t("div",st,[t("div",ot,[e[19]||(e[19]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Team Workload Dashboard (Subcontractors) ",-1)),t("div",dt,[t("form",{onSubmit:b(g,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700"},"Subcontractor",-1)),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.subcom_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[14]||(e[14]=t("option",{value:""},"All Subcontractors",-1)),(r(!0),i(x,null,p(d.subcoms,s=>(r(),i("option",{key:s.id,value:s.id},o(s.name),9,at))),128))],512),[[_,a.value.subcom_id]])]),e[16]||(e[16]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:ring-2 focus:ring-green-500"}," Filter Team ")],-1))],32)]),t("div",rt,[t("table",it,[e[18]||(e[18]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{rowspan:"2",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r"}," Subcom Name "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b"}," Total Tasks "),t("th",{colspan:"4",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-l"}," Task Status "),t("th",{colspan:"2",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-l"}," Incident Status ")]),t("tr",{class:"bg-blue-50"},[t("th",{class:"px-3 py-2 text-center text-xs text-gray-600"},"Team Assigned"),t("th",{class:"px-3 py-2 text-center text-xs text-gray-600"},"Rectification Ongoing"),t("th",{class:"px-3 py-2 text-center text-xs text-gray-600"},"Photo Upload Complete"),t("th",{class:"px-3 py-2 text-center text-xs text-gray-600"},"Photo Upload Rejected"),t("th",{class:"px-3 py-2 text-center text-xs text-gray-600"},"Photo Upload Approved"),t("th",{class:"px-3 py-2 text-center text-xs text-gray-600"},"WIP"),t("th",{class:"px-3 py-2 text-center text-xs text-gray-600"},"Closed")])],-1)),t("tbody",nt,[(r(!0),i(x,null,p(d.team_workload_matrix,(s,m)=>(r(),i("tr",{key:s.subcom_id,class:h(f(m))},[t("td",lt,o(s.subcom_name),1),t("td",ct,o(s.total_tasks),1),t("td",pt,[t("span",xt,o(s.task_wip),1)]),t("td",mt,[t("span",gt,o(s.task_photo_complete),1)]),t("td",ut,[t("span",bt,o(s.task_photo_rejected),1)]),t("td",yt,[t("span",_t,o(s.task_approved),1)]),t("td",ht,[t("span",vt,o(s.incident_wip),1)]),t("td",ft,[t("span",wt,o(s.incident_closed),1)])],2))),128))]),t("tfoot",kt,[t("tr",St,[e[17]||(e[17]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 border-r"}," Grand Total ",-1)),t("td",Tt,o(d.team_grand_total.total_tasks),1),t("td",At,o(d.team_grand_total.task_wip),1),t("td",Pt,o(d.team_grand_total.task_photo_complete),1),t("td",Ct,o(d.team_grand_total.task_photo_rejected),1),t("td",Dt,o(d.team_grand_total.task_approved),1),t("td",It,o(d.team_grand_total.incident_wip),1),t("td",Rt,o(d.team_grand_total.incident_closed),1)])])])])])]),e[20]||(e[20]=t("div",{class:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg"},[t("div",{class:"px-4 py-5 sm:p-6"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Status Legend "),t("div",{class:"mb-6"},[t("h4",{class:"text-md font-medium text-gray-800 mb-3"},"Supervisor Dashboard"),t("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},[t("div",{class:"bg-blue-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-blue-900"},"Supervisor Assign (Status 6)"),t("div",{class:"text-xs text-blue-700 mt-1"},"Tickets assigned to supervisor")]),t("div",{class:"bg-green-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-green-900"},"Team Assigned (Status 2)"),t("div",{class:"text-xs text-green-700 mt-1"},"Tickets assigned to field team")]),t("div",{class:"bg-yellow-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-yellow-900"},"Pending Team Assign (Status 1)"),t("div",{class:"text-xs text-yellow-700 mt-1"},"Awaiting team assignment")]),t("div",{class:"bg-purple-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-purple-900"},"Photo Upload Completed"),t("div",{class:"text-xs text-purple-700 mt-1"},"Tasks marked as completed")]),t("div",{class:"bg-indigo-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-indigo-900"},"Photo Approved"),t("div",{class:"text-xs text-indigo-700 mt-1"},"Tasks approved by supervisor")]),t("div",{class:"bg-orange-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-orange-900"},"Resolve Opened (Status 5)"),t("div",{class:"text-xs text-orange-700 mt-1"},"Resolved but still open")]),t("div",{class:"bg-gray-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-gray-900"},"Ticket Closed (Status 3)"),t("div",{class:"text-xs text-gray-700 mt-1"},"Completed and closed tickets")])])]),t("div",null,[t("h4",{class:"text-md font-medium text-gray-800 mb-3"},"Team Workload Dashboard"),t("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},[t("div",{class:"bg-yellow-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-yellow-900"},"Task WIP (Status 1)"),t("div",{class:"text-xs text-yellow-700 mt-1"},"Tasks currently in progress")]),t("div",{class:"bg-green-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-green-900"},"Photo Upload Complete (Status 4)"),t("div",{class:"text-xs text-green-700 mt-1"},"Tasks with photos uploaded")]),t("div",{class:"bg-red-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-red-900"},"Photo Upload Rejected (Status 5)"),t("div",{class:"text-xs text-red-700 mt-1"},"Tasks with rejected photos")]),t("div",{class:"bg-blue-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-blue-900"},"Supervisor Approved (Status 2)"),t("div",{class:"text-xs text-blue-700 mt-1"},"Tasks approved by supervisor")]),t("div",{class:"bg-orange-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-orange-900"},"Incident WIP (Status 1)"),t("div",{class:"text-xs text-orange-700 mt-1"},"Incidents currently in progress")]),t("div",{class:"bg-gray-50 p-4 rounded-lg"},[t("div",{class:"text-sm font-medium text-gray-900"},"Incident Closed (Status 3)"),t("div",{class:"text-xs text-gray-700 mt-1"},"Completed incidents")])])])])],-1))])])]),_:1}))}},Ot=A(Ut,[["__scopeId","data-v-0445a997"]]);export{Ot as default};
