import{H as _,d as c,a as t,t as i,j as e,k as l,e as f,T as b,x as g,o as y,N as x}from"./app-DxeDZ86G.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const v=_({props:{show:Boolean,invoice:{type:Object,default:()=>({})}},emits:["close"],setup(n,{emit:o}){const a=b({id:"",bill_number:"",isp_name:"",total_port_leasing_customer:0,total_maintenance_customer:0,total_suspension_customer:0,total_installation_customer:0,total_relocation_customer:0,total_material_customer:0,total_port_leasing_amount:0,total_maintenance_amount:0,total_suspension_amount:0,total_installation_amount:0,total_relocation_amount:0,total_material_amount:0,additional_description:"",additional_fees:0,sub_total:0,discount_amount:0,tax_percent:0,tax_amount:0,total_amount:0,issue_date:"",due_date:""}),r=()=>{a.sub_total=Number(a.total_port_leasing_amount)+Number(a.total_maintenance_amount)+Number(a.total_suspension_amount)+Number(a.total_installation_amount)+Number(a.total_relocation_amount)+Number(a.total_material_amount)+Number(a.additional_fees),a.tax_amount=(a.sub_total-Number(a.discount_amount))*Number(a.tax_percent)/100,a.total_amount=a.sub_total-Number(a.discount_amount)+Number(a.tax_amount)};g(()=>n.invoice,s=>{var m,p;s&&(a.id=s.id,a.bill_number=(m=s.temp_bill)==null?void 0:m.bill_number,a.isp_name=(p=s.isp)==null?void 0:p.name,a.total_port_leasing_customer=s.total_port_leasing_customer,a.total_maintenance_customer=s.total_maintenance_customer,a.total_suspension_customer=s.total_suspension_customer,a.total_installation_customer=s.total_installation_customer,a.total_relocation_customer=s.total_relocation_customer,a.total_material_customer=s.total_material_customer,a.total_port_leasing_amount=s.total_port_leasing_amount,a.total_maintenance_amount=s.total_maintenance_amount,a.total_suspension_amount=s.total_suspension_amount,a.total_installation_amount=s.total_installation_amount,a.total_relocation_amount=s.total_relocation_amount,a.total_material_amount=s.total_material_amount,a.additional_description=s.additional_description,a.additional_fees=s.additional_fees,a.sub_total=s.sub_total,a.discount_amount=s.discount_amount||0,a.tax_percent=s.tax_percent||0,a.tax_amount=s.tax_amount||0,a.total_amount=s.total_amount,a.issue_date=s.issue_date,a.due_date=s.due_date,r())},{immediate:!0,deep:!0});const u=()=>{a._method="PUT",x.post(route("tempInvoice.update",{id:a.id}),a,{onSuccess:s=>{Toast.fire({icon:"success",title:s.props.flash.message}),d()},onError:s=>{console.error("Error submitting form:",s)}})},d=()=>{a.reset(),o("close")};return{form:a,submit:u,closeModal:d,updateCalculations:r}}}),C={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},N={class:"mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:max-w-4xl sm:mx-auto"},$={class:"p-8"},I={class:"border-b pb-4 mb-6"},T={class:"grid grid-cols-2 gap-8 mt-4"},j={class:"font-medium mt-1"},k={class:"text-sm text-gray-500"},w={class:"text-right"},D={class:"mb-2"},M={class:"mb-8"},U={class:"w-full"},B={class:"border-b"},E={class:"py-3 px-2 text-right"},S={class:"py-3 px-2 text-right"},A={class:"border-b"},O={class:"py-3 px-2 text-right"},P={class:"py-3 px-2 text-right"},z={class:"border-b"},H={class:"py-3 px-2 text-right"},L={class:"py-3 px-2 text-right"},R={class:"border-b"},q={class:"py-3 px-2 text-right"},F={class:"py-3 px-2 text-right"},G={class:"border-b"},J={class:"py-3 px-2 text-right"},K={class:"py-3 px-2 text-right"},Q={class:"border-b"},W={class:"py-3 px-2 text-right"},X={class:"py-3 px-2 text-right"},Y={class:"border-b"},Z={class:"py-3 px-2"},V={class:"py-3 px-2"},tt={class:"bg-gray-50 p-4 rounded-lg"},ot={class:"grid grid-cols-2 gap-4"},st={class:"space-y-3"},at={class:"flex justify-between"},nt={class:"flex justify-between items-center"},it={class:"flex justify-between items-center"},et={class:"flex justify-between"},lt={class:"flex justify-between pt-3 border-t"},rt={class:"font-bold"},dt={class:"mt-8 flex justify-end space-x-3"},ut=["disabled"];function mt(n,o,a,r,u,d){return n.show?(y(),c("div",C,[o[29]||(o[29]=t("div",{class:"fixed inset-0 transform transition-all"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t("div",N,[t("div",$,[t("div",I,[o[14]||(o[14]=t("h1",{class:"text-2xl font-bold text-gray-800"},"INVOICE",-1)),t("div",T,[t("div",null,[o[11]||(o[11]=t("p",{class:"text-gray-600"},"Bill To:",-1)),t("p",j,i(n.form.isp_name),1),t("p",k,"Bill Number: "+i(n.form.bill_number),1)]),t("div",w,[t("div",D,[o[12]||(o[12]=t("label",{class:"block text-sm text-gray-600"},"Issue Date:",-1)),e(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>n.form.issue_date=s),type:"date",class:"mt-1 w-48 border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[l,n.form.issue_date]])]),t("div",null,[o[13]||(o[13]=t("label",{class:"block text-sm text-gray-600"},"Due Date:",-1)),e(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>n.form.due_date=s),type:"date",class:"mt-1 w-48 border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[l,n.form.due_date]])])])])]),t("div",M,[t("table",U,[o[22]||(o[22]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"text-left py-3 px-2"},"Description"),t("th",{class:"text-right py-3 px-2 w-32"},"Customers"),t("th",{class:"text-right py-3 px-2 w-32"},"Amount")])],-1)),t("tbody",null,[t("tr",B,[o[15]||(o[15]=t("td",{class:"py-3 px-2"},"Monthly Port Leasing Charges",-1)),t("td",E,i(n.form.total_port_leasing_customer),1),t("td",S,"$"+i(n.form.total_port_leasing_amount),1)]),t("tr",A,[o[16]||(o[16]=t("td",{class:"py-3 px-2"},"Maintenance Charges",-1)),t("td",O,i(n.form.total_maintenance_customer),1),t("td",P,"$"+i(n.form.total_maintenance_amount),1)]),t("tr",z,[o[17]||(o[17]=t("td",{class:"py-3 px-2"},"Suspension Charges",-1)),t("td",H,i(n.form.total_suspension_customer),1),t("td",L,"$"+i(n.form.total_suspension_amount),1)]),t("tr",R,[o[18]||(o[18]=t("td",{class:"py-3 px-2"},"Installation Charges",-1)),t("td",q,i(n.form.total_installation_customer),1),t("td",F,"$"+i(n.form.total_installation_amount),1)]),t("tr",G,[o[19]||(o[19]=t("td",{class:"py-3 px-2"},"Relocation Charges",-1)),t("td",J,i(n.form.total_relocation_customer),1),t("td",K,"$"+i(n.form.total_relocation_amount),1)]),t("tr",Q,[o[20]||(o[20]=t("td",{class:"py-3 px-2"},"Material Charges",-1)),t("td",W,i(n.form.total_material_customer),1),t("td",X,"$"+i(n.form.total_material_amount),1)]),t("tr",Y,[t("td",Z,[e(t("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>n.form.additional_description=s),type:"text",placeholder:"Additional Description",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[l,n.form.additional_description]])]),o[21]||(o[21]=t("td",{class:"py-3 px-2"},null,-1)),t("td",V,[e(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>n.form.additional_fees=s),type:"number",step:"0.01",class:"w-full text-right border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",onInput:o[4]||(o[4]=(...s)=>n.updateCalculations&&n.updateCalculations(...s))},null,544),[[l,n.form.additional_fees]])])])])])]),t("div",tt,[t("div",ot,[o[28]||(o[28]=t("div",null,null,-1)),t("div",st,[t("div",at,[o[23]||(o[23]=t("span",{class:"font-medium"},"Subtotal:",-1)),t("span",null,"$"+i(n.form.sub_total),1)]),t("div",nt,[o[24]||(o[24]=t("span",{class:"font-medium"},"Discount:",-1)),e(t("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>n.form.discount_amount=s),type:"number",step:"0.01",class:"w-32 text-right border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",onInput:o[6]||(o[6]=(...s)=>n.updateCalculations&&n.updateCalculations(...s))},null,544),[[l,n.form.discount_amount]])]),t("div",it,[o[25]||(o[25]=t("span",{class:"font-medium"},"Tax (%):",-1)),e(t("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>n.form.tax_percent=s),type:"number",step:"0.01",class:"w-32 text-right border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",onInput:o[8]||(o[8]=(...s)=>n.updateCalculations&&n.updateCalculations(...s))},null,544),[[l,n.form.tax_percent]])]),t("div",et,[o[26]||(o[26]=t("span",{class:"font-medium"},"Tax Amount:",-1)),t("span",null,"$"+i(n.form.tax_amount),1)]),t("div",lt,[o[27]||(o[27]=t("span",{class:"font-bold"},"Total Amount:",-1)),t("span",rt,"$"+i(n.form.total_amount),1)])])])]),t("div",dt,[t("button",{type:"button",class:"px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-sm text-gray-700 hover:bg-gray-50",onClick:o[9]||(o[9]=(...s)=>n.closeModal&&n.closeModal(...s))}," Cancel "),t("button",{onClick:o[10]||(o[10]=(...s)=>n.submit&&n.submit(...s)),class:"px-4 py-2 bg-blue-600 text-white rounded-md font-semibold text-sm hover:bg-blue-700",disabled:n.form.processing}," Save Invoice ",8,ut)])])])])):f("",!0)}const ct=h(v,[["render",mt]]);export{ct as default};
