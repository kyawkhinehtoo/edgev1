import{A as R}from"./AppLayout-DQMHUDA-.js";import{P as L}from"./Pagination-BDaU9i64.js";import{A as P,C as B}from"./Card-ae5BKaHn.js";import{i as I,D as i,r as w,q as y,c as k,w as x,N as p,o as d,a as e,s as j,v as V,L as E,h as G,f as u,n as b,e as h,x as q,b as m,d as c,g as O,F as T,t as a}from"./app-DdoqqyeN.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DupIRA2Y.js";import"./main-BS23juub.js";import"./vue3-multiselect.umd.min-BtFOAPRA.js";const K={components:{AppLayout:R,Pagination:L,AdvanceSearch:P,Card:B,Link:I},props:{customers:Object,active:Number,suspense:Number,installation_request:Number,terminate:Number,customers:Object,packages:Object,package_speed:Object,partners:Object,townships:Object,status:Object,errors:Object,dn:Object,radius:Boolean,user:Object,isps:Object,installationTeams:Object,onuSerials:Object},setup(l){i("packages",l.packages),i("partners",l.partners),i("townships",l.townships),i("status",l.status),i("dn",l.dn),i("package_speed",l.package_speed),i("isps",l.isps),i("installationTeams",l.installationTeams),i("onuSerials",l.onuSerials),i("user",l.user);const t=w(""),n=w(!1);return{search:t,show_search:n,toggleAdv:()=>n.value=!n.value,searchTsp:()=>p.post("/customer/search",{keyword:t.value},{preserveState:!0}),goSearch:r=>p.post("/customer/search",r,{preserveState:!0}),goAction:r=>r==="to_install"?p.post("/customer/search",{status:1},{preserveState:!0}):p.post("/customer/search",{status_type:r},{preserveState:!0}),goAll:()=>p.post("/customer/search",{status:0},{preserveState:!0}),deleteRow:r=>{confirm("Are you sure you want to delete?")&&p.post(`/customer/${r.id}`,{_method:"DELETE"})},getRowClass:r=>r.status.color?`text-${r.status.color}`:""}}},M={class:"py-2"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={class:"relative mb-2"},H={class:"flex justify-between items-center mb-2 px-1 md:px-0"},J={class:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 gap-2 mb-4"},Q={class:"grid gap-4 sm:hidden"},W={class:"flex justify-between items-center mb-2"},X={class:"flex space-x-2"},Y=["onClick"],Z={class:"text-sm text-gray-600"},$={class:"text-sm text-gray-600"},tt={class:"text-sm text-gray-600"},et={class:"text-sm text-gray-600"},st={class:"text-sm text-gray-600"},ot={class:"text-sm text-gray-600"},at={key:0,class:"hidden sm:block bg-white shadow-xl sm:rounded-lg overflow-auto"},nt={class:"min-w-full divide-y divide-gray-200"},lt={class:"bg-gray-50"},rt={class:"px-3 py-3"},it={class:"bg-white divide-y divide-gray-200"},dt={class:"px-3 py-3 text-xs font-medium"},ut={class:"px-3 py-3 text-xs font-medium"},mt={class:"px-3 py-3 text-xs font-medium"},ct={class:"px-3 py-3 text-xs font-medium"},xt={class:"px-3 py-3 text-xs font-medium"},pt={class:"px-3 py-3 text-xs font-medium"},gt={class:"px-3 py-3 text-xs font-medium"},ft={class:"px-3 py-3 text-xs font-medium"},yt={class:"px-3 py-3 text-xs font-medium"},ht={class:"px-3 py-3 text-right"},bt={key:0},vt={key:1,class:"block mt-4 text-xs text-gray-600"};function _t(l,t,n,o,N,D){const g=y("Link"),C=y("advance-search"),f=y("Card"),A=y("pagination"),r=y("app-layout");return d(),k(r,null,{header:x(()=>t[8]||(t[8]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"Customer Database ",-1)])),default:x(()=>[e("div",M,[e("div",U,[e("div",z,[t[9]||(t[9]=e("span",{class:"absolute left-3 top-3 text-blueGray-300"},[e("i",{class:"fas fa-search"})],-1)),j(e("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>o.search=s),onKeyup:t[1]||(t[1]=E((...s)=>o.searchTsp&&o.searchTsp(...s),["enter"])),placeholder:"Search here...",class:"w-full md:w-64 pl-10 py-2.5 border-gray-300 rounded shadow text-sm text-blueGray-600 bg-white placeholder-blueGray-300"},null,544),[[V,o.search]])]),e("div",H,[e("a",{href:"#",class:"font-semibold text-xs text-gray-600",onClick:t[2]||(t[2]=G((...s)=>o.toggleAdv&&o.toggleAdv(...s),["prevent"]))},[t[10]||(t[10]=u(" Advance Search ")),e("i",{class:b([o.show_search?"fas fa-chevron-up":"fas fa-chevron-down","ml-2 text-blueGray-400"])},null,2)]),l.$page.props.login_type=="internal"||l.$page.props.login_type=="isp"?(d(),k(g,{key:0,href:"/customer/create",method:"get",as:"button",class:"px-4 py-2 bg-gray-800 text-white rounded-md text-xs font-semibold hover:bg-gray-700"},{default:x(()=>t[11]||(t[11]=[u(" Create ")])),_:1})):h("",!0)]),j(e("div",null,[m(C,{onSearch_parameter:o.goSearch},null,8,["onSearch_parameter"])],512),[[q,o.show_search]]),e("div",J,[m(f,{icon:"fa-users",bgColor:"blue",label:"Active Customers",count:n.active,onClick:t[3]||(t[3]=s=>o.goAction("active"))},null,8,["count"]),m(f,{icon:"fa-chart-line",bgColor:"green",label:"To Install",count:n.installation_request,onClick:t[4]||(t[4]=s=>o.goAction("to_install"))},null,8,["count"]),m(f,{icon:"fa-circle-pause",bgColor:"yellow",label:"Suspended Customers",count:n.suspense,onClick:t[5]||(t[5]=s=>o.goAction("suspense"))},null,8,["count"]),m(f,{icon:"fa-stop",bgColor:"red",label:"Terminated Customers",count:n.terminate,onClick:t[6]||(t[6]=s=>o.goAction("terminate"))},null,8,["count"])]),e("div",Q,[(d(!0),c(T,null,O(n.customers.data,s=>(d(),c("div",{key:s.id,class:b(`p-4 bg-white rounded-lg shadow-md ${o.getRowClass(s)}`)},[e("div",W,[e("h3",{class:b(["text-sm font-bold",o.getRowClass(s)])},"Customer ID: "+a(s.ftth_id),3),e("div",X,[m(g,{href:l.route("customer.edit",s.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600"},{default:x(()=>t[12]||(t[12]=[e("i",{class:"fas fa-edit"},null,-1)])),_:2},1032,["href"]),e("button",{onClick:v=>o.deleteRow(s),class:"text-red-500 hover:text-red-700"},t[13]||(t[13]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Y)])]),e("p",Z,[t[14]||(t[14]=e("strong",null,"Name:",-1)),u(" "+a(s.name),1)]),e("p",$,[t[15]||(t[15]=e("strong",null,"Package:",-1)),u(" "+a(s.package),1)]),e("p",tt,[t[16]||(t[16]=e("strong",null,"Township:",-1)),u(" "+a(s.township),1)]),e("p",et,[t[17]||(t[17]=e("strong",null,"Status:",-1)),u(" "+a(s.status),1)]),e("p",st,[t[18]||(t[18]=e("strong",null,"Order Date:",-1)),u(" "+a(s.order_date),1)]),e("p",ot,[t[19]||(t[19]=e("strong",null,"Prefer Install Date:",-1)),u(" "+a(s.prefer_install_date),1)])],2))),128))]),n.customers.data?(d(),c("div",at,[e("table",nt,[e("thead",lt,[e("tr",null,[t[21]||(t[21]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID",-1)),t[22]||(t[22]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Order Date",-1)),t[23]||(t[23]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Assign Date",-1)),t[24]||(t[24]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Prefer Date",-1)),t[25]||(t[25]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Name",-1)),t[26]||(t[26]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Package",-1)),t[27]||(t[27]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Township",-1)),t[28]||(t[28]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Installation Status",-1)),t[29]||(t[29]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status",-1)),e("th",rt,[e("a",{onClick:t[7]||(t[7]=(...s)=>o.goAll&&o.goAll(...s)),class:"cursor-pointer text-gray-200 hover:text-gray-500"},t[20]||(t[20]=[e("i",{class:"fas fa-undo"},null,-1)]))])])]),e("tbody",it,[(d(!0),c(T,null,O(n.customers.data,s=>{var v,S;return d(),c("tr",{key:s.id,class:b(o.getRowClass(s))},[e("td",dt,a(s.ftth_id),1),e("td",ut,a(s.order_date),1),e("td",mt,a(s.subcom_assign_date),1),e("td",ct,a(s.prefer_install_date),1),e("td",xt,a(s.name),1),e("td",pt,a(s.package.name),1),e("td",gt,a(s.township.name),1),e("td",ft,a(s.installation_status?s.installation_status.split("_").map(_=>_.charAt(0).toUpperCase()+_.slice(1)).join(" "):""),1),e("td",yt,a(s.status.name),1),e("td",ht,[m(g,{href:l.route("customer.edit",s.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600 mr-2"},{default:x(()=>t[30]||(t[30]=[e("i",{class:"fas fa-folder"},null,-1)])),_:2},1032,["href"]),(S=(v=n.user)==null?void 0:v.role)!=null&&S.delete_customer?(d(),c("span",bt,[m(g,{href:"#",onClick:_=>o.deleteRow(s),class:"text-yellow-600 hover:text-yellow-900 ml-2"},{default:x(()=>t[31]||(t[31]=[e("i",{class:"fas fa-trash"},null,-1)])),_:2},1032,["onClick"])])):h("",!0)])],2)}),128))])])])):h("",!0),n.customers.total?(d(),c("span",vt,a(n.customers.data.length)+" Customers in Current Page. Total Number of Customers: "+a(n.customers.total),1)):h("",!0),n.customers.links?(d(),k(A,{key:2,class:"mt-6",links:n.customers.links},null,8,["links"])):h("",!0)])])]),_:1})}const Nt=F(K,[["render",_t]]);export{Nt as default};
