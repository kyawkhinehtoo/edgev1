import{A as de,N as ne,C as re}from"./NoData-DK2FmoVQ.js";import{P as ce}from"./Pagination-nMKfayhW.js";import{r as x,y as te,q as se,z as M,o as a,d as l,a as e,F as D,g as G,i as oe,f as z,t as n,e as m,j as b,A as J,n as w,k as R,b as N,M as O,T as ae,m as me,E as ue,h as fe,x as pe,c as K,w as ee,N as H,O as xe}from"./app-wudM8r0R.js";import{M as ge}from"./vue3-multiselect.umd.min-BKH7PHRi.js";import{_ as le,C as ie}from"./ImageUploader-SFcSKV_w.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-VfSERuIJ.js";import"./Upload-CDC-Pq4d.js";const _e={name:"TaskCheckList",components:{ImageUploader:le,CustomerFile:ie},props:{taskId:{type:[String,Number],required:!0}},setup(u){const s=x([]),f=x([]),t=x([]),y=x(null),k=x(!1),h=x({}),p=x(null),o=()=>{p.value=ae({task_id:u.taskId,...Object.fromEntries(Object.values(s.value).flatMap(c=>{var _,S,V,L;return[[`checklist_${c.id}_title`,((S=(_=t.value.checklist_values)==null?void 0:_[c.id])==null?void 0:S.title)||""],[`checklist_${c.id}_attachment`,null],[`checklist_${c.id}_status`,((L=(V=t.value.checklist_values)==null?void 0:V[c.id])==null?void 0:L.status)||""]]}))})},v=async()=>{try{const _=await(await fetch(`/getTaskCheckList/${u.taskId}`)).json();s.value=_.subconCheckList||[],f.value=_.checkListSummary||[],t.value=_.taskCheckList||[],o()}catch(c){console.error("Failed to fetch checklist data:",c)}};te(()=>{v()});const U=se(()=>y.value?(k.value=!!y.value,s.value.filter(c=>c.group_id===y.value)):null);function i(c){y.value=c,k.value=!0}function C(){y.value=null,k.value=!1}function j(c,_){const S=c.target.files[0];p.value&&(p.value[`checklist_${_}_attachment`]=S)}function T(){p.value&&p.value.post(route("taskCheckList.update",u.taskId),{preserveScroll:!0,onSuccess:c=>{Toast.fire({icon:"success",title:c.props.flash.message}),C()}})}return{subconCheckList:s,checkListSummary:f,selectedGroupId:y,showModal:k,form:p,filteredChecklists:U,taskCheckList:t,checklistImagePreviews:h,selectGroup:i,closeModal:C,handleFileUpload:j,submit:T}}},ye={class:"overflow-x-auto rounded-lg shadow mb-6 mt-4"},be={class:"min-w-full divide-y divide-gray-200 bg-white"},ke=["onClick"],he={class:"px-4 py-2 text-blue-600 underline font-medium"},ve={class:"px-4 py-2 text-center"},we={key:0,class:"px-2 py-1 rounded-xl bg-yellow-100 text-yellow-700 text-xs font-semibold"},Ce={key:1,class:"text-gray-400"},Se={class:"px-4 py-2 text-center"},Ue={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},je={key:1,class:"text-gray-400"},Te={class:"px-4 py-2 text-center"},Ie={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Ve={key:1,class:"text-gray-400"},Le={class:"px-4 py-2 text-center"},Me={key:0,class:"px-2 py-1 rounded-xl bg-red-100 text-red-700 text-xs font-semibold"},De={key:1,class:"text-gray-400"},Ae={class:"px-4 py-2 text-center"},Re={key:0,class:"px-2 py-1 rounded-xl bg-green-100 text-green-700 text-xs font-semibold"},Ne={key:1,class:"text-gray-400"},Oe={class:"px-4 py-2 text-center"},Pe={key:0,class:"px-2 py-1 rounded-xl bg-gray-100 text-gray-700 text-xs font-semibold"},Ge={key:1,class:"text-gray-400"},qe={key:0,ref:"showModal",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},ze={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Fe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-7xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Be={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ee={key:0,class:"mt-2 text-sm text-indigo-600 font-semibold"},$e={class:"underline"},We={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Ye={class:"block text-sm font-medium text-gray-700"},Ke=["onUpdate:modelValue"],He={key:0,class:"mt-2"},Je={class:"py-2"},Qe={class:"mt-2 flex"},Xe={class:"flex-auto items-center"},Ze=["name","onUpdate:modelValue"],et={class:"flex-auto items-center"},tt=["name","onUpdate:modelValue"],st={class:"flex-auto items-center"},ot=["name","onUpdate:modelValue"],at={class:"flex-auto items-center"},lt={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-red-600"},it={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-red-600"},dt={class:"flex-auto items-center"},nt={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-green-600"},rt={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-green-600"},ct={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},mt={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},ut={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},ft={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},pt={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function xt(u,s,f,t,y,k){var p;const h=M("ImageUploader");return a(),l("div",null,[s[12]||(s[12]=e("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Data ",-1)),e("div",ye,[e("table",be,[s[2]||(s[2]=e("thead",{class:"bg-indigo-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Group Name"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Skip"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Requested"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Rejected"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Approved"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Remaining")])],-1)),e("tbody",null,[(a(!0),l(D,null,G(t.checkListSummary,o=>(a(),l("tr",{key:o.group_name,onClick:v=>t.selectGroup(o.id),class:w(["cursor-pointer transition-colors",t.selectedGroupId===o.id?"bg-indigo-100":"hover:bg-gray-50"])},[e("td",he,n(o.group_name),1),e("td",ve,[o.total>0?(a(),l("span",we,n(o.total),1)):(a(),l("span",Ce,n(o.total),1))]),e("td",Se,[o.skip>0?(a(),l("span",Ue,n(o.skip),1)):(a(),l("span",je,n(o.skip),1))]),e("td",Te,[o.requested>0?(a(),l("span",Ie,n(o.requested),1)):(a(),l("span",Ve,n(o.requested),1))]),e("td",Le,[o.rejected>0?(a(),l("span",Me,n(o.rejected),1)):(a(),l("span",De,n(o.rejected),1))]),e("td",Ae,[o.approved>0?(a(),l("span",Re,n(o.approved),1)):(a(),l("span",Ne,n(o.approved),1))]),e("td",Oe,[o.remaining>0?(a(),l("span",Pe,n(o.remaining),1)):(a(),l("span",Ge,n(o.remaining),1))])],10,ke))),128))])])]),t.filteredChecklists&&t.showModal?(a(),l("div",qe,[e("div",ze,[s[10]||(s[10]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[11]||(s[11]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e("div",Fe,[e("form",{onSubmit:s[1]||(s[1]=oe((...o)=>t.submit&&t.submit(...o),["prevent"]))},[e("div",Be,[e("div",null,[t.selectedGroupId?(a(),l("div",Ee,[s[3]||(s[3]=z(" Showing details for: ")),e("span",$e,n((p=t.checkListSummary.find(o=>o.id===t.selectedGroupId))==null?void 0:p.group_name),1)])):m("",!0),e("div",We,[(a(!0),l(D,null,G(t.filteredChecklists,(o,v)=>{var U;return a(),l("div",{key:o.id,class:"mt-6"},[e("label",Ye,n(o.name),1),b(e("input",{type:"text","onUpdate:modelValue":i=>t.form[`checklist_${o.id}_title`]=i,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Ke),[[R,t.form[`checklist_${o.id}_title`]]]),o.has_attachment?(a(),l("div",He,[N(h,{modelValue:t.form[`checklist_${o.id}_attachment`],"onUpdate:modelValue":i=>t.form[`checklist_${o.id}_attachment`]=i,imageUrl:t.checklistImagePreviews[o.id],"onUpdate:imageUrl":i=>t.checklistImagePreviews[o.id]=i,existingImage:t.taskCheckList.checklist_images&&t.taskCheckList.checklist_images[o.id]?`/storage/${t.taskCheckList.checklist_images[o.id]}`:null,"upload-text":`Upload ${o.name} image`,submitStatus:(U=t.taskCheckList.checklist_values[o.id])==null?void 0:U.status},null,8,["modelValue","onUpdate:modelValue","imageUrl","onUpdate:imageUrl","existingImage","upload-text","submitStatus"])])):m("",!0),e("div",Je,[s[9]||(s[9]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",Qe,[e("label",Xe,[b(e("input",{type:"radio",class:"form-radio h-5 w-5 text-blue-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":i=>t.form[`checklist_${o.id}_status`]=i,value:""},null,8,Ze),[[O,t.form[`checklist_${o.id}_status`]]]),s[4]||(s[4]=e("span",{class:"ml-2 text-gray-700 text-sm"},"N/A",-1))]),e("label",et,[b(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":i=>t.form[`checklist_${o.id}_status`]=i,value:"skip"},null,8,tt),[[O,t.form[`checklist_${o.id}_status`]]]),s[5]||(s[5]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Skip",-1))]),e("label",st,[b(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":i=>t.form[`checklist_${o.id}_status`]=i,value:"requested"},null,8,ot),[[O,t.form[`checklist_${o.id}_status`]]]),s[6]||(s[6]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Request",-1))]),e("label",at,[t.form[`checklist_${o.id}_status`]=="declined"?(a(),l("i",lt)):(a(),l("i",it)),s[7]||(s[7]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Declined",-1))]),e("label",dt,[t.form[`checklist_${o.id}_status`]=="approved"?(a(),l("i",nt)):(a(),l("i",rt)),s[8]||(s[8]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Approved",-1))])])])])}),128))])])]),e("div",ct,[e("span",mt,[b(e("button",ut," Save ",512),[[J,!t.form.id]]),b(e("button",ft," Update ",512),[[J,t.form.id]])]),e("span",pt,[e("button",{onClick:s[0]||(s[0]=(...o)=>t.closeModal&&t.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):m("",!0)])}const gt=X(_e,[["render",xt],["__scopeId","data-v-f744c14d"]]),_t={name:"TaskCheckList",components:{ImageUploader:le,CustomerFile:ie},props:{taskId:{type:[String,Number],required:!0},user:{type:Object,required:!0}},setup(u){const s=x([]),f=x([]),t=x([]),y=x(null),k=x(!1),h=x({}),p=x(null),o=()=>{p.value=ae({task_id:u.taskId,...Object.fromEntries(Object.values(s.value).flatMap(c=>{var _,S,V,L;return[[`checklist_${c.id}_title`,((S=(_=t.value.checklist_values)==null?void 0:_[c.id])==null?void 0:S.title)||""],[`checklist_${c.id}_attachment`,null],[`checklist_${c.id}_status`,((L=(V=t.value.checklist_values)==null?void 0:V[c.id])==null?void 0:L.status)||""]]}))})},v=async()=>{try{const _=await(await fetch(`/getTaskCheckList/${u.taskId}`)).json();s.value=_.subconCheckList||[],f.value=_.checkListSummary||[],t.value=_.taskCheckList||[],o()}catch(c){console.error("Failed to fetch checklist data:",c)}};te(()=>{v()});const U=se(()=>y.value?(k.value=!!y.value,s.value.filter(c=>c.group_id===y.value)):null);function i(c){y.value=c,k.value=!0}function C(){y.value=null,k.value=!1}function j(c,_){const S=c.target.files[0];p.value&&(p.value[`checklist_${_}_attachment`]=S)}function T(){p.value&&p.value.post(route("taskCheckList.update",u.taskId),{preserveScroll:!0,onSuccess:c=>{Toast.fire({icon:"success",title:c.props.flash.message}),C()}})}return{subconCheckList:s,checkListSummary:f,selectedGroupId:y,showModal:k,form:p,filteredChecklists:U,taskCheckList:t,checklistImagePreviews:h,selectGroup:i,closeModal:C,handleFileUpload:j,submit:T}}},yt={class:"overflow-x-auto rounded-lg shadow mb-6 mt-4"},bt={class:"min-w-full divide-y divide-gray-200 bg-white"},kt=["onClick"],ht={class:"px-4 py-2 text-blue-600 underline font-medium"},vt={class:"px-4 py-2 text-center"},wt={key:0,class:"px-2 py-1 rounded-xl bg-yellow-100 text-yellow-700 text-xs font-semibold"},Ct={key:1,class:"text-gray-400"},St={class:"px-4 py-2 text-center"},Ut={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},jt={key:1,class:"text-gray-400"},Tt={class:"px-4 py-2 text-center"},It={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Vt={key:1,class:"text-gray-400"},Lt={class:"px-4 py-2 text-center"},Mt={key:0,class:"px-2 py-1 rounded-xl bg-red-100 text-red-700 text-xs font-semibold"},Dt={key:1,class:"text-gray-400"},At={class:"px-4 py-2 text-center"},Rt={key:0,class:"px-2 py-1 rounded-xl bg-green-100 text-green-700 text-xs font-semibold"},Nt={key:1,class:"text-gray-400"},Ot={class:"px-4 py-2 text-center"},Pt={key:0,class:"px-2 py-1 rounded-xl bg-gray-100 text-gray-700 text-xs font-semibold"},Gt={key:1,class:"text-gray-400"},qt={key:0,ref:"showModal",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},zt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ft={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-7xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Bt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Et={key:0,class:"mt-2 text-sm text-indigo-600 font-semibold"},$t={class:"underline"},Wt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Yt={class:"block text-sm font-medium text-gray-700"},Kt=["onUpdate:modelValue"],Ht={key:0,class:"mt-2"},Jt={class:"py-2"},Qt={class:"mt-2 flex"},Xt={class:"flex-auto items-center"},Zt=["name","onUpdate:modelValue","disabled"],es={class:"flex-auto items-center"},ts=["name","onUpdate:modelValue","disabled"],ss={class:"flex-auto items-center"},os=["name","onUpdate:modelValue","disabled"],as={class:"flex-auto items-center"},ls=["name","onUpdate:modelValue","disabled"],is={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ds={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},ns={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},rs={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},cs={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function ms(u,s,f,t,y,k){var p;const h=M("ImageUploader");return a(),l("div",null,[s[11]||(s[11]=e("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Data ",-1)),e("div",yt,[e("table",bt,[s[2]||(s[2]=e("thead",{class:"bg-indigo-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Group Name"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Skip"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Requested"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Rejected"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Approved"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Remaining")])],-1)),e("tbody",null,[(a(!0),l(D,null,G(t.checkListSummary,o=>(a(),l("tr",{key:o.group_name,onClick:v=>t.selectGroup(o.id),class:w(["cursor-pointer transition-colors",t.selectedGroupId===o.id?"bg-indigo-100":"hover:bg-gray-50"])},[e("td",ht,n(o.group_name),1),e("td",vt,[o.total>0?(a(),l("span",wt,n(o.total),1)):(a(),l("span",Ct,n(o.total),1))]),e("td",St,[o.skip>0?(a(),l("span",Ut,n(o.skip),1)):(a(),l("span",jt,n(o.skip),1))]),e("td",Tt,[o.requested>0?(a(),l("span",It,n(o.requested),1)):(a(),l("span",Vt,n(o.requested),1))]),e("td",Lt,[o.rejected>0?(a(),l("span",Mt,n(o.rejected),1)):(a(),l("span",Dt,n(o.rejected),1))]),e("td",At,[o.approved>0?(a(),l("span",Rt,n(o.approved),1)):(a(),l("span",Nt,n(o.approved),1))]),e("td",Ot,[o.remaining>0?(a(),l("span",Pt,n(o.remaining),1)):(a(),l("span",Gt,n(o.remaining),1))])],10,kt))),128))])])]),t.filteredChecklists&&t.showModal?(a(),l("div",qt,[e("div",zt,[s[9]||(s[9]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[10]||(s[10]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e("div",Ft,[e("form",{onSubmit:s[1]||(s[1]=oe((...o)=>t.submit&&t.submit(...o),["prevent"]))},[e("div",Bt,[e("div",null,[t.selectedGroupId?(a(),l("div",Et,[s[3]||(s[3]=z(" Showing details for: ")),e("span",$t,n((p=t.checkListSummary.find(o=>o.id===t.selectedGroupId))==null?void 0:p.group_name),1)])):m("",!0),e("div",Wt,[(a(!0),l(D,null,G(t.filteredChecklists,(o,v)=>{var U,i,C,j,T;return a(),l("div",{key:o.id,class:"mt-6"},[e("label",Yt,n(o.name),1),b(e("input",{type:"text","onUpdate:modelValue":c=>t.form[`checklist_${o.id}_title`]=c,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Kt),[[R,t.form[`checklist_${o.id}_title`]]]),o.has_attachment?(a(),l("div",Ht,[N(h,{modelValue:t.form[`checklist_${o.id}_attachment`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_attachment`]=c,imageUrl:t.checklistImagePreviews[o.id],"onUpdate:imageUrl":c=>t.checklistImagePreviews[o.id]=c,existingImage:t.taskCheckList.checklist_images&&t.taskCheckList.checklist_images[o.id]?`/storage/${t.taskCheckList.checklist_images[o.id]}`:null,"upload-text":`Upload ${o.name} image`,submitStatus:(U=t.taskCheckList.checklist_values[o.id])==null?void 0:U.status},null,8,["modelValue","onUpdate:modelValue","imageUrl","onUpdate:imageUrl","existingImage","upload-text","submitStatus"])])):m("",!0),e("div",Jt,[s[8]||(s[8]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",Qt,[e("label",Xt,[b(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"skip",disabled:(i=f.user.role)==null?void 0:i.incident_supervisor},null,8,Zt),[[O,t.form[`checklist_${o.id}_status`]]]),s[4]||(s[4]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Skip",-1))]),e("label",es,[b(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"requested",disabled:(C=f.user.role)==null?void 0:C.incident_supervisor},null,8,ts),[[O,t.form[`checklist_${o.id}_status`]]]),s[5]||(s[5]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Request",-1))]),e("label",ss,[b(e("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"declined",disabled:(j=f.user.role)==null?void 0:j.installation_oss},null,8,os),[[O,t.form[`checklist_${o.id}_status`]]]),s[6]||(s[6]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Declined",-1))]),e("label",as,[b(e("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"approved",disabled:(T=f.user.role)==null?void 0:T.installation_oss},null,8,ls),[[O,t.form[`checklist_${o.id}_status`]]]),s[7]||(s[7]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Approved",-1))])])])])}),128))])])]),e("div",is,[e("span",ds,[b(e("button",ns," Save ",512),[[J,!t.form.id]]),b(e("button",rs," Update ",512),[[J,t.form.id]])]),e("span",cs,[e("button",{onClick:s[0]||(s[0]=(...o)=>t.closeModal&&t.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):m("",!0)])}const us=X(_t,[["render",ms],["__scopeId","data-v-781c52ae"]]),fs={name:"IncidentTask",components:{AppLayout:de,Pagination:ce,Multiselect:ge,NoData:ne,Link:me,CustomerDetail:re,TaskCheckListSubcon:gt,TaskCheckListSupervisor:us},props:{tasks:Object,errors:Object,task_write:Boolean,user:Object,noc:Object,critical:Number,high:Number,normal:Number,role:Object,subcons:Object,subcon:Object,pendingRootCause:Object,subRootCause:Object,checklistValues:Object,checkListSummary:Object},setup(u){const s=x("");x("");let f=x(!1),t=x(!1),y=x(!1),k=x(""),h=x(1),p=x("my"),o=x([]);x(1);const v=x([{id:"1",name:"WIP"},{id:"3",name:"Pending"},{id:"2",name:"Completed"},{id:"0",name:"Deleted"},{id:"4",name:"Photo Upload Complete"},{id:"5",name:"Photo Upload Rejected",$isDisabled:!0},{id:"6",name:"Supervisor Approved",$isDisabled:!0}]),U=x({date:"YYYY-MM-DD",month:"MMM"});x(!1),ue("user",u.user);const i=fe({id:null,code:null,edge_code:null,priority:null,assigned:null,target:null,status:1,description:null,comment:null,incident_id:null,data:null,root_causes:null,sub_root_causes:null,root_causes_id:null,sub_root_causes_id:null,complete_date:null,statusData:null});function C(){i.id=null,i.code=null,i.edge_code=null,i.priority=null,i.assigned=null,i.target=null,i.status=1,i.description=null,i.comment=null,i.incident_id=u.data,i.root_causes=null,i.sub_root_causes=null,i.root_causes_id=null,i.sub_root_causes_id=null,i.complete_date=null,k.value=null,i.statusData=null}function j(r){v.value=v.value.map(g=>g.id==="4"?{...g,$isDisabled:r.remaining>0}:g),i.id=r.id,i.code=r.code,i.edge_code=r.edge_code,i.priority=r.priority,i.assigned=u.subcons.filter(g=>g.id==r.assigned)[0],i.description=r.description,i.incident_id=r.incident_id,i.comment=r.comment,i.status=r.status,i.target=r.target,i.data=r,i.statusData=v.value.find(g=>g.id==String(r.status)),i.root_causes=r.root_causes_id?u.pendingRootCause.filter(g=>g.id==r.root_causes_id)[0]:null,i.sub_root_causes=null,i.root_causes_id=r.root_causes_id,i.sub_root_causes_id=r.sub_root_causes_id,i.complete_date=r.complete_date,y.value=!0,t.value=!0,k.value=r.incident_id}function T(r){r.status!=2?Toast.fire({title:"Are you sure?",text:"Do you want to mark as completed !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(g=>{g.isConfirmed&&c(r,2)}):Toast.fire({title:"Are you sure?",text:"Do you want to mark as WIP !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(g=>{g.isConfirmed&&c(r,1)})}function c(r,g){i.id=r.id,i.assigned=u.subcons.filter(I=>I.id==r.assigned)[0],i.description=r.description,i.incident_id=r.incident_id,i.status=g,i.target=r.target,y.value=!0,t.value=!1,_()}function _(){y.value!=!0?(i._method="POST",H.post("/addTask",i,{preserveState:!0,onSuccess:r=>{t.value=!1,C(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}})):(i._method="PUT",H.post("/editTask/"+i.id,i,{onSuccess:r=>{t.value=!1,y.value=!1,C(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}}))}function S(){t.value=!1,preserveState=!0}function V(r){const g=v.value.find(I=>I.id==String(r));return g?g.name:"WIP"}function L(){H.get("/mytask/",{keyword:s.value,status:h.value,task:p.value},{preserveState:!0})}function A(){let r="/mytask/";s.value!=null&&(r=r+"?keyword="+s.value),h.value!=""&&(r=r+"&status="+h.value),p.value!=""&&(r=r+"&task="+p.value),H.get(r,{keyword:s.value},{preserveState:!0})}function F(r){h.value=r,A()}function B(){p.value="my",A()}function E(){p.value="all",A()}const $=r=>{let g=u.subcons.filter(I=>I.id==r)[0];return g?g.name:""};function W(r){var I;o.value=[];let g=u.pendingRootCause.filter(P=>P.id==r.id);o.value=(I=g[0])==null?void 0:I.sub_root_causes,i.sub_root_causes_id&&(i.sub_root_causes=o.value.filter(P=>P.id==i.sub_root_causes_id)[0],i.sub_root_causes||(i.sub_root_causes_id=null))}pe(()=>i.root_causes,r=>{r&&W(r)});const q=x(1);function Y(r){q.value=r}return{search:s,loading:f,form:i,formatter:U,edit:t,editMode:y,search_status:h,task_user:p,getName:$,getStatus:V,editTask:j,completeIt:c,saveTask:_,cancelTask:S,completeTask:T,searchTask:L,goMyTasks:B,goAllTasks:E,changeStatus:A,subRCA:o,goSearch:F,tabClick:Y,tab:q,selected_id:k,subconStatus:v}}},ps={class:"py-1"},xs={class:"mx-auto sm:px-6 lg:px-8"},gs={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-2 py-2 w-full justify-items-end"},_s={class:"flex w-full"},ys={class:"flex w-full items-center justify-end"},bs={class:"mr-3 text-sm font-medium text-gray-700"},ks={class:"inline-flex relative cursor-pointer"},hs=["checked"],vs={class:"flex w-full"},ws={key:1},Cs={key:0,class:"hidden md:block"},Ss={class:"min-w-full divide-y divide-gray-200 table-auto"},Us={class:"bg-white divide-y divide-gray-200 text-sm w-full text-left"},js={class:"px-2 py-3 whitespace-nowrap"},Ts={class:"px-6 py-3 whitespace-nowrap"},Is={class:"px-6 py-3 whitespace-nowrap"},Vs={class:"px-6 py-3 whitespace-nowrap"},Ls={class:"px-6 py-3 whitespace-nowrap"},Ms={class:"px-6 py-3 whitespace-nowrap"},Ds={class:"px-6 py-3 whitespace-nowrap"},As={class:"px-6 py-3 whitespace-nowrap"},Rs={class:"px-6 py-3 whitespace-nowrap"},Ns={class:"px-6 py-3 whitespace-nowrap"},Os=["onClick"],Ps={key:1,class:"grid grid-cols-1 sm:grid-cols-2 gap-2 md:hidden"},Gs={class:"flex items-center justify-between space-x-2 text-sm"},qs={class:"font-bold"},zs={class:"text-sm text-gray-600"},Fs={class:"font-sm p-2 capitalize"},Bs={class:"mt-4"},Es={class:"text-xs text-gray-700"},$s={class:"text-xs text-gray-700"},Ws={class:"text-xs text-gray-700"},Ys={class:"flex flex-wrap justify-end"},Ks=["onClick"],Hs={key:2,class:"w-full block mt-4"},Js={class:"text-xs text-gray-600"},Qs={key:3},Xs={key:2,class:"inline-flex w-full bg-gray-50 rounded-t-lg"},Zs={id:"tabs",class:"flex"},eo={id:"tab-contents"},to={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full bg-white p-4"},so={class:"md:py-2 md:col-span-3 col-span-1"},oo={class:"flex"},ao={for:"ftth_id",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2"},lo={class:"md:py-2 md:col-span-3 col-span-1"},io={class:"flex"},no={for:"ftth_id",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2"},ro={class:"md:py-2 md:col-span-3 col-span-1"},co={class:"flex"},mo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 capitalize"},uo={key:0,class:"py-2 col-span-1 w-full"},fo={key:1,class:"md:py-2 md:col-span-3 col-span-1"},po={class:"flex"},xo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 capitalize"},go={class:"md:py-2 md:col-span-3 col-span-1"},_o={class:"flex"},yo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 whitespace-normal"},bo={class:"md:py-2 md:col-span-3 col-span-1"},ko={class:"flex"},ho={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 whitespace-normal"},vo={class:"md:py-2 md:col-span-3 col-span-1"},wo={class:"flex rounded-md shadow-sm"},Co={key:0,class:"flex rounded-md shadow-sm w-full"},So={key:1,class:"mt-2 text-sm text-red-500"},Uo={class:"md:py-2 col-span-1 md:col-span-3"},jo={class:"flex rounded-md shadow-sm"},To={key:0,class:"mt-2 text-sm text-red-500"},Io={class:"md:py-2 col-span-1 md:col-span-3"},Vo={class:"flex rounded-md shadow-sm"},Lo={key:0,class:"mt-2 text-sm text-red-500"},Mo={class:"md:py-2 col-span-1 md:col-span-3"},Do={key:0,class:"mt-2 text-sm text-red-500"},Ao={class:"md:py-2 col-span-1 md:col-span-3"},Ro={class:"flex rounded-md shadow-sm"},No={key:0,class:"mt-2 text-sm text-red-500"},Oo={class:"py-2 col-span-1 md:col-span-3"},Po={key:0,class:"flex rounded-md shadow-sm w-full"},Go={key:1,class:"mt-2 text-sm text-red-500"},qo={class:"py-2 col-span-1 md:col-span-3"},zo={key:0,class:"flex rounded-md shadow-sm w-full"},Fo={key:1,class:"mt-2 text-sm text-red-500"},Bo={class:"md:py-2 col-span-1 md:col-span-3"},Eo={class:"flex rounded-md shadow-sm"},$o={key:0,class:"mt-2 text-sm text-red-500"},Wo={class:"col-span-1 md:col-span-4 flex md:justify-end justify-between mt-4"},Yo={key:0},Ko={key:1},Ho={key:0},Jo={key:1},Qo={key:0,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function Xo(u,s,f,t,y,k){const h=M("pagination"),p=M("multiselect"),o=M("customer-detail"),v=M("task-check-list-supervisor"),U=M("task-check-list-subcon"),i=M("app-layout");return a(),K(i,null,{default:ee(()=>{var C,j,T,c,_,S,V,L,A,F,B,E,$,W,q,Y,r,g,I,P;return[e("div",ps,[e("div",xs,[t.edit?m("",!0):(a(),l("div",gs,[e("div",_s,[s[23]||(s[23]=e("span",{class:"z-10 mt-1 leading-snug font-normal text-center text-blueGray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-search"})],-1)),b(e("input",{type:"text",placeholder:"ID/Description",class:"pl-10 pr-12 py-2.5 w-full rounded-lg text-sm text-gray-700 placeholder-gray-400 transition-colors bg-white border border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-500 focus:ring-opacity-10 focus:outline-none dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 dark:placeholder-gray-500 dark:focus:border-indigo-500 dark:focus:ring-opacity-20",id:"search",tabindex:"1","onUpdate:modelValue":s[0]||(s[0]=d=>t.search=d),onKeyup:s[1]||(s[1]=xe((...d)=>t.searchTask&&t.searchTask(...d),["enter"]))},null,544),[[R,t.search]])]),e("div",ys,[e("span",bs,n(t.task_user==="my"?"My Tasks":"All Tasks"),1),e("label",ks,[e("input",{type:"checkbox",class:"sr-only peer",checked:t.task_user==="all",onChange:s[2]||(s[2]=d=>t.task_user==="my"?t.goAllTasks():t.goMyTasks())},null,40,hs),s[24]||(s[24]=e("div",{class:"w-14 h-8 bg-gray-400 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-6 peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600 shadow-sm"},null,-1))])]),e("div",vs,[e("button",{class:w(["w-32 btn py-3 px-8 bg-gray-400 rounded rounded-r-none focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-yellow-300 text-gray-600 font-bold":t.search_status==1}]),onClick:s[3]||(s[3]=d=>t.goSearch(1))},"WIP",2),e("button",{class:w(["w-32 btn py-3 px-8 bg-gray-400 focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-yellow-500 text-gray-600 font-bold":t.search_status==3}]),onClick:s[4]||(s[4]=d=>t.goSearch(3))},"Pending",2),e("button",{class:w(["w-32 btn py-3 px-8 bg-gray-400 focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-green-300 text-gray-600 font-bold":t.search_status==2}]),onClick:s[5]||(s[5]=d=>t.goSearch(2))},"Completed",2),e("button",{class:w(["w-32 btn py-3 px-8 bg-gray-400 rounded rounded-l-none focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase",{"bg-indigo-600 font-bold":t.search_status=="all"}]),onClick:s[6]||(s[6]=d=>t.goSearch("all"))},"All",2)])])),t.edit?m("",!0):(a(),l("div",ws,[(C=f.tasks)!=null&&C.data?(a(),l("div",Cs,[e("table",Ss,[s[26]||(s[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," EDGE Ticket "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned To"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned By"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Target Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Complete Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Action")])],-1)),e("tbody",Us,[(a(!0),l(D,null,G(f.tasks.data,(d,Z)=>{var Q;return a(),l("tr",{key:d.id},[e("td",js,[e("i",{class:w(["fa fa-circle mr-2",{"text-yellow-400":d.priority=="normal","text-yellow-600":d.priority=="high","text-red-600":d.priority=="critical"}])},null,2),z(" "+n(Z+=f.tasks.from),1)]),e("td",Ts,n(d.edge_code),1),e("td",Is,n(d.ftth_id),1),e("td",Vs,n((Q=d.description)==null?void 0:Q.substring(0,50)),1),e("td",Ls,n(t.getName(d.assigned)),1),e("td",Ms,n(d.incharge.match(/\b\w/g).join("")),1),e("td",Ds,n(d.target),1),e("td",As,n(d.complete_date),1),e("td",Rs,n(t.getStatus(d.status)),1),e("td",Ns,[e("a",{href:"#",onClick:Zo=>t.editTask(d),class:"text-blue-600"},s[25]||(s[25]=[e("i",{class:"fa fa-edit"},null,-1)]),8,Os)])])}),128))])])])):m("",!0),(j=f.tasks)!=null&&j.data?(a(),l("div",Ps,[(a(!0),l(D,null,G(f.tasks.data,(d,Z)=>(a(),l("div",{class:"bg-white p-4 rounded-lg shadow mt-2 space-y-1 text-gray-600",key:d.id},[e("div",Gs,[e("label",qs,n(d.ftth_id),1),e("div",null,[e("span",{class:w(["text-xs font-bold px-2.5 py-0.5 rounded items-center justify-center",{"bg-yellow-400":d.status==1,"bg-yellow-500":d.status==3,"bg-green-300":d.status!=1}])},n(t.getStatus(d.status)),3)])]),e("div",zs,[s[27]||(s[27]=e("label",{for:"details",class:"w-full font-bold"}," Instruction : ",-1)),e("p",Fs,n(d.description),1)]),e("span",Bs,[e("div",Es," Assigned To : "+n(d.assigned_to),1),e("div",$s," Assigned By : "+n(d.incharge),1),e("div",Ws," Target Date : "+n(d.target),1)]),e("div",Ys,[e("div",null,[e("a",{type:"button",onClick:Q=>t.editTask(d),href:"#",class:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-30 items-center justify-center"},s[28]||(s[28]=[e("span",{class:"text-sm"},"Edit",-1),e("i",{class:"fa fa-angle-double-right fa-lg ml-2","aria-hidden":"true"},null,-1)]),8,Ks)])])]))),128))])):m("",!0),f.tasks.total?(a(),l("span",Hs,[e("label",Js,n(f.tasks.data.length)+" Tasks in Current Page. Total Number of Tasks : "+n(f.tasks.total),1)])):m("",!0),f.tasks.links?(a(),l("span",Qs,[N(h,{class:"mt-4",links:f.tasks.links},null,8,["links"])])):m("",!0)])),t.edit?(a(),l("div",Xs,[e("ul",Zs,[e("li",{class:w(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[7]||(s[7]=d=>t.tabClick(1)),"preserve-state":""},"Genaral")],2),e("li",{class:w(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[8]||(s[8]=d=>t.tabClick(2)),"preserve-state":""},"Customer Info")],2),e("li",{class:w(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==3?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[9]||(s[9]=d=>t.tabClick(3)),"preserve-state":""},"Attachment Info")],2)])])):m("",!0),e("div",eo,[e("div",{class:w([t.tab==1?"":"hidden"])},[t.edit?(a(),l("div",to,[s[35]||(s[35]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Code : ")])],-1)),e("div",so,[e("div",oo,[e("label",ao,[e("i",{class:w(["fa fa-circle mr-2",{"text-yellow-400":((T=t.form.data)==null?void 0:T.priority)=="normal","text-yellow-600":((c=t.form.data)==null?void 0:c.priority)=="high","text-red-600":((_=t.form.data)==null?void 0:_.priority)=="critical"}])},null,2),z(" "+n((S=t.form.data)==null?void 0:S.code)+" | "+n((V=t.form.data)==null?void 0:V.edge_code),1)])])]),s[36]||(s[36]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Customer ID : ")])],-1)),e("div",lo,[e("div",io,[e("label",no,n((L=t.form.data)==null?void 0:L.ftth_id),1)])]),s[37]||(s[37]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Type : ")])],-1)),e("div",ro,[e("div",co,[e("label",mo,n((A=t.form.data)==null?void 0:A.type.replace("_"," ")),1)])]),(F=t.form.data)!=null&&F.topic?(a(),l("div",uo,s[29]||(s[29]=[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Topic : ")],-1)]))):m("",!0),(B=t.form.data)!=null&&B.topic?(a(),l("div",fo,[e("div",po,[e("label",xo,n((E=t.form.data)==null?void 0:E.topic.replace("_"," ")),1)])])):m("",!0),s[38]||(s[38]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Detail : ")])],-1)),e("div",go,[e("div",_o,[e("label",yo,n(($=t.form.data)==null?void 0:$.incident_description),1)])]),s[39]||(s[39]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Opened At : ")])],-1)),e("div",bo,[e("div",ko,[e("label",ho,n((W=t.form.data)==null?void 0:W.date)+" : "+n((q=t.form.data)==null?void 0:q.time),1)])]),s[40]||(s[40]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Assigned : ")])],-1)),e("div",vo,[e("div",wo,[f.subcons.length!==0?(a(),l("div",Co,[N(p,{"deselect-label":"Selected already",options:f.subcons,"track-by":"id",label:"name",modelValue:t.form.assigned,"onUpdate:modelValue":s[10]||(s[10]=d=>t.form.assigned=d),"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.assigned?(a(),l("p",So,n(u.$page.props.errors.assigned),1)):m("",!0)])]),s[41]||(s[41]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Target : ")])],-1)),e("div",Uo,[e("div",jo,[b(e("input",{type:"date","onUpdate:modelValue":s[11]||(s[11]=d=>t.form.target=d),name:"target",id:"target",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[R,t.form.target]])]),u.$page.props.errors.target?(a(),l("p",To,n(u.$page.props.errors.target),1)):m("",!0)]),s[42]||(s[42]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Instruction : ")])],-1)),e("div",Io,[e("div",Vo,[b(e("textarea",{"onUpdate:modelValue":s[12]||(s[12]=d=>t.form.description=d),name:"description",id:"description",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[R,t.form.description]])]),u.$page.props.errors.description?(a(),l("p",Lo,n(u.$page.props.errors.description),1)):m("",!0)]),s[43]||(s[43]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"status",class:"block text-sm font-medium text-gray-700 md:mr-2"}," Status : ")])],-1)),e("div",Mo,[N(p,{"deselect-label":"Selected already",options:t.subconStatus,"track-by":"id",label:"name",modelValue:t.form.statusData,"onUpdate:modelValue":[s[13]||(s[13]=d=>t.form.statusData=d),s[14]||(s[14]=d=>t.form.status=d==null?void 0:d.id)],"allow-empty":!1,multiple:!1,taggable:!1},{singleLabel:ee(({option:d})=>[e("strong",null,n(d.name),1)]),_:1},8,["options","modelValue"]),u.$page.props.errors.status?(a(),l("p",Do,n(u.$page.props.errors.status),1)):m("",!0)]),t.form.status==2?(a(),l(D,{key:2},[s[30]||(s[30]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Complete At : ")])],-1)),e("div",Ao,[e("div",Ro,[b(e("input",{type:"date","onUpdate:modelValue":s[15]||(s[15]=d=>t.form.complete_date=d),name:"complete_date",id:"complete_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[R,t.form.complete_date]]),u.$page.props.errors.complete_date?(a(),l("p",No,n(u.$page.props.errors.complete_date)+">",1)):m("",!0)])])],64)):m("",!0),t.form.status==3?(a(),l(D,{key:3},[s[31]||(s[31]=e("div",{class:"py-2 col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"root_causes_id",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Root Cause for Pending : ")])],-1)),e("div",Oo,[((Y=f.pendingRootCause)==null?void 0:Y.length)!==0?(a(),l("div",Po,[N(p,{"deselect-label":"Selected already",options:f.pendingRootCause,"track-by":"id",label:"name",modelValue:t.form.root_causes,"onUpdate:modelValue":[s[16]||(s[16]=d=>t.form.root_causes=d),s[17]||(s[17]=d=>t.form.root_causes_id=d==null?void 0:d.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.root_causes_id?(a(),l("p",Go,n(u.$page.props.errors.root_causes_id),1)):m("",!0)]),s[32]||(s[32]=e("div",{class:"py-2 col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"sub_root_causes",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"},"Sub Root Cause : ")])],-1)),e("div",qo,[((r=t.subRCA)==null?void 0:r.length)!==0?(a(),l("div",zo,[N(p,{"deselect-label":"Selected already",options:t.subRCA,"track-by":"id",label:"name",modelValue:t.form.sub_root_causes,"onUpdate:modelValue":[s[18]||(s[18]=d=>t.form.sub_root_causes=d),s[19]||(s[19]=d=>t.form.sub_root_causes_id=d==null?void 0:d.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.sub_root_causes_id?(a(),l("p",Fo,n(u.$page.props.errors.sub_root_causes_id),1)):m("",!0)])],64)):m("",!0),s[44]||(s[44]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"comment",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Comments : ")])],-1)),e("div",Bo,[e("div",Eo,[b(e("textarea",{"onUpdate:modelValue":s[20]||(s[20]=d=>t.form.comment=d),name:"comment",id:"comment",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[R,t.form.comment]])]),u.$page.props.errors.comment?(a(),l("p",$o,n(u.$page.props.errors.comment),1)):m("",!0)]),e("div",Wo,[e("a",{href:"#",onClick:s[21]||(s[21]=d=>t.saveTask()),class:"text-center px-4 py-3 bg-green-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-400 active:bg-green-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},[t.editMode?m("",!0):(a(),l("span",Yo,"Save Task")),t.editMode?(a(),l("span",Ko,"Update Task")):m("",!0),s[33]||(s[33]=e("i",{class:"fas fa-save opacity-75 ml-1 text-sm"},null,-1))]),e("a",{href:"#",onClick:s[22]||(s[22]=d=>t.cancelTask()),class:"text-center px-4 py-3 bg-gray-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition"},s[34]||(s[34]=[z("Cancel"),e("i",{class:"fas fa-save opacity-75 ml-1 text-sm"},null,-1)]))])])):m("",!0)],2),e("div",{class:w([t.tab==2?"":"hidden"])},[t.selected_id&&t.tab==2?(a(),K(o,{key:0,data:t.selected_id},null,8,["data"])):m("",!0)],2),e("div",{class:w([t.tab==3?"":"hidden"])},[(g=f.user.role)!=null&&g.incident_supervisor?(a(),l("span",Ho,[t.tab==3?(a(),K(v,{key:0,taskId:(I=t.form)==null?void 0:I.id,user:f.user},null,8,["taskId","user"])):m("",!0)])):m("",!0),f.user.user_type=="subcon"?(a(),l("span",Jo,[t.tab==3?(a(),K(U,{key:0,taskId:(P=t.form)==null?void 0:P.id},null,8,["taskId"])):m("",!0)])):m("",!0)],2)])])]),t.loading?(a(),l("div",Qo,s[45]||(s[45]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):m("",!0)]}),_:1})}const na=X(fs,[["render",Xo]]);export{na as default};
