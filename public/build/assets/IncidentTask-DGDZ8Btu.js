import{A as de,N as ne,C as re}from"./NoData-lFASRSiv.js";import{P as ce}from"./Pagination-exhcgR3m.js";import{r as x,y as te,q as se,z as L,o as a,d as i,a as e,F as D,g as P,i as oe,f as z,t as d,e as m,j as k,B as Q,n as S,k as A,b as R,A as N,T as ae,m as me,G as ue,h as fe,x as pe,c as H,w as ee,N as J,O as xe}from"./app-CFalFzNS.js";import{M as ge}from"./vue3-multiselect.umd.min-DTp1r4rh.js";import{_ as le,C as ie}from"./ImageUploader-D-AGVlKW.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CwpI_Z47.js";import"./Upload-DI4PGhPt.js";const _e={name:"TaskCheckList",components:{ImageUploader:le,CustomerFile:ie},props:{taskId:{type:[String,Number],required:!0}},setup(u){const s=x([]),f=x([]),t=x([]),y=x(null),v=x(!1),w=x({}),p=x(null),o=()=>{p.value=ae({task_id:u.taskId,...Object.fromEntries(Object.values(s.value).flatMap(c=>{var g,C,I,V;return[[`checklist_${c.id}_title`,((C=(g=t.value.checklist_values)==null?void 0:g[c.id])==null?void 0:C.title)||""],[`checklist_${c.id}_attachment`,null],[`checklist_${c.id}_status`,((V=(I=t.value.checklist_values)==null?void 0:I[c.id])==null?void 0:V.status)||""]]}))})},U=async()=>{try{const g=await(await fetch(`/getTaskCheckList/${u.taskId}`)).json();s.value=g.subconCheckList||[],f.value=g.checkListSummary||[],t.value=g.taskCheckList||[],o()}catch(c){console.error("Failed to fetch checklist data:",c)}};te(()=>{U()});const h=se(()=>y.value?(v.value=!!y.value,s.value.filter(c=>c.group_id===y.value)):null);function b(c){y.value=c,v.value=!0}function n(){y.value=null,v.value=!1}function j(c,g){const C=c.target.files[0];p.value&&(p.value[`checklist_${g}_attachment`]=C)}function T(){p.value&&p.value.post(route("taskCheckList.update",u.taskId),{preserveScroll:!0,onSuccess:c=>{Toast.fire({icon:"success",title:c.props.flash.message}),n()}})}return{subconCheckList:s,checkListSummary:f,selectedGroupId:y,showModal:v,form:p,filteredChecklists:h,taskCheckList:t,checklistImagePreviews:w,selectGroup:b,closeModal:n,handleFileUpload:j,submit:T}}},ye={class:"overflow-x-auto rounded-lg shadow mb-6 mt-4"},be={class:"min-w-full divide-y divide-gray-200 bg-white"},ke=["onClick"],he={class:"px-4 py-2 font-medium"},ve={class:"text-blue-500"},we={key:0,class:"text-red-600"},Ce={class:"px-4 py-2 text-center"},Se={key:0,class:"px-2 py-1 rounded-xl bg-yellow-100 text-yellow-700 text-xs font-semibold"},Ue={key:1,class:"text-gray-400"},je={class:"px-4 py-2 text-center"},Te={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Ie={key:1,class:"text-gray-400"},Ve={class:"px-4 py-2 text-center"},Le={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},De={key:1,class:"text-gray-400"},Me={class:"px-4 py-2 text-center"},Ae={key:0,class:"px-2 py-1 rounded-xl bg-red-100 text-red-700 text-xs font-semibold"},Re={key:1,class:"text-gray-400"},Ne={class:"px-4 py-2 text-center"},Oe={key:0,class:"px-2 py-1 rounded-xl bg-green-100 text-green-700 text-xs font-semibold"},Pe={key:1,class:"text-gray-400"},qe={class:"px-4 py-2 text-center"},Ge={key:0,class:"px-2 py-1 rounded-xl bg-gray-100 text-gray-700 text-xs font-semibold"},ze={key:1,class:"text-gray-400"},$e={key:0,ref:"showModal",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},Be={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Fe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-7xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Ee={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},We={key:0,class:"mt-2 text-sm text-indigo-600 font-semibold"},Ye={class:"underline"},Ke={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},He={class:"block text-sm font-medium text-gray-700"},Je=["onUpdate:modelValue"],Qe={key:0,class:"mt-2"},Xe={class:"py-2"},Ze={class:"mt-2 flex"},et={class:"flex-auto items-center"},tt=["name","onUpdate:modelValue"],st={class:"flex-auto items-center"},ot=["name","onUpdate:modelValue"],at={class:"flex-auto items-center"},lt=["name","onUpdate:modelValue"],it={class:"flex-auto items-center"},dt={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-red-600"},nt={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-red-600"},rt={class:"flex-auto items-center"},ct={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-green-600"},mt={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-green-600"},ut={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ft={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},pt={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},xt={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},gt={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function _t(u,s,f,t,y,v){var p;const w=L("ImageUploader");return a(),i("div",null,[s[12]||(s[12]=e("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Data ",-1)),e("div",ye,[e("table",be,[s[2]||(s[2]=e("thead",{class:"bg-indigo-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Group Name"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Skip"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Requested"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Rejected"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Approved"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Remaining")])],-1)),e("tbody",null,[(a(!0),i(D,null,P(t.checkListSummary,o=>(a(),i("tr",{key:o.group_name,onClick:U=>t.selectGroup(o.id),class:S(["cursor-pointer transition-colors",t.selectedGroupId===o.id?"bg-indigo-100":"hover:bg-gray-50"])},[e("td",he,[e("label",ve,d(o.group_name),1),o.required?(a(),i("span",we,"*")):m("",!0)]),e("td",Ce,[o.total>0?(a(),i("span",Se,d(o.total),1)):(a(),i("span",Ue,d(o.total),1))]),e("td",je,[o.skip>0?(a(),i("span",Te,d(o.skip),1)):(a(),i("span",Ie,d(o.skip),1))]),e("td",Ve,[o.requested>0?(a(),i("span",Le,d(o.requested),1)):(a(),i("span",De,d(o.requested),1))]),e("td",Me,[o.rejected>0?(a(),i("span",Ae,d(o.rejected),1)):(a(),i("span",Re,d(o.rejected),1))]),e("td",Ne,[o.approved>0?(a(),i("span",Oe,d(o.approved),1)):(a(),i("span",Pe,d(o.approved),1))]),e("td",qe,[o.remaining>0?(a(),i("span",Ge,d(o.remaining),1)):(a(),i("span",ze,d(o.remaining),1))])],10,ke))),128))])])]),t.filteredChecklists&&t.showModal?(a(),i("div",$e,[e("div",Be,[s[10]||(s[10]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[11]||(s[11]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e("div",Fe,[e("form",{onSubmit:s[1]||(s[1]=oe((...o)=>t.submit&&t.submit(...o),["prevent"]))},[e("div",Ee,[e("div",null,[t.selectedGroupId?(a(),i("div",We,[s[3]||(s[3]=z(" Showing details for: ")),e("span",Ye,d((p=t.checkListSummary.find(o=>o.id===t.selectedGroupId))==null?void 0:p.group_name),1)])):m("",!0),e("div",Ke,[(a(!0),i(D,null,P(t.filteredChecklists,(o,U)=>{var h;return a(),i("div",{key:o.id,class:"mt-6"},[e("label",He,d(o.name),1),k(e("input",{type:"text","onUpdate:modelValue":b=>t.form[`checklist_${o.id}_title`]=b,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Je),[[A,t.form[`checklist_${o.id}_title`]]]),o.has_attachment?(a(),i("div",Qe,[R(w,{modelValue:t.form[`checklist_${o.id}_attachment`],"onUpdate:modelValue":b=>t.form[`checklist_${o.id}_attachment`]=b,imageUrl:t.checklistImagePreviews[o.id],"onUpdate:imageUrl":b=>t.checklistImagePreviews[o.id]=b,existingImage:t.taskCheckList.checklist_images&&t.taskCheckList.checklist_images[o.id]?`/storage/${t.taskCheckList.checklist_images[o.id]}`:null,"upload-text":`Upload ${o.name} image`,submitStatus:(h=t.taskCheckList.checklist_values[o.id])==null?void 0:h.status},null,8,["modelValue","onUpdate:modelValue","imageUrl","onUpdate:imageUrl","existingImage","upload-text","submitStatus"])])):m("",!0),e("div",Xe,[s[9]||(s[9]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",Ze,[e("label",et,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-blue-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":b=>t.form[`checklist_${o.id}_status`]=b,value:""},null,8,tt),[[N,t.form[`checklist_${o.id}_status`]]]),s[4]||(s[4]=e("span",{class:"ml-2 text-gray-700 text-sm"},"N/A",-1))]),e("label",st,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":b=>t.form[`checklist_${o.id}_status`]=b,value:"skip"},null,8,ot),[[N,t.form[`checklist_${o.id}_status`]]]),s[5]||(s[5]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Skip",-1))]),e("label",at,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":b=>t.form[`checklist_${o.id}_status`]=b,value:"requested"},null,8,lt),[[N,t.form[`checklist_${o.id}_status`]]]),s[6]||(s[6]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Request",-1))]),e("label",it,[t.form[`checklist_${o.id}_status`]=="declined"?(a(),i("i",dt)):(a(),i("i",nt)),s[7]||(s[7]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Declined",-1))]),e("label",rt,[t.form[`checklist_${o.id}_status`]=="approved"?(a(),i("i",ct)):(a(),i("i",mt)),s[8]||(s[8]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Approved",-1))])])])])}),128))])])]),e("div",ut,[e("span",ft,[k(e("button",pt," Save ",512),[[Q,!t.form.id]]),k(e("button",xt," Update ",512),[[Q,t.form.id]])]),e("span",gt,[e("button",{onClick:s[0]||(s[0]=(...o)=>t.closeModal&&t.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):m("",!0)])}const yt=Z(_e,[["render",_t],["__scopeId","data-v-4f8903ec"]]),bt={name:"TaskCheckList",components:{ImageUploader:le,CustomerFile:ie},props:{taskId:{type:[String,Number],required:!0},user:{type:Object,required:!0}},setup(u){const s=x([]),f=x([]),t=x([]),y=x(null),v=x(!1),w=x({}),p=x(null),o=()=>{p.value=ae({task_id:u.taskId,...Object.fromEntries(Object.values(s.value).flatMap(c=>{var g,C,I,V;return[[`checklist_${c.id}_title`,((C=(g=t.value.checklist_values)==null?void 0:g[c.id])==null?void 0:C.title)||""],[`checklist_${c.id}_attachment`,null],[`checklist_${c.id}_status`,((V=(I=t.value.checklist_values)==null?void 0:I[c.id])==null?void 0:V.status)||""]]}))})},U=async()=>{try{const g=await(await fetch(`/getTaskCheckList/${u.taskId}`)).json();s.value=g.subconCheckList||[],f.value=g.checkListSummary||[],t.value=g.taskCheckList||[],o()}catch(c){console.error("Failed to fetch checklist data:",c)}};te(()=>{U()});const h=se(()=>{if(!y.value)return null;const c=f.value.find(g=>g.id===y.value);return!c||c.total===c.remaining?null:s.value.filter(g=>g.group_id===y.value)});function b(c){y.value=c,v.value=!0}function n(){y.value=null,v.value=!1}function j(c,g){const C=c.target.files[0];p.value&&(p.value[`checklist_${g}_attachment`]=C)}function T(){p.value&&p.value.post(route("taskCheckList.update",u.taskId),{preserveScroll:!0,onSuccess:c=>{Toast.fire({icon:"success",title:c.props.flash.message}),n()}})}return{subconCheckList:s,checkListSummary:f,selectedGroupId:y,showModal:v,form:p,filteredChecklists:h,taskCheckList:t,checklistImagePreviews:w,selectGroup:b,closeModal:n,handleFileUpload:j,submit:T}}},kt={class:"overflow-x-auto rounded-lg shadow mb-6 mt-4"},ht={class:"min-w-full divide-y divide-gray-200 bg-white"},vt=["onClick"],wt={class:"px-4 py-2 font-medium"},Ct={class:"text-blue-500"},St={key:0,class:"text-red-600"},Ut={class:"px-4 py-2 text-center"},jt={key:0,class:"px-2 py-1 rounded-xl bg-yellow-100 text-yellow-700 text-xs font-semibold"},Tt={key:1,class:"text-gray-400"},It={class:"px-4 py-2 text-center"},Vt={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Lt={key:1,class:"text-gray-400"},Dt={class:"px-4 py-2 text-center"},Mt={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},At={key:1,class:"text-gray-400"},Rt={class:"px-4 py-2 text-center"},Nt={key:0,class:"px-2 py-1 rounded-xl bg-red-100 text-red-700 text-xs font-semibold"},Ot={key:1,class:"text-gray-400"},Pt={class:"px-4 py-2 text-center"},qt={key:0,class:"px-2 py-1 rounded-xl bg-green-100 text-green-700 text-xs font-semibold"},Gt={key:1,class:"text-gray-400"},zt={class:"px-4 py-2 text-center"},$t={key:0,class:"px-2 py-1 rounded-xl bg-gray-100 text-gray-700 text-xs font-semibold"},Bt={key:1,class:"text-gray-400"},Ft={key:0,ref:"showModal",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},Et={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Wt={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-7xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Yt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Kt={key:0,class:"mt-2 text-sm text-indigo-600 font-semibold"},Ht={class:"underline"},Jt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Qt={class:"block text-sm font-medium text-gray-700"},Xt=["onUpdate:modelValue"],Zt={key:0,class:"mt-2"},es={class:"py-2"},ts={class:"mt-2 flex"},ss={class:"flex-auto items-center"},os=["name","onUpdate:modelValue","disabled"],as={class:"flex-auto items-center"},ls=["name","onUpdate:modelValue","disabled"],is={class:"flex-auto items-center"},ds=["name","onUpdate:modelValue","disabled"],ns={class:"flex-auto items-center"},rs=["name","onUpdate:modelValue","disabled"],cs={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ms={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},us={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},fs={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},ps={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function xs(u,s,f,t,y,v){var p;const w=L("ImageUploader");return a(),i("div",null,[s[11]||(s[11]=e("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Data ",-1)),e("div",kt,[e("table",ht,[s[2]||(s[2]=e("thead",{class:"bg-indigo-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Group Name"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Skip"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Requested"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Rejected"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Approved"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Remaining")])],-1)),e("tbody",null,[(a(!0),i(D,null,P(t.checkListSummary,o=>(a(),i("tr",{key:o.group_name,onClick:U=>t.selectGroup(o.id),class:S(["cursor-pointer transition-colors",t.selectedGroupId===o.id?"bg-indigo-100":"hover:bg-gray-50"])},[e("td",wt,[e("label",Ct,d(o.group_name),1),o.required?(a(),i("span",St,"*")):m("",!0)]),e("td",Ut,[o.total>0?(a(),i("span",jt,d(o.total),1)):(a(),i("span",Tt,d(o.total),1))]),e("td",It,[o.skip>0?(a(),i("span",Vt,d(o.skip),1)):(a(),i("span",Lt,d(o.skip),1))]),e("td",Dt,[o.requested>0?(a(),i("span",Mt,d(o.requested),1)):(a(),i("span",At,d(o.requested),1))]),e("td",Rt,[o.rejected>0?(a(),i("span",Nt,d(o.rejected),1)):(a(),i("span",Ot,d(o.rejected),1))]),e("td",Pt,[o.approved>0?(a(),i("span",qt,d(o.approved),1)):(a(),i("span",Gt,d(o.approved),1))]),e("td",zt,[o.remaining>0?(a(),i("span",$t,d(o.remaining),1)):(a(),i("span",Bt,d(o.remaining),1))])],10,vt))),128))])])]),t.filteredChecklists&&t.showModal?(a(),i("div",Ft,[e("div",Et,[s[9]||(s[9]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[10]||(s[10]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e("div",Wt,[e("form",{onSubmit:s[1]||(s[1]=oe((...o)=>t.submit&&t.submit(...o),["prevent"]))},[e("div",Yt,[e("div",null,[t.selectedGroupId?(a(),i("div",Kt,[s[3]||(s[3]=z(" Showing details for: ")),e("span",Ht,d((p=t.checkListSummary.find(o=>o.id===t.selectedGroupId))==null?void 0:p.group_name),1)])):m("",!0),e("div",Jt,[(a(!0),i(D,null,P(t.filteredChecklists,(o,U)=>{var h,b,n,j,T;return a(),i("div",{key:o.id,class:"mt-6"},[e("label",Qt,d(o.name),1),k(e("input",{type:"text","onUpdate:modelValue":c=>t.form[`checklist_${o.id}_title`]=c,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Xt),[[A,t.form[`checklist_${o.id}_title`]]]),o.has_attachment?(a(),i("div",Zt,[R(w,{modelValue:t.form[`checklist_${o.id}_attachment`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_attachment`]=c,imageUrl:t.checklistImagePreviews[o.id],"onUpdate:imageUrl":c=>t.checklistImagePreviews[o.id]=c,existingImage:t.taskCheckList.checklist_images&&t.taskCheckList.checklist_images[o.id]?`/storage/${t.taskCheckList.checklist_images[o.id]}`:null,"upload-text":`Upload ${o.name} image`,submitStatus:(h=t.taskCheckList.checklist_values[o.id])==null?void 0:h.status},null,8,["modelValue","onUpdate:modelValue","imageUrl","onUpdate:imageUrl","existingImage","upload-text","submitStatus"])])):m("",!0),e("div",es,[s[8]||(s[8]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",ts,[e("label",ss,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"skip",disabled:(b=f.user.role)==null?void 0:b.incident_supervisor},null,8,os),[[N,t.form[`checklist_${o.id}_status`]]]),s[4]||(s[4]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Skip",-1))]),e("label",as,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"requested",disabled:(n=f.user.role)==null?void 0:n.incident_supervisor},null,8,ls),[[N,t.form[`checklist_${o.id}_status`]]]),s[5]||(s[5]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Request",-1))]),e("label",is,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"declined",disabled:(j=f.user.role)==null?void 0:j.installation_oss},null,8,ds),[[N,t.form[`checklist_${o.id}_status`]]]),s[6]||(s[6]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Declined",-1))]),e("label",ns,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"approved",disabled:(T=f.user.role)==null?void 0:T.installation_oss},null,8,rs),[[N,t.form[`checklist_${o.id}_status`]]]),s[7]||(s[7]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Approved",-1))])])])])}),128))])])]),e("div",cs,[e("span",ms,[k(e("button",us," Save ",512),[[Q,!t.form.id]]),k(e("button",fs," Update ",512),[[Q,t.form.id]])]),e("span",ps,[e("button",{onClick:s[0]||(s[0]=(...o)=>t.closeModal&&t.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):m("",!0)])}const gs=Z(bt,[["render",xs],["__scopeId","data-v-69e5f290"]]),_s={name:"IncidentTask",components:{AppLayout:de,Pagination:ce,Multiselect:ge,NoData:ne,Link:me,CustomerDetail:re,TaskCheckListSubcon:yt,TaskCheckListSupervisor:gs},props:{tasks:Object,errors:Object,task_write:Boolean,user:Object,noc:Object,critical:Number,high:Number,normal:Number,role:Object,subcons:Object,subcon:Object,pendingRootCause:Object,subRootCause:Object,checklistValues:Object,checkListSummary:Object},setup(u){var G;const s=x("");x("");let f=x(!1),t=x(!1),y=x(!1),v=x(""),w=x(1),p=x("my"),o=x([]);x(1);let U=x(!1);U.value=((G=u.user.role)==null?void 0:G.incident_supervisor)??!1;const h=x([{id:"1",name:"WIP"},{id:"3",name:"Pending"},{id:"4",name:"Photo Upload Complete"},{id:"5",name:"Photo Upload Rejected",$isDisabled:!U.value},{id:"2",name:"Supervisor Approved",$isDisabled:!U.value},{id:"0",name:"Deleted",$isDisabled:!U.value}]),b=x({date:"YYYY-MM-DD",month:"MMM"});x(!1),ue("user",u.user);const n=fe({id:null,code:null,edge_code:null,priority:null,assigned:null,target:null,status:1,description:null,comment:null,incident_id:null,data:null,root_causes:null,sub_root_causes:null,root_causes_id:null,sub_root_causes_id:null,complete_date:null,statusData:null});function j(){n.id=null,n.code=null,n.edge_code=null,n.priority=null,n.assigned=null,n.target=null,n.status=1,n.description=null,n.comment=null,n.incident_id=u.data,n.root_causes=null,n.sub_root_causes=null,n.root_causes_id=null,n.sub_root_causes_id=null,n.complete_date=null,v.value=null,n.statusData=null}function T(r){h.value=h.value.map(_=>_.id==="4"?{..._,$isDisabled:r.remaining>0}:_),n.id=r.id,n.code=r.code,n.edge_code=r.edge_code,n.priority=r.priority,n.assigned=u.subcons.filter(_=>_.id==r.assigned)[0],n.description=r.description,n.incident_id=r.incident_id,n.comment=r.comment,n.status=r.status,n.target=r.target,n.data=r,n.statusData=h.value.find(_=>_.id==String(r.status)),n.root_causes=r.root_causes_id?u.pendingRootCause.filter(_=>_.id==r.root_causes_id)[0]:null,n.sub_root_causes=null,n.root_causes_id=r.root_causes_id,n.sub_root_causes_id=r.sub_root_causes_id,n.complete_date=r.complete_date,y.value=!0,t.value=!0,v.value=r.incident_id}function c(r){r.status!=2?Toast.fire({title:"Are you sure?",text:"Do you want to mark as completed !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(_=>{_.isConfirmed&&g(r,2)}):Toast.fire({title:"Are you sure?",text:"Do you want to mark as WIP !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(_=>{_.isConfirmed&&g(r,1)})}function g(r,_){n.id=r.id,n.assigned=u.subcons.filter(l=>l.id==r.assigned)[0],n.description=r.description,n.incident_id=r.incident_id,n.status=_,n.target=r.target,y.value=!0,t.value=!1,C()}function C(){y.value!=!0?(n._method="POST",J.post("/addTask",n,{preserveState:!0,onSuccess:r=>{t.value=!1,j(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}})):(n._method="PUT",J.post("/editTask/"+n.id,n,{onSuccess:r=>{t.value=!1,y.value=!1,j(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}}))}function I(){t.value=!1,preserveState=!0}function V(r){const _=h.value.find(l=>l.id==String(r));return _?_.name:"WIP"}function $(){J.get("/mytask/",{keyword:s.value,status:w.value,task:p.value},{preserveState:!0})}function M(){let r="/mytask/";s.value!=null&&(r=r+"?keyword="+s.value),w.value!=""&&(r=r+"&status="+w.value),p.value!=""&&(r=r+"&task="+p.value),J.get(r,{keyword:s.value},{preserveState:!0})}function B(r){w.value=r,M()}function F(){p.value="my",M()}function E(){p.value="all",M()}const W=r=>{let _=u.subcons.filter(l=>l.id==r)[0];return _?_.name:""};function Y(r){var l;o.value=[];let _=u.pendingRootCause.filter(O=>O.id==r.id);o.value=(l=_[0])==null?void 0:l.sub_root_causes,n.sub_root_causes_id&&(n.sub_root_causes=o.value.filter(O=>O.id==n.sub_root_causes_id)[0],n.sub_root_causes||(n.sub_root_causes_id=null))}pe(()=>n.root_causes,r=>{r&&Y(r)});const q=x(1);function K(r){q.value=r}return{search:s,loading:f,form:n,formatter:b,edit:t,editMode:y,search_status:w,task_user:p,getName:W,getStatus:V,editTask:T,completeIt:g,saveTask:C,cancelTask:I,completeTask:c,searchTask:$,goMyTasks:F,goAllTasks:E,changeStatus:M,subRCA:o,goSearch:B,tabClick:K,tab:q,selected_id:v,subconStatus:h}}},ys={class:"py-1"},bs={class:"mx-auto sm:px-6 lg:px-8"},ks={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-2 py-2 w-full justify-items-end"},hs={class:"flex w-full"},vs={class:"flex w-full items-center justify-end"},ws={class:"mr-3 text-sm font-medium text-gray-700"},Cs={class:"inline-flex relative cursor-pointer"},Ss=["checked"],Us={class:"flex w-full"},js={key:1},Ts={key:0,class:"hidden md:block"},Is={class:"min-w-full divide-y divide-gray-200 table-auto"},Vs={class:"bg-white divide-y divide-gray-200 text-sm w-full text-left"},Ls={class:"px-2 py-3 whitespace-nowrap"},Ds={class:"px-6 py-3 whitespace-nowrap"},Ms={class:"px-6 py-3 whitespace-nowrap"},As={class:"px-6 py-3 whitespace-nowrap"},Rs={class:"px-6 py-3 whitespace-nowrap"},Ns={class:"px-6 py-3 whitespace-nowrap"},Os={class:"px-6 py-3 whitespace-nowrap"},Ps={class:"px-6 py-3 whitespace-nowrap"},qs={class:"px-6 py-3 whitespace-nowrap"},Gs={class:"px-6 py-3 whitespace-nowrap"},zs=["onClick"],$s={key:1,class:"grid grid-cols-1 sm:grid-cols-2 gap-2 md:hidden"},Bs={class:"flex items-center justify-between space-x-2 text-sm"},Fs={class:"font-bold"},Es={class:"text-sm text-gray-600"},Ws={class:"font-sm p-2 capitalize"},Ys={class:"mt-4"},Ks={class:"text-xs text-gray-700"},Hs={class:"text-xs text-gray-700"},Js={class:"text-xs text-gray-700"},Qs={class:"flex flex-wrap justify-end"},Xs=["onClick"],Zs={key:2,class:"w-full block mt-4"},eo={class:"text-xs text-gray-600"},to={key:3},so={key:2,class:"inline-flex w-full bg-gray-50 rounded-t-lg"},oo={id:"tabs",class:"flex"},ao={id:"tab-contents"},lo={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full bg-white p-4"},io={class:"md:py-2 md:col-span-3 col-span-1"},no={class:"flex"},ro={for:"ftth_id",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2"},co={class:"md:py-2 md:col-span-3 col-span-1"},mo={class:"flex"},uo={for:"ftth_id",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2"},fo={class:"md:py-2 md:col-span-3 col-span-1"},po={class:"flex"},xo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 capitalize"},go={key:0,class:"py-2 col-span-1 w-full"},_o={key:1,class:"md:py-2 md:col-span-3 col-span-1"},yo={class:"flex"},bo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 capitalize"},ko={class:"md:py-2 md:col-span-3 col-span-1"},ho={class:"flex"},vo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 whitespace-normal"},wo={class:"md:py-2 md:col-span-3 col-span-1"},Co={class:"flex"},So={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 whitespace-normal"},Uo={class:"md:py-2 md:col-span-3 col-span-1"},jo={class:"flex rounded-md shadow-sm"},To={key:0,class:"flex rounded-md shadow-sm w-full"},Io={key:1,class:"mt-2 text-sm text-red-500"},Vo={class:"md:py-2 col-span-1 md:col-span-3"},Lo={class:"flex rounded-md shadow-sm"},Do={key:0,class:"mt-2 text-sm text-red-500"},Mo={class:"md:py-2 col-span-1 md:col-span-3"},Ao={class:"flex rounded-md shadow-sm"},Ro={key:0,class:"mt-2 text-sm text-red-500"},No={class:"md:py-2 col-span-1 md:col-span-3"},Oo={key:0,class:"mt-2 text-sm text-red-500"},Po={class:"md:py-2 col-span-1 md:col-span-3"},qo={class:"flex rounded-md shadow-sm"},Go={key:0,class:"mt-2 text-sm text-red-500"},zo={class:"py-2 col-span-1 md:col-span-3"},$o={key:0,class:"flex rounded-md shadow-sm w-full"},Bo={key:1,class:"mt-2 text-sm text-red-500"},Fo={class:"py-2 col-span-1 md:col-span-3"},Eo={key:0,class:"flex rounded-md shadow-sm w-full"},Wo={key:1,class:"mt-2 text-sm text-red-500"},Yo={class:"md:py-2 col-span-1 md:col-span-3"},Ko={class:"flex rounded-md shadow-sm"},Ho={key:0,class:"mt-2 text-sm text-red-500"},Jo={class:"col-span-1 md:col-span-4 flex md:justify-end justify-between mt-4"},Qo={key:0},Xo={key:1},Zo={key:0},ea={key:1},ta={key:0,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function sa(u,s,f,t,y,v){const w=L("pagination"),p=L("multiselect"),o=L("customer-detail"),U=L("task-check-list-supervisor"),h=L("task-check-list-subcon"),b=L("app-layout");return a(),H(b,null,{default:ee(()=>{var n,j,T,c,g,C,I,V,$,M,B,F,E,W,Y,q,K,G,r,_;return[e("div",ys,[e("div",bs,[t.edit?m("",!0):(a(),i("div",ks,[e("div",hs,[s[23]||(s[23]=e("span",{class:"z-10 mt-1 leading-snug font-normal text-center text-blueGray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-search"})],-1)),k(e("input",{type:"text",placeholder:"ID/Description",class:"pl-10 pr-12 py-2.5 w-full rounded-lg text-sm text-gray-700 placeholder-gray-400 transition-colors bg-white border border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-500 focus:ring-opacity-10 focus:outline-none dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 dark:placeholder-gray-500 dark:focus:border-indigo-500 dark:focus:ring-opacity-20",id:"search",tabindex:"1","onUpdate:modelValue":s[0]||(s[0]=l=>t.search=l),onKeyup:s[1]||(s[1]=xe((...l)=>t.searchTask&&t.searchTask(...l),["enter"]))},null,544),[[A,t.search]])]),e("div",vs,[e("span",ws,d(t.task_user==="my"?"My Tasks":"All Tasks"),1),e("label",Cs,[e("input",{type:"checkbox",class:"sr-only peer",checked:t.task_user==="all",onChange:s[2]||(s[2]=l=>t.task_user==="my"?t.goAllTasks():t.goMyTasks())},null,40,Ss),s[24]||(s[24]=e("div",{class:"w-14 h-8 bg-gray-400 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-6 peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600 shadow-sm"},null,-1))])]),e("div",Us,[e("button",{class:S(["w-32 btn py-3 px-8 bg-gray-400 rounded rounded-r-none focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-yellow-300 text-gray-600 font-bold":t.search_status==1}]),onClick:s[3]||(s[3]=l=>t.goSearch(1))},"WIP",2),e("button",{class:S(["w-32 btn py-3 px-8 bg-gray-400 focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-yellow-500 text-gray-600 font-bold":t.search_status==3}]),onClick:s[4]||(s[4]=l=>t.goSearch(3))},"Pending",2),e("button",{class:S(["w-32 btn py-3 px-8 bg-gray-400 focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-green-300 text-gray-600 font-bold":t.search_status==2}]),onClick:s[5]||(s[5]=l=>t.goSearch(2))},"Completed",2),e("button",{class:S(["w-32 btn py-3 px-8 bg-gray-400 rounded rounded-l-none focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase",{"bg-indigo-600 font-bold":t.search_status=="all"}]),onClick:s[6]||(s[6]=l=>t.goSearch("all"))},"All",2)])])),t.edit?m("",!0):(a(),i("div",js,[(n=f.tasks)!=null&&n.data?(a(),i("div",Ts,[e("table",Is,[s[26]||(s[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," EDGE Ticket "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned To"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned By"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Target Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Complete Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Action")])],-1)),e("tbody",Vs,[(a(!0),i(D,null,P(f.tasks.data,(l,O)=>{var X;return a(),i("tr",{key:l.id},[e("td",Ls,[e("i",{class:S(["fa fa-circle mr-2",{"text-yellow-400":l.priority=="normal","text-yellow-600":l.priority=="high","text-red-600":l.priority=="critical"}])},null,2),z(" "+d(O+=f.tasks.from),1)]),e("td",Ds,d(l.edge_code),1),e("td",Ms,d(l.ftth_id),1),e("td",As,d((X=l.description)==null?void 0:X.substring(0,50)),1),e("td",Rs,d(t.getName(l.assigned)),1),e("td",Ns,d(l.incharge.match(/\b\w/g).join("")),1),e("td",Os,d(l.target),1),e("td",Ps,d(l.complete_date),1),e("td",qs,d(t.getStatus(l.status)),1),e("td",Gs,[e("a",{href:"#",onClick:oa=>t.editTask(l),class:"text-blue-600"},s[25]||(s[25]=[e("i",{class:"fa fa-edit"},null,-1)]),8,zs)])])}),128))])])])):m("",!0),(j=f.tasks)!=null&&j.data?(a(),i("div",$s,[(a(!0),i(D,null,P(f.tasks.data,(l,O)=>(a(),i("div",{class:"bg-white p-4 rounded-lg shadow mt-2 space-y-1 text-gray-600",key:l.id},[e("div",Bs,[e("label",Fs,d(l.ftth_id),1),e("div",null,[e("span",{class:S(["text-xs font-bold px-2.5 py-0.5 rounded items-center justify-center",{"bg-yellow-400":l.status==1,"bg-yellow-500":l.status==3,"bg-green-300":l.status!=1}])},d(t.getStatus(l.status)),3)])]),e("div",Es,[s[27]||(s[27]=e("label",{for:"details",class:"w-full font-bold"}," Instruction : ",-1)),e("p",Ws,d(l.description),1)]),e("span",Ys,[e("div",Ks," Assigned To : "+d(l.assigned_to),1),e("div",Hs," Assigned By : "+d(l.incharge),1),e("div",Js," Target Date : "+d(l.target),1)]),e("div",Qs,[e("div",null,[e("a",{type:"button",onClick:X=>t.editTask(l),href:"#",class:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-30 items-center justify-center"},s[28]||(s[28]=[e("span",{class:"text-sm"},"Edit",-1),e("i",{class:"fa fa-angle-double-right fa-lg ml-2","aria-hidden":"true"},null,-1)]),8,Xs)])])]))),128))])):m("",!0),f.tasks.total?(a(),i("span",Zs,[e("label",eo,d(f.tasks.data.length)+" Tasks in Current Page. Total Number of Tasks : "+d(f.tasks.total),1)])):m("",!0),f.tasks.links?(a(),i("span",to,[R(w,{class:"mt-4",links:f.tasks.links},null,8,["links"])])):m("",!0)])),t.edit?(a(),i("div",so,[e("ul",oo,[e("li",{class:S(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[7]||(s[7]=l=>t.tabClick(1)),"preserve-state":""},"Genaral")],2),e("li",{class:S(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[8]||(s[8]=l=>t.tabClick(2)),"preserve-state":""},"Customer Info")],2),e("li",{class:S(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==3?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[9]||(s[9]=l=>t.tabClick(3)),"preserve-state":""},"Attachment Info")],2)])])):m("",!0),e("div",ao,[e("div",{class:S([t.tab==1?"":"hidden"])},[t.edit?(a(),i("div",lo,[s[35]||(s[35]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Code : ")])],-1)),e("div",io,[e("div",no,[e("label",ro,[e("i",{class:S(["fa fa-circle mr-2",{"text-yellow-400":((T=t.form.data)==null?void 0:T.priority)=="normal","text-yellow-600":((c=t.form.data)==null?void 0:c.priority)=="high","text-red-600":((g=t.form.data)==null?void 0:g.priority)=="critical"}])},null,2),z(" "+d((C=t.form.data)==null?void 0:C.code)+" | "+d((I=t.form.data)==null?void 0:I.edge_code),1)])])]),s[36]||(s[36]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Customer ID : ")])],-1)),e("div",co,[e("div",mo,[e("label",uo,d((V=t.form.data)==null?void 0:V.ftth_id),1)])]),s[37]||(s[37]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Type : ")])],-1)),e("div",fo,[e("div",po,[e("label",xo,d(($=t.form.data)==null?void 0:$.type.replace("_"," ")),1)])]),(M=t.form.data)!=null&&M.topic?(a(),i("div",go,s[29]||(s[29]=[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Topic : ")],-1)]))):m("",!0),(B=t.form.data)!=null&&B.topic?(a(),i("div",_o,[e("div",yo,[e("label",bo,d((F=t.form.data)==null?void 0:F.topic.replace("_"," ")),1)])])):m("",!0),s[38]||(s[38]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Detail : ")])],-1)),e("div",ko,[e("div",ho,[e("label",vo,d((E=t.form.data)==null?void 0:E.incident_description),1)])]),s[39]||(s[39]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Opened At : ")])],-1)),e("div",wo,[e("div",Co,[e("label",So,d((W=t.form.data)==null?void 0:W.date)+" : "+d((Y=t.form.data)==null?void 0:Y.time),1)])]),s[40]||(s[40]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Assigned : ")])],-1)),e("div",Uo,[e("div",jo,[f.subcons.length!==0?(a(),i("div",To,[R(p,{"deselect-label":"Selected already",options:f.subcons,"track-by":"id",label:"name",modelValue:t.form.assigned,"onUpdate:modelValue":s[10]||(s[10]=l=>t.form.assigned=l),"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.assigned?(a(),i("p",Io,d(u.$page.props.errors.assigned),1)):m("",!0)])]),s[41]||(s[41]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Target : ")])],-1)),e("div",Vo,[e("div",Lo,[k(e("input",{type:"date","onUpdate:modelValue":s[11]||(s[11]=l=>t.form.target=l),name:"target",id:"target",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[A,t.form.target]])]),u.$page.props.errors.target?(a(),i("p",Do,d(u.$page.props.errors.target),1)):m("",!0)]),s[42]||(s[42]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Instruction : ")])],-1)),e("div",Mo,[e("div",Ao,[k(e("textarea",{"onUpdate:modelValue":s[12]||(s[12]=l=>t.form.description=l),name:"description",id:"description",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[A,t.form.description]])]),u.$page.props.errors.description?(a(),i("p",Ro,d(u.$page.props.errors.description),1)):m("",!0)]),s[43]||(s[43]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"status",class:"block text-sm font-medium text-gray-700 md:mr-2"}," Status : ")])],-1)),e("div",No,[R(p,{"deselect-label":"Selected already",options:t.subconStatus,"track-by":"id",label:"name",modelValue:t.form.statusData,"onUpdate:modelValue":[s[13]||(s[13]=l=>t.form.statusData=l),s[14]||(s[14]=l=>t.form.status=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,taggable:!1},{singleLabel:ee(({option:l})=>[e("strong",null,d(l.name),1)]),_:1},8,["options","modelValue"]),u.$page.props.errors.status?(a(),i("p",Oo,d(u.$page.props.errors.status),1)):m("",!0)]),t.form.status==2?(a(),i(D,{key:2},[s[30]||(s[30]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Complete At : ")])],-1)),e("div",Po,[e("div",qo,[k(e("input",{type:"date","onUpdate:modelValue":s[15]||(s[15]=l=>t.form.complete_date=l),name:"complete_date",id:"complete_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[A,t.form.complete_date]]),u.$page.props.errors.complete_date?(a(),i("p",Go,d(u.$page.props.errors.complete_date)+">",1)):m("",!0)])])],64)):m("",!0),t.form.status==3?(a(),i(D,{key:3},[s[31]||(s[31]=e("div",{class:"py-2 col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"root_causes_id",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Root Cause for Pending : ")])],-1)),e("div",zo,[((q=f.pendingRootCause)==null?void 0:q.length)!==0?(a(),i("div",$o,[R(p,{"deselect-label":"Selected already",options:f.pendingRootCause,"track-by":"id",label:"name",modelValue:t.form.root_causes,"onUpdate:modelValue":[s[16]||(s[16]=l=>t.form.root_causes=l),s[17]||(s[17]=l=>t.form.root_causes_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.root_causes_id?(a(),i("p",Bo,d(u.$page.props.errors.root_causes_id),1)):m("",!0)]),s[32]||(s[32]=e("div",{class:"py-2 col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"sub_root_causes",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"},"Sub Root Cause : ")])],-1)),e("div",Fo,[((K=t.subRCA)==null?void 0:K.length)!==0?(a(),i("div",Eo,[R(p,{"deselect-label":"Selected already",options:t.subRCA,"track-by":"id",label:"name",modelValue:t.form.sub_root_causes,"onUpdate:modelValue":[s[18]||(s[18]=l=>t.form.sub_root_causes=l),s[19]||(s[19]=l=>t.form.sub_root_causes_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.sub_root_causes_id?(a(),i("p",Wo,d(u.$page.props.errors.sub_root_causes_id),1)):m("",!0)])],64)):m("",!0),s[44]||(s[44]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"comment",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Comments : ")])],-1)),e("div",Yo,[e("div",Ko,[k(e("textarea",{"onUpdate:modelValue":s[20]||(s[20]=l=>t.form.comment=l),name:"comment",id:"comment",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[A,t.form.comment]])]),u.$page.props.errors.comment?(a(),i("p",Ho,d(u.$page.props.errors.comment),1)):m("",!0)]),e("div",Jo,[e("a",{href:"#",onClick:s[21]||(s[21]=l=>t.saveTask()),class:"text-center px-4 py-3 bg-green-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-400 active:bg-green-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},[t.editMode?m("",!0):(a(),i("span",Qo,"Save Task")),t.editMode?(a(),i("span",Xo,"Update Task")):m("",!0),s[33]||(s[33]=e("i",{class:"fas fa-save opacity-75 ml-1 text-sm"},null,-1))]),e("a",{href:"#",onClick:s[22]||(s[22]=l=>t.cancelTask()),class:"text-center px-4 py-3 bg-gray-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition"},s[34]||(s[34]=[z("Cancel"),e("i",{class:"fas fa-save opacity-75 ml-1 text-sm"},null,-1)]))])])):m("",!0)],2),e("div",{class:S([t.tab==2?"":"hidden"])},[t.selected_id&&t.tab==2?(a(),H(o,{key:0,data:t.selected_id},null,8,["data"])):m("",!0)],2),e("div",{class:S([t.tab==3?"":"hidden"])},[(G=f.user.role)!=null&&G.incident_supervisor?(a(),i("span",Zo,[t.tab==3?(a(),H(U,{key:0,taskId:(r=t.form)==null?void 0:r.id,user:f.user},null,8,["taskId","user"])):m("",!0)])):m("",!0),f.user.user_type=="subcon"?(a(),i("span",ea,[t.tab==3?(a(),H(h,{key:0,taskId:(_=t.form)==null?void 0:_.id},null,8,["taskId"])):m("",!0)])):m("",!0)],2)])])]),t.loading?(a(),i("div",ta,s[45]||(s[45]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):m("",!0)]}),_:1})}const ua=Z(_s,[["render",sa]]);export{ua as default};
