import{A as N}from"./AppLayout-TpyFdFnd.js";import{D as O,r as u,z as S,o as n,d as r,a as e,j as m,k as P,v as b,F as f,g as h,t as c,b as B,f as V,E as C,T,y as L,B as z,c as Y,w as U,N as M,e as w}from"./app-DLx8sfmJ.js";import{M as A}from"./vue3-multiselect.umd.min-D04nQYvs.js";import{P as E}from"./Pagination-38tvLKUv.js";import{V as I}from"./main-DjSlz5Ax.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as R}from"./switch-DCF4SBS6.js";import"./DropdownLink-fD1chOEx.js";import"./render-TsPECRdm.js";const F={name:"BillingSearch",emits:["search_parameter"],components:{VueDatePicker:I},setup(d,t){const i=O("packages"),s=O("package_type"),_=O("townships"),v=O("status"),g=u({date:"YYYY-MM-DD",month:"MMM"});let o=u(""),a=u(""),l=u(0),y=u(0),x=u(0),k=u(0),j=u(0);return{formatter:g,sh_general:o,sh_general:o,sh_installation:a,sh_payment:l,sh_package:y,sh_township:x,sh_status:k,sh_package_type:j,packages:i,package_type:s,townships:_,status:v,doSearch:()=>{let p=Object.create({});o.value!=""&&(p.general=o.value),y.value!=0&&(p.package=y.value),x.value!=0&&(p.township=x.value),k.value!=0&&(p.status=k.value),a.value.from!=""&&a.value.to!=""&&(p.installation=a.value),l.value!=0&&(p.payment_type=l.value),j.value!=0&&(p.package_type=j.value),t.emit("search_parameter",p)},clearSearch:()=>{let p=Object.create({});o.value="",y.value=0,x.value=0,l.value=0,k.value=0,j.value=0,a.value="",t.emit("search_parameter",p)}}}},G={class:"bg-white shadow sm:rounded-t-lg flex justify-between space-x-2 items-end py-2 px-2 md:px-2"},q={class:"grid grid-cols-1 md:grid-cols-4 gap-6 w-full"},H={class:"col-span-1 sm:col-span-1"},J={class:"py-2"},K={class:"mt-1 flex rounded-md shadow-sm"},Q={class:"py-2"},W={class:"mt-1 flex rounded-md shadow-sm"},X={class:"col-span-1 sm:col-span-1"},Z={class:"py-2"},$={class:"mt-1 flex rounded-md shadow-sm"},ee=["value"],te={class:"py-2"},se={class:"mt-1 flex rounded-md shadow-sm"},oe={class:"col-span-1 sm:col-span-1"},ae={class:"py-2"},le={class:"mt-1 flex rounded-md shadow-sm"},ne=["value"],ie={class:"py-2"},re={class:"mt-1 flex rounded-md shadow-sm"},de=["value"],ce={class:"col-span-1 sm:col-span-1"},ue={class:"py-2"},pe={class:"mt-1 flex rounded-md shadow-sm"},me=["value"],ge={class:"mb-2 py-2 px-2 md:px-2 bg-white shadow rounded-b-lg flex"},xe={class:"flex"};function be(d,t,i,s,_,v){const g=S("VueDatePicker");return n(),r(f,null,[e("div",G,[e("div",q,[e("div",H,[e("div",J,[t[10]||(t[10]=e("label",{for:"sh_general",class:"block text-sm font-medium text-gray-700"},"General ",-1)),e("div",K,[t[9]||(t[9]=e("span",{class:"z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),m(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.sh_general=o),name:"sh_general",id:"sh_general",class:"pl-10 py-2 focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Customer/Company Name etc.",tabindex:"1"},null,512),[[P,s.sh_general]])])]),e("div",Q,[t[12]||(t[12]=e("label",{for:"sh_payment",class:"block text-sm font-medium text-gray-700"},"Paid/Unpaid",-1)),e("div",W,[m(e("select",{id:"sh_payment","onUpdate:modelValue":t[1]||(t[1]=o=>s.sh_payment=o),name:"sh_payment",class:"py-2 block w-full px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"2"},t[11]||(t[11]=[e("option",{value:"0"}," -Both-",-1),e("option",{value:"paid"}," Paid ",-1),e("option",{value:"unpaid"}," Unpaid",-1)]),512),[[b,s.sh_payment]])])])]),e("div",X,[e("div",Z,[t[15]||(t[15]=e("label",{for:"sh_package",class:"block text-sm font-medium text-gray-700"},"Package ",-1)),e("div",$,[t[14]||(t[14]=e("span",{class:"z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),m(e("select",{id:"sh_package","onUpdate:modelValue":t[2]||(t[2]=o=>s.sh_package=o),name:"sh_package",class:"pl-10 py-2 block w-full px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"2"},[t[13]||(t[13]=e("option",{value:"0"}," -Choose Package-",-1)),(n(!0),r(f,null,h(s.packages,o=>(n(),r("option",{key:o.id,value:o.id},c(o.item_data),9,ee))),128))],512),[[b,s.sh_package]])])]),e("div",te,[t[16]||(t[16]=e("label",{for:"sh_installation",class:"block text-sm font-medium text-gray-700"},"Installation Date ",-1)),e("div",se,[B(g,{modelValue:s.sh_installation,"onUpdate:modelValue":t[3]||(t[3]=o=>s.sh_installation=o),range:{partialRange:!0},placeholder:"Please choose Installation Date","enable-time-picker":!1,"model-type":"yyyy-MM-dd",id:"sh_installation",class:"text-gray-400 text-sm focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none"},null,8,["modelValue"])])])]),e("div",oe,[e("div",ae,[t[19]||(t[19]=e("label",{for:"sh_township",class:"block text-sm font-medium text-gray-700"},"Township ",-1)),e("div",le,[t[18]||(t[18]=e("span",{class:"z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),m(e("select",{id:"sh_township","onUpdate:modelValue":t[4]||(t[4]=o=>s.sh_township=o),name:"sh_township",class:"pl-10 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"3"},[t[17]||(t[17]=e("option",{value:"0"}," -Choose Township -",-1)),(n(!0),r(f,null,h(s.townships,o=>(n(),r("option",{key:o.id,value:o.id},c(o.name),9,ne))),128))],512),[[b,s.sh_township]])])]),e("div",ie,[t[22]||(t[22]=e("label",{for:"sh_status",class:"block text-sm font-medium text-gray-700"},"Customer Status ",-1)),e("div",re,[t[21]||(t[21]=e("span",{class:"z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),m(e("select",{id:"sh_status","onUpdate:modelValue":t[5]||(t[5]=o=>s.sh_status=o),name:"sh_status",class:"pl-10 py-2 block w-full px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"7"},[t[20]||(t[20]=e("option",{value:"0"}," -Choose Status -",-1)),(n(!0),r(f,null,h(s.status,o=>(n(),r("option",{key:o.id,value:o.id},c(o.name),9,de))),128))],512),[[b,s.sh_status]])])])]),e("div",ce,[e("div",ue,[t[25]||(t[25]=e("label",{for:"sh_package_type",class:"block text-sm font-medium text-gray-700"},"Package Type ",-1)),e("div",pe,[t[24]||(t[24]=e("span",{class:"z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),m(e("select",{id:"sh_package_type","onUpdate:modelValue":t[6]||(t[6]=o=>s.sh_package_type=o),name:"sh_package_type",class:"pl-10 py-2 block w-full px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"7"},[t[23]||(t[23]=e("option",{value:"0"}," -Choose Type -",-1)),(n(!0),r(f,null,h(s.package_type,o=>(n(),r("option",{key:o.type,value:o.type},c(o.type.toUpperCase()),9,me))),128))],512),[[b,s.sh_package_type]])])])])])]),e("div",ge,[e("div",xe,[e("a",{onClick:t[7]||(t[7]=(...o)=>s.doSearch&&s.doSearch(...o)),class:"cursor-pointer inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},t[26]||(t[26]=[V("Search "),e("i",{class:"ml-1 fa fa-search text-white",tabindex:"10"},null,-1)])),e("a",{onClick:t[8]||(t[8]=(...o)=>s.clearSearch&&s.clearSearch(...o)),class:"ml-2 cursor-pointer inline-flex items-center px-4 py-2 bg-gray-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-500 focus:outline-none focus:border-gray-500 focus:ring focus:ring-gray-200 disabled:opacity-25 transition"},t[27]||(t[27]=[V("Reset "),e("i",{class:"ml-1 fa fa-undo-alt text-white",tabindex:"11"},null,-1)]))])])],64)}const fe=D(F,[["render",be]]),ye={name:"BillList",components:{AppLayout:N,Pagination:E,BillingSearch:fe,Multiselect:A,Switch:R},props:{lists:Object,billings:Object,packages:Object,projects:Object,townships:Object,status:Object,errors:Object,user:Object,users:Object,roles:Object,max_receipt:Object,receivable:Object,paid:Object,current_bill:Object,smsgateway:Object,prepaid_customers:Object},setup(d){u({date:"YYYY-MM-DD",month:"MMM"}),C("packages",d.packages),C("projects",d.projects),C("townships",d.townships),C("status",d.status);let t=u(!1);u(!1);let i=u("");const s=T({id:null,bill_id:d.current_bill?d.current_bill.id:null,general:null,adjustment_type:0}),_=a=>{let l="/showAdjustment";s.bill_id!=null&&(a.bill_id=s.bill_id),M.get(l,s,{preserveState:!0})},v=()=>{t.value=!t.value,console.log(d.route)};function g(){let a=Object.create({});a.bill_id=s.bill_id,i.value=a,s._method="GET",M.get("/showAdjustment",s,{preserveState:!0,resetOnSuccess:!0,onSuccess:l=>{cal_percent()},onError:l=>{console.log("error ..".errors)}})}function o(){axios.post("/exportBillingExcel",i.value).then(a=>{console.log(a);var l=document.createElement("a");document.body.appendChild(l),l.style="display: none";let y=new Blob([a.data],{type:"text/csv"}),x=window.URL.createObjectURL(y);l.href=x,l.download="billings.csv",l.click(),window.URL.revokeObjectURL(x)})}return L(()=>{let a=d.current_bill?d.current_bill.id:null;if(a){let l=Object.create({});l.bill_id=a,i.value=l}}),z(()=>{let a=d.current_bill?d.current_bill.id:null;if(a){let l=Object.create({});l.bill_id=a,i.value=l}}),{view:g,show_search:t,form:s,toggleAdv:v,filter:_,doExcel:o}}},he={class:"py-2"},_e={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 flex"},ve=["value"],we={class:"mt-4 mx-auto sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-4 gap-6 w-full"},ke={class:"col-span-1 sm:col-span-1"},je={class:"mt-1 flex rounded-md shadow-sm"},Oe={class:"col-span-1 sm:col-span-1"},Ce={class:"mt-1 flex rounded-md shadow-sm"},Ve={class:"col-span-1 sm:col-span-1 flex items-end"},Se={key:0,class:"max-w-full mx-auto sm:px-6 lg:px-8 mt-4"},Ue={key:0,class:"bg-white overflow-auto shadow-xl sm:rounded-lg"},Me={class:"min-w-full divide-y divide-gray-200"},Pe={class:"bg-white divide-y divide-gray-200"},Be={class:"pl-4 px-2 py-3 text-xs whitespace-nowrap"},De={class:"px-2 py-3 text-xs whitespace-nowrap"},Ne={class:"px-2 py-3 text-xs whitespace-nowrap"},Te={class:"px-2 py-3 text-xs whitespace-nowrap"},Le={class:"px-2 py-3 text-xs whitespace-nowrap"},ze={class:"px-2 py-3 text-xs whitespace-nowrap"},Ye={class:"px-2 py-3 text-xs whitespace-nowrap"},Ae={class:"px-2 py-3 text-xs whitespace-nowrap"},Ee={key:1,class:"w-full block mt-4"},Ie={class:"text-xs text-gray-600"},Re={key:2},Fe={key:3,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function Ge(d,t,i,s,_,v){const g=S("pagination"),o=S("app-layout");return n(),Y(o,null,{header:U(()=>t[5]||(t[5]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"Bill Adjustment List",-1)])),default:U(()=>[e("div",he,[e("div",_e,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-bold text-gray-700 w-24 mt-3"},"Billing List :",-1)),m(e("select",{id:"id","onUpdate:modelValue":t[0]||(t[0]=a=>s.form.bill_id=a),name:"bill_id",class:"ml-2 py-2.5 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"1",required:""},[t[6]||(t[6]=e("option",{value:"0"},"-Choose Package-",-1)),(n(!0),r(f,null,h(i.lists,a=>(n(),r("option",{key:a.id,value:a.id},c(a.name),9,ve))),128))],512),[[b,s.form.bill_id]]),e("a",{onClick:t[1]||(t[1]=(...a)=>s.view&&s.view(...a)),class:"ml-2 cursor-pointer inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},t[7]||(t[7]=[V("View "),e("i",{class:"ml-1 fa fa-search text-white",tabindex:"2"},null,-1)]))]),e("div",we,[e("div",ke,[t[10]||(t[10]=e("label",{for:"sh_general",class:"block text-sm font-medium text-gray-700"},"General ",-1)),e("div",je,[t[9]||(t[9]=e("span",{class:"z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),m(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>s.form.general=a),name:"sh_general",id:"sh_general",class:"pl-10 py-2.5 focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Customer/Company Name etc.",tabindex:"3"},null,512),[[P,s.form.general]])])]),e("div",Oe,[t[12]||(t[12]=e("label",{for:"sh_package",class:"block text-sm font-medium text-gray-700"},"Payment Type ",-1)),e("div",Ce,[m(e("select",{id:"sh_package","onUpdate:modelValue":t[3]||(t[3]=a=>s.form.adjustment_type=a),name:"sh_package",class:"py-2.5 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"4"},t[11]||(t[11]=[e("option",{value:"0"},"-Both-",-1),e("option",{value:"Debit Note"},"Debit Note",-1),e("option",{value:"Credit Note"},"Credit Note",-1)]),512),[[b,s.form.adjustment_type]])])]),e("div",Ve,[e("a",{onClick:t[4]||(t[4]=(...a)=>s.filter&&s.filter(...a)),class:"ml-2 cursor-pointer inline-flex items-center px-4 py-3 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},t[13]||(t[13]=[V("Filter "),e("i",{class:"ml-1 fa fa-search text-white",tabindex:"5"},null,-1)]))])]),i.billings?(n(),r("div",Se,[i.billings.data?(n(),r("div",Ue,[e("table",Me,[t[14]||(t[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"pl-3 px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No."),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Bill Number"),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer ID"),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Package"),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Speed "),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Usage "),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Payable"),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ")])],-1)),e("tbody",Pe,[(n(!0),r(f,null,h(i.billings.data,(a,l)=>(n(),r("tr",{key:a.id},[e("td",Be,c(l+=i.billings.from),1),e("td",De,c(a.bill_number),1),e("td",Ne,c(a.ftth_id),1),e("td",Te,c(a.service_description),1),e("td",Le,c(a.qty),1),e("td",ze,c(a.usage_days),1),e("td",Ye,c(a.total_payable),1),e("td",Ae,c(a.adjustment_type),1)]))),128))])])])):w("",!0),i.billings.total?(n(),r("span",Ee,[e("label",Ie,c(i.billings.data.length)+" Invoices in Current Page. Total Number of Invoices : "+c(i.billings.total),1)])):w("",!0),i.billings.links?(n(),r("span",Re,[B(g,{class:"mt-6",links:i.billings.links},null,8,["links"])])):w("",!0),d.loading?(n(),r("div",Fe,t[15]||(t[15]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):w("",!0)])):w("",!0)])]),_:1})}const st=D(ye,[["render",Ge],["__scopeId","data-v-e8e1046a"]]);export{st as default};
