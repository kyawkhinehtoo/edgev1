import{A as N}from"./AppLayout-DhnffEIt.js";import{P as T}from"./Pagination-Cg0l4Byj.js";import{A as L,C as P}from"./Card-CKm2Gwx3.js";import{i as R,D as u,r as _,q as b,c as A,w as y,N as g,o as m,a as s,s as j,v as V,M as E,h as G,f as r,n as d,e as h,x as q,b as c,d as x,g as O,F as D,t as n}from"./app-BUiHhDmU.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-BEFUT-AJ.js";import"./main-BVB3CGx0.js";import"./vue3-multiselect.umd.min-DrvjCATK.js";const F={components:{AppLayout:N,Pagination:T,AdvanceSearch:L,Card:P,Link:R},props:{customers:Object,active:Number,suspense:Number,installation_request:Number,terminate:Number,customers:Object,packages:Object,package_speed:Object,partners:Object,townships:Object,status:Object,errors:Object,dn:Object,radius:Boolean,user:Object,isps:Object,installationTeams:Object,onuSerials:Object},setup(i){u("packages",i.packages),u("partners",i.partners),u("townships",i.townships),u("status",i.status),u("dn",i.dn),u("package_speed",i.package_speed),u("isps",i.isps),u("installationTeams",i.installationTeams),u("onuSerials",i.onuSerials),u("user",i.user);const t=_(""),l=_(!1),o=()=>l.value=!l.value,B=()=>g.post("/customer/search",{keyword:t.value},{preserveState:!0}),I=a=>g.post("/customer/search",a,{preserveState:!0}),f=a=>a==="to_install"?g.post("/customer/search",{status:1},{preserveState:!0}):g.post("/customer/search",{status_type:a},{preserveState:!0}),C=()=>g.post("/customer/search",{status:0},{preserveState:!0}),p=a=>{confirm("Are you sure you want to delete?")&&g.post(`/customer/${a.id}`,{_method:"DELETE"})},S=a=>a.status.color?`text-${a.status.color}`:"",v=_(""),e=_("asc");return{search:t,show_search:l,toggleAdv:o,searchTsp:B,goSearch:I,goAction:f,goAll:C,deleteRow:p,getRowClass:S,sortBy:a=>{v.value===a?e.value=e.value==="asc"?"desc":"asc":(v.value=a,e.value="asc"),g.post("/customer/search",{sort:a,direction:e.value},{preserveState:!0})},getSortIcon:a=>v.value===a?e.value==="asc"?"fa-sort-up":"fa-sort-down":"fa-sort"}}},K={class:"py-2"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={class:"relative mb-2"},W={class:"flex justify-between items-center mb-2 px-1 md:px-0"},H={class:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 gap-2 mb-4"},J={class:"grid gap-4 sm:hidden"},Q={class:"flex justify-between items-center mb-2"},X={class:"flex space-x-2"},Y=["onClick"],Z={class:"text-sm text-gray-600"},$={class:"text-sm text-gray-600"},tt={class:"text-sm text-gray-600"},st={class:"text-sm text-gray-600"},et={class:"text-sm text-gray-600"},ot={class:"text-sm text-gray-600"},at={key:0,class:"hidden sm:block bg-white shadow-xl sm:rounded-lg overflow-auto"},nt={class:"min-w-full divide-y divide-gray-200"},rt={class:"bg-gray-50"},lt={class:"px-3 py-3"},it={class:"bg-white divide-y divide-gray-200"},dt={class:"px-3 py-3 text-xs font-medium"},ut={class:"px-3 py-3 text-xs font-medium"},mt={class:"px-3 py-3 text-xs font-medium"},ct={class:"px-3 py-3 text-xs font-medium"},gt={class:"px-3 py-3 text-xs font-medium"},xt={class:"px-3 py-3 text-xs font-medium"},ft={class:"px-3 py-3 text-xs font-medium"},pt={class:"px-3 py-3 text-xs font-medium"},yt={class:"px-3 py-3 text-xs font-medium"},vt={class:"px-3 py-3 text-xs font-medium"},bt={class:"px-3 py-3 text-right"},ht={key:0},kt={key:1,class:"block mt-4 text-xs text-gray-600"};function _t(i,t,l,o,B,I){const f=b("Link"),C=b("advance-search"),p=b("Card"),S=b("pagination"),v=b("app-layout");return m(),A(v,null,{header:y(()=>t[18]||(t[18]=[s("h2",{class:"font-semibold text-xl text-white leading-tight"},"Customer Database ",-1)])),default:y(()=>[s("div",K,[s("div",U,[s("div",z,[t[19]||(t[19]=s("span",{class:"absolute left-3 top-3 text-blueGray-300"},[s("i",{class:"fas fa-search"})],-1)),j(s("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=e=>o.search=e),onKeyup:t[1]||(t[1]=E((...e)=>o.searchTsp&&o.searchTsp(...e),["enter"])),placeholder:"Search here...",class:"w-full md:w-64 pl-10 py-2.5 border-gray-300 rounded shadow text-sm text-blueGray-600 bg-white placeholder-blueGray-300"},null,544),[[V,o.search]])]),s("div",W,[s("a",{href:"#",class:"font-semibold text-xs text-gray-600",onClick:t[2]||(t[2]=G((...e)=>o.toggleAdv&&o.toggleAdv(...e),["prevent"]))},[t[20]||(t[20]=r(" Advance Search ")),s("i",{class:d([o.show_search?"fas fa-chevron-up":"fas fa-chevron-down","ml-2 text-blueGray-400"])},null,2)]),i.$page.props.login_type=="internal"||i.$page.props.login_type=="isp"?(m(),A(f,{key:0,href:"/customer/create",method:"get",as:"button",class:"px-4 py-2 bg-gray-800 text-white rounded-md text-xs font-semibold hover:bg-gray-700"},{default:y(()=>t[21]||(t[21]=[r(" Create ")])),_:1})):h("",!0)]),j(s("div",null,[c(C,{onSearch_parameter:o.goSearch},null,8,["onSearch_parameter"])],512),[[q,o.show_search]]),s("div",H,[c(p,{icon:"fa-users",bgColor:"blue",label:"Active Customers",count:l.active,onClick:t[3]||(t[3]=e=>o.goAction("active"))},null,8,["count"]),c(p,{icon:"fa-chart-line",bgColor:"green",label:"To Install",count:l.installation_request,onClick:t[4]||(t[4]=e=>o.goAction("to_install"))},null,8,["count"]),c(p,{icon:"fa-circle-pause",bgColor:"yellow",label:"Suspended Customers",count:l.suspense,onClick:t[5]||(t[5]=e=>o.goAction("suspense"))},null,8,["count"]),c(p,{icon:"fa-stop",bgColor:"red",label:"Terminated Customers",count:l.terminate,onClick:t[6]||(t[6]=e=>o.goAction("terminate"))},null,8,["count"])]),s("div",J,[(m(!0),x(D,null,O(l.customers.data,e=>(m(),x("div",{key:e.id,class:d(`p-4 bg-white rounded-lg shadow-md ${o.getRowClass(e)}`)},[s("div",Q,[s("h3",{class:d(["text-sm font-bold",o.getRowClass(e)])},"Customer ID: "+n(e.ftth_id),3),s("div",X,[c(f,{href:i.route("customer.edit",e.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600"},{default:y(()=>t[22]||(t[22]=[s("i",{class:"fas fa-edit"},null,-1)])),_:2},1032,["href"]),s("button",{onClick:k=>o.deleteRow(e),class:"text-red-500 hover:text-red-700"},t[23]||(t[23]=[s("i",{class:"fas fa-trash"},null,-1)]),8,Y)])]),s("p",Z,[t[24]||(t[24]=s("strong",null,"Name:",-1)),r(" "+n(e.name),1)]),s("p",$,[t[25]||(t[25]=s("strong",null,"Package:",-1)),r(" "+n(e.package),1)]),s("p",tt,[t[26]||(t[26]=s("strong",null,"Township:",-1)),r(" "+n(e.township),1)]),s("p",st,[t[27]||(t[27]=s("strong",null,"Status:",-1)),r(" "+n(e.status),1)]),s("p",et,[t[28]||(t[28]=s("strong",null,"Order Date:",-1)),r(" "+n(e.order_date),1)]),s("p",ot,[t[29]||(t[29]=s("strong",null,"Prefer Install Date:",-1)),r(" "+n(e.prefer_install_date),1)])],2))),128))]),l.customers.data?(m(),x("div",at,[s("table",nt,[s("thead",rt,[s("tr",null,[s("th",{onClick:t[7]||(t[7]=e=>o.sortBy("ftth_id")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[30]||(t[30]=r(" ID ")),s("i",{class:d([o.getSortIcon("ftth_id"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[8]||(t[8]=e=>o.sortBy("order_date")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[31]||(t[31]=r(" Order Date ")),s("i",{class:d([o.getSortIcon("order_date"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[9]||(t[9]=e=>o.sortBy("subcom_assign_date")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[32]||(t[32]=r(" Assign Date ")),s("i",{class:d([o.getSortIcon("subcom_assign_date"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[10]||(t[10]=e=>o.sortBy("prefer_install_date")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[33]||(t[33]=r(" Prefer Date ")),s("i",{class:d([o.getSortIcon("prefer_install_date"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[11]||(t[11]=e=>o.sortBy("way_list_date")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[34]||(t[34]=r(" WayList Date ")),s("i",{class:d([o.getSortIcon("way_list_date"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[12]||(t[12]=e=>o.sortBy("name")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[35]||(t[35]=r(" Name ")),s("i",{class:d([o.getSortIcon("name"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[13]||(t[13]=e=>o.sortBy("package")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[36]||(t[36]=r(" Package ")),s("i",{class:d([o.getSortIcon("package"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[14]||(t[14]=e=>o.sortBy("township")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[37]||(t[37]=r(" Township ")),s("i",{class:d([o.getSortIcon("township"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[15]||(t[15]=e=>o.sortBy("installation_status")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[38]||(t[38]=r(" Installation Status ")),s("i",{class:d([o.getSortIcon("installation_status"),"fas fa-sort ml-1"])},null,2)]),s("th",{onClick:t[16]||(t[16]=e=>o.sortBy("status")),class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100"},[t[39]||(t[39]=r(" Status ")),s("i",{class:d([o.getSortIcon("status"),"fas fa-sort ml-1"])},null,2)]),s("th",lt,[s("a",{onClick:t[17]||(t[17]=(...e)=>o.goAll&&o.goAll(...e)),class:"cursor-pointer text-gray-200 hover:text-gray-500"},t[40]||(t[40]=[s("i",{class:"fas fa-undo"},null,-1)]))])])]),s("tbody",it,[(m(!0),x(D,null,O(l.customers.data,e=>{var k,w;return m(),x("tr",{key:e.id,class:d(o.getRowClass(e))},[s("td",dt,n(e.ftth_id),1),s("td",ut,n(e.order_date),1),s("td",mt,n(e.subcom_assign_date),1),s("td",ct,n(e.prefer_install_date),1),s("td",gt,n(e.way_list_date),1),s("td",xt,n(e.name),1),s("td",ft,n(e.package.name),1),s("td",pt,n(e.township.name),1),s("td",yt,n(e.installation_status?e.installation_status.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):""),1),s("td",vt,n(e.status.name),1),s("td",bt,[c(f,{href:i.route("customer.edit",e.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600 mr-2"},{default:y(()=>t[41]||(t[41]=[s("i",{class:"fas fa-folder"},null,-1)])),_:2},1032,["href"]),(w=(k=l.user)==null?void 0:k.role)!=null&&w.delete_customer?(m(),x("span",ht,[c(f,{href:"#",onClick:a=>o.deleteRow(e),class:"text-yellow-600 hover:text-yellow-900 ml-2"},{default:y(()=>t[42]||(t[42]=[s("i",{class:"fas fa-trash"},null,-1)])),_:2},1032,["onClick"])])):h("",!0)])],2)}),128))])])])):h("",!0),l.customers.total?(m(),x("span",kt,n(l.customers.data.length)+" Customers in Current Page. Total Number of Customers: "+n(l.customers.total),1)):h("",!0),l.customers.links?(m(),A(S,{key:2,class:"mt-6",links:l.customers.links},null,8,["links"])):h("",!0)])])]),_:1})}const Dt=M(F,[["render",_t]]);export{Dt as default};
