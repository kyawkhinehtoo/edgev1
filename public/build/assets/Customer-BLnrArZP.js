import{A as I}from"./AppLayout-BZ3UfX5C.js";import{P}from"./Pagination-Bka6VJ1q.js";import{A as L,C as B}from"./Card-BXvt-b_S.js";import{m as E,E as d,r as w,z as v,c as A,w as x,N as g,o as r,a as e,j as O,k as V,O as G,i as M,f as m,n as C,e as p,A as U,b as c,d as u,g as T,F as D,t as a}from"./app-jvevrBWz.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-BTHkLhSF.js";import"./main-B89VYyI5.js";import"./vue3-multiselect.umd.min-C3H6R8Qp.js";const z={components:{AppLayout:I,Pagination:P,AdvanceSearch:L,Card:B,Link:E},props:{customers:Object,active:Number,suspense:Number,installation_request:Number,terminate:Number,customers:Object,packages:Object,package_speed:Object,partners:Object,townships:Object,status:Object,errors:Object,dn:Object,radius:Boolean,user:Object,isps:Object,installationTeams:Object,onuSerials:Object},setup(l){d("packages",l.packages),d("partners",l.partners),d("townships",l.townships),d("status",l.status),d("dn",l.dn),d("package_speed",l.package_speed),d("isps",l.isps),d("installationTeams",l.installationTeams),d("onuSerials",l.onuSerials),d("user",l.user);const t=w(""),n=w(!1);return{search:t,show_search:n,toggleAdv:()=>n.value=!n.value,searchTsp:()=>g.post("/customer/search",{keyword:t.value},{preserveState:!0}),goSearch:i=>g.post("/customer/search",i,{preserveState:!0}),goAction:i=>i==="to_install"?g.post("/customer/search",{status:1},{preserveState:!0}):g.post("/customer/search",{status_type:i},{preserveState:!0}),goAll:()=>g.post("/customer/search",{status:0},{preserveState:!0}),deleteRow:i=>{confirm("Are you sure you want to delete?")&&g.post(`/customer/${i.id}`,{_method:"DELETE"})},getRowClass:i=>i.status.color?`text-${i.status.color}`:""}}},F={class:"py-2"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"relative mb-2"},J={class:"flex justify-between items-center mb-2 px-1 md:px-0"},Q={class:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 gap-2 mb-4"},W={class:"grid gap-4 sm:hidden"},X={class:"flex justify-between items-center mb-2"},Y={class:"flex space-x-2"},Z=["onClick"],$={class:"text-sm text-gray-600"},tt={class:"text-sm text-gray-600"},et={class:"text-sm text-gray-600"},st={class:"text-sm text-gray-600"},ot={class:"text-sm text-gray-600"},at={class:"text-sm text-gray-600"},nt={class:"text-sm text-gray-600"},lt={key:0,class:"hidden sm:block bg-white shadow-xl sm:rounded-lg overflow-auto"},rt={class:"min-w-full divide-y divide-gray-200"},it={class:"bg-gray-50"},dt={key:0,class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},ut={class:"px-3 py-3"},mt={class:"bg-white divide-y divide-gray-200"},pt={class:"px-3 py-3 text-xs font-medium"},ct={class:"px-3 py-3 text-xs font-medium"},xt={class:"px-3 py-3 text-xs font-medium"},gt={class:"px-3 py-3 text-xs font-medium"},ft={class:"px-3 py-3 text-xs font-medium"},yt={class:"px-3 py-3 text-xs font-medium"},ht={class:"px-3 py-3 text-xs font-medium"},bt={class:"px-3 py-3 text-xs font-medium"},_t={key:0,class:"px-3 py-3 text-xs font-medium"},vt={class:"px-3 py-3 text-xs font-medium"},kt={class:"px-3 py-3 text-right"},Ct={key:0},At={key:1,class:"block mt-4 text-xs text-gray-600"};function St(l,t,n,o,N,R){const f=v("Link"),S=v("advance-search"),y=v("Card"),j=v("pagination"),i=v("app-layout");return r(),A(i,null,{header:x(()=>t[8]||(t[8]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"Customer Database ",-1)])),default:x(()=>[e("div",F,[e("div",K,[e("div",H,[t[9]||(t[9]=e("span",{class:"absolute left-3 top-3 text-blueGray-300"},[e("i",{class:"fas fa-search"})],-1)),O(e("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>o.search=s),onKeyup:t[1]||(t[1]=G((...s)=>o.searchTsp&&o.searchTsp(...s),["enter"])),placeholder:"Search here...",class:"w-full md:w-64 pl-10 py-2.5 border-gray-300 rounded shadow text-sm text-blueGray-600 bg-white placeholder-blueGray-300"},null,544),[[V,o.search]])]),e("div",J,[e("a",{href:"#",class:"font-semibold text-xs text-gray-600",onClick:t[2]||(t[2]=M((...s)=>o.toggleAdv&&o.toggleAdv(...s),["prevent"]))},[t[10]||(t[10]=m(" Advance Search ")),e("i",{class:C([o.show_search?"fas fa-chevron-up":"fas fa-chevron-down","ml-2 text-blueGray-400"])},null,2)]),l.$page.props.login_type=="internal"||l.$page.props.login_type=="isp"?(r(),A(f,{key:0,href:"/customer/create",method:"get",as:"button",class:"px-4 py-2 bg-gray-800 text-white rounded-md text-xs font-semibold hover:bg-gray-700"},{default:x(()=>t[11]||(t[11]=[m(" Create ")])),_:1})):p("",!0)]),O(e("div",null,[c(S,{onSearch_parameter:o.goSearch},null,8,["onSearch_parameter"])],512),[[U,o.show_search]]),e("div",Q,[c(y,{icon:"fa-users",bgColor:"blue",label:"Active Customers",count:n.active,onClick:t[3]||(t[3]=s=>o.goAction("active"))},null,8,["count"]),c(y,{icon:"fa-chart-line",bgColor:"green",label:"To Install",count:n.installation_request,onClick:t[4]||(t[4]=s=>o.goAction("to_install"))},null,8,["count"]),c(y,{icon:"fa-circle-pause",bgColor:"yellow",label:"Suspended Customers",count:n.suspense,onClick:t[5]||(t[5]=s=>o.goAction("suspense"))},null,8,["count"]),c(y,{icon:"fa-stop",bgColor:"red",label:"Terminated Customers",count:n.terminate,onClick:t[6]||(t[6]=s=>o.goAction("terminate"))},null,8,["count"])]),e("div",W,[(r(!0),u(D,null,T(n.customers.data,s=>{var h,b,_;return r(),u("div",{key:s.id,class:C(`p-4 bg-white rounded-lg shadow-md ${o.getRowClass(s)}`)},[e("div",X,[e("h3",{class:C(["text-sm font-bold",o.getRowClass(s)])},"UID: "+a(s.ftth_id),3),e("div",Y,[c(f,{href:l.route("customer.edit",s.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600"},{default:x(()=>t[12]||(t[12]=[e("i",{class:"fas fa-edit"},null,-1)])),_:2},1032,["href"]),(b=(h=n.user)==null?void 0:h.role)!=null&&b.delete_customer?(r(),u("button",{key:0,onClick:k=>o.deleteRow(s),class:"text-red-500 hover:text-red-700"},t[13]||(t[13]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Z)):p("",!0)])]),e("p",$,[t[14]||(t[14]=e("strong",null,"CID:",-1)),m(" "+a(s.isp_ftth_id),1)]),e("p",tt,[t[15]||(t[15]=e("strong",null,"Name:",-1)),m(" "+a(s.name),1)]),e("p",et,[t[16]||(t[16]=e("strong",null,"Package:",-1)),m(" "+a(s.bandwidth)+" Mbps",1)]),e("p",st,[t[17]||(t[17]=e("strong",null,"Township:",-1)),m(" "+a((_=s.current_address)==null?void 0:_.township.name),1)]),e("p",ot,[t[18]||(t[18]=e("strong",null,"Status:",-1)),m(" "+a(s.status.name),1)]),e("p",at,[t[19]||(t[19]=e("strong",null,"Order Date:",-1)),m(" "+a(s.order_date),1)]),e("p",nt,[t[20]||(t[20]=e("strong",null,"Prefer Install Date:",-1)),m(" "+a(s.prefer_install_date),1)])],2)}),128))]),n.customers.data?(r(),u("div",lt,[e("table",rt,[e("thead",it,[e("tr",null,[t[22]||(t[22]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"UID",-1)),t[23]||(t[23]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"CID",-1)),t[24]||(t[24]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Order Date",-1)),t[25]||(t[25]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Assign Date",-1)),t[26]||(t[26]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Prefer Date",-1)),t[27]||(t[27]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Name",-1)),t[28]||(t[28]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Package",-1)),t[29]||(t[29]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Township",-1)),l.$page.props.user.user_type!="isp"?(r(),u("th",dt,"Installation Status")):p("",!0),t[30]||(t[30]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status",-1)),e("th",ut,[e("a",{onClick:t[7]||(t[7]=(...s)=>o.goAll&&o.goAll(...s)),class:"cursor-pointer text-gray-200 hover:text-gray-500"},t[21]||(t[21]=[e("i",{class:"fas fa-undo"},null,-1)]))])])]),e("tbody",mt,[(r(!0),u(D,null,T(n.customers.data,s=>{var h,b,_;return r(),u("tr",{key:s.id,class:C(o.getRowClass(s))},[e("td",pt,a(s.ftth_id),1),e("td",ct,a(s.isp_ftth_id),1),e("td",xt,a(s.order_date),1),e("td",gt,a(s.subcom_assign_date),1),e("td",ft,a(s.prefer_install_date),1),e("td",yt,a(s.name),1),e("td",ht,a(s.bandwidth)+" Mbps",1),e("td",bt,a((h=s.current_address)==null?void 0:h.township.name),1),l.$page.props.user.user_type!="isp"?(r(),u("td",_t,a(s.installation_status?s.installation_status.split("_").map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join(" "):""),1)):p("",!0),e("td",vt,a(s.status.name),1),e("td",kt,[c(f,{href:l.route("customer.edit",s==null?void 0:s.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600 mr-2"},{default:x(()=>t[31]||(t[31]=[e("i",{class:"fas fa-folder"},null,-1)])),_:2},1032,["href"]),(_=(b=n.user)==null?void 0:b.role)!=null&&_.delete_customer?(r(),u("span",Ct,[c(f,{href:"#",onClick:k=>o.deleteRow(s),class:"text-yellow-600 hover:text-yellow-900 ml-2"},{default:x(()=>t[32]||(t[32]=[e("i",{class:"fas fa-trash"},null,-1)])),_:2},1032,["onClick"])])):p("",!0)])],2)}),128))])])])):p("",!0),n.customers.total?(r(),u("span",At,a(n.customers.data.length)+" Customers in Current Page. Total Number of Customers: "+a(n.customers.total),1)):p("",!0),n.customers.links?(r(),A(j,{key:2,class:"mt-6",links:n.customers.links},null,8,["links"])):p("",!0)])])]),_:1})}const Pt=q(z,[["render",St]]);export{Pt as default};
