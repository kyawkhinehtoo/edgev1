import{E as f,d as b,a as t,t as e,s as d,v as a,e as _,T as g,m as c,o as y}from"./app-DzBQ2I0X.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const v=f({props:{show:Boolean,invoice:{type:Object,default:()=>({})}},emits:["close"],setup(i,{emit:o}){const n=g({id:"",bill_number:"",isp_name:"",total_mrc_amount:0,total_installation_amount:0,total_mrc_customer:0,total_new_customer:0,additional_description:"",additional_fees:0,sub_total:0,discount_amount:0,tax_percent:0,tax_amount:0,total_amount:0,issue_date:"",due_date:""}),l=()=>{n.sub_total=Number(n.total_mrc_amount)+Number(n.total_installation_amount)+Number(n.additional_fees),n.tax_amount=(n.sub_total-Number(n.discount_amount))*Number(n.tax_percent)/100,n.total_amount=n.sub_total-Number(n.discount_amount)+Number(n.tax_amount)};c(()=>i.invoice,s=>{var m,p;s&&(n.id=s.id,n.bill_number=(m=s.bill)==null?void 0:m.bill_number,n.isp_name=(p=s.isp)==null?void 0:p.name,n.total_mrc_amount=s.total_mrc_amount,n.total_installation_amount=s.total_installation_amount,n.total_mrc_customer=s.total_mrc_customer,n.total_new_customer=s.total_new_customer,n.additional_description=s.additional_description,n.additional_fees=s.additional_fees,n.sub_total=s.sub_total,n.discount_amount=s.discount_amount||0,n.tax_percent=s.tax_percent||0,n.tax_amount=s.tax_amount||0,n.total_amount=s.total_amount,n.issue_date=s.issue_date,n.due_date=s.due_date,l())},{immediate:!0,deep:!0});const u=()=>{n.put(route("invoice.update",n.id),{onSuccess:()=>r()})},r=()=>{n.reset(),o("close")};return{form:n,submit:u,closeModal:r,updateCalculations:l}}}),w={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},h={class:"mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:max-w-4xl sm:mx-auto"},C={class:"p-8"},N={class:"border-b pb-4 mb-6"},I={class:"grid grid-cols-2 gap-8 mt-4"},$={class:"font-medium mt-1"},D={class:"text-sm text-gray-500"},j={class:"text-right"},k={class:"mb-2"},B={class:"mb-8"},T={class:"w-full"},U={class:"border-b"},M={class:"py-3 px-2 text-right"},A={class:"py-3 px-2 text-right"},E={class:"border-b"},S={class:"py-3 px-2 text-right"},O={class:"py-3 px-2 text-right"},z={class:"border-b"},R={class:"py-3 px-2"},q={class:"py-3 px-2"},F={class:"bg-gray-50 p-4 rounded-lg"},G={class:"grid grid-cols-2 gap-4"},H={class:"space-y-3"},J={class:"flex justify-between"},K={class:"flex justify-between items-center"},L={class:"flex justify-between items-center"},P={class:"flex justify-between"},Q={class:"flex justify-between pt-3 border-t"},W={class:"font-bold"},X={class:"mt-8 flex justify-end space-x-3"},Y=["disabled"];function Z(i,o,n,l,u,r){return i.show?(y(),b("div",w,[o[25]||(o[25]=t("div",{class:"fixed inset-0 transform transition-all"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t("div",h,[t("div",C,[t("div",N,[o[14]||(o[14]=t("h1",{class:"text-2xl font-bold text-gray-800"},"INVOICE",-1)),t("div",I,[t("div",null,[o[11]||(o[11]=t("p",{class:"text-gray-600"},"Bill To:",-1)),t("p",$,e(i.form.isp_name),1),t("p",D,"Bill Number: "+e(i.form.bill_number),1)]),t("div",j,[t("div",k,[o[12]||(o[12]=t("label",{class:"block text-sm text-gray-600"},"Issue Date:",-1)),d(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>i.form.issue_date=s),type:"date",class:"mt-1 w-48 border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[a,i.form.issue_date]])]),t("div",null,[o[13]||(o[13]=t("label",{class:"block text-sm text-gray-600"},"Due Date:",-1)),d(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>i.form.due_date=s),type:"date",class:"mt-1 w-48 border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[a,i.form.due_date]])])])])]),t("div",B,[t("table",T,[o[18]||(o[18]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"text-left py-3 px-2"},"Description"),t("th",{class:"text-right py-3 px-2 w-32"},"Customers"),t("th",{class:"text-right py-3 px-2 w-32"},"Amount")])],-1)),t("tbody",null,[t("tr",U,[o[15]||(o[15]=t("td",{class:"py-3 px-2"},"Monthly Recurring Charges",-1)),t("td",M,e(i.form.total_mrc_customer),1),t("td",A,"$"+e(i.form.total_mrc_amount),1)]),t("tr",E,[o[16]||(o[16]=t("td",{class:"py-3 px-2"},"New Installation Charges",-1)),t("td",S,e(i.form.total_new_customer),1),t("td",O,"$"+e(i.form.total_installation_amount),1)]),t("tr",z,[t("td",R,[d(t("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>i.form.additional_description=s),type:"text",placeholder:"Additional Description",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[a,i.form.additional_description]])]),o[17]||(o[17]=t("td",{class:"py-3 px-2"},null,-1)),t("td",q,[d(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>i.form.additional_fees=s),type:"number",step:"0.01",class:"w-full text-right border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",onInput:o[4]||(o[4]=(...s)=>i.updateCalculations&&i.updateCalculations(...s))},null,544),[[a,i.form.additional_fees]])])])])])]),t("div",F,[t("div",G,[o[24]||(o[24]=t("div",null,null,-1)),t("div",H,[t("div",J,[o[19]||(o[19]=t("span",{class:"font-medium"},"Subtotal:",-1)),t("span",null,"$"+e(i.form.sub_total),1)]),t("div",K,[o[20]||(o[20]=t("span",{class:"font-medium"},"Discount:",-1)),d(t("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>i.form.discount_amount=s),type:"number",step:"0.01",class:"w-32 text-right border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",onInput:o[6]||(o[6]=(...s)=>i.updateCalculations&&i.updateCalculations(...s))},null,544),[[a,i.form.discount_amount]])]),t("div",L,[o[21]||(o[21]=t("span",{class:"font-medium"},"Tax (%):",-1)),d(t("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>i.form.tax_percent=s),type:"number",step:"0.01",class:"w-32 text-right border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",onInput:o[8]||(o[8]=(...s)=>i.updateCalculations&&i.updateCalculations(...s))},null,544),[[a,i.form.tax_percent]])]),t("div",P,[o[22]||(o[22]=t("span",{class:"font-medium"},"Tax Amount:",-1)),t("span",null,"$"+e(i.form.tax_amount),1)]),t("div",Q,[o[23]||(o[23]=t("span",{class:"font-bold"},"Total Amount:",-1)),t("span",W,"$"+e(i.form.total_amount),1)])])])]),t("div",X,[t("button",{type:"button",class:"px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-sm text-gray-700 hover:bg-gray-50",onClick:o[9]||(o[9]=(...s)=>i.closeModal&&i.closeModal(...s))}," Cancel "),t("button",{onClick:o[10]||(o[10]=(...s)=>i.submit&&i.submit(...s)),class:"px-4 py-2 bg-blue-600 text-white rounded-md font-semibold text-sm hover:bg-blue-700",disabled:i.form.processing}," Save Invoice ",8,Y)])])])])):_("",!0)}const ot=x(v,[["render",Z]]);export{ot as default};
