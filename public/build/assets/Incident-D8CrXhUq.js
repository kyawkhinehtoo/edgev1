import{A as ye,C as be,N as xe}from"./NoData-BpA49_bZ.js";import{_ as _e}from"./InputLabel-BYvgWJhf.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as C,y as Z,o,d as l,a as e,Q as re,F as M,g as ee,e as i,t as c,D as P,T as ie,B as de,z as F,j as _,k,b as I,v as Y,N as E,x as ce,f as O,M as J,E as B,c as q,w as ve,O as ke,n as L,P as se,A as we}from"./app-DWM9PIjZ.js";import{M as ne}from"./vue3-multiselect.umd.min-eWQ8nUQ3.js";import{U as he}from"./Upload-BHtFIQVU.js";import{P as Ce}from"./Pagination-CJSCfioj.js";import{V as Ve}from"./main-DacS0xqm.js";import"./DropdownLink-Be0WxXd3.js";const Se={components:{Label:_e},name:"IncidentAlert",emits:["show_edit"],setup(r,t){let g=C("Loading .."),s=C("Loading ..");const U=async()=>{let h="/incidentOverdue";console.log(h);try{return await(await fetch(h)).json()}catch(w){console.error(w)}},V=async()=>{let h="/incidentRemain";console.log(h);try{return await(await fetch(h)).json()}catch(w){console.error(w)}};function x(h){let w=h%3600/60,A=h%(24*3600)/3600,f=h/(24*3600),m=null;if(h>=86400){let d=f-Math.floor(f);f=f-d,d=d*24;let N=d-Math.floor(d);d=d-N,d!=0?m=f+" d, "+d+" hr":m=f+" d"}else if(h>1440){let d=A-Math.floor(A),N=A-d;d=Math.round(d*60),N!=0?m=N+" hr,"+d+" m":m=d+" m"}else m=Math.round(w)+" m";return m}function p(h){let w=2592e3;return w-h/100*w}function T(h){t.emit("show_edit",h)}function u(){U().then(h=>{g.value=h}),V().then(h=>{s.value=h})}return Z(()=>{u()}),{bundle:g,remain:s,getList:u,getDay:x,percenttosecond:p,doEdit:T}}},Te={class:"w-full flex justify-between text-sm px-2"},De={key:0},Ue={class:"min-w-full divide-y divide-gray-200 mt-1 shadow-xl"},je={class:"bg-white rounded-b-lg divide-y divide-gray-200 text-sm text-center max-h-80 overflow-auto block scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white w-full"},Ae=["onClick"],Ie={class:"px-2 py-2 whitespace-nowrap col-span-1"},Oe={class:"px-2 py-2 whitespace-nowrap col-span-1"},Re={class:"px-2 py-2 whitespace-nowrap col-span-1"};function Pe(r,t,g,s,U,V){return o(),l(M,null,[e("div",Te,[t[2]||(t[2]=e("label",{class:"mt-5 uppercase text-md"}," Ticket Overdue Hours Chart",-1)),e("button",{onClick:t[0]||(t[0]=x=>s.getList()),class:"my-2 ml-2 align-right text-center items-center px-3 py-2 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[1]||(t[1]=[e("i",{class:"fas fa-sync opacity-75 text-sm"},null,-1)]))]),s.bundle?(o(),l("div",De,[t[4]||(t[4]=e("h2",{class:"m-2 uppercase text-md"},null,-1)),e("div",Ue,[t[3]||(t[3]=re('<div class="bg-gray-50 text-center inline-grid grid-cols-4 gap-2rounded-t-lg w-full" data-v-11ba7e6d><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Ticket ID</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>SLA Overdue</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Actual Hrs</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Based SLA</div></div>',1)),e("div",je,[(o(!0),l(M,null,ee(s.bundle,x=>(o(),l("div",{key:x.id,class:"cursor-pointer inline-grid grid-cols-4 gap-2 w-full"},[e("div",{class:"px-2 py-2 whitespace-nowrap col-span-1",onClick:p=>s.doEdit(x)},c(x.code),9,Ae),e("div",Ie,c(s.getDay(x.over)),1),e("div",Oe,c(s.getDay(x.diff)),1),e("div",Re,c(x.percentage),1)]))),128))])])])):i("",!0)],64)}const Me=X(Se,[["render",Pe],["__scopeId","data-v-11ba7e6d"]]),Ne={name:"IncidentDetail",emits:["loading"],emits:["selected_id"],components:{Multiselect:ne},props:{errors:Object,data:Object,parentform:Object},setup(r,t){const g=P("noc"),s=P("team"),U=P("user"),V=P("incidents"),x=P("customers"),p=P("townships"),T=P("packages"),u=P("parent_form");let h=C(),w=C(!1),A=C(!1),f=C(null);const m=ie({id:null,code:null,priority:"normal",customer_id:null,incharge_id:s.filter(y=>y.id==U.id)[0],type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null});function d(){f.value=null,w.value=!1,m.id="",m.code="",m.priority="normal",m.customer_id="",m.incharge_id=s.filter(y=>y.id==U.id)[0],m.type="default",m.topic="",m.status=1,m.start_date="",m.end_date="",m.new_address="",m.new_township="",m.latitude="",m.longitude="",m.package_id="",m.description="",m.date="",m.time="",m.close_date="",m.close_time="",m.resolved_date="",m.resolved_time=""}function N(){w.value!=!0?(m._method="POST",E.post("/incident",m,{preserveState:!0,onSuccess:y=>{f.value=y.props.response.id;let j=V.data.filter(R=>R.id==f.value)[0];w.value=!0,t.emit("selected_id",f.value),t.emit("loading",!1),j!==void 0&&(console.log("response is : "+j),H(j)),Toast.fire({icon:"success",title:y.props.flash.message})},onError:y=>{t.emit("loading",!1),console.log("error ..")},onStart:y=>{t.emit("loading",!0)}})):(m._method="PUT",E.post("/incident/"+m.id,m,{onSuccess:y=>{Toast.fire({icon:"success",title:y.props.flash.message}),t.emit("loading",!1)},onError:y=>{t.emit("loading",!1),console.log("error .."+y)},onStart:y=>{t.emit("loading",!0)}}))}function H(y){let j=null;f.value=y.id,w.value=!0,y.location!=null&&(j=y.location.split(",",2),m.latitude=j[0],m.longitude=j[1]),m.id=y.id,m.code=y.code,m.priority=y.priority,m.customer_id=x.filter(R=>R.id==y.customer_id)[0],m.incharge_id=g.filter(R=>R.id==y.incharge_id)[0],m.type=y.type,m.topic=y.topic,m.status=y.status,m.start_date=y.start_date,m.end_date=y.end_date,m.new_address=y.new_address,m.new_township=p.filter(R=>R.id==y.new_township)[0],m.package_id=T.filter(R=>R.id==y.package_id)[0],m.description=y.description,m.date=y.date,m.time=y.time,m.close_date=y.close_date,m.close_time=y.close_time,m.resolved_date=y.resolved_date,m.resolved_time=y.resolved_time}function W(y){w.value=!0,m.priority=y.priority}function K(y){let j="Open";return y==1?j="Open":y==2?j="Escalated":y==3?j="Closed":y==4?j="Deleted":y==5&&(j="Resolved"),j}function n(y){confirm("Are you sure want to remove?")&&(m._method="PUT",m.status=4,E.post("/incident/"+m.id,m,{onSuccess:j=>{Toast.fire({icon:"success",title:j.props.flash.message})},onError:j=>{console.log("error .."+j)}}))}const z=async()=>{let y="/getIncident/"+r.data;console.log(y);try{return t.emit("loading",!0),await(await fetch(y)).json()}catch(j){t.emit("loading",!1),console.error(j)}},G=()=>{z().then(y=>{h.value=y})};return Z(()=>{console.log("Incident Detail - onMounted"),r.data&&(f.value=r.data,z().then(y=>{t.emit("loading",!1),y!==void 0?(console.log("appending response"),H(y),console.log("show parent form"),console.log(u),u&&W(u)):console.log("not appending response")})),T.map(function(y){return y.item_data=`${y.speed} Mbps - ${y.name} - ${y.contract_period} Months`})}),de(()=>{console.log("Incident Detail - onUpdated"),T.map(function(y){return y.item_data=`${y.speed} Mbps - ${y.name} - ${y.contract_period} Months`})}),{loading:A,getIncident:z,calculate:G,deleteIncident:n,doSubmit:N,getStatus:K,form:m,clearform:d,customers:x,team:s,townships:p,packages:T,openForm:W,editMode:w,edit:H}}},Le={class:"grid grid-cols-5 gap-2"},Ee={class:"py-2 col-span-2 sm:col-span-2"},ze={class:"mt-1 flex rounded-md shadow-sm"},Be={key:0,class:"mt-2 text-sm text-red-500"},Fe={class:"py-2 col-span-2 sm:col-span-2"},He={class:"mt-1 flex rounded-md shadow-sm"},qe={key:0,class:"mt-2 text-sm text-red-500"},Ye={class:"py-2 col-span-4 sm:col-span-4"},We={key:0,class:"mt-1 flex rounded-md shadow-sm"},Ge={key:1,class:"mt-2 text-sm text-red-500"},Ke={class:"py-2 col-span-4 sm:col-span-4"},Qe={key:0,class:"mt-1 flex rounded-md shadow-sm"},Je={key:1,class:"mt-2 text-sm text-red-500"},Xe={class:"py-2 col-span-4 sm:col-span-4"},Ze={class:"mt-1 flex"},$e={key:0,class:"mt-2 text-sm text-red-500"},et={key:0,class:"py-2 col-span-1 sm:col-span-1"},tt={key:1,class:"py-2 col-span-4 sm:col-span-4"},st={class:"mt-1 flex"},ot={key:0,class:"mt-2 text-sm text-red-500"},lt={class:"py-2 col-span-4 sm:col-span-4"},rt={class:"mt-1 flex"},it={key:0,class:"mt-2 text-sm text-red-500"},nt={key:2,class:"py-2 col-span-1 sm:col-span-1"},at={key:3,class:"py-2 col-span-2 sm:col-span-2"},dt={class:"mt-1 flex rounded-md shadow-sm"},ct={key:0,class:"mt-2 text-sm text-red-500"},mt={key:4,class:"py-2 col-span-2 sm:col-span-2"},pt={class:"mt-1 flex rounded-md shadow-sm"},ut={key:0,class:"mt-2 text-sm text-red-500"},ft={key:5,class:"py-2 col-span-1 sm:col-span-1"},gt={key:6,class:"py-2 col-span-2 sm:col-span-2"},yt={class:"mt-1 flex rounded-md shadow-sm"},bt={key:0,class:"mt-2 text-sm text-red-500"},xt={key:7,class:"py-2 col-span-2 sm:col-span-2"},_t={class:"mt-1 flex rounded-md shadow-sm"},vt={key:0,class:"mt-2 text-sm text-red-500"},kt={key:8,class:"py-2 col-span-1 sm:col-span-1"},wt={key:9,class:"py-2 col-span-4 sm:col-span-4"},ht={class:"grid grid-cols-2 gap-2"},Ct={class:"col-span-1 sm:col-span-1"},Vt={class:"mt-1 flex rounded-md shadow-sm"},St={key:0,class:"mt-2 text-sm text-red-500"},Tt={class:"col-span-1 sm:col-span-1"},Dt={class:"mt-1 flex rounded-md shadow-sm"},Ut={key:0,class:"mt-2 text-sm text-red-500"},jt={key:10,class:"py-2 col-span-1 sm:col-span-1"},At={key:11,class:"py-2 col-span-4 sm:col-span-4"},It={class:"mt-1 flex rounded-md shadow-sm"},Ot={key:0,class:"mt-2 text-sm text-red-500"},Rt={key:12,class:"py-2 col-span-1 sm:col-span-1"},Pt={key:13,class:"py-2 col-span-4 sm:col-span-4"},Mt={class:"mt-1 flex rounded-md shadow-sm"},Nt={key:0,class:"mt-2 text-sm text-red-500"},Lt={key:14,class:"py-2 col-span-1 sm:col-span-1"},Et={key:15,class:"py-2 col-span-4 sm:col-span-4"},zt={class:"mt-1 flex"},Bt={key:0,class:"mt-2 text-sm text-red-500"},Ft={key:16,class:"py-2 col-span-1 sm:col-span-1"},Ht={key:17,class:"py-2 col-span-4 sm:col-span-4"},qt={key:0,class:"mt-1 flex rounded-md shadow-sm"},Yt={key:1,class:"mt-2 text-sm text-red-500"},Wt={key:18,class:"py-2 col-span-1 sm:col-span-1"},Gt={key:19,class:"py-2 col-span-4 sm:col-span-4"},Kt={class:"grid grid-cols-2 gap-2"},Qt={class:"col-span-1 sm:col-span-1"},Jt={class:"mt-1 flex rounded-md shadow-sm"},Xt={key:0,class:"mt-2 text-sm text-red-500"},Zt={class:"col-span-1 sm:col-span-1"},$t={class:"mt-1 flex rounded-md shadow-sm"},es={key:0,class:"mt-2 text-sm text-red-500"},ts={key:20,class:"py-2 col-span-1 sm:col-span-1"},ss={key:21,class:"py-2 col-span-4 sm:col-span-4"},os={class:"mt-1 flex rounded-md shadow-sm"},ls={key:0,class:"mt-2 text-sm text-red-500"},rs={key:22,class:"py-2 col-span-1 sm:col-span-1"},is={key:23,class:"py-2 col-span-4 sm:col-span-4"},ns={key:0,class:"mt-1 flex rounded-md shadow-sm"},as={key:1,class:"mt-2 text-sm text-red-500"},ds={key:24,class:"py-2 col-span-1 sm:col-span-1"},cs={key:25,class:"py-2 col-span-4 sm:col-span-4"},ms={class:"mt-1 flex rounded-md shadow-sm"},ps={key:0,class:"mt-2 text-sm text-red-500"},us={class:"py-2 col-span-4 sm:col-span-4"},fs={class:"mt-1 flex"},gs={key:0,class:"mt-2 text-sm text-red-500"},ys={key:0,class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function bs(r,t,g,s,U,V){const x=F("multiselect");return o(),l(M,null,[e("div",Le,[t[46]||(t[46]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",Ee,[e("div",ze,[_(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=p=>s.form.date=p),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.date]])]),r.$page.props.errors.date?(o(),l("p",Be,c(r.$page.props.errors.date),1)):i("",!0)]),e("div",Fe,[e("div",He,[_(e("input",{type:"time","onUpdate:modelValue":t[1]||(t[1]=p=>s.form.time=p),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.time]])]),r.$page.props.errors.time?(o(),l("p",qe,c(r.$page.props.errors.time),1)):i("",!0)]),t[47]||(t[47]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",Ye,[s.customers.length!==0?(o(),l("div",We,[I(x,{"deselect-label":"Selected already",options:s.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer_id,"onUpdate:modelValue":t[2]||(t[2]=p=>s.form.customer_id=p),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.customer?(o(),l("p",Ge,c(r.$page.props.errors.customer),1)):i("",!0)]),t[48]||(t[48]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",Ke,[s.team.length!==0?(o(),l("div",Qe,[I(x,{"deselect-label":"Selected already",options:s.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[3]||(t[3]=p=>s.form.incharge_id=p),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.incharge?(o(),l("p",Je,c(r.$page.props.errors.incharge),1)):i("",!0)]),t[49]||(t[49]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",Xe,[e("div",Ze,[_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=p=>s.form.type=p),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:""},t[23]||(t[23]=[re('<option value="default">Please Choose Ticket Type</option><option value="service_complaint">Service Complaint</option><option value="gaming_issue">Gaming Issue</option><option value="relocation">Relocation</option><option value="plan_change">Plan Change</option><option value="information_update">Information Update</option><option value="suspension">Suspension</option><option value="resume">Resume</option><option value="termination">Termination</option>',9)]),512),[[Y,s.form.type]])]),r.$page.props.errors.type?(o(),l("p",$e,c(r.$page.props.errors.type),1)):i("",!0)]),s.form.type=="service_complaint"?(o(),l("div",et,t[24]||(t[24]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):i("",!0),s.form.type=="service_complaint"?(o(),l("div",tt,[e("div",st,[_(e("select",{"onUpdate:modelValue":t[5]||(t[5]=p=>s.form.topic=p),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[25]||(t[25]=[re('<option value="no_internet">No Internet</option><option value="los_redlight">LOS Redlight</option><option value="slow_performance">Slow Performance</option><option value="wifi_issue">Wifi Issue</option><option value="onu_issue">ONU Issue</option><option value="password_change">Password Changed</option><option value="other">Other</option>',7)]),512),[[Y,s.form.topic]])]),r.$page.props.errors.topic?(o(),l("p",ot,c(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),t[50]||(t[50]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",lt,[e("div",rt,[_(e("select",{"onUpdate:modelValue":t[6]||(t[6]=p=>s.form.status=p),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[26]||(t[26]=[e("option",{value:"1"},"Open",-1),e("option",{value:"2",disabled:""},"Escalated",-1),e("option",{value:"5",disabled:""},"Resolved",-1),e("option",{value:"3"},"Closed",-1)]),512),[[Y,s.form.status]])]),r.$page.props.errors.status?(o(),l("p",it,c(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==3?(o(),l("div",nt,t[27]||(t[27]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):i("",!0),s.form.status==3?(o(),l("div",at,[e("div",dt,[_(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=p=>s.form.close_date=p),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.close_date]])]),r.$page.props.errors.close_date?(o(),l("p",ct,c(r.$page.props.errors.close_date),1)):i("",!0)])):i("",!0),s.form.status==3?(o(),l("div",mt,[e("div",pt,[_(e("input",{type:"time","onUpdate:modelValue":t[8]||(t[8]=p=>s.form.close_time=p),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.close_time]])]),r.$page.props.errors.close_time?(o(),l("p",ut,c(r.$page.props.errors.close_time),1)):i("",!0)])):i("",!0),s.form.status==5?(o(),l("div",ft,t[28]||(t[28]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):i("",!0),s.form.status==5?(o(),l("div",gt,[e("div",yt,[_(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=p=>s.form.resolved_date=p),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.resolved_date]])]),r.$page.props.errors.resolved_date?(o(),l("p",bt,c(r.$page.props.errors.resolved_date),1)):i("",!0)])):i("",!0),s.form.status==5?(o(),l("div",xt,[e("div",_t,[_(e("input",{type:"time","onUpdate:modelValue":t[10]||(t[10]=p=>s.form.resolved_time=p),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.resolved_time]])]),r.$page.props.errors.resolved_time?(o(),l("p",vt,c(r.$page.props.errors.resolved_time),1)):i("",!0)])):i("",!0),s.form.type=="suspension"?(o(),l("div",kt,t[29]||(t[29]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense Period : ")],-1)]))):i("",!0),s.form.type=="suspension"?(o(),l("div",wt,[e("div",ht,[e("div",Ct,[e("div",Vt,[t[30]||(t[30]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",St,c(r.$page.props.errors.start_date),1)):i("",!0)]),e("div",Tt,[e("div",Dt,[t[31]||(t[31]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=p=>s.form.end_date=p),name:"end_date",id:"end_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.end_date]])]),r.$page.props.errors.end_date?(o(),l("p",Ut,c(r.$page.props.errors.end_date),1)):i("",!0)])])])):i("",!0),s.form.type=="resume"?(o(),l("div",jt,t[32]||(t[32]=[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")],-1)]))):i("",!0),s.form.type=="resume"?(o(),l("div",At,[e("div",It,[t[33]||(t[33]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[13]||(t[13]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.resume?(o(),l("p",Ot,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="termination"?(o(),l("div",Rt,t[34]||(t[34]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):i("",!0),s.form.type=="termination"?(o(),l("div",Pt,[e("div",Mt,[t[35]||(t[35]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[14]||(t[14]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",Nt,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",Lt,t[36]||(t[36]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Et,[e("div",zt,[_(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=p=>s.form.new_address=p),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[k,s.form.new_address]])]),r.$page.props.errors.new_address?(o(),l("p",Bt,c(r.$page.props.errors.new_address),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",Ft,t[37]||(t[37]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Ht,[s.townships.length!==0?(o(),l("div",qt,[I(x,{"deselect-label":"Selected already",options:s.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[16]||(t[16]=p=>s.form.new_township=p),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.new_township?(o(),l("p",Yt,c(r.$page.props.errors.new_township),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",Wt,t[38]||(t[38]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Gt,[e("div",Kt,[e("div",Qt,[e("div",Jt,[t[39]||(t[39]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=p=>s.form.latitude=p),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude"},null,512),[[k,s.form.latitude]])]),r.$page.props.errors.latitude?(o(),l("p",Xt,c(r.$page.props.errors.latitude),1)):i("",!0)]),e("div",Zt,[e("div",$t,[t[40]||(t[40]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=p=>s.form.longitude=p),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude"},null,512),[[k,s.form.longitude]])]),r.$page.props.errors.longitude?(o(),l("p",es,c(r.$page.props.errors.longitude),1)):i("",!0)])])])):i("",!0),s.form.type=="relocation"?(o(),l("div",ts,t[41]||(t[41]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",ss,[e("div",os,[t[42]||(t[42]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[19]||(t[19]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",ls,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(o(),l("div",rs,t[43]||(t[43]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_package",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Package: ")],-1)]))):i("",!0),s.form.type=="plan_change"?(o(),l("div",is,[s.packages.length!==0?(o(),l("div",ns,[I(x,{"deselect-label":"Selected already",options:s.packages,"track-by":"id",label:"item_data",modelValue:s.form.package_id,"onUpdate:modelValue":t[20]||(t[20]=p=>s.form.package_id=p),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.package?(o(),l("p",as,c(r.$page.props.errors.package),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(o(),l("div",ds,t[44]||(t[44]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="plan_change"?(o(),l("div",cs,[e("div",ms,[t[45]||(t[45]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[21]||(t[21]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",ps,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),t[51]||(t[51]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",us,[e("div",fs,[_(e("textarea",{"onUpdate:modelValue":t[22]||(t[22]=p=>s.form.description=p),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[k,s.form.description]])]),r.$page.props.errors.description?(o(),l("p",gs,c(r.$page.props.errors.description),1)):i("",!0)])]),s.loading?(o(),l("div",ys,t[52]||(t[52]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):i("",!0)],64)}const xs=X(Ne,[["render",bs]]),_s={name:"Task",components:{Multiselect:ne},props:["data","errors"],setup(r){const t=P("noc"),g=P("subcons"),s=P("write_permission"),U=P("read_permission"),V=P("task_write"),x=P("pendingRootCause");P("subRootCause");const p=C({});let T=C([]),u=C(),h=C(!1),w=C(!1),A=C(!1);const f=ie({id:null,assigned:null,target:null,status:1,description:null,comment:null,incident_id:null,root_causes:null,sub_root_causes:null,root_causes_id:null,sub_root_causes_id:null,complete_date:null});function m(){w.value=!0,f.incident_id=r.data}function d(){f.id=null,f.assigned=null,f.target=null,f.status=1,f.description=null,f.comment=null,f.incident_id=r.data,f.root_causes=null,f.sub_root_causes=null,f.root_causes_id=null,f.sub_root_causes_id=null,f.complete_date=null}function N(b){console.log(b),f.id=b.id,f.assigned=g.filter(S=>S.id==b.assigned)[0],f.description=b.description,f.incident_id=b.incident_id,f.status=b.status,f.target=b.target,f.comment=b.comment,f.root_causes=b.root_causes_id?x.filter(S=>S.id==b.root_causes_id)[0]:null,f.sub_root_causes="",f.root_causes_id=b.root_causes_id,f.sub_root_causes_id=b.sub_root_causes_id,f.complete_date=b.complete_date,A.value=!0,w.value=!0}function H(b){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(S=>{S.isConfirmed?W(b):Toast.fire("Your data is safe!")})}function W(b){f.id=b.id,f.assigned=g.filter(S=>S.id==b.assigned)[0],f.description=b.description,f.incident_id=b.incident_id,f.status=0,f.target=b.target,A.value=!0,w.value=!1,z()}function K(b){b.status!=2?Toast.fire({title:"Are you sure?",text:"Do you want to mark as completed !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(S=>{S.isConfirmed&&n(b,2)}):Toast.fire({title:"Are you sure?",text:"Do you want to mark as WIP !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(S=>{S.isConfirmed&&n(b,1)})}function n(b,S){f.id=b.id,f.assigned=b.assigned,f.description=b.description,f.incident_id=b.incident_id,f.status=S,f.target=b.target,A.value=!0,w.value=!1,z()}function z(){A.value!=!0?(f._method="POST",E.post("/addTask",f,{preserveState:!0,onSuccess:b=>{w.value=!1,d(),$(),Toast.fire({icon:"success",title:b.props.flash.message})},onError:b=>{console.log("error ..",b)}})):(f._method="PUT",E.post("/editTask/"+f.id,f,{onSuccess:b=>{w.value=!1,A.value=!1,d(),$(),Toast.fire({icon:"success",title:b.props.flash.message}),closeModal()},onError:b=>{p.value=b,console.log("error ..",b)}}))}function G(){w.value=!1,preserveState=!0}const y=async()=>{let b="/getTask/"+r.data;console.log(b);try{return await(await fetch(b)).json()}catch(S){console.error(S)}},j=b=>{let S=g.filter(Q=>Q.id==b)[0];return S?S.name:""};function R(b){let S="WIP";return b==0?S="Deleted":b==1?S="WIP":b==2?S="Completed":b==3&&(S="Pending"),S}const $=()=>{y().then(b=>{u.value=b})};function oe(b){var Q;T.value=[];let S=x.filter(te=>te.id==b.id);T.value=(Q=S[0])==null?void 0:Q.sub_root_causes,f.sub_root_causes_id&&(f.sub_root_causes=T.value.filter(te=>te.id==f.sub_root_causes_id)[0],f.sub_root_causes||(f.sub_root_causes_id=null))}return ce(()=>f.root_causes,b=>{b&&oe(b)}),Z(()=>{console.log(u.value),$()}),{loading:h,task_list:u,edit:w,editMode:A,newTask:m,saveTask:z,cancelTask:G,getName:j,getStatus:R,editTask:N,deleteTask:H,completeTask:K,form:f,noc:t,subcons:g,write_permission:s,read_permission:U,task_write:V,pendingRootCause:x,subRCA:T,formErrors:p}}},vs={class:"flex w-full justify-end"},ks={key:0},ws={key:1},hs={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Cs={key:1},Vs={class:"min-w-full divide-y divide-gray-200"},Ss={class:"bg-white text-sm scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white text-left"},Ts={class:"px-6 py-3 whitespace-nowrap"},Ds={class:"px-6 py-3 whitespace-nowrap"},Us={class:"px-6 py-3 whitespace-nowrap"},js={class:"px-6 py-3 whitespace-nowrap"},As={class:"px-6 py-3 whitespace-nowrap"},Is={class:"px-6 py-3 whitespace-nowrap"},Os={key:0,class:"px-6 py-3 whitespace-nowrap"},Rs=["onClick"],Ps={key:0},Ms=["onClick"],Ns={key:1,class:"px-6 py-3 whitespace-nowrap"},Ls=["onClick"],Es={key:2},zs={class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full"},Bs={class:"py-2 col-span-3 sm:col-span-3"},Fs={class:"flex rounded-md shadow-sm"},Hs={key:0,class:"flex rounded-md shadow-sm w-full"},qs={key:1,class:"mt-2 text-sm text-red-500"},Ys={class:"py-2 col-span-3 sm:col-span-3"},Ws={class:"flex rounded-md shadow-sm"},Gs={key:0,class:"mt-2 text-sm text-red-500"},Ks={class:"py-2 col-span-3 sm:col-span-3"},Qs={class:"flex rounded-md shadow-sm"},Js={key:0,class:"mt-2 text-sm text-red-500"},Xs={class:"py-2 col-span-3 sm:col-span-3"},Zs={class:"flex rounded-md shadow-sm"},$s={class:"flex gap-4"},eo={class:"inline-flex items-center"},to={class:"inline-flex items-center"},so={class:"inline-flex items-center"},oo={class:"inline-flex items-center"},lo={key:0,class:"mt-2 text-sm text-red-500"},ro={class:"py-2 col-span-3 sm:col-span-3"},io={class:"flex rounded-md shadow-sm"},no={key:0,class:"mt-2 text-sm text-red-500"},ao={class:"py-2 col-span-3 sm:col-span-3"},co={key:0,class:"flex rounded-md shadow-sm w-full"},mo={key:1,class:"mt-2 text-sm text-red-500"},po={class:"py-2 col-span-3 sm:col-span-3"},uo={key:0,class:"flex rounded-md shadow-sm w-full"},fo={key:1,class:"mt-2 text-sm text-red-500"},go={class:"py-2 col-span-3 sm:col-span-3"},yo={class:"flex rounded-md shadow-sm"},bo={key:0,class:"mt-2 text-sm text-red-500"};function xo(r,t,g,s,U,V){var p,T;const x=F("multiselect");return o(),l(M,null,[e("div",vs,[!s.edit&&s.write_permission==1&&s.task_write==1?(o(),l("a",{key:0,href:"#",onClick:t[0]||(t[0]=u=>s.newTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[16]||(t[16]=[O("Add Task"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0),s.edit&&s.write_permission==1&&s.task_write==1?(o(),l("a",{key:1,href:"#",onClick:t[1]||(t[1]=u=>s.saveTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-green-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-400 active:bg-green-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},[s.editMode?i("",!0):(o(),l("span",ks,"Save Task")),s.editMode?(o(),l("span",ws,"Update Task")):i("",!0),t[17]||(t[17]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))])):i("",!0),s.edit?(o(),l("a",{key:2,href:"#",onClick:t[2]||(t[2]=u=>s.cancelTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-gray-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[18]||(t[18]=[O("Cancel"),e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)]),s.task_list?i("",!0):(o(),l("div",hs,t[19]||(t[19]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.task_list&&!s.edit?(o(),l("div",Cs,[e("table",Vs,[t[25]||(t[25]=e("thead",{class:"bg-gray-50 text-xs"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"No. "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Instruction"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Assigned"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Target"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Complete At"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Action")])],-1)),e("tbody",Ss,[(o(!0),l(M,null,ee(s.task_list,(u,h)=>(o(),l("tr",{key:u.id},[e("td",Ts,c(h+1),1),e("td",Ds,c(u.description.length>50?u.description.substring(0,50)+" ...":u.description),1),e("td",Us,c(s.getName(u.assigned)),1),e("td",js,c(u.target),1),e("td",As,c(u.complete_date??"N/A"),1),e("td",Is,c(s.getStatus(u.status)),1),s.write_permission==1?(o(),l("td",Os,[e("a",{href:"#",onClick:w=>s.editTask(u),class:"text-blue-600"},t[20]||(t[20]=[e("i",{class:"fa fa-edit"},null,-1)]),8,Rs),t[23]||(t[23]=O()),s.task_write?(o(),l("span",Ps,[t[22]||(t[22]=O(" | ")),e("a",{href:"#",onClick:w=>s.deleteTask(u),class:"text-red-600"},t[21]||(t[21]=[e("i",{class:"fa fa-trash"},null,-1)]),8,Ms)])):i("",!0)])):(o(),l("td",Ns,[e("a",{href:"#",onClick:w=>s.editTask(u),class:"text-blue-600"},t[24]||(t[24]=[e("i",{class:"fa fa-eye"},null,-1)]),8,Ls)]))]))),128))])])])):i("",!0),s.edit?(o(),l("div",Es,[e("div",zs,[t[33]||(t[33]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Assigned : ")])],-1)),e("div",Bs,[e("div",Fs,[s.subcons.length!==0?(o(),l("div",Hs,[I(x,{"deselect-label":"Selected already",options:s.subcons,"track-by":"id",label:"name",modelValue:s.form.assigned,"onUpdate:modelValue":t[3]||(t[3]=u=>s.form.assigned=u),"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.assigned?(o(),l("p",qs,c(r.$page.props.errors.assigned),1)):i("",!0)])]),t[34]||(t[34]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Target : ")])],-1)),e("div",Ys,[e("div",Ws,[_(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=u=>s.form.target=u),name:"target",id:"target",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.target]])]),r.$page.props.errors.target?(o(),l("p",Gs,c(r.$page.props.errors.target),1)):i("",!0)]),t[35]||(t[35]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Instruction : ")])],-1)),e("div",Ks,[e("div",Qs,[_(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=u=>s.form.description=u),name:"description",id:"description",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.description]])]),r.$page.props.errors.description?(o(),l("p",Js,c(r.$page.props.errors.description),1)):i("",!0)]),t[36]||(t[36]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",Xs,[e("div",Zs,[e("div",$s,[e("label",eo,[_(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=u=>s.form.status=u),value:"1",class:"form-radio text-yellow-500"},null,512),[[J,s.form.status]]),t[26]||(t[26]=e("span",{class:"ml-2"},"WIP",-1))]),e("label",to,[_(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=u=>s.form.status=u),value:"3",class:"form-radio text-red-500"},null,512),[[J,s.form.status]]),t[27]||(t[27]=e("span",{class:"ml-2"},"Pending",-1))]),e("label",so,[_(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=u=>s.form.status=u),value:"2",class:"form-radio text-green-500"},null,512),[[J,s.form.status]]),t[28]||(t[28]=e("span",{class:"ml-2"},"Completed",-1))]),e("label",oo,[_(e("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=u=>s.form.status=u),value:"0",class:"form-radio text-indigo-500"},null,512),[[J,s.form.status]]),t[29]||(t[29]=e("span",{class:"ml-2"},"Deleted",-1))])])]),r.$page.props.errors.status?(o(),l("p",lo,c(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==2?(o(),l(M,{key:0},[t[30]||(t[30]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"complete_date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Complete Date : ")])],-1)),e("div",ro,[e("div",io,[_(e("input",{type:"date","onUpdate:modelValue":t[10]||(t[10]=u=>s.form.complete_date=u),name:"complete_date",id:"complete_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.complete_date]])]),r.$page.props.errors.complete_date?(o(),l("p",no,c(r.$page.props.errors.complete_date),1)):i("",!0)])],64)):i("",!0),s.form.status==3?(o(),l(M,{key:1},[t[31]||(t[31]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"root_causes_id",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Root Cause for Pending : ")])],-1)),e("div",ao,[((p=s.pendingRootCause)==null?void 0:p.length)!==0?(o(),l("div",co,[I(x,{"deselect-label":"Selected already",options:s.pendingRootCause,"track-by":"id",label:"name",modelValue:s.form.root_causes,"onUpdate:modelValue":[t[11]||(t[11]=u=>s.form.root_causes=u),t[12]||(t[12]=u=>s.form.root_causes_id=u==null?void 0:u.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.root_causes_id?(o(),l("p",mo,c(r.$page.props.errors.root_causes_id),1)):i("",!0)]),t[32]||(t[32]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"sub_root_causes",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Sub Root Cause : ")])],-1)),e("div",po,[((T=s.subRCA)==null?void 0:T.length)!==0?(o(),l("div",uo,[I(x,{"deselect-label":"Selected already",options:s.subRCA,"track-by":"id",label:"name",modelValue:s.form.sub_root_causes,"onUpdate:modelValue":[t[13]||(t[13]=u=>s.form.sub_root_causes=u),t[14]||(t[14]=u=>s.form.sub_root_causes_id=u==null?void 0:u.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.sub_root_causes_id?(o(),l("p",fo,c(r.$page.props.errors.sub_root_causes_id),1)):i("",!0)])],64)):i("",!0),t[37]||(t[37]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"comment",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Comments : ")])],-1)),e("div",go,[e("div",yo,[_(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=u=>s.form.comment=u),name:"comment",id:"comment",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.comment]])]),r.$page.props.errors.comment?(o(),l("p",bo,c(r.$page.props.errors.comment),1)):i("",!0)])])])):i("",!0)],64)}const _o=X(_s,[["render",xo]]),vo={name:"Log",props:["data"],setup(r){const t=C(""),g=async()=>{let U="/getLog/"+r.data;try{return await(await fetch(U)).json()}catch(V){console.error(V)}},s=()=>{g().then(U=>{t.value=U})};return Z(()=>{s()}),{logs:t}}},ko={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},wo={key:1},ho={class:"min-w-full divide-y divide-gray-200 table-auto"},Co={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},Vo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/12 flex"},So={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/4 flex-1"},To={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/3 flex-1"},Do={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-full flex-1"};function Uo(r,t,g,s,U,V){return o(),l(M,null,[s.logs?i("",!0):(o(),l("div",ko,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(o(),l("div",wo,[e("table",ho,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3 flex-1"},"Actor"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full flex-1"},"Action")])],-1)),e("tbody",Co,[(o(!0),l(M,null,ee(s.logs,(x,p)=>(o(),l("tr",{key:x.id,class:"flex"},[e("td",Vo,c(p+1),1),e("td",So,c(x.created_at),1),e("td",To,c(x.name),1),e("td",Do,c(x.action),1)]))),128))])])])):i("",!0)],64)}const jo=X(vo,[["render",Uo]]),Ao={name:"History",props:["data"],setup(r){const t=C(),g=async()=>{let U="/getHistory/"+r.data;try{return await(await fetch(U)).json()}catch(V){console.error(V)}},s=()=>{g().then(U=>{t.value=U})};return Z(()=>{s()}),{logs:t}}},Io={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Oo={key:1},Ro={class:"min-w-full divide-y divide-gray-200 table-auto"},Po={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},Mo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex"},No={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Lo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Eo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},zo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Bo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Fo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"};function Ho(r,t,g,s,U,V){return o(),l(M,null,[s.logs?i("",!0):(o(),l("div",Io,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(o(),l("div",Oo,[e("table",Ro,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Type"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Topic (if exists)"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Opened By")])],-1)),e("tbody",Po,[(o(!0),l(M,null,ee(s.logs,(x,p)=>(o(),l("tr",{key:x.id,class:"flex"},[e("td",Mo,c(p+1),1),e("td",No,c(x.date+" "+x.time),1),e("td",Lo,c(x.code),1),e("td",Eo,c(x.ftth_id),1),e("td",zo,c(x.type),1),e("td",Bo,c(x.topic?x.topic:"N/A"),1),e("td",Fo,c(x.name),1)]))),128))])])])):i("",!0)],64)}const qo=X(Ao,[["render",Ho]]),Yo={name:"File",components:{Upload:he},props:["data"],setup(r){let t=C(!1),g=C();const s=P("write_permission"),U=P("read_permission");let V=C(!1),x=C("");function p(){V.value=!0,x.value={incident_id:r.data}}function T(){V.value=!1,f()}function u(m){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(d=>{d.isConfirmed?h(m):Toast.fire("Your data is safe!")})}function h(m){m._method="DELETE",E.post("/deleteFile/"+m.id,m,{onSuccess(d){Toast.fire({icon:"success",title:"Your File has been Deleted !"}),f()}})}const w=async()=>{let m="/getFile/"+r.data;console.log(m);try{return await(await fetch(m)).json()}catch(d){console.error(d)}},A=m=>{m&&(V.value=!1,f(),Toast.fire({icon:"success",title:"Successfully Uploaded the File"}))},f=()=>{w().then(m=>{g.value=m})};return Z(()=>{f()}),{file_list:g,add:V,deleteFile:u,addFile:p,closeFile:T,checkUpload:A,incident_id:x,write_permission:s,read_permission:U,loading:t}}},Wo={class:"flex w-full justify-end"},Go={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Ko={key:1},Qo={class:"min-w-full divide-y divide-gray-200 table-auto"},Jo={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},Xo={class:"px-6 py-3 whitespace-nowrap tracking-wider w-1/12"},Zo={class:"px-6 py-3 whitespace-nowrap tracking-wider w-full"},$o={key:0,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},el=["href"],tl=["onClick"],sl={key:1,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},ol=["href"],ll={key:2};function rl(r,t,g,s,U,V){const x=F("upload");return o(),l(M,null,[e("div",Wo,[!s.add&&s.write_permission==1?(o(),l("a",{key:0,href:"#",onClick:t[0]||(t[0]=p=>s.addFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[2]||(t[2]=[O("Add File"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0),s.add?(o(),l("a",{key:1,href:"#",onClick:t[1]||(t[1]=p=>s.closeFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[3]||(t[3]=[O("Close"),e("i",{class:"fas fa-times-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)]),s.file_list?i("",!0):(o(),l("div",Go,t[4]||(t[4]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.file_list&&!s.add?(o(),l("div",Ko,[e("table",Qo,[t[9]||(t[9]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"},"ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full"},"File"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Action ")])],-1)),e("tbody",Jo,[(o(!0),l(M,null,ee(s.file_list,(p,T)=>(o(),l("tr",{key:p.id,class:"flex"},[e("td",Xo,c(T+1),1),e("td",Zo,c(p.name),1),s.write_permission==1?(o(),l("td",$o,[e("a",{href:p.path,target:"_blank"},t[5]||(t[5]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,el),t[7]||(t[7]=O(" | ")),e("a",{href:"#",onClick:u=>s.deleteFile(p),class:"text-red-600"},t[6]||(t[6]=[e("i",{class:"fa fa-trash"},null,-1)]),8,tl)])):(o(),l("td",sl,[e("a",{href:p.path,target:"_blank"},t[8]||(t[8]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,ol)]))]))),128))])])])):i("",!0),s.add?(o(),l("div",ll,[I(x,{data:s.incident_id,onStatus:s.checkUpload},null,8,["data","onStatus"])])):i("",!0)],64)}const il=X(Yo,[["render",rl]]),nl={name:"Incident",components:{AppLayout:ye,Pagination:Ce,IncidentAlert:Me,IncidentDetail:xs,Multiselect:ne,VueDatePicker:Ve,Task:_o,File:il,Log:jo,History:qo,CustomerDetail:be,NoData:xe},props:{incidents:Object,incidents_2:Object,noc:Object,team:Object,townships:Object,customers:Object,packages:Object,critical:Object,high:Object,normal:Object,errors:Object,read_permission:Boolean,write_permission:Boolean,task_write:Boolean,user:Object,subcons:Object,rootCause:Object,subRootCause:Object,pendingRootCause:Object,relocationServices:Object,supervisors:Object,ticketRequest:Object,teamAssign:Object,supervisorAssign:Object,close:Object},setup(r){const t=C(""),g=C(""),s=C(1);let U=C(!1),V=C(!1),x=C(""),p=C(0),T=C("default"),u=C("default"),h=C([]),w=C([]);const A=C({date:"YYYY-MM-DD",month:"MMM"});let f=C(!1),m=C(!1);B("noc",r.noc),B("subcons",r.subcons),B("team",r.team),B("townships",r.townships),B("user",r.user),B("packages",r.packages),B("read_permission",r.read_permission),B("write_permission",r.write_permission),B("task_write",r.task_write),B("customers",r.customers),B("pendingRootCause",r.pendingRootCause),B("rootCause",r.rootCause),B("subRootCause",r.subRootCause);const d=ie({id:null,code:null,edge_code:null,priority:null,customer_id:null,incharge_id:r.team.filter(a=>a.id==r.user.id)[0],supervisor_id:null,supervisor:null,type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null,rca:null,sub_rca:null,root_cause_id:null,sub_root_cause_id:null,rca_notes:null,relocation_service:null,relocation_service_id:null});let N=C(!0),H=C("");function W(a){H.value=a}function K(a){if(x.value!=null&&(N.value=a,a==1)){let v=r.incidents.data.filter(D=>D.id==x.value)[0];R(v)}}function n(){return console.log("checkDisable() called"),r.write_permission==!1?!0:r.user.user_type==="internal"?!1:d.status==1||d.status==""?(console.log("status is 1 or empty"),!1):!0}function z(){var a=new Date,v=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),D=a.getHours()+":"+a.getMinutes();!d.close_date&&p.value!=3&&(d.close_date=v),!d.close_time&&p.value!=3&&(d.close_time=D),N.value=1,f.value=!0}function G(){f.value=!1,x.value=null}function y(){$(),z()}function j(a){let v=r.incidents_2.filter(D=>D.id==a.id)[0];R(v)}function R(a){let v=null;x.value=a.id,V.value=!0,a.location!=null&&(v=a.location.split(",",2),d.latitude=v[0],d.longitude=v[1]),d.id=a.id,d.code=a.code,d.edge_code=a.edge_code,d.priority=a.priority,d.customer_id=r.customers.filter(D=>D.id==a.customer_id)[0],d.incharge_id=r.noc.filter(D=>D.id==a.incharge_id)[0],d.type=a.type,d.topic=a.topic,d.status=a.status,d.start_date=a.start_date,d.end_date=a.end_date,d.new_address=a.new_address,d.supervisor=r.supervisors.filter(D=>D.id==a.supervisor_id)[0],d.supervisor_id=a.supervisor_id,d.new_township=r.townships.filter(D=>D.id==a.new_township)[0],d.package_id=r.packages.filter(D=>D.id==a.package_id)[0],d.description=a.description,d.date=a.date,d.time=a.time,d.close_date=a.close_date,d.close_time=a.close_time,d.resolved_date=a.resolved_date,d.resolved_time=a.resolved_time,d.rca=r.rootCause.filter(D=>D.id==a.root_cause_id)[0],d.sub_rca="",d.root_cause_id=a.root_cause_id,d.sub_root_cause_id=a.sub_root_cause_id,d.rca_notes=a.rca_notes,d.relocation_service=a.relocation_service_id?r.relocationServices.find(D=>D.id==a.relocation_service_id):null,d.relocation_service_id=a.relocation_service_id,z()}function $(){x.value=null,V.value=!1,d.id="",d.code="",d.priority="normal",d.customer_id="",d.incharge_id=r.team.filter(a=>a.id==r.user.id)[0],d.type="default",d.topic="",d.status=1,d.start_date="",d.end_date="",d.new_address="",d.new_township="",d.latitude="",d.longitude="",d.package_id="",d.description="",d.date="",d.time="",d.close_date="",d.close_time="",d.resolved_date="",d.resolved_time="",d.rca="",d.sub_rca="",d.rca_notes="",d.root_cause_id=null,d.sub_root_cause_id=null,d.relocation_service="",d.relocation_service_id=null,d.supervisor=null,d.supervisor_id=null}function oe(a){let v="Request";return a==1?v="Request":a==2?v="Team Assign":a==3?v="Closed":a==4?v="Deleted":a==5?v="Resolved Open":a==6&&(v="Supervisor Assign"),v}function b(a){confirm("Are you sure want to remove?")&&(d._method="PUT",d.status=4,E.post("/incident/"+d.id,d,{onSuccess:v=>{s.value+=1,Toast.fire({icon:"success",title:v.props.flash.message}),G()},onError:v=>{console.log("error ..".errors)}}))}const S=()=>{let a="/incident/";p.value!=null&&(a=a+"?status="+p.value),E.get(a,{keyword:t.value},{preserveState:!0})},Q=()=>{let a="/incident/";t.value!=null&&(a=a+"?keyword="+t.value),T.value!="default"&&(a=a+"&type="+T.value),u.value!="default"&&(a=a+"&member="+u.value),h.value!=""&&(a=a+"&date="+h.value),E.get(a,{status:p.value},{preserveState:!0})};function te(a){console.log("clickStatus : "+a);let v="/incident/";t.value!=null&&(v=v+"?keyword="+t.value),a!=null&&(v=v+"&status="+a),T.value!="default"&&(v=v+"&type="+T.value),u.value!="default"&&(v=v+"&member="+u.value),h.value!=""&&(v=v+"&date="+h.value),E.get(v,{status:a},{preserveState:!1})}const me=a=>{let v="/incident";a!="all"?E.get(v,{priority:a},{preserveState:!0}):E.get(v,{},{preserveState:!0})},pe=a=>{let v="/incident/?";g.value=a,g.order=g.order!=="asc"?"asc":"desc";let D=ue();E.get(v+D,{sort:g.value,order:g.order},{preserveState:!0})},ue=()=>{let a="";return t.value!=null&&(a="&keyword="+t.value),T.value!="default"&&(a+="&type="+T.value),u.value!="default"&&(a+="&member="+u.value),p.value!=null&&(a+="&status="+p.value),h.value!=""&&(a+="&date="+h.value),a};function ae(){r.incidents.data.map(function(a){a.priority=="high"?a.color=a.status!=3&&a.status!=4?"yellow-600":"gray-200":a.priority=="critical"?a.color=a.status!=3&&a.status!=4?"red-600":"gray-200":a.color=a.status!=3&&a.status!=4?"yellow-300":"gray-200"})}function fe(){V.value!=!0?(d._method="POST",E.post("/incident",d,{preserveState:!0,onSuccess:a=>{x.value=a.props.response.id;let v=r.incidents.data.filter(D=>D.id==x.value)[0];V.value=!0,m.value=!1,v!==void 0&&(console.log("response is : "+v),R(v)),Toast.fire({icon:"success",title:a.props.flash.message}),G()},onError:a=>{m.value=!1,console.log("error ..")},onStart:a=>{m.value=!0}})):(d._method="PUT",E.post("/incident/"+d.id,d,{onSuccess:a=>{Toast.fire({icon:"success",title:a.props.flash.message}),m.value=!1,G()},onError:a=>{m.value=!1,console.log("error .."+a)},onStart:a=>{m.value=!0}}))}Z(()=>{console.log("Incident - On Mounted"),r.packages.map(function(a){return a.item_data=`${a.name}`}),ae()});function ge(a){var D;w.value=[];let v=r.rootCause.filter(le=>le.id==a.id);w.value=(D=v[0])==null?void 0:D.sub_root_causes,d.sub_root_cause_id&&(d.sub_rca=w.value.filter(le=>le.id==d.sub_root_cause_id)[0],d.sub_rca||(d.sub_root_cause_id=null))}return ce(()=>d.rca,a=>{a&&ge(a)}),de(()=>{console.log("Incident - On Updated"),r.packages.map(function(a){return a.item_data=`${a.name}`}),ae()}),{loading:m,form:d,openModal:z,closeModal:G,newTicket:y,isOpen:f,deleteIncident:b,searchIncident:S,edit:R,sortBy:pe,getStatus:oe,changeStatus:Q,sort:g,search:t,show:U,tabClick:K,tab:N,selection:H,selected_id:x,editMode:V,typeChange:W,showPriority:me,incidentStatus:p,page_update:s,alert_edit:j,submit:fe,clearform:$,incidentType:T,incidentBy:u,incidentDate:h,formatter:A,subRCA:w,clickStatus:te,checkDisable:n}}},al={class:"py-1"},dl={class:"mx-auto sm:px-6 lg:px-8"},cl={class:"py-2 md:inline-flex justify-between w-full gap-4"},ml={class:"flex w-full"},pl={class:"flex w-full"},ul={class:"flex w-full"},fl={class:"flex w-full self-center"},gl={class:"flex w-full md:w-1/4"},yl={class:"flex w-full md:w-1/2 md:justify-end"},bl={class:"mt-2 grid grid-cols-1 md:grid-cols-5 gap-6 w-full"},xl={class:"col-span-2"},_l={class:"bg-white rounded-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200 py-2 px-2"},vl={class:"grid grid-cols-4 gap-2"},kl={class:"col-span-1"},wl={class:"col-span-1"},hl={class:"col-span-3"},Cl={class:"bg-white rounded-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200 py-2 px-2"},Vl={class:"grid grid-cols-5 gap-2"},Sl={class:"col-span-1"},Tl={class:"col-span-1"},Dl={class:"col-span-1"},Ul={key:0,class:"w-full"},jl={key:0,class:"bg-white overflow-auto md:overflow-hidden shadow-xl sm:rounded-lg mt-1"},Al={class:"min-w-full divide-y divide-gray-200"},Il={class:"bg-gray-50"},Ol={class:"bg-white divide-y divide-gray-200 text-sm"},Rl=["onClick"],Pl={class:"px-2 py-3 whitespace-nowrap"},Ml={class:"px-2 py-3 whitespace-nowrap"},Nl={class:"px-2 py-3 whitespace-nowrap"},Ll={class:"px-2 py-3 whitespace-nowrap"},El={class:"px-2 py-3 whitespace-nowrap"},zl={key:0,class:"px-2 py-3 whitespace-nowrap"},Bl={key:1,class:"px-2 py-3 whitespace-nowrap"},Fl={class:"px-2 py-3 whitespace-nowrap capitalize"},Hl={class:"px-2 py-3 whitespace-nowrap"},ql={class:"px-2 py-3 whitespace-nowrap"},Yl={key:1,class:"w-full block mt-4"},Wl={class:"text-xs text-gray-600"},Gl={key:2},Kl={key:3,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mt-1 py-4 flex flex-col items-center"},Ql={key:1,class:"flex justify-center"},Jl={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},Xl={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Zl={class:"bg-gray-50 rounded-sm pt-1 inline-block align-bottom overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},$l={class:""},er={class:""},tr={class:"py-2 divide-y divide-yellow-500"},sr={class:"mt-1 px-3 flex w-full justify-between"},or={class:"flex"},lr={class:"flex col-span-1"},rr={class:"px-2 lg:px-3"},ir={class:"px-2 lg:px-3"},nr={class:"px-2 lg:px-3"},ar={class:"bg-white rounded-t-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200"},dr={class:"inline-flex w-full bg-gray-50 rounded-t-lg"},cr={id:"tabs",class:"flex"},mr={id:"tab-contents"},pr={class:"grid grid-cols-5 gap-2"},ur={class:"py-2 col-span-2 sm:col-span-2"},fr={class:"mt-1 flex rounded-md shadow-sm"},gr=["disabled"],yr={key:0,class:"mt-2 text-sm text-red-500"},br={class:"py-2 col-span-2 sm:col-span-2"},xr={class:"mt-1 flex rounded-md shadow-sm"},_r=["disabled"],vr={key:0,class:"mt-2 text-sm text-red-500"},kr={class:"py-2 col-span-4 sm:col-span-4"},wr={key:0,class:"mt-1 flex rounded-md shadow-sm"},hr={key:1,class:"mt-2 text-sm text-red-500"},Cr={class:"py-2 col-span-4 sm:col-span-4"},Vr={key:0,class:"mt-1 flex rounded-md shadow-sm"},Sr={key:1,class:"mt-2 text-sm text-red-500"},Tr={class:"py-2 col-span-4 sm:col-span-4"},Dr={key:0,class:"mt-1 flex rounded-md shadow-sm"},Ur={key:1,class:"mt-2 text-sm text-red-500"},jr={class:"py-2 col-span-4 sm:col-span-4"},Ar={class:"mt-1 flex"},Ir=["disabled"],Or={key:0,class:"mt-2 text-sm text-red-500"},Rr={key:1,class:"py-2 col-span-1 sm:col-span-1"},Pr={key:2,class:"py-2 col-span-4 sm:col-span-4"},Mr={class:"mt-1 flex"},Nr=["disabled"],Lr={key:0,class:"mt-2 text-sm text-red-500"},Er={key:3,class:"py-2 col-span-4 sm:col-span-4"},zr={class:"mt-1 flex"},Br=["disabled"],Fr={key:0,class:"mt-2 text-sm text-red-500"},Hr={key:4,class:"py-2 col-span-4 sm:col-span-4"},qr={class:"mt-1 flex"},Yr=["disabled"],Wr={key:0,class:"mt-2 text-sm text-red-500"},Gr={class:"py-2 col-span-4 sm:col-span-4"},Kr={class:"mt-1 flex"},Qr=["disabled"],Jr={key:0,class:"mt-2 text-sm text-red-500"},Xr={key:5,class:"py-2 col-span-1 sm:col-span-1"},Zr={key:6,class:"py-2 col-span-2 sm:col-span-2"},$r={class:"mt-1 flex rounded-md shadow-sm"},ei=["disabled"],ti={key:0,class:"mt-2 text-sm text-red-500"},si={key:7,class:"py-2 col-span-2 sm:col-span-2"},oi={class:"mt-1 flex rounded-md shadow-sm"},li=["disabled"],ri={key:0,class:"mt-2 text-sm text-red-500"},ii={key:8,class:"py-2 col-span-1 sm:col-span-1"},ni={key:9,class:"py-2 col-span-2 sm:col-span-2"},ai={class:"mt-1 flex rounded-md shadow-sm"},di=["disabled"],ci={key:0,class:"mt-2 text-sm text-red-500"},mi={key:10,class:"py-2 col-span-2 sm:col-span-2"},pi={class:"mt-1 flex rounded-md shadow-sm"},ui=["disabled"],fi={key:0,class:"mt-2 text-sm text-red-500"},gi={key:11,class:"py-2 col-span-1 sm:col-span-1"},yi={key:12,class:"py-2 col-span-4 sm:col-span-4"},bi={class:"grid grid-cols-2 gap-2"},xi={class:"col-span-1 sm:col-span-1"},_i={class:"mt-1 flex rounded-md shadow-sm"},vi=["disabled"],ki={key:0,class:"mt-2 text-sm text-red-500"},wi={class:"col-span-1 sm:col-span-1"},hi={class:"mt-1 flex rounded-md shadow-sm"},Ci=["disabled"],Vi={key:0,class:"mt-2 text-sm text-red-500"},Si={key:13,class:"py-2 col-span-1 sm:col-span-1"},Ti={key:14,class:"py-2 col-span-4 sm:col-span-4"},Di={class:"mt-1 flex rounded-md shadow-sm"},Ui=["disabled"],ji={key:0,class:"mt-2 text-sm text-red-500"},Ai={key:15,class:"py-2 col-span-1 sm:col-span-1"},Ii={key:16,class:"py-2 col-span-4 sm:col-span-4"},Oi={class:"mt-1 flex rounded-md shadow-sm"},Ri=["disabled"],Pi={key:0,class:"mt-2 text-sm text-red-500"},Mi={key:17,class:"py-2 col-span-1 sm:col-span-1"},Ni={key:18,class:"py-2 col-span-4 sm:col-span-4"},Li={class:"mt-1 flex"},Ei=["disabled"],zi={key:0,class:"mt-2 text-sm text-red-500"},Bi={key:19,class:"py-2 col-span-1 sm:col-span-1"},Fi={key:20,class:"py-2 col-span-4 sm:col-span-4"},Hi={key:0,class:"mt-1 flex rounded-md shadow-sm"},qi={key:1,class:"mt-2 text-sm text-red-500"},Yi={key:21,class:"py-2 col-span-1 sm:col-span-1"},Wi={key:22,class:"py-2 col-span-4 sm:col-span-4"},Gi={class:"grid grid-cols-2 gap-2"},Ki={class:"col-span-1 sm:col-span-1"},Qi={class:"mt-1 flex rounded-md shadow-sm"},Ji=["disabled"],Xi={key:0,class:"mt-2 text-sm text-red-500"},Zi={class:"col-span-1 sm:col-span-1"},$i={class:"mt-1 flex rounded-md shadow-sm"},en=["disabled"],tn={key:0,class:"mt-2 text-sm text-red-500"},sn={key:23,class:"py-2 col-span-1 sm:col-span-1"},on={key:24,class:"py-2 col-span-4 sm:col-span-4"},ln={class:"mt-1 flex rounded-md shadow-sm"},rn=["disabled"],nn={key:0,class:"mt-2 text-sm text-red-500"},an={key:25,class:"py-2 col-span-1 sm:col-span-1"},dn={key:26,class:"py-2 col-span-4 sm:col-span-4"},cn={class:"mt-1 flex rounded-md shadow-sm"},mn={key:0,class:"mt-2 text-sm text-red-500"},pn={key:27,class:"py-2 col-span-1 sm:col-span-1"},un={key:28,class:"py-2 col-span-4 sm:col-span-4"},fn={key:0,class:"mt-1 flex rounded-md shadow-sm"},gn={key:1,class:"mt-2 text-sm text-red-500"},yn={key:29,class:"py-2 col-span-1 sm:col-span-1"},bn={key:30,class:"py-2 col-span-4 sm:col-span-4"},xn={class:"mt-1 flex rounded-md shadow-sm"},_n=["disabled"],vn={key:0,class:"mt-2 text-sm text-red-500"},kn={class:"py-2 col-span-4 sm:col-span-4"},wn={class:"mt-1 flex"},hn=["disabled"],Cn={key:0,class:"mt-2 text-sm text-red-500"},Vn={class:"py-2 col-span-4 sm:col-span-4"},Sn={key:0,class:"mt-1 flex rounded-md shadow-sm"},Tn={key:1,class:"mt-2 text-sm text-red-500"},Dn={class:"py-2 col-span-4 sm:col-span-4"},Un={key:0,class:"mt-1 flex rounded-md shadow-sm"},jn={key:1,class:"mt-2 text-sm text-red-500"},An={class:"py-2 col-span-4 sm:col-span-4"},In={class:"mt-1 flex"},On=["disabled"],Rn={key:0,class:"mt-2 text-sm text-red-500"},Pn={key:0,class:"flex"},Mn={key:0},Nn={key:1},Ln={class:"flex"},En={key:1,class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function zn(r,t,g,s,U,V){const x=F("VueDatePicker"),p=F("pagination"),T=F("no-data"),u=F("multiselect"),h=F("task"),w=F("file"),A=F("customer-detail"),f=F("log"),m=F("history"),d=F("app-layout");return o(),q(d,null,{default:ve(()=>{var N,H,W,K;return[e("div",al,[e("div",dl,[e("div",cl,[e("div",ml,[t[78]||(t[78]=e("span",{class:"z-10 font-normal text-gray-400 absolute selection:rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-search"})],-1)),_(e("input",{type:"text",placeholder:"Ticket/Customer",class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",id:"search",tabindex:"1","onUpdate:modelValue":t[0]||(t[0]=n=>s.search=n),onKeyup:t[1]||(t[1]=ke((...n)=>s.searchIncident&&s.searchIncident(...n),["enter"]))},null,544),[[k,s.search]])]),e("div",pl,[t[80]||(t[80]=e("span",{class:"z-10 font-normal text-gray-400 absolute bg-transparent rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-sliders-h"})],-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=n=>s.incidentType=n),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"3",onChange:t[3]||(t[3]=(...n)=>s.changeStatus&&s.changeStatus(...n))},t[79]||(t[79]=[e("option",{value:"default"},"All Ticket",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"termination"},"Termination",-1)]),544),[[Y,s.incidentType]])]),e("div",ul,[t[82]||(t[82]=e("span",{class:"z-10 font-normal text-gray-400 absolute bg-transparent rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-sliders-h"})],-1)),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>s.incidentStatus=n),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"5",onChange:t[5]||(t[5]=(...n)=>s.changeStatus&&s.changeStatus(...n))},t[81]||(t[81]=[e("option",{value:"0"},"All Status",-1),e("option",{value:"1"},"Request",-1),e("option",{value:"6"},"Supervisor Assign",-1),e("option",{value:"2"},"Team Assign",-1),e("option",{value:"5"},"Resolved Open",-1),e("option",{value:"3"},"Closed",-1),e("option",{value:"4"},"Deleted",-1)]),544),[[Y,s.incidentStatus]])]),e("div",fl,[I(x,{modelValue:s.incidentDate,"onUpdate:modelValue":t[6]||(t[6]=n=>s.incidentDate=n),range:{partialRange:!0},placeholder:"Ticket Date","enable-time-picker":!1,"model-type":"yyyy-MM-dd",id:"order_date",class:"text-gray-400 text-sm focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none"},null,8,["modelValue"])]),e("div",gl,[e("button",{onClick:t[7]||(t[7]=(...n)=>s.changeStatus&&s.changeStatus(...n)),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1"},t[83]||(t[83]=[e("i",{class:"fas fa-search opacity-75 lg:ml-1 text-sm"},null,-1)]))]),e("div",yl,[g.write_permission?(o(),l("button",{key:0,onClick:t[8]||(t[8]=n=>s.newTicket()),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1",tabindex:"7"},t[84]||(t[84]=[O("Ticket"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)])]),e("div",bl,[e("div",xl,[e("div",_l,[e("div",vl,[e("div",kl,[t[85]||(t[85]=e("label",{class:"block text-sm font-normal text-center"},"Critical",-1)),e("button",{class:"block py-2 px-2 w-full bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:border-red-300 focus:ring focus:ring-red-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[9]||(t[9]=n=>s.showPriority("critical"))},c(g.critical),1)]),e("div",{class:"col-span-1",onClick:t[11]||(t[11]=n=>s.showPriority("high"))},[t[86]||(t[86]=e("label",{class:"block text-sm font-normal text-center"},"High",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-500 active:bg-yellow-700 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[10]||(t[10]=n=>s.showPriority("high"))},c(g.high),1)]),e("div",{class:"col-span-1",onClick:t[13]||(t[13]=n=>s.showPriority("normal"))},[t[87]||(t[87]=e("label",{class:"block text-sm font-normal text-center"},"Normal",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-400 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-300 active:bg-yellow-500 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[12]||(t[12]=n=>s.showPriority("normal"))},c(g.normal),1)]),e("div",wl,[t[88]||(t[88]=e("label",{class:"block text-sm font-normal text-center"},"All",-1)),e("button",{class:"block py-2 px-2 w-full bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-indigo-300 focus:ring focus:ring-indigo-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[14]||(t[14]=n=>s.showPriority("all"))},c(g.critical+g.high+g.normal),1)])])])]),e("div",hl,[e("div",Cl,[e("div",Vl,[e("div",Sl,[t[89]||(t[89]=e("label",{class:"block text-sm font-normal text-center"},"Ticket Request",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[15]||(t[15]=n=>s.clickStatus(1))},c(g.ticketRequest),1)]),e("div",{class:"col-span-1",onClick:t[17]||(t[17]=n=>s.clickStatus("6"))},[t[90]||(t[90]=e("label",{class:"block text-sm font-normal text-center"},"Supervisor Assign",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[16]||(t[16]=n=>s.clickStatus("6"))},c(g.supervisorAssign),1)]),e("div",{class:"col-span-1",onClick:t[19]||(t[19]=n=>s.clickStatus("2"))},[t[91]||(t[91]=e("label",{class:"block text-sm font-normal text-center"},"Team Assign",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[18]||(t[18]=n=>s.clickStatus("2"))},c(g.teamAssign),1)]),e("div",Tl,[t[92]||(t[92]=e("label",{class:"block text-sm font-normal text-center"},"Close",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[20]||(t[20]=n=>s.clickStatus("3"))},c(g.close),1)]),e("div",Dl,[t[93]||(t[93]=e("label",{class:"block text-sm font-normal text-center"},"All",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[21]||(t[21]=n=>s.clickStatus(""))},c(g.ticketRequest+g.teamAssign+g.supervisorAssign+g.close),1)])])])])]),g.write_permission||g.read_permission?(o(),l("div",Ul,[g.incidents.data?(o(),l("div",jl,[e("table",Al,[e("thead",Il,[e("tr",null,[t[101]||(t[101]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},null,-1)),t[102]||(t[102]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No.",-1)),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[22]||(t[22]=n=>s.sortBy("date"))},t[94]||(t[94]=[O("Open Date "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[23]||(t[23]=n=>s.sortBy("code"))},t[95]||(t[95]=[O("Customer Ticket "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[24]||(t[24]=n=>s.sortBy("edge_code"))},t[96]||(t[96]=[O("EDGE Ticket "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[25]||(t[25]=n=>s.sortBy("ftth_id"))},t[97]||(t[97]=[O("User "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[26]||(t[26]=n=>s.sortBy("township_id"))},t[98]||(t[98]=[O("TSP "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[27]||(t[27]=n=>s.sortBy("type"))},t[99]||(t[99]=[O("Type "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[28]||(t[28]=n=>s.sortBy("incharge"))},t[100]||(t[100]=[O("Created "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),t[103]||(t[103]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1))])]),e("tbody",Ol,[(o(!0),l(M,null,ee(g.incidents.data,(n,z)=>(o(),l("tr",{key:n.id,class:L([[n.id==s.selected_id?"bg-indigo-200":""],"cursor-pointer"]),onClick:G=>s.edit(n)},[e("td",Pl,[e("i",{class:L("fa fa-circle text-"+n.color)},null,2)]),e("td",Ml,c(z+=g.incidents.from),1),e("td",Nl,c(n.date)+" "+c(n.time),1),e("td",Ll,c(n.code),1),e("td",El,c(n.edge_code),1),n.ftth_id?(o(),l("td",zl,c(n.ftth_id),1)):i("",!0),n.township_short?(o(),l("td",Bl,c(n.township_short),1)):i("",!0),e("td",Fl,c(n.type.replace("_"," ")),1),e("td",Hl,c(n.incharge.match(/\b\w/g).join("")),1),e("td",ql,c(s.getStatus(n.status)),1)],10,Rl))),128))])])])):i("",!0),g.incidents.total?(o(),l("span",Yl,[e("label",Wl,c(g.incidents.data.length)+" Tickets in Current Page. Total Number of Tickets : "+c(g.incidents.total),1)])):i("",!0),g.incidents.links?(o(),l("span",Gl,[I(p,{class:"mt-4",links:g.incidents.links},null,8,["links"])])):i("",!0),g.incidents.data?i("",!0):(o(),l("div",Kl,[I(T)]))])):(o(),l("div",Ql,t[104]||(t[104]=[e("span",{class:"px-20 py-10 center bg-white inline-flex"},[e("i",{class:"fa fas fa-exclamation-triangle fa-2x text-yellow-600 mr-2"}),e("label",{class:"font-bold mt-2 text-sm"}," You Don't Have Permission To Access This Page")],-1)])))])]),s.isOpen?(o(),l("div",Jl,[e("div",Xl,[t[151]||(t[151]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[152]||(t[152]=O(" ​ ")),e("div",Zl,[e("div",$l,[e("div",er,[e("div",tr,[e("div",sr,[t[110]||(t[110]=e("div",{class:"flex"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight mt-2"},"Ticket Detail")],-1)),e("div",or,[t[108]||(t[108]=e("span",{class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-l-md text-sm shadow outline-none focus:outline-none"}," Customer Ticket ID ",-1)),_(e("input",{type:"text","onUpdate:modelValue":t[29]||(t[29]=n=>s.form.code=n),name:"code",id:"code",class:"mr-2 border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-r-md text-sm shadow outline-none focus:outline-none",disabled:""},null,512),[[k,s.form.code]]),t[109]||(t[109]=e("span",{class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-l-md text-sm shadow outline-none focus:outline-none"}," EDGE Ticket ID ",-1)),_(e("input",{type:"text","onUpdate:modelValue":t[30]||(t[30]=n=>s.form.edge_code=n),name:"edge_code",id:"edge_code",class:"mr-2 border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-r-md text-sm shadow outline-none focus:outline-none",disabled:""},null,512),[[k,s.form.edge_code]]),e("ul",lr,[e("li",rr,[t[105]||(t[105]=e("label",{class:"block text-sm"},"Critical",-1)),_(e("input",{"onUpdate:modelValue":t[31]||(t[31]=n=>s.form.priority=n),name:"priority",value:"critical",type:"radio",class:"form-radio h-5 w-5 text-red-600 bg-red-600",title:"(1-4hrs)"},null,512),[[J,s.form.priority]])]),e("li",ir,[t[106]||(t[106]=e("label",{class:"block text-sm"},"High",-1)),_(e("input",{"onUpdate:modelValue":t[32]||(t[32]=n=>s.form.priority=n),name:"priority",value:"high",type:"radio",class:"form-radio h-5 w-5 text-yellow-600 bg-yellow-600",title:"(1-12hrs)"},null,512),[[J,s.form.priority]])]),e("li",nr,[t[107]||(t[107]=e("label",{class:"block text-sm"},"Normal",-1)),_(e("input",{"onUpdate:modelValue":t[33]||(t[33]=n=>s.form.priority=n),name:"priority",value:"normal",type:"radio",class:"form-radio h-5 w-5 text-yellow-300 bg-yellow-300",title:"(1-48hrs)"},null,512),[[J,s.form.priority]])])])])])]),e("div",ar,[e("div",dr,[e("ul",cr,[e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[34]||(t[34]=n=>s.tabClick(1)),"preserve-state":""},"Genaral")],2),s.checkDisable()==!1?(o(),l("li",{key:0,class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[35]||(t[35]=n=>s.tabClick(2)),"preserve-state":""},"Tasks")],2)):i("",!0),e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==3?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[36]||(t[36]=n=>s.tabClick(3)),"preserve-state":""},"Files")],2),e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==4?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[37]||(t[37]=n=>s.tabClick(4)),"preserve-state":""},"Customer Info")],2),e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==5?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[38]||(t[38]=n=>s.tabClick(5)),"preserve-state":""},"LOGS")],2),e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==6?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[39]||(t[39]=n=>s.tabClick(6)),"preserve-state":""},"History")],2)])]),e("div",mr,[e("div",{class:L(["p-4",[s.tab==1?"":"hidden"]])},[e("div",pr,[t[142]||(t[142]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",ur,[e("div",fr,[_(e("input",{type:"date","onUpdate:modelValue":t[40]||(t[40]=n=>s.form.date=n),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,gr),[[k,s.form.date]])]),r.$page.props.errors.date?(o(),l("p",yr,c(r.$page.props.errors.date),1)):i("",!0)]),e("div",br,[e("div",xr,[_(e("input",{type:"time","onUpdate:modelValue":t[41]||(t[41]=n=>s.form.time=n),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,_r),[[k,s.form.time]])]),r.$page.props.errors.time?(o(),l("p",vr,c(r.$page.props.errors.time),1)):i("",!0)]),t[143]||(t[143]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",kr,[g.customers.length!==0?(o(),l("div",wr,[I(u,{"deselect-label":"Selected already",options:g.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer_id,"onUpdate:modelValue":t[42]||(t[42]=n=>s.form.customer_id=n),"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.customer?(o(),l("p",hr,c(r.$page.props.errors.customer),1)):i("",!0)]),t[144]||(t[144]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",Cr,[g.team.length!==0?(o(),l("div",Vr,[I(u,{"deselect-label":"Selected already",options:g.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[43]||(t[43]=n=>s.form.incharge_id=n),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.incharge?(o(),l("p",Sr,c(r.$page.props.errors.incharge),1)):i("",!0)]),(N=g.user.role)!=null&&N.incident_oss?(o(),l(M,{key:0},[t[111]||(t[111]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Assign Supervisor : ")])],-1)),e("div",Tr,[((H=g.supervisors)==null?void 0:H.length)!==0?(o(),l("div",Dr,[I(u,{"deselect-label":"Selected already",options:g.supervisors,"track-by":"id",label:"name",modelValue:s.form.supervisor,"onUpdate:modelValue":[t[44]||(t[44]=n=>s.form.supervisor=n),t[45]||(t[45]=n=>s.form.supervisor_id=n==null?void 0:n.id)],"allow-empty":!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.supervisor_id?(o(),l("p",Ur,c(r.$page.props.errors.supervisor_id),1)):i("",!0)])],64)):i("",!0),t[145]||(t[145]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",jr,[e("div",Ar,[_(e("select",{"onUpdate:modelValue":t[46]||(t[46]=n=>s.form.type=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:"",onChange:t[47]||(t[47]=n=>s.form.topic=null),disabled:s.checkDisable()},t[112]||(t[112]=[e("option",{value:"default"},"Please Choose Ticket Type",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"relocation"},"Relocation Request",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"termination"},"Termination",-1)]),40,Ir),[[Y,s.form.type]])]),r.$page.props.errors.type?(o(),l("p",Or,c(r.$page.props.errors.type),1)):i("",!0)]),s.form.type=="service_complaint"||s.form.type=="onsite_complaint"|s.form.type=="technical_complaint"?(o(),l("div",Rr,t[113]||(t[113]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):i("",!0),s.form.type=="service_complaint"?(o(),l("div",Pr,[e("div",Mr,[_(e("select",{"onUpdate:modelValue":t[48]||(t[48]=n=>s.form.topic=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},t[114]||(t[114]=[e("option",{value:"los_redlight"},"LOS Redlight",-1),e("option",{value:"pon_blinking"},"PON Blinking",-1),e("option",{value:"high_loss"},"High Loss",-1),e("option",{value:"dn_down"},"DN Down",-1),e("option",{value:"sn_down"},"SN Down",-1),e("option",{value:"relocation"},"Relocation",-1),e("option",{value:"maintenance"},"Maintenance",-1),e("option",{value:"other"},"Other",-1)]),8,Nr),[[Y,s.form.topic]])]),r.$page.props.errors.topic?(o(),l("p",Lr,c(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),s.form.type=="onsite_complaint"?(o(),l("div",Er,[e("div",zr,[_(e("select",{"onUpdate:modelValue":t[49]||(t[49]=n=>s.form.topic=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},t[115]||(t[115]=[e("option",{value:"no_internet"},"No Internet",-1),e("option",{value:"slow_performance"},"Slow Performance",-1),e("option",{value:"wifi_issue"},"Wifi Issue",-1),e("option",{value:"coverage_issue"},"Coverage Issue",-1),e("option",{value:"onu_issue"},"ONU issue",-1),e("option",{value:"home_router_issue"},"Home Router Issue",-1),e("option",{value:"password_change"},"Password Change",-1),e("option",{value:"other"},"Other",-1)]),8,Br),[[Y,s.form.topic]])]),r.$page.props.errors.topic?(o(),l("p",Fr,c(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),s.form.type=="technical_complaint"?(o(),l("div",Hr,[e("div",qr,[_(e("select",{"onUpdate:modelValue":t[50]||(t[50]=n=>s.form.topic=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},t[116]||(t[116]=[e("option",{value:"website_delay_issue"},"Website Delay Issue",-1),e("option",{value:"gaming_delay_issue"},"Gaming Delay Issue",-1),e("option",{value:"application_delay_issue"},"Application Delay Issue",-1),e("option",{value:"other"},"Other",-1)]),8,Yr),[[Y,s.form.topic]])]),r.$page.props.errors.topic?(o(),l("p",Wr,c(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),t[146]||(t[146]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",Gr,[e("div",Kr,[_(e("select",{"onUpdate:modelValue":t[51]||(t[51]=n=>s.form.status=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},t[117]||(t[117]=[e("option",{value:"1"},"Request",-1),e("option",{value:"6"},"Supervisor Assign",-1),e("option",{value:"2",disabled:""},"Team Assign",-1),e("option",{value:"5",disabled:""},"Resolved Open",-1),e("option",{value:"3"},"Closed",-1)]),8,Qr),[[Y,s.form.status]])]),r.$page.props.errors.status?(o(),l("p",Jr,c(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==3?(o(),l("div",Xr,t[118]||(t[118]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):i("",!0),s.form.status==3?(o(),l("div",Zr,[e("div",$r,[_(e("input",{type:"date","onUpdate:modelValue":t[52]||(t[52]=n=>s.form.close_date=n),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,ei),[[k,s.form.close_date]])]),r.$page.props.errors.close_date?(o(),l("p",ti,c(r.$page.props.errors.close_date),1)):i("",!0)])):i("",!0),s.form.status==3?(o(),l("div",si,[e("div",oi,[_(e("input",{type:"time","onUpdate:modelValue":t[53]||(t[53]=n=>s.form.close_time=n),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,li),[[k,s.form.close_time]])]),r.$page.props.errors.close_time?(o(),l("p",ri,c(r.$page.props.errors.close_time),1)):i("",!0)])):i("",!0),s.form.status==5?(o(),l("div",ii,t[119]||(t[119]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):i("",!0),s.form.status==5?(o(),l("div",ni,[e("div",ai,[_(e("input",{type:"date","onUpdate:modelValue":t[54]||(t[54]=n=>s.form.resolved_date=n),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,di),[[k,s.form.resolved_date]])]),r.$page.props.errors.resolved_date?(o(),l("p",ci,c(r.$page.props.errors.resolved_date),1)):i("",!0)])):i("",!0),s.form.status==5?(o(),l("div",mi,[e("div",pi,[_(e("input",{type:"time","onUpdate:modelValue":t[55]||(t[55]=n=>s.form.resolved_time=n),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,ui),[[k,s.form.resolved_time]])]),r.$page.props.errors.resolved_time?(o(),l("p",fi,c(r.$page.props.errors.resolved_time),1)):i("",!0)])):i("",!0),s.form.type=="suspension"?(o(),l("div",gi,t[120]||(t[120]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense Period : ")],-1)]))):i("",!0),s.form.type=="suspension"?(o(),l("div",yi,[e("div",bi,[e("div",xi,[e("div",_i,[t[121]||(t[121]=e("span",{class:"-mt-1 z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[56]||(t[56]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,vi),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",ki,c(r.$page.props.errors.start_date),1)):i("",!0)]),e("div",wi,[e("div",hi,[t[122]||(t[122]=e("span",{class:"-mt-1 z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[57]||(t[57]=n=>s.form.end_date=n),name:"end_date",id:"end_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,Ci),[[k,s.form.end_date]])]),r.$page.props.errors.end_date?(o(),l("p",Vi,c(r.$page.props.errors.end_date),1)):i("",!0)])])])):i("",!0),s.form.type=="resume"?(o(),l("div",Si,t[123]||(t[123]=[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")],-1)]))):i("",!0),s.form.type=="resume"?(o(),l("div",Ti,[e("div",Di,[t[124]||(t[124]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[58]||(t[58]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,Ui),[[k,s.form.start_date]])]),r.$page.props.errors.resume?(o(),l("p",ji,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="termination"?(o(),l("div",Ai,t[125]||(t[125]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):i("",!0),s.form.type=="termination"?(o(),l("div",Ii,[e("div",Oi,[t[126]||(t[126]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[59]||(t[59]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,Ri),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",Pi,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",Mi,t[127]||(t[127]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Ni,[e("div",Li,[_(e("textarea",{"onUpdate:modelValue":t[60]||(t[60]=n=>s.form.new_address=n),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()}," ",8,Ei),[[k,s.form.new_address]])]),r.$page.props.errors.new_address?(o(),l("p",zi,c(r.$page.props.errors.new_address),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",Bi,t[128]||(t[128]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Fi,[g.townships.length!==0?(o(),l("div",Hi,[I(u,{"deselect-label":"Selected already",options:g.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[61]||(t[61]=n=>s.form.new_township=n),"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.new_township?(o(),l("p",qi,c(r.$page.props.errors.new_township),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",Yi,t[129]||(t[129]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Wi,[e("div",Gi,[e("div",Ki,[e("div",Qi,[t[130]||(t[130]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[62]||(t[62]=n=>s.form.latitude=n),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude",disabled:s.checkDisable()},null,8,Ji),[[k,s.form.latitude]])]),r.$page.props.errors.latitude?(o(),l("p",Xi,c(r.$page.props.errors.latitude),1)):i("",!0)]),e("div",Zi,[e("div",$i,[t[131]||(t[131]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[63]||(t[63]=n=>s.form.longitude=n),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude",disabled:s.checkDisable()},null,8,en),[[k,s.form.longitude]])]),r.$page.props.errors.longitude?(o(),l("p",tn,c(r.$page.props.errors.longitude),1)):i("",!0)])])])):i("",!0),s.form.type=="relocation"?(o(),l("div",sn,t[132]||(t[132]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",on,[e("div",ln,[t[133]||(t[133]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[64]||(t[64]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,rn),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",nn,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",an,t[134]||(t[134]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Relocation Service : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",dn,[e("div",cn,[I(u,{"deselect-label":"Selected already",options:g.relocationServices,"track-by":"id",label:"name",modelValue:s.form.relocation_service,"onUpdate:modelValue":[t[65]||(t[65]=n=>s.form.relocation_service=n),t[66]||(t[66]=n=>s.form.relocation_service_id=n==null?void 0:n.id)],"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])]),r.$page.props.errors.relocation_service_id?(o(),l("p",mn,c(r.$page.props.errors.relocation_service_id),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(o(),l("div",pn,t[135]||(t[135]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_package",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Package: ")],-1)]))):i("",!0),s.form.type=="plan_change"?(o(),l("div",un,[g.packages.length!==0?(o(),l("div",fn,[I(u,{"deselect-label":"Selected already",options:g.packages,"track-by":"id",label:"item_data",modelValue:s.form.package_id,"onUpdate:modelValue":t[67]||(t[67]=n=>s.form.package_id=n),"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.package?(o(),l("p",gn,c(r.$page.props.errors.package),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(o(),l("div",yn,t[136]||(t[136]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="plan_change"?(o(),l("div",bn,[e("div",xn,[t[137]||(t[137]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[68]||(t[68]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,_n),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",vn,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),t[147]||(t[147]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",kn,[e("div",wn,[_(e("textarea",{"onUpdate:modelValue":t[69]||(t[69]=n=>s.form.description=n),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()}," ",8,hn),[[k,s.form.description]])]),r.$page.props.errors.description?(o(),l("p",Cn,c(r.$page.props.errors.description),1)):i("",!0)]),s.editMode&&s.form.status==3?(o(),l(M,{key:31},[t[139]||(t[139]=e("div",{class:"col-span-5"},[e("hr")],-1)),t[140]||(t[140]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"rca",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," RCA : ")])],-1)),e("div",Vn,[((W=g.rootCause)==null?void 0:W.length)!==0?(o(),l("div",Sn,[I(u,{"deselect-label":"Selected already",options:g.rootCause,"track-by":"id",label:"name",modelValue:s.form.rca,"onUpdate:modelValue":[t[70]||(t[70]=n=>s.form.rca=n),t[71]||(t[71]=n=>s.form.root_cause_id=n==null?void 0:n.id)],"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.root_cause_id?(o(),l("p",Tn,c(r.$page.props.errors.root_cause_id),1)):i("",!0)]),t[141]||(t[141]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"sub_rca",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Sub RCA : ")])],-1)),e("div",Dn,[((K=s.subRCA)==null?void 0:K.length)!==0?(o(),l("div",Un,[I(u,{"deselect-label":"Selected already",options:s.subRCA,"track-by":"id",label:"name",modelValue:s.form.sub_rca,"onUpdate:modelValue":[t[72]||(t[72]=n=>s.form.sub_rca=n),t[73]||(t[73]=n=>s.form.sub_root_cause_id=n==null?void 0:n.id)],"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.sub_root_cause_id?(o(),l("p",jn,c(r.$page.props.errors.sub_root_cause_id),1)):i("",!0)]),s.checkDisable()==!1?(o(),l(M,{key:0},[t[138]||(t[138]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"rca_notes",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," RCA Note : ")])],-1)),e("div",An,[e("div",In,[_(e("textarea",{"onUpdate:modelValue":t[74]||(t[74]=n=>s.form.rca_notes=n),name:"rca_notes",id:"rca_notes",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!g.write_permission}," ",8,On),[[k,s.form.rca_notes]])]),r.$page.props.errors.rca_notes?(o(),l("p",Rn,c(r.$page.props.errors.rca_notes),1)):i("",!0)])],64)):i("",!0)],64)):i("",!0)])],2),s.checkDisable()==!1?(o(),l("div",{key:0,class:L(["p-4",[s.tab==2?"":"hidden"]])},[(o(),q(se,null,[s.tab==2?(o(),q(h,{data:s.selected_id,errors:r.$page.props.errors,key:s.page_update},null,8,["data","errors"])):i("",!0)],1024))],2)):i("",!0),e("div",{class:L(["p-4",[s.tab==3?"":"hidden"]])},[(o(),q(se,null,[s.tab==3?(o(),q(w,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:L(["p-4",[s.tab==4?"":"hidden"]])},[(o(),q(se,null,[s.tab==4?(o(),q(A,{data:s.selected_id,user:g.user,key:s.page_update},null,8,["data","user"])):i("",!0)],1024))],2),e("div",{class:L(["p-4",[s.tab==5?"":"hidden"]])},[(o(),q(se,null,[s.tab==5?(o(),q(f,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:L(["p-4",[s.tab==6?"":"hidden"]])},[(o(),q(se,null,[s.tab==6?(o(),q(m,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2)])])])]),e("div",{class:L(["bg-indigo-50 px-3 py-3 sm:px-6 sm:flex sm:flex-row",[s.tab==1?"justify-between":"justify-end"]])},[s.tab==1&&g.write_permission?(o(),l("div",Pn,[e("button",{class:"inline-flex items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-indigo-900 disabled:opacity-25 transition mr-1",onClick:t[75]||(t[75]=n=>s.submit())},[s.editMode?(o(),l("span",Mn,"Update")):i("",!0),s.editMode==!1?(o(),l("span",Nn,"Save")):i("",!0),t[148]||(t[148]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))]),_(e("button",{onClick:t[76]||(t[76]=(...n)=>s.deleteIncident&&s.deleteIncident(...n)),class:"inline-flex items-center px-4 py-3 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition mr-1"},t[149]||(t[149]=[O("Delete"),e("i",{class:"lg:ml-1 fas fa-trash opacity-75 text-sm"},null,-1)]),512),[[we,s.selected_id]])])):i("",!0),e("div",Ln,[e("button",{onClick:t[77]||(t[77]=(...n)=>s.closeModal&&s.closeModal(...n)),type:"button",class:"inline-flex items-center px-4 py-3 bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-gray-600 uppercase tracking-widest hover:bg-gray-300 active:bg-gray-400 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition"},t[150]||(t[150]=[O("Close "),e("i",{class:"lg:ml-1 fas fa-times-circle opacity-75 text-sm"},null,-1)]))])],2)])])],512)):i("",!0),s.loading?(o(),l("div",En,t[153]||(t[153]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):i("",!0)]}),_:1})}const Jn=X(nl,[["render",zn]]);export{Jn as default};
