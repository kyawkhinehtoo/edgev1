import{A as fe,C as ge,N as ye}from"./NoData-C0h0UNbI.js";import{_ as xe}from"./InputLabel-ALF5JPSz.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as h,m as Z,o,d as l,a as e,P as re,F as L,g as Q,e as i,t as m,B as M,T as ie,x as de,p as z,q as _,v as k,b as O,y as W,N as B,I as me,f as P,L as J,C as E,c as Y,w as be,M as _e,n as N,O as se,s as ve}from"./app-gOgVOHRJ.js";import{M as ne}from"./vue3-multiselect.umd.min-CjJEj_n4.js";import{U as we}from"./Upload-AQNiz2TK.js";import{P as ke}from"./Pagination-QHkpW2DY.js";import{V as he}from"./main-BOki2tOe.js";import"./DropdownLink-CQV_2l3i.js";const Ce={components:{Label:xe},name:"IncidentAlert",emits:["show_edit"],setup(r,t){let u=h("Loading .."),s=h("Loading ..");const j=async()=>{let v="/incidentOverdue";console.log(v);try{return await(await fetch(v)).json()}catch(w){console.error(w)}},V=async()=>{let v="/incidentRemain";console.log(v);try{return await(await fetch(v)).json()}catch(w){console.error(w)}};function x(v){let w=v%3600/60,I=v%(24*3600)/3600,f=v/(24*3600),c=null;if(v>=86400){let d=f-Math.floor(f);f=f-d,d=d*24;let R=d-Math.floor(d);d=d-R,d!=0?c=f+" d, "+d+" hr":c=f+" d"}else if(v>1440){let d=I-Math.floor(I),R=I-d;d=Math.round(d*60),R!=0?c=R+" hr,"+d+" m":c=d+" m"}else c=Math.round(w)+" m";return c}function p(v){let w=2592e3;return w-v/100*w}function U(v){t.emit("show_edit",v)}function y(){j().then(v=>{u.value=v}),V().then(v=>{s.value=v})}return Z(()=>{y()}),{bundle:u,remain:s,getList:y,getDay:x,percenttosecond:p,doEdit:U}}},Ve={class:"w-full flex justify-between text-sm px-2"},Te={key:0},Se={class:"min-w-full divide-y divide-gray-200 mt-1 shadow-xl"},Ue={class:"bg-white rounded-b-lg divide-y divide-gray-200 text-sm text-center max-h-80 overflow-auto block scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white w-full"},je=["onClick"],De={class:"px-2 py-2 whitespace-nowrap col-span-1"},Ie={class:"px-2 py-2 whitespace-nowrap col-span-1"},Oe={class:"px-2 py-2 whitespace-nowrap col-span-1"};function Pe(r,t,u,s,j,V){return o(),l(L,null,[e("div",Ve,[t[2]||(t[2]=e("label",{class:"mt-5 uppercase text-md"}," Ticket Overdue Hours Chart",-1)),e("button",{onClick:t[0]||(t[0]=x=>s.getList()),class:"my-2 ml-2 align-right text-center items-center px-3 py-2 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[1]||(t[1]=[e("i",{class:"fas fa-sync opacity-75 text-sm"},null,-1)]))]),s.bundle?(o(),l("div",Te,[t[4]||(t[4]=e("h2",{class:"m-2 uppercase text-md"},null,-1)),e("div",Se,[t[3]||(t[3]=re('<div class="bg-gray-50 text-center inline-grid grid-cols-4 gap-2rounded-t-lg w-full" data-v-11ba7e6d><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Ticket ID</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>SLA Overdue</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Actual Hrs</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Based SLA</div></div>',1)),e("div",Ue,[(o(!0),l(L,null,Q(s.bundle,x=>(o(),l("div",{key:x.id,class:"cursor-pointer inline-grid grid-cols-4 gap-2 w-full"},[e("div",{class:"px-2 py-2 whitespace-nowrap col-span-1",onClick:p=>s.doEdit(x)},m(x.code),9,je),e("div",De,m(s.getDay(x.over)),1),e("div",Ie,m(s.getDay(x.diff)),1),e("div",Oe,m(x.percentage),1)]))),128))])])])):i("",!0)],64)}const Me=X(Ce,[["render",Pe],["__scopeId","data-v-11ba7e6d"]]),Re={name:"IncidentDetail",emits:["loading"],emits:["selected_id"],components:{Multiselect:ne},props:{errors:Object,data:Object,parentform:Object},setup(r,t){const u=M("noc"),s=M("team"),j=M("user"),V=M("incidents"),x=M("customers"),p=M("townships"),U=M("packages"),y=M("parent_form");let v=h(),w=h(!1),I=h(!1),f=h(null);const c=ie({id:null,code:null,priority:"normal",customer_id:null,incharge_id:s.filter(g=>g.id==j.id)[0],type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null});function d(){f.value=null,w.value=!1,c.id="",c.code="",c.priority="normal",c.customer_id="",c.incharge_id=s.filter(g=>g.id==j.id)[0],c.type="default",c.topic="",c.status=1,c.start_date="",c.end_date="",c.new_address="",c.new_township="",c.latitude="",c.longitude="",c.package_id="",c.description="",c.date="",c.time="",c.close_date="",c.close_time="",c.resolved_date="",c.resolved_time=""}function R(){w.value!=!0?(c._method="POST",B.post("/incident",c,{preserveState:!0,onSuccess:g=>{f.value=g.props.response.id;let S=V.data.filter(A=>A.id==f.value)[0];w.value=!0,t.emit("selected_id",f.value),t.emit("loading",!1),S!==void 0&&(console.log("response is : "+S),F(S)),Toast.fire({icon:"success",title:g.props.flash.message})},onError:g=>{t.emit("loading",!1),console.log("error ..")},onStart:g=>{t.emit("loading",!0)}})):(c._method="PUT",B.post("/incident/"+c.id,c,{onSuccess:g=>{Toast.fire({icon:"success",title:g.props.flash.message}),t.emit("loading",!1)},onError:g=>{t.emit("loading",!1),console.log("error .."+g)},onStart:g=>{t.emit("loading",!0)}}))}function F(g){let S=null;f.value=g.id,w.value=!0,g.location!=null&&(S=g.location.split(",",2),c.latitude=S[0],c.longitude=S[1]),c.id=g.id,c.code=g.code,c.priority=g.priority,c.customer_id=x.filter(A=>A.id==g.customer_id)[0],c.incharge_id=u.filter(A=>A.id==g.incharge_id)[0],c.type=g.type,c.topic=g.topic,c.status=g.status,c.start_date=g.start_date,c.end_date=g.end_date,c.new_address=g.new_address,c.new_township=p.filter(A=>A.id==g.new_township)[0],c.package_id=U.filter(A=>A.id==g.package_id)[0],c.description=g.description,c.date=g.date,c.time=g.time,c.close_date=g.close_date,c.close_time=g.close_time,c.resolved_date=g.resolved_date,c.resolved_time=g.resolved_time}function q(g){w.value=!0,c.priority=g.priority}function n(g){let S="Open";return g==1?S="Open":g==2?S="Escalated":g==3?S="Closed":g==4?S="Deleted":g==5&&(S="Resolved"),S}function G(g){confirm("Are you sure want to remove?")&&(c._method="PUT",c.status=4,B.post("/incident/"+c.id,c,{onSuccess:S=>{Toast.fire({icon:"success",title:S.props.flash.message})},onError:S=>{console.log("error .."+S)}}))}const H=async()=>{let g="/getIncident/"+r.data;console.log(g);try{return t.emit("loading",!0),await(await fetch(g)).json()}catch(S){t.emit("loading",!1),console.error(S)}},$=()=>{H().then(g=>{v.value=g})};return Z(()=>{console.log("Incident Detail - onMounted"),r.data&&(f.value=r.data,H().then(g=>{t.emit("loading",!1),g!==void 0?(console.log("appending response"),F(g),console.log("show parent form"),console.log(y),y&&q(y)):console.log("not appending response")})),U.map(function(g){return g.item_data=`${g.speed} Mbps - ${g.name} - ${g.contract_period} Months`})}),de(()=>{console.log("Incident Detail - onUpdated"),U.map(function(g){return g.item_data=`${g.speed} Mbps - ${g.name} - ${g.contract_period} Months`})}),{loading:I,getIncident:H,calculate:$,deleteIncident:G,doSubmit:R,getStatus:n,form:c,clearform:d,customers:x,team:s,townships:p,packages:U,openForm:q,editMode:w,edit:F}}},Ae={class:"grid grid-cols-5 gap-2"},Ne={class:"py-2 col-span-2 sm:col-span-2"},Le={class:"mt-1 flex rounded-md shadow-sm"},ze={key:0,class:"mt-2 text-sm text-red-500"},Be={class:"py-2 col-span-2 sm:col-span-2"},Ee={class:"mt-1 flex rounded-md shadow-sm"},Fe={key:0,class:"mt-2 text-sm text-red-500"},He={class:"py-2 col-span-4 sm:col-span-4"},Ye={key:0,class:"mt-1 flex rounded-md shadow-sm"},We={key:1,class:"mt-2 text-sm text-red-500"},Ge={class:"py-2 col-span-4 sm:col-span-4"},qe={key:0,class:"mt-1 flex rounded-md shadow-sm"},Ke={key:1,class:"mt-2 text-sm text-red-500"},Je={class:"py-2 col-span-4 sm:col-span-4"},Qe={class:"mt-1 flex"},Xe={key:0,class:"mt-2 text-sm text-red-500"},Ze={key:0,class:"py-2 col-span-1 sm:col-span-1"},$e={key:1,class:"py-2 col-span-4 sm:col-span-4"},et={class:"mt-1 flex"},tt={key:0,class:"mt-2 text-sm text-red-500"},st={class:"py-2 col-span-4 sm:col-span-4"},ot={class:"mt-1 flex"},lt={key:0,class:"mt-2 text-sm text-red-500"},rt={key:2,class:"py-2 col-span-1 sm:col-span-1"},it={key:3,class:"py-2 col-span-2 sm:col-span-2"},nt={class:"mt-1 flex rounded-md shadow-sm"},at={key:0,class:"mt-2 text-sm text-red-500"},dt={key:4,class:"py-2 col-span-2 sm:col-span-2"},mt={class:"mt-1 flex rounded-md shadow-sm"},ct={key:0,class:"mt-2 text-sm text-red-500"},pt={key:5,class:"py-2 col-span-1 sm:col-span-1"},ut={key:6,class:"py-2 col-span-2 sm:col-span-2"},ft={class:"mt-1 flex rounded-md shadow-sm"},gt={key:0,class:"mt-2 text-sm text-red-500"},yt={key:7,class:"py-2 col-span-2 sm:col-span-2"},xt={class:"mt-1 flex rounded-md shadow-sm"},bt={key:0,class:"mt-2 text-sm text-red-500"},_t={key:8,class:"py-2 col-span-1 sm:col-span-1"},vt={key:9,class:"py-2 col-span-4 sm:col-span-4"},wt={class:"grid grid-cols-2 gap-2"},kt={class:"col-span-1 sm:col-span-1"},ht={class:"mt-1 flex rounded-md shadow-sm"},Ct={key:0,class:"mt-2 text-sm text-red-500"},Vt={class:"col-span-1 sm:col-span-1"},Tt={class:"mt-1 flex rounded-md shadow-sm"},St={key:0,class:"mt-2 text-sm text-red-500"},Ut={key:10,class:"py-2 col-span-1 sm:col-span-1"},jt={key:11,class:"py-2 col-span-4 sm:col-span-4"},Dt={class:"mt-1 flex rounded-md shadow-sm"},It={key:0,class:"mt-2 text-sm text-red-500"},Ot={key:12,class:"py-2 col-span-1 sm:col-span-1"},Pt={key:13,class:"py-2 col-span-4 sm:col-span-4"},Mt={class:"mt-1 flex rounded-md shadow-sm"},Rt={key:0,class:"mt-2 text-sm text-red-500"},At={key:14,class:"py-2 col-span-1 sm:col-span-1"},Nt={key:15,class:"py-2 col-span-4 sm:col-span-4"},Lt={class:"mt-1 flex"},zt={key:0,class:"mt-2 text-sm text-red-500"},Bt={key:16,class:"py-2 col-span-1 sm:col-span-1"},Et={key:17,class:"py-2 col-span-4 sm:col-span-4"},Ft={key:0,class:"mt-1 flex rounded-md shadow-sm"},Ht={key:1,class:"mt-2 text-sm text-red-500"},Yt={key:18,class:"py-2 col-span-1 sm:col-span-1"},Wt={key:19,class:"py-2 col-span-4 sm:col-span-4"},Gt={class:"grid grid-cols-2 gap-2"},qt={class:"col-span-1 sm:col-span-1"},Kt={class:"mt-1 flex rounded-md shadow-sm"},Jt={key:0,class:"mt-2 text-sm text-red-500"},Qt={class:"col-span-1 sm:col-span-1"},Xt={class:"mt-1 flex rounded-md shadow-sm"},Zt={key:0,class:"mt-2 text-sm text-red-500"},$t={key:20,class:"py-2 col-span-1 sm:col-span-1"},es={key:21,class:"py-2 col-span-4 sm:col-span-4"},ts={class:"mt-1 flex rounded-md shadow-sm"},ss={key:0,class:"mt-2 text-sm text-red-500"},os={key:22,class:"py-2 col-span-1 sm:col-span-1"},ls={key:23,class:"py-2 col-span-4 sm:col-span-4"},rs={key:0,class:"mt-1 flex rounded-md shadow-sm"},is={key:1,class:"mt-2 text-sm text-red-500"},ns={key:24,class:"py-2 col-span-1 sm:col-span-1"},as={key:25,class:"py-2 col-span-4 sm:col-span-4"},ds={class:"mt-1 flex rounded-md shadow-sm"},ms={key:0,class:"mt-2 text-sm text-red-500"},cs={class:"py-2 col-span-4 sm:col-span-4"},ps={class:"mt-1 flex"},us={key:0,class:"mt-2 text-sm text-red-500"},fs={key:0,class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function gs(r,t,u,s,j,V){const x=z("multiselect");return o(),l(L,null,[e("div",Ae,[t[46]||(t[46]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",Ne,[e("div",Le,[_(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=p=>s.form.date=p),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.date]])]),r.$page.props.errors.date?(o(),l("p",ze,m(r.$page.props.errors.date),1)):i("",!0)]),e("div",Be,[e("div",Ee,[_(e("input",{type:"time","onUpdate:modelValue":t[1]||(t[1]=p=>s.form.time=p),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.time]])]),r.$page.props.errors.time?(o(),l("p",Fe,m(r.$page.props.errors.time),1)):i("",!0)]),t[47]||(t[47]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",He,[s.customers.length!==0?(o(),l("div",Ye,[O(x,{"deselect-label":"Selected already",options:s.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer_id,"onUpdate:modelValue":t[2]||(t[2]=p=>s.form.customer_id=p),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.customer?(o(),l("p",We,m(r.$page.props.errors.customer),1)):i("",!0)]),t[48]||(t[48]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",Ge,[s.team.length!==0?(o(),l("div",qe,[O(x,{"deselect-label":"Selected already",options:s.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[3]||(t[3]=p=>s.form.incharge_id=p),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.incharge?(o(),l("p",Ke,m(r.$page.props.errors.incharge),1)):i("",!0)]),t[49]||(t[49]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",Je,[e("div",Qe,[_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=p=>s.form.type=p),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:""},t[23]||(t[23]=[re('<option value="default">Please Choose Ticket Type</option><option value="service_complaint">Service Complaint</option><option value="gaming_issue">Gaming Issue</option><option value="relocation">Relocation</option><option value="plan_change">Plan Change</option><option value="information_update">Information Update</option><option value="suspension">Suspension</option><option value="resume">Resume</option><option value="termination">Termination</option>',9)]),512),[[W,s.form.type]])]),r.$page.props.errors.type?(o(),l("p",Xe,m(r.$page.props.errors.type),1)):i("",!0)]),s.form.type=="service_complaint"?(o(),l("div",Ze,t[24]||(t[24]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):i("",!0),s.form.type=="service_complaint"?(o(),l("div",$e,[e("div",et,[_(e("select",{"onUpdate:modelValue":t[5]||(t[5]=p=>s.form.topic=p),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[25]||(t[25]=[re('<option value="no_internet">No Internet</option><option value="los_redlight">LOS Redlight</option><option value="slow_performance">Slow Performance</option><option value="wifi_issue">Wifi Issue</option><option value="onu_issue">ONU Issue</option><option value="password_change">Password Changed</option><option value="other">Other</option>',7)]),512),[[W,s.form.topic]])]),r.$page.props.errors.topic?(o(),l("p",tt,m(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),t[50]||(t[50]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",st,[e("div",ot,[_(e("select",{"onUpdate:modelValue":t[6]||(t[6]=p=>s.form.status=p),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[26]||(t[26]=[e("option",{value:"1"},"Open",-1),e("option",{value:"2",disabled:""},"Escalated",-1),e("option",{value:"5",disabled:""},"Resolved",-1),e("option",{value:"3"},"Closed",-1)]),512),[[W,s.form.status]])]),r.$page.props.errors.status?(o(),l("p",lt,m(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==3?(o(),l("div",rt,t[27]||(t[27]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):i("",!0),s.form.status==3?(o(),l("div",it,[e("div",nt,[_(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=p=>s.form.close_date=p),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.close_date]])]),r.$page.props.errors.close_date?(o(),l("p",at,m(r.$page.props.errors.close_date),1)):i("",!0)])):i("",!0),s.form.status==3?(o(),l("div",dt,[e("div",mt,[_(e("input",{type:"time","onUpdate:modelValue":t[8]||(t[8]=p=>s.form.close_time=p),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.close_time]])]),r.$page.props.errors.close_time?(o(),l("p",ct,m(r.$page.props.errors.close_time),1)):i("",!0)])):i("",!0),s.form.status==5?(o(),l("div",pt,t[28]||(t[28]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):i("",!0),s.form.status==5?(o(),l("div",ut,[e("div",ft,[_(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=p=>s.form.resolved_date=p),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.resolved_date]])]),r.$page.props.errors.resolved_date?(o(),l("p",gt,m(r.$page.props.errors.resolved_date),1)):i("",!0)])):i("",!0),s.form.status==5?(o(),l("div",yt,[e("div",xt,[_(e("input",{type:"time","onUpdate:modelValue":t[10]||(t[10]=p=>s.form.resolved_time=p),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.resolved_time]])]),r.$page.props.errors.resolved_time?(o(),l("p",bt,m(r.$page.props.errors.resolved_time),1)):i("",!0)])):i("",!0),s.form.type=="suspension"?(o(),l("div",_t,t[29]||(t[29]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense Period : ")],-1)]))):i("",!0),s.form.type=="suspension"?(o(),l("div",vt,[e("div",wt,[e("div",kt,[e("div",ht,[t[30]||(t[30]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",Ct,m(r.$page.props.errors.start_date),1)):i("",!0)]),e("div",Vt,[e("div",Tt,[t[31]||(t[31]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=p=>s.form.end_date=p),name:"end_date",id:"end_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.end_date]])]),r.$page.props.errors.end_date?(o(),l("p",St,m(r.$page.props.errors.end_date),1)):i("",!0)])])])):i("",!0),s.form.type=="resume"?(o(),l("div",Ut,t[32]||(t[32]=[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")],-1)]))):i("",!0),s.form.type=="resume"?(o(),l("div",jt,[e("div",Dt,[t[33]||(t[33]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[13]||(t[13]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.resume?(o(),l("p",It,m(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="termination"?(o(),l("div",Ot,t[34]||(t[34]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):i("",!0),s.form.type=="termination"?(o(),l("div",Pt,[e("div",Mt,[t[35]||(t[35]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[14]||(t[14]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",Rt,m(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",At,t[36]||(t[36]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Nt,[e("div",Lt,[_(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=p=>s.form.new_address=p),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[k,s.form.new_address]])]),r.$page.props.errors.new_address?(o(),l("p",zt,m(r.$page.props.errors.new_address),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",Bt,t[37]||(t[37]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Et,[s.townships.length!==0?(o(),l("div",Ft,[O(x,{"deselect-label":"Selected already",options:s.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[16]||(t[16]=p=>s.form.new_township=p),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.new_township?(o(),l("p",Ht,m(r.$page.props.errors.new_township),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",Yt,t[38]||(t[38]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Wt,[e("div",Gt,[e("div",qt,[e("div",Kt,[t[39]||(t[39]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=p=>s.form.latitude=p),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude"},null,512),[[k,s.form.latitude]])]),r.$page.props.errors.latitude?(o(),l("p",Jt,m(r.$page.props.errors.latitude),1)):i("",!0)]),e("div",Qt,[e("div",Xt,[t[40]||(t[40]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=p=>s.form.longitude=p),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude"},null,512),[[k,s.form.longitude]])]),r.$page.props.errors.longitude?(o(),l("p",Zt,m(r.$page.props.errors.longitude),1)):i("",!0)])])])):i("",!0),s.form.type=="relocation"?(o(),l("div",$t,t[41]||(t[41]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",es,[e("div",ts,[t[42]||(t[42]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[19]||(t[19]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",ss,m(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(o(),l("div",os,t[43]||(t[43]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_package",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Package: ")],-1)]))):i("",!0),s.form.type=="plan_change"?(o(),l("div",ls,[s.packages.length!==0?(o(),l("div",rs,[O(x,{"deselect-label":"Selected already",options:s.packages,"track-by":"id",label:"item_data",modelValue:s.form.package_id,"onUpdate:modelValue":t[20]||(t[20]=p=>s.form.package_id=p),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.package?(o(),l("p",is,m(r.$page.props.errors.package),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(o(),l("div",ns,t[44]||(t[44]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="plan_change"?(o(),l("div",as,[e("div",ds,[t[45]||(t[45]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[21]||(t[21]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",ms,m(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),t[51]||(t[51]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",cs,[e("div",ps,[_(e("textarea",{"onUpdate:modelValue":t[22]||(t[22]=p=>s.form.description=p),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[k,s.form.description]])]),r.$page.props.errors.description?(o(),l("p",us,m(r.$page.props.errors.description),1)):i("",!0)])]),s.loading?(o(),l("div",fs,t[52]||(t[52]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):i("",!0)],64)}const ys=X(Re,[["render",gs]]),xs={name:"Task",components:{Multiselect:ne},props:["data","errors"],setup(r){const t=M("noc"),u=M("subcons"),s=M("write_permission"),j=M("read_permission"),V=M("task_write"),x=M("pendingRootCause");M("subRootCause");const p=h({});let U=h([]),y=h(),v=h(!1),w=h(!1),I=h(!1);const f=ie({id:null,assigned:null,target:null,status:1,description:null,comment:null,incident_id:null,root_causes:null,sub_root_causes:null,root_causes_id:null,sub_root_causes_id:null});function c(){w.value=!0,f.incident_id=r.data}function d(){f.id=null,f.assigned=null,f.target=null,f.status=1,f.description=null,f.comment=null,f.incident_id=r.data,f.root_causes=null,f.sub_root_causes=null,f.root_causes_id=null,f.sub_root_causes_id=null}function R(b){console.log(b),f.id=b.id,f.assigned=u.filter(T=>T.id==b.assigned)[0],f.description=b.description,f.incident_id=b.incident_id,f.status=b.status,f.target=b.target,f.comment=b.comment,f.root_causes=b.root_causes_id?x.filter(T=>T.id==b.root_causes_id)[0]:null,f.sub_root_causes="",f.root_causes_id=b.root_causes_id,f.sub_root_causes_id=b.sub_root_causes_id,I.value=!0,w.value=!0}function F(b){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(T=>{T.isConfirmed?q(b):Toast.fire("Your data is safe!")})}function q(b){f.id=b.id,f.assigned=u.filter(T=>T.id==b.assigned)[0],f.description=b.description,f.incident_id=b.incident_id,f.status=0,f.target=b.target,I.value=!0,w.value=!1,H()}function n(b){b.status!=2?Toast.fire({title:"Are you sure?",text:"Do you want to mark as completed !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(T=>{T.isConfirmed&&G(b,2)}):Toast.fire({title:"Are you sure?",text:"Do you want to mark as WIP !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(T=>{T.isConfirmed&&G(b,1)})}function G(b,T){f.id=b.id,f.assigned=b.assigned,f.description=b.description,f.incident_id=b.incident_id,f.status=T,f.target=b.target,I.value=!0,w.value=!1,H()}function H(){I.value!=!0?(f._method="POST",B.post("/addTask",f,{preserveState:!0,onSuccess:b=>{w.value=!1,d(),ee(),Toast.fire({icon:"success",title:b.props.flash.message})},onError:b=>{console.log("error ..",b)}})):(f._method="PUT",B.post("/editTask/"+f.id,f,{onSuccess:b=>{w.value=!1,I.value=!1,d(),ee(),Toast.fire({icon:"success",title:b.props.flash.message}),closeModal()},onError:b=>{p.value=b,console.log("error ..",b)}}))}function $(){w.value=!1,preserveState=!0}const g=async()=>{let b="/getTask/"+r.data;console.log(b);try{return await(await fetch(b)).json()}catch(T){console.error(T)}},S=b=>{let T=u.filter(K=>K.id==b)[0];return T?T.name:""};function A(b){let T="WIP";return b==0?T="Deleted":b==1?T="WIP":b==2?T="Completed":b==3&&(T="Pending"),T}const ee=()=>{g().then(b=>{y.value=b})};function oe(b){var K;U.value=[];let T=x.filter(te=>te.id==b.id);U.value=(K=T[0])==null?void 0:K.sub_root_causes,f.sub_root_causes_id&&(f.sub_root_causes=U.value.filter(te=>te.id==f.sub_root_causes_id)[0],f.sub_root_causes||(f.sub_root_causes_id=null))}return me(()=>f.root_causes,b=>{b&&oe(b)}),Z(()=>{console.log(y.value),ee()}),{loading:v,task_list:y,edit:w,editMode:I,newTask:c,saveTask:H,cancelTask:$,getName:S,getStatus:A,editTask:R,deleteTask:F,completeTask:n,form:f,noc:t,subcons:u,write_permission:s,read_permission:j,task_write:V,pendingRootCause:x,subRCA:U,formErrors:p}}},bs={class:"flex w-full justify-end"},_s={key:0},vs={key:1},ws={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},ks={key:1},hs={class:"min-w-full divide-y divide-gray-200 table-auto"},Cs={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white flex flex-col justify-between text-left"},Vs={class:"px-6 py-3 whitespace-nowrap w-1/12"},Ts={class:"px-6 py-3 whitespace-nowrap w-3/5"},Ss={class:"px-6 py-3 whitespace-nowrap w-1/4"},Us={class:"px-6 py-3 whitespace-nowrap w-1/6"},js={class:"px-6 py-3 whitespace-nowrap w-1/12"},Ds={key:0,class:"px-6 py-3 whitespace-nowrap w-1/12"},Is=["onClick"],Os={key:0},Ps=["onClick"],Ms={key:1,class:"px-6 py-3 whitespace-nowrap w-1/12"},Rs=["onClick"],As={key:2},Ns={class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full"},Ls={class:"py-2 col-span-3 sm:col-span-3"},zs={class:"flex rounded-md shadow-sm"},Bs={key:0,class:"flex rounded-md shadow-sm w-full"},Es={key:1,class:"mt-2 text-sm text-red-500"},Fs={class:"py-2 col-span-3 sm:col-span-3"},Hs={class:"flex rounded-md shadow-sm"},Ys={key:0,class:"mt-2 text-sm text-red-500"},Ws={class:"py-2 col-span-3 sm:col-span-3"},Gs={class:"flex rounded-md shadow-sm"},qs={key:0,class:"mt-2 text-sm text-red-500"},Ks={class:"py-2 col-span-3 sm:col-span-3"},Js={class:"flex rounded-md shadow-sm"},Qs={class:"flex gap-4"},Xs={class:"inline-flex items-center"},Zs={class:"inline-flex items-center"},$s={class:"inline-flex items-center"},eo={class:"inline-flex items-center"},to={key:0,class:"mt-2 text-sm text-red-500"},so={class:"py-2 col-span-3 sm:col-span-3"},oo={key:0,class:"flex rounded-md shadow-sm w-full"},lo={key:1,class:"mt-2 text-sm text-red-500"},ro={class:"py-2 col-span-3 sm:col-span-3"},io={key:0,class:"flex rounded-md shadow-sm w-full"},no={key:1,class:"mt-2 text-sm text-red-500"},ao={class:"py-2 col-span-3 sm:col-span-3"},mo={class:"flex rounded-md shadow-sm"},co={key:0,class:"mt-2 text-sm text-red-500"};function po(r,t,u,s,j,V){var p,U;const x=z("multiselect");return o(),l(L,null,[e("div",bs,[!s.edit&&s.write_permission==1&&s.task_write==1?(o(),l("a",{key:0,href:"#",onClick:t[0]||(t[0]=y=>s.newTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[15]||(t[15]=[P("Add Task"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0),s.edit&&s.write_permission==1&&s.task_write==1?(o(),l("a",{key:1,href:"#",onClick:t[1]||(t[1]=y=>s.saveTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-green-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-400 active:bg-green-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},[s.editMode?i("",!0):(o(),l("span",_s,"Save Task")),s.editMode?(o(),l("span",vs,"Update Task")):i("",!0),t[16]||(t[16]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))])):i("",!0),s.edit?(o(),l("a",{key:2,href:"#",onClick:t[2]||(t[2]=y=>s.cancelTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-gray-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[17]||(t[17]=[P("Cancel"),e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)]),s.task_list?i("",!0):(o(),l("div",ws,t[18]||(t[18]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.task_list&&!s.edit?(o(),l("div",ks,[e("table",hs,[t[24]||(t[24]=e("thead",{class:"bg-gray-50 w-full flex flex-col"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"},"No. "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-3/5"}," Instruction"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4"}," Assigned"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6"}," Target"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Action")])],-1)),e("tbody",Cs,[(o(!0),l(L,null,Q(s.task_list,(y,v)=>(o(),l("tr",{key:y.id,class:"flex"},[e("td",Vs,m(v+1),1),e("td",Ts,m(y.description.length>50?y.description.substring(0,50)+" ...":y.description),1),e("td",Ss,m(s.getName(y.assigned)),1),e("td",Us,m(y.target),1),e("td",js,m(s.getStatus(y.status)),1),s.write_permission==1?(o(),l("td",Ds,[e("a",{href:"#",onClick:w=>s.editTask(y),class:"text-blue-600"},t[19]||(t[19]=[e("i",{class:"fa fa-edit"},null,-1)]),8,Is),t[22]||(t[22]=P()),s.task_write?(o(),l("span",Os,[t[21]||(t[21]=P(" | ")),e("a",{href:"#",onClick:w=>s.deleteTask(y),class:"text-red-600"},t[20]||(t[20]=[e("i",{class:"fa fa-trash"},null,-1)]),8,Ps)])):i("",!0)])):(o(),l("td",Ms,[e("a",{href:"#",onClick:w=>s.editTask(y),class:"text-blue-600"},t[23]||(t[23]=[e("i",{class:"fa fa-eye"},null,-1)]),8,Rs)]))]))),128))])])])):i("",!0),s.edit?(o(),l("div",As,[e("div",Ns,[t[31]||(t[31]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Assigned : ")])],-1)),e("div",Ls,[e("div",zs,[s.subcons.length!==0?(o(),l("div",Bs,[O(x,{"deselect-label":"Selected already",options:s.subcons,"track-by":"id",label:"name",modelValue:s.form.assigned,"onUpdate:modelValue":t[3]||(t[3]=y=>s.form.assigned=y),"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.assigned?(o(),l("p",Es,m(r.$page.props.errors.assigned),1)):i("",!0)])]),t[32]||(t[32]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Target : ")])],-1)),e("div",Fs,[e("div",Hs,[_(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=y=>s.form.target=y),name:"target",id:"target",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.target]])]),r.$page.props.errors.target?(o(),l("p",Ys,m(r.$page.props.errors.target),1)):i("",!0)]),t[33]||(t[33]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Instruction : ")])],-1)),e("div",Ws,[e("div",Gs,[_(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=y=>s.form.description=y),name:"description",id:"description",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.description]])]),r.$page.props.errors.description?(o(),l("p",qs,m(r.$page.props.errors.description),1)):i("",!0)]),t[34]||(t[34]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",Ks,[e("div",Js,[e("div",Qs,[e("label",Xs,[_(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=y=>s.form.status=y),value:"1",class:"form-radio text-yellow-500"},null,512),[[J,s.form.status]]),t[25]||(t[25]=e("span",{class:"ml-2"},"WIP",-1))]),e("label",Zs,[_(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=y=>s.form.status=y),value:"3",class:"form-radio text-red-500"},null,512),[[J,s.form.status]]),t[26]||(t[26]=e("span",{class:"ml-2"},"Pending",-1))]),e("label",$s,[_(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=y=>s.form.status=y),value:"2",class:"form-radio text-green-500"},null,512),[[J,s.form.status]]),t[27]||(t[27]=e("span",{class:"ml-2"},"Completed",-1))]),e("label",eo,[_(e("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=y=>s.form.status=y),value:"0",class:"form-radio text-indigo-500"},null,512),[[J,s.form.status]]),t[28]||(t[28]=e("span",{class:"ml-2"},"Deleted",-1))])])]),r.$page.props.errors.status?(o(),l("p",to,m(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==3?(o(),l(L,{key:0},[t[29]||(t[29]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"root_causes_id",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Root Cause for Pending : ")])],-1)),e("div",so,[((p=s.pendingRootCause)==null?void 0:p.length)!==0?(o(),l("div",oo,[O(x,{"deselect-label":"Selected already",options:s.pendingRootCause,"track-by":"id",label:"name",modelValue:s.form.root_causes,"onUpdate:modelValue":[t[10]||(t[10]=y=>s.form.root_causes=y),t[11]||(t[11]=y=>s.form.root_causes_id=y==null?void 0:y.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.root_causes_id?(o(),l("p",lo,m(r.$page.props.errors.root_causes_id),1)):i("",!0)]),t[30]||(t[30]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"sub_root_causes",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Sub Root Cause : ")])],-1)),e("div",ro,[((U=s.subRCA)==null?void 0:U.length)!==0?(o(),l("div",io,[O(x,{"deselect-label":"Selected already",options:s.subRCA,"track-by":"id",label:"name",modelValue:s.form.sub_root_causes,"onUpdate:modelValue":[t[12]||(t[12]=y=>s.form.sub_root_causes=y),t[13]||(t[13]=y=>s.form.sub_root_causes_id=y==null?void 0:y.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.sub_root_causes_id?(o(),l("p",no,m(r.$page.props.errors.sub_root_causes_id),1)):i("",!0)])],64)):i("",!0),t[35]||(t[35]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"comment",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Comments : ")])],-1)),e("div",ao,[e("div",mo,[_(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=y=>s.form.comment=y),name:"comment",id:"comment",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.comment]])]),r.$page.props.errors.comment?(o(),l("p",co,m(r.$page.props.errors.comment),1)):i("",!0)])])])):i("",!0)],64)}const uo=X(xs,[["render",po]]),fo={name:"Log",props:["data"],setup(r){const t=h(""),u=async()=>{let j="/getLog/"+r.data;try{return await(await fetch(j)).json()}catch(V){console.error(V)}},s=()=>{u().then(j=>{t.value=j})};return Z(()=>{s()}),{logs:t}}},go={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},yo={key:1},xo={class:"min-w-full divide-y divide-gray-200 table-auto"},bo={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},_o={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/12 flex"},vo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/4 flex-1"},wo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/3 flex-1"},ko={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-full flex-1"};function ho(r,t,u,s,j,V){return o(),l(L,null,[s.logs?i("",!0):(o(),l("div",go,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(o(),l("div",yo,[e("table",xo,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3 flex-1"},"Actor"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full flex-1"},"Action")])],-1)),e("tbody",bo,[(o(!0),l(L,null,Q(s.logs,(x,p)=>(o(),l("tr",{key:x.id,class:"flex"},[e("td",_o,m(p+1),1),e("td",vo,m(x.created_at),1),e("td",wo,m(x.name),1),e("td",ko,m(x.action),1)]))),128))])])])):i("",!0)],64)}const Co=X(fo,[["render",ho]]),Vo={name:"History",props:["data"],setup(r){const t=h(),u=async()=>{let j="/getHistory/"+r.data;try{return await(await fetch(j)).json()}catch(V){console.error(V)}},s=()=>{u().then(j=>{t.value=j})};return Z(()=>{s()}),{logs:t}}},To={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},So={key:1},Uo={class:"min-w-full divide-y divide-gray-200 table-auto"},jo={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},Do={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex"},Io={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Oo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Po={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Mo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Ro={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Ao={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"};function No(r,t,u,s,j,V){return o(),l(L,null,[s.logs?i("",!0):(o(),l("div",To,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(o(),l("div",So,[e("table",Uo,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Type"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Topic (if exists)"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Opened By")])],-1)),e("tbody",jo,[(o(!0),l(L,null,Q(s.logs,(x,p)=>(o(),l("tr",{key:x.id,class:"flex"},[e("td",Do,m(p+1),1),e("td",Io,m(x.date+" "+x.time),1),e("td",Oo,m(x.code),1),e("td",Po,m(x.ftth_id),1),e("td",Mo,m(x.type),1),e("td",Ro,m(x.topic?x.topic:"N/A"),1),e("td",Ao,m(x.name),1)]))),128))])])])):i("",!0)],64)}const Lo=X(Vo,[["render",No]]),zo={name:"File",components:{Upload:we},props:["data"],setup(r){let t=h(!1),u=h();const s=M("write_permission"),j=M("read_permission");let V=h(!1),x=h("");function p(){V.value=!0,x.value={incident_id:r.data}}function U(){V.value=!1,f()}function y(c){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(d=>{d.isConfirmed?v(c):Toast.fire("Your data is safe!")})}function v(c){c._method="DELETE",B.post("/deleteFile/"+c.id,c,{onSuccess(d){Toast.fire({icon:"success",title:"Your File has been Deleted !"}),f()}})}const w=async()=>{let c="/getFile/"+r.data;console.log(c);try{return await(await fetch(c)).json()}catch(d){console.error(d)}},I=c=>{c&&(V.value=!1,f(),Toast.fire({icon:"success",title:"Successfully Uploaded the File"}))},f=()=>{w().then(c=>{u.value=c})};return Z(()=>{f()}),{file_list:u,add:V,deleteFile:y,addFile:p,closeFile:U,checkUpload:I,incident_id:x,write_permission:s,read_permission:j,loading:t}}},Bo={class:"flex w-full justify-end"},Eo={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Fo={key:1},Ho={class:"min-w-full divide-y divide-gray-200 table-auto"},Yo={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},Wo={class:"px-6 py-3 whitespace-nowrap tracking-wider w-1/12"},Go={class:"px-6 py-3 whitespace-nowrap tracking-wider w-full"},qo={key:0,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},Ko=["href"],Jo=["onClick"],Qo={key:1,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},Xo=["href"],Zo={key:2};function $o(r,t,u,s,j,V){const x=z("upload");return o(),l(L,null,[e("div",Bo,[!s.add&&s.write_permission==1?(o(),l("a",{key:0,href:"#",onClick:t[0]||(t[0]=p=>s.addFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[2]||(t[2]=[P("Add File"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0),s.add?(o(),l("a",{key:1,href:"#",onClick:t[1]||(t[1]=p=>s.closeFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[3]||(t[3]=[P("Close"),e("i",{class:"fas fa-times-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)]),s.file_list?i("",!0):(o(),l("div",Eo,t[4]||(t[4]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.file_list&&!s.add?(o(),l("div",Fo,[e("table",Ho,[t[9]||(t[9]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"},"ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full"},"File"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Action ")])],-1)),e("tbody",Yo,[(o(!0),l(L,null,Q(s.file_list,(p,U)=>(o(),l("tr",{key:p.id,class:"flex"},[e("td",Wo,m(U+1),1),e("td",Go,m(p.name),1),s.write_permission==1?(o(),l("td",qo,[e("a",{href:p.path,target:"_blank"},t[5]||(t[5]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,Ko),t[7]||(t[7]=P(" | ")),e("a",{href:"#",onClick:y=>s.deleteFile(p),class:"text-red-600"},t[6]||(t[6]=[e("i",{class:"fa fa-trash"},null,-1)]),8,Jo)])):(o(),l("td",Qo,[e("a",{href:p.path,target:"_blank"},t[8]||(t[8]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,Xo)]))]))),128))])])])):i("",!0),s.add?(o(),l("div",Zo,[O(x,{data:s.incident_id,onStatus:s.checkUpload},null,8,["data","onStatus"])])):i("",!0)],64)}const el=X(zo,[["render",$o]]),tl={name:"Incident",components:{AppLayout:fe,Pagination:ke,IncidentAlert:Me,IncidentDetail:ys,Multiselect:ne,VueDatePicker:he,Task:uo,File:el,Log:Co,History:Lo,CustomerDetail:ge,NoData:ye},props:{incidents:Object,incidents_2:Object,noc:Object,team:Object,townships:Object,customers:Object,packages:Object,critical:Object,high:Object,normal:Object,errors:Object,read_permission:Boolean,write_permission:Boolean,task_write:Boolean,user:Object,subcons:Object,rootCause:Object,subRootCause:Object,pendingRootCause:Object},setup(r){const t=h(""),u=h(""),s=h(1);let j=h(!1),V=h(!1),x=h(""),p=h(0),U=h("default"),y=h("default"),v=h([]),w=h([]);const I=h({date:"YYYY-MM-DD",month:"MMM"});let f=h(!1),c=h(!1);E("noc",r.noc),E("subcons",r.subcons),E("team",r.team),E("townships",r.townships),E("user",r.user),E("packages",r.packages),E("read_permission",r.read_permission),E("write_permission",r.write_permission),E("task_write",r.task_write),E("customers",r.customers),E("pendingRootCause",r.pendingRootCause),E("rootCause",r.rootCause),E("subRootCause",r.subRootCause);const d=ie({id:null,code:null,priority:null,customer_id:null,incharge_id:r.team.filter(a=>a.id==r.user.id)[0],type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null,rca:null,sub_rca:null,root_cause_id:null,sub_root_cause_id:null,rca_notes:null});let R=h(!0),F=h("");function q(a){F.value=a}function n(a){if(x.value!=null&&(R.value=a,a==1)){let C=r.incidents.data.filter(D=>D.id==x.value)[0];S(C)}}function G(){var a=new Date,C=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),D=a.getHours()+":"+a.getMinutes();!d.close_date&&p.value!=3&&(d.close_date=C),!d.close_time&&p.value!=3&&(d.close_time=D),R.value=1,f.value=!0}function H(){f.value=!1,x.value=null}function $(){A(),G()}function g(a){let C=r.incidents_2.filter(D=>D.id==a.id)[0];S(C)}function S(a){let C=null;x.value=a.id,V.value=!0,a.location!=null&&(C=a.location.split(",",2),d.latitude=C[0],d.longitude=C[1]),d.id=a.id,d.code=a.code,d.priority=a.priority,d.customer_id=r.customers.filter(D=>D.id==a.customer_id)[0],d.incharge_id=r.noc.filter(D=>D.id==a.incharge_id)[0],d.type=a.type,d.topic=a.topic,d.status=a.status,d.start_date=a.start_date,d.end_date=a.end_date,d.new_address=a.new_address,d.new_township=r.townships.filter(D=>D.id==a.new_township)[0],d.package_id=r.packages.filter(D=>D.id==a.package_id)[0],d.description=a.description,d.date=a.date,d.time=a.time,d.close_date=a.close_date,d.close_time=a.close_time,d.resolved_date=a.resolved_date,d.resolved_time=a.resolved_time,d.rca=r.rootCause.filter(D=>D.id==a.root_cause_id)[0],d.sub_rca="",d.root_cause_id=a.root_cause_id,d.sub_root_cause_id=a.sub_root_cause_id,d.rca_notes=a.rca_notes,G()}function A(){x.value=null,V.value=!1,d.id="",d.code="",d.priority="normal",d.customer_id="",d.incharge_id=r.team.filter(a=>a.id==r.user.id)[0],d.type="default",d.topic="",d.status=1,d.start_date="",d.end_date="",d.new_address="",d.new_township="",d.latitude="",d.longitude="",d.package_id="",d.description="",d.date="",d.time="",d.close_date="",d.close_time="",d.resolved_date="",d.resolved_time="",d.rca="",d.sub_rca="",d.rca_notes="",d.root_cause_id=null,d.sub_root_cause_id=null}function ee(a){let C="Open";return a==1?C="Open":a==2?C="Escalated":a==3?C="Closed":a==4?C="Deleted":a==5&&(C="Resolved Open"),C}function oe(a){confirm("Are you sure want to remove?")&&(d._method="PUT",d.status=4,B.post("/incident/"+d.id,d,{onSuccess:C=>{s.value+=1,Toast.fire({icon:"success",title:C.props.flash.message}),H()},onError:C=>{console.log("error ..".errors)}}))}const b=()=>{let a="/incident/";p.value!=null&&(a=a+"?status="+p.value),B.get(a,{keyword:t.value},{preserveState:!0})},T=()=>{let a="/incident/";t.value!=null&&(a=a+"?keyword="+t.value),U.value!="default"&&(a=a+"&type="+U.value),y.value!="default"&&(a=a+"&member="+y.value),v.value!=""&&(a=a+"&date="+v.value),B.get(a,{status:p.value},{preserveState:!0})},K=a=>{let C="/incident";a!="all"?B.get(C,{priority:a},{preserveState:!0}):B.get(C,{},{preserveState:!0})},te=a=>{let C="/incident/?";u.value=a,u.order=u.order!=="asc"?"asc":"desc";let D=ce();B.get(C+D,{sort:u.value,order:u.order},{preserveState:!0})},ce=()=>{let a="";return t.value!=null&&(a="&keyword="+t.value),U.value!="default"&&(a+="&type="+U.value),y.value!="default"&&(a+="&member="+y.value),p.value!=null&&(a+="&status="+p.value),v.value!=""&&(a+="&date="+v.value),a};function ae(){r.incidents.data.map(function(a){a.priority=="high"?a.color=a.status!=3&&a.status!=4?"yellow-600":"gray-200":a.priority=="critical"?a.color=a.status!=3&&a.status!=4?"red-600":"gray-200":a.color=a.status!=3&&a.status!=4?"yellow-300":"gray-200"})}function pe(){V.value!=!0?(d._method="POST",B.post("/incident",d,{preserveState:!0,onSuccess:a=>{x.value=a.props.response.id;let C=r.incidents.data.filter(D=>D.id==x.value)[0];V.value=!0,c.value=!1,C!==void 0&&(console.log("response is : "+C),S(C)),Toast.fire({icon:"success",title:a.props.flash.message})},onError:a=>{c.value=!1,console.log("error ..")},onStart:a=>{c.value=!0}})):(d._method="PUT",B.post("/incident/"+d.id,d,{onSuccess:a=>{Toast.fire({icon:"success",title:a.props.flash.message}),c.value=!1},onError:a=>{c.value=!1,console.log("error .."+a)},onStart:a=>{c.value=!0}}))}Z(()=>{console.log("Incident - On Mounted"),r.packages.map(function(a){return a.item_data=`${a.name}`}),ae()});function ue(a){var D;w.value=[];let C=r.rootCause.filter(le=>le.id==a.id);w.value=(D=C[0])==null?void 0:D.sub_root_causes,d.sub_root_cause_id&&(d.sub_rca=w.value.filter(le=>le.id==d.sub_root_cause_id)[0],d.sub_rca||(d.sub_root_cause_id=null))}return me(()=>d.rca,a=>{a&&ue(a)}),de(()=>{console.log("Incident - On Updated"),r.packages.map(function(a){return a.item_data=`${a.name}`}),ae()}),{loading:c,form:d,openModal:G,closeModal:H,newTicket:$,isOpen:f,deleteIncident:oe,searchIncident:b,edit:S,sortBy:te,getStatus:ee,changeStatus:T,sort:u,search:t,show:j,tabClick:n,tab:R,selection:F,selected_id:x,editMode:V,typeChange:q,showPriority:K,incidentStatus:p,page_update:s,alert_edit:g,submit:pe,clearform:A,incidentType:U,incidentBy:y,incidentDate:v,formatter:I,subRCA:w}}},sl={class:"py-1"},ol={class:"mx-auto sm:px-6 lg:px-8"},ll={class:"py-2 md:inline-flex justify-between w-full gap-4"},rl={class:"flex w-full"},il={class:"flex w-full"},nl={class:"flex w-full"},al=["value"],dl={class:"flex w-full"},ml={class:"flex w-full self-center"},cl={class:"flex w-full md:w-1/4"},pl={class:"flex w-full md:w-1/2 md:justify-end"},ul={key:0,class:"grid grid-cols-1 md:grid-cols-6 gap-6 w-full"},fl={class:"lg:col-span-4 md:col-span-6"},gl={key:0,class:"bg-white overflow-auto md:overflow-hidden shadow-xl sm:rounded-lg mt-1"},yl={class:"min-w-full divide-y divide-gray-200"},xl={class:"bg-gray-50"},bl={class:"bg-white divide-y divide-gray-200 text-sm"},_l=["onClick"],vl={class:"px-2 py-3 whitespace-nowrap"},wl={class:"px-2 py-3 whitespace-nowrap"},kl={class:"px-2 py-3 whitespace-nowrap"},hl={class:"px-2 py-3 whitespace-nowrap"},Cl={key:0,class:"px-2 py-3 whitespace-nowrap"},Vl={key:1,class:"px-2 py-3 whitespace-nowrap"},Tl={class:"px-2 py-3 whitespace-nowrap capitalize"},Sl={class:"px-2 py-3 whitespace-nowrap"},Ul={class:"px-2 py-3 whitespace-nowrap"},jl={key:1,class:"w-full block mt-4"},Dl={class:"text-xs text-gray-600"},Il={key:2},Ol={key:3,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mt-1 py-4 flex flex-col items-center"},Pl={class:"col-span-2"},Ml={class:"bg-white rounded-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200 py-2 px-2"},Rl={class:"grid grid-cols-4 gap-2"},Al={class:"col-span-1"},Nl={class:"col-span-1"},Ll={key:1,class:"flex justify-center"},zl={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},Bl={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},El={class:"bg-gray-50 rounded-sm pt-1 inline-block align-bottom overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Fl={class:""},Hl={class:""},Yl={class:"py-2 divide-y divide-yellow-500"},Wl={class:"mt-1 px-3 flex w-full justify-between"},Gl={class:"flex"},ql={class:"flex col-span-1"},Kl={class:"px-2 lg:px-3"},Jl={class:"px-2 lg:px-3"},Ql={class:"px-2 lg:px-3"},Xl={class:"bg-white rounded-t-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200"},Zl={class:"inline-flex w-full bg-gray-50 rounded-t-lg"},$l={id:"tabs",class:"flex"},er={id:"tab-contents"},tr={class:"grid grid-cols-5 gap-2"},sr={class:"py-2 col-span-2 sm:col-span-2"},or={class:"mt-1 flex rounded-md shadow-sm"},lr={key:0,class:"mt-2 text-sm text-red-500"},rr={class:"py-2 col-span-2 sm:col-span-2"},ir={class:"mt-1 flex rounded-md shadow-sm"},nr={key:0,class:"mt-2 text-sm text-red-500"},ar={class:"py-2 col-span-4 sm:col-span-4"},dr={key:0,class:"mt-1 flex rounded-md shadow-sm"},mr={key:1,class:"mt-2 text-sm text-red-500"},cr={class:"py-2 col-span-4 sm:col-span-4"},pr={key:0,class:"mt-1 flex rounded-md shadow-sm"},ur={key:1,class:"mt-2 text-sm text-red-500"},fr={class:"py-2 col-span-4 sm:col-span-4"},gr={class:"mt-1 flex"},yr=["disabled"],xr={key:0,class:"mt-2 text-sm text-red-500"},br={key:0,class:"py-2 col-span-1 sm:col-span-1"},_r={key:1,class:"py-2 col-span-4 sm:col-span-4"},vr={class:"mt-1 flex"},wr=["disabled"],kr={key:0,class:"mt-2 text-sm text-red-500"},hr={key:2,class:"py-2 col-span-4 sm:col-span-4"},Cr={class:"mt-1 flex"},Vr=["disabled"],Tr={key:0,class:"mt-2 text-sm text-red-500"},Sr={key:3,class:"py-2 col-span-4 sm:col-span-4"},Ur={class:"mt-1 flex"},jr=["disabled"],Dr={key:0,class:"mt-2 text-sm text-red-500"},Ir={class:"py-2 col-span-4 sm:col-span-4"},Or={class:"mt-1 flex"},Pr=["disabled"],Mr={key:0,class:"mt-2 text-sm text-red-500"},Rr={key:4,class:"py-2 col-span-1 sm:col-span-1"},Ar={key:5,class:"py-2 col-span-2 sm:col-span-2"},Nr={class:"mt-1 flex rounded-md shadow-sm"},Lr={key:0,class:"mt-2 text-sm text-red-500"},zr={key:6,class:"py-2 col-span-2 sm:col-span-2"},Br={class:"mt-1 flex rounded-md shadow-sm"},Er={key:0,class:"mt-2 text-sm text-red-500"},Fr={key:7,class:"py-2 col-span-1 sm:col-span-1"},Hr={key:8,class:"py-2 col-span-2 sm:col-span-2"},Yr={class:"mt-1 flex rounded-md shadow-sm"},Wr={key:0,class:"mt-2 text-sm text-red-500"},Gr={key:9,class:"py-2 col-span-2 sm:col-span-2"},qr={class:"mt-1 flex rounded-md shadow-sm"},Kr={key:0,class:"mt-2 text-sm text-red-500"},Jr={key:10,class:"py-2 col-span-1 sm:col-span-1"},Qr={key:11,class:"py-2 col-span-4 sm:col-span-4"},Xr={class:"grid grid-cols-2 gap-2"},Zr={class:"col-span-1 sm:col-span-1"},$r={class:"mt-1 flex rounded-md shadow-sm"},ei={key:0,class:"mt-2 text-sm text-red-500"},ti={class:"col-span-1 sm:col-span-1"},si={class:"mt-1 flex rounded-md shadow-sm"},oi={key:0,class:"mt-2 text-sm text-red-500"},li={key:12,class:"py-2 col-span-1 sm:col-span-1"},ri={key:13,class:"py-2 col-span-4 sm:col-span-4"},ii={class:"mt-1 flex rounded-md shadow-sm"},ni={key:0,class:"mt-2 text-sm text-red-500"},ai={key:14,class:"py-2 col-span-1 sm:col-span-1"},di={key:15,class:"py-2 col-span-4 sm:col-span-4"},mi={class:"mt-1 flex rounded-md shadow-sm"},ci={key:0,class:"mt-2 text-sm text-red-500"},pi={key:16,class:"py-2 col-span-1 sm:col-span-1"},ui={key:17,class:"py-2 col-span-4 sm:col-span-4"},fi={class:"mt-1 flex"},gi=["disabled"],yi={key:0,class:"mt-2 text-sm text-red-500"},xi={key:18,class:"py-2 col-span-1 sm:col-span-1"},bi={key:19,class:"py-2 col-span-4 sm:col-span-4"},_i={key:0,class:"mt-1 flex rounded-md shadow-sm"},vi={key:1,class:"mt-2 text-sm text-red-500"},wi={key:20,class:"py-2 col-span-1 sm:col-span-1"},ki={key:21,class:"py-2 col-span-4 sm:col-span-4"},hi={class:"grid grid-cols-2 gap-2"},Ci={class:"col-span-1 sm:col-span-1"},Vi={class:"mt-1 flex rounded-md shadow-sm"},Ti=["disabled"],Si={key:0,class:"mt-2 text-sm text-red-500"},Ui={class:"col-span-1 sm:col-span-1"},ji={class:"mt-1 flex rounded-md shadow-sm"},Di=["disabled"],Ii={key:0,class:"mt-2 text-sm text-red-500"},Oi={key:22,class:"py-2 col-span-1 sm:col-span-1"},Pi={key:23,class:"py-2 col-span-4 sm:col-span-4"},Mi={class:"mt-1 flex rounded-md shadow-sm"},Ri=["disabled"],Ai={key:0,class:"mt-2 text-sm text-red-500"},Ni={key:24,class:"py-2 col-span-1 sm:col-span-1"},Li={key:25,class:"py-2 col-span-4 sm:col-span-4"},zi={key:0,class:"mt-1 flex rounded-md shadow-sm"},Bi={key:1,class:"mt-2 text-sm text-red-500"},Ei={key:26,class:"py-2 col-span-1 sm:col-span-1"},Fi={key:27,class:"py-2 col-span-4 sm:col-span-4"},Hi={class:"mt-1 flex rounded-md shadow-sm"},Yi=["disabled"],Wi={key:0,class:"mt-2 text-sm text-red-500"},Gi={class:"py-2 col-span-4 sm:col-span-4"},qi={class:"mt-1 flex"},Ki=["disabled"],Ji={key:0,class:"mt-2 text-sm text-red-500"},Qi={class:"py-2 col-span-4 sm:col-span-4"},Xi={key:0,class:"mt-1 flex rounded-md shadow-sm"},Zi={key:1,class:"mt-2 text-sm text-red-500"},$i={class:"py-2 col-span-4 sm:col-span-4"},en={key:0,class:"mt-1 flex rounded-md shadow-sm"},tn={key:1,class:"mt-2 text-sm text-red-500"},sn={class:"py-2 col-span-4 sm:col-span-4"},on={class:"mt-1 flex"},ln=["disabled"],rn={key:0,class:"mt-2 text-sm text-red-500"},nn={key:0,class:"flex"},an={key:0},dn={key:1},mn={class:"flex"},cn={key:1,class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function pn(r,t,u,s,j,V){const x=z("VueDatePicker"),p=z("pagination"),U=z("no-data"),y=z("incident-alert"),v=z("multiselect"),w=z("task"),I=z("file"),f=z("customer-detail"),c=z("log"),d=z("history"),R=z("app-layout");return o(),Y(R,null,{default:be(()=>{var F,q;return[e("div",sl,[e("div",ol,[e("div",ll,[e("div",rl,[t[67]||(t[67]=e("span",{class:"z-10 font-normal text-gray-400 absolute selection:rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-search"})],-1)),_(e("input",{type:"text",placeholder:"Ticket/Customer",class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",id:"search",tabindex:"1","onUpdate:modelValue":t[0]||(t[0]=n=>s.search=n),onKeyup:t[1]||(t[1]=_e((...n)=>s.searchIncident&&s.searchIncident(...n),["enter"]))},null,544),[[k,s.search]])]),e("div",il,[t[69]||(t[69]=e("span",{class:"z-10 font-normal text-gray-400 absolute bg-transparent rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-sliders-h"})],-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=n=>s.incidentType=n),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"3",onChange:t[3]||(t[3]=(...n)=>s.changeStatus&&s.changeStatus(...n))},t[68]||(t[68]=[e("option",{value:"default"},"All Ticket",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"termination"},"Termination",-1)]),544),[[W,s.incidentType]])]),e("div",nl,[t[71]||(t[71]=e("span",{class:"z-10 font-normal text-gray-400 absolute bg-transparent rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-sliders-h"})],-1)),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>s.incidentBy=n),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"4",onChange:t[5]||(t[5]=(...n)=>s.changeStatus&&s.changeStatus(...n))},[t[70]||(t[70]=e("option",{value:"default"},"All Member",-1)),(o(!0),l(L,null,Q(u.noc,n=>(o(),l("option",{key:n.id,value:n.id},m(n.name),9,al))),128))],544),[[W,s.incidentBy]])]),e("div",dl,[t[73]||(t[73]=e("span",{class:"z-10 font-normal text-gray-400 absolute bg-transparent rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-sliders-h"})],-1)),_(e("select",{"onUpdate:modelValue":t[6]||(t[6]=n=>s.incidentStatus=n),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"5",onChange:t[7]||(t[7]=(...n)=>s.changeStatus&&s.changeStatus(...n))},t[72]||(t[72]=[e("option",{value:"0"},"All Status",-1),e("option",{value:"1"},"Open",-1),e("option",{value:"2"},"Escalated",-1),e("option",{value:"5"},"Resolved Open",-1),e("option",{value:"3"},"Closed",-1),e("option",{value:"4"},"Deleted",-1)]),544),[[W,s.incidentStatus]])]),e("div",ml,[O(x,{modelValue:s.incidentDate,"onUpdate:modelValue":t[8]||(t[8]=n=>s.incidentDate=n),range:{partialRange:!0},placeholder:"Ticket Date","enable-time-picker":!1,"model-type":"yyyy-MM-dd",id:"order_date",class:"text-gray-400 text-sm focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none"},null,8,["modelValue"])]),e("div",cl,[e("button",{onClick:t[9]||(t[9]=(...n)=>s.changeStatus&&s.changeStatus(...n)),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1"},t[74]||(t[74]=[e("i",{class:"fas fa-search opacity-75 lg:ml-1 text-sm"},null,-1)]))]),e("div",pl,[u.write_permission?(o(),l("button",{key:0,onClick:t[10]||(t[10]=n=>s.newTicket()),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1",tabindex:"7"},t[75]||(t[75]=[P("Ticket"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)])]),u.write_permission||u.read_permission?(o(),l("div",ul,[e("div",fl,[u.incidents.data?(o(),l("div",gl,[e("table",yl,[e("thead",xl,[e("tr",null,[t[82]||(t[82]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},null,-1)),t[83]||(t[83]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No.",-1)),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[11]||(t[11]=n=>s.sortBy("date"))},t[76]||(t[76]=[P("Open Date "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[12]||(t[12]=n=>s.sortBy("code"))},t[77]||(t[77]=[P("Ticket "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[13]||(t[13]=n=>s.sortBy("ftth_id"))},t[78]||(t[78]=[P("User "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[14]||(t[14]=n=>s.sortBy("township_id"))},t[79]||(t[79]=[P("TSP "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[15]||(t[15]=n=>s.sortBy("type"))},t[80]||(t[80]=[P("Type "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[16]||(t[16]=n=>s.sortBy("incharge"))},t[81]||(t[81]=[P("Created "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),t[84]||(t[84]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1))])]),e("tbody",bl,[(o(!0),l(L,null,Q(u.incidents.data,(n,G)=>(o(),l("tr",{key:n.id,class:N([[n.id==s.selected_id?"bg-indigo-200":""],"cursor-pointer"]),onClick:H=>s.edit(n)},[e("td",vl,[e("i",{class:N("fa fa-circle text-"+n.color)},null,2)]),e("td",wl,m(G+=u.incidents.from),1),e("td",kl,m(n.date)+" "+m(n.time),1),e("td",hl,m(n.code),1),n.ftth_id?(o(),l("td",Cl,m(n.ftth_id),1)):i("",!0),n.township_short?(o(),l("td",Vl,m(n.township_short),1)):i("",!0),e("td",Tl,m(n.type.replace("_"," ")),1),e("td",Sl,m(n.incharge.match(/\b\w/g).join("")),1),e("td",Ul,m(s.getStatus(n.status)),1)],10,_l))),128))])])])):i("",!0),u.incidents.total?(o(),l("span",jl,[e("label",Dl,m(u.incidents.data.length)+" Tickets in Current Page. Total Number of Tickets : "+m(u.incidents.total),1)])):i("",!0),u.incidents.links?(o(),l("span",Il,[O(p,{class:"mt-4",links:u.incidents.links},null,8,["links"])])):i("",!0),u.incidents.data?i("",!0):(o(),l("div",Ol,[O(U)]))]),e("div",Pl,[e("div",Ml,[e("div",Rl,[e("div",Al,[t[85]||(t[85]=e("label",{class:"block text-sm font-normal text-center"},"Critical",-1)),e("button",{class:"block py-2 px-2 w-full bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:border-red-300 focus:ring focus:ring-red-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[17]||(t[17]=n=>s.showPriority("critical"))},m(u.critical),1)]),e("div",{class:"col-span-1",onClick:t[19]||(t[19]=n=>s.showPriority("high"))},[t[86]||(t[86]=e("label",{class:"block text-sm font-normal text-center"},"High",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-500 active:bg-yellow-700 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[18]||(t[18]=n=>s.showPriority("high"))},m(u.high),1)]),e("div",{class:"col-span-1",onClick:t[21]||(t[21]=n=>s.showPriority("normal"))},[t[87]||(t[87]=e("label",{class:"block text-sm font-normal text-center"},"Normal",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-400 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-300 active:bg-yellow-500 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[20]||(t[20]=n=>s.showPriority("normal"))},m(u.normal),1)]),e("div",Nl,[t[88]||(t[88]=e("label",{class:"block text-sm font-normal text-center"},"All",-1)),e("button",{class:"block py-2 px-2 w-full bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-indigo-300 focus:ring focus:ring-indigo-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[22]||(t[22]=n=>s.showPriority("all"))},m(u.critical+u.high+u.normal),1)])])]),O(y,{onShow_edit:s.alert_edit},null,8,["onShow_edit"])])])):(o(),l("div",Ll,t[89]||(t[89]=[e("span",{class:"px-20 py-10 center bg-white inline-flex"},[e("i",{class:"fa fas fa-exclamation-triangle fa-2x text-yellow-600 mr-2"}),e("label",{class:"font-bold mt-2 text-sm"}," You Don't Have Permission To Access This Page")],-1)])))])]),s.isOpen?(o(),l("div",zl,[e("div",Bl,[t[133]||(t[133]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[134]||(t[134]=P(" ​ ")),e("div",El,[e("div",Fl,[e("div",Hl,[e("div",Yl,[e("div",Wl,[t[94]||(t[94]=e("div",{class:"flex"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight mt-2"},"Ticket Detail")],-1)),e("div",Gl,[t[93]||(t[93]=e("span",{class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-l-md text-sm shadow outline-none focus:outline-none"}," Ticket ID ",-1)),_(e("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=n=>s.form.code=n),name:"code",id:"code",class:"mr-2 border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-r-md text-sm shadow outline-none focus:outline-none",disabled:""},null,512),[[k,s.form.code]]),e("ul",ql,[e("li",Kl,[t[90]||(t[90]=e("label",{class:"block text-sm"},"Critical",-1)),_(e("input",{"onUpdate:modelValue":t[24]||(t[24]=n=>s.form.priority=n),name:"priority",value:"critical",type:"radio",class:"form-radio h-5 w-5 text-red-600 bg-red-600",title:"(1-4hrs)"},null,512),[[J,s.form.priority]])]),e("li",Jl,[t[91]||(t[91]=e("label",{class:"block text-sm"},"High",-1)),_(e("input",{"onUpdate:modelValue":t[25]||(t[25]=n=>s.form.priority=n),name:"priority",value:"high",type:"radio",class:"form-radio h-5 w-5 text-yellow-600 bg-yellow-600",title:"(1-12hrs)"},null,512),[[J,s.form.priority]])]),e("li",Ql,[t[92]||(t[92]=e("label",{class:"block text-sm"},"Normal",-1)),_(e("input",{"onUpdate:modelValue":t[26]||(t[26]=n=>s.form.priority=n),name:"priority",value:"normal",type:"radio",class:"form-radio h-5 w-5 text-yellow-300 bg-yellow-300",title:"(1-48hrs)"},null,512),[[J,s.form.priority]])])])])])]),e("div",Xl,[e("div",Zl,[e("ul",$l,[e("li",{class:N(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[27]||(t[27]=n=>s.tabClick(1)),"preserve-state":""},"Genaral")],2),e("li",{class:N(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[28]||(t[28]=n=>s.tabClick(2)),"preserve-state":""},"Tasks")],2),e("li",{class:N(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==3?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[29]||(t[29]=n=>s.tabClick(3)),"preserve-state":""},"Files")],2),e("li",{class:N(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==4?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[30]||(t[30]=n=>s.tabClick(4)),"preserve-state":""},"Customer Info")],2),e("li",{class:N(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==5?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[31]||(t[31]=n=>s.tabClick(5)),"preserve-state":""},"LOGS")],2),e("li",{class:N(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==6?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[32]||(t[32]=n=>s.tabClick(6)),"preserve-state":""},"History")],2)])]),e("div",er,[e("div",{class:N(["p-4",[s.tab==1?"":"hidden"]])},[e("div",tr,[t[124]||(t[124]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",sr,[e("div",or,[_(e("input",{type:"date","onUpdate:modelValue":t[33]||(t[33]=n=>s.form.date=n),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.date]])]),r.$page.props.errors.date?(o(),l("p",lr,m(r.$page.props.errors.date),1)):i("",!0)]),e("div",rr,[e("div",ir,[_(e("input",{type:"time","onUpdate:modelValue":t[34]||(t[34]=n=>s.form.time=n),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.time]])]),r.$page.props.errors.time?(o(),l("p",nr,m(r.$page.props.errors.time),1)):i("",!0)]),t[125]||(t[125]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",ar,[u.customers.length!==0?(o(),l("div",dr,[O(v,{"deselect-label":"Selected already",options:u.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer_id,"onUpdate:modelValue":t[35]||(t[35]=n=>s.form.customer_id=n),"allow-empty":!1,disabled:!u.write_permission},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.customer?(o(),l("p",mr,m(r.$page.props.errors.customer),1)):i("",!0)]),t[126]||(t[126]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",cr,[u.team.length!==0?(o(),l("div",pr,[O(v,{"deselect-label":"Selected already",options:u.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[36]||(t[36]=n=>s.form.incharge_id=n),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.incharge?(o(),l("p",ur,m(r.$page.props.errors.incharge),1)):i("",!0)]),t[127]||(t[127]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",fr,[e("div",gr,[_(e("select",{"onUpdate:modelValue":t[37]||(t[37]=n=>s.form.type=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:"",onChange:t[38]||(t[38]=n=>s.form.topic=null),disabled:!u.write_permission},t[95]||(t[95]=[e("option",{value:"default"},"Please Choose Ticket Type",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"termination"},"Termination",-1)]),40,yr),[[W,s.form.type]])]),r.$page.props.errors.type?(o(),l("p",xr,m(r.$page.props.errors.type),1)):i("",!0)]),s.form.type=="service_complaint"||s.form.type=="onsite_complaint"|s.form.type=="technical_complaint"?(o(),l("div",br,t[96]||(t[96]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):i("",!0),s.form.type=="service_complaint"?(o(),l("div",_r,[e("div",vr,[_(e("select",{"onUpdate:modelValue":t[39]||(t[39]=n=>s.form.topic=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!u.write_permission},t[97]||(t[97]=[e("option",{value:"los_redlight"},"LOS Redlight",-1),e("option",{value:"pon_blinking"},"PON Blinking",-1),e("option",{value:"high_loss"},"High Loss",-1),e("option",{value:"dn_down"},"DN Down",-1),e("option",{value:"sn_down"},"SN Down",-1),e("option",{value:"relocation"},"Relocation",-1),e("option",{value:"maintenance"},"Maintenance",-1),e("option",{value:"other"},"Other",-1)]),8,wr),[[W,s.form.topic]])]),r.$page.props.errors.topic?(o(),l("p",kr,m(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),s.form.type=="onsite_complaint"?(o(),l("div",hr,[e("div",Cr,[_(e("select",{"onUpdate:modelValue":t[40]||(t[40]=n=>s.form.topic=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!u.write_permission},t[98]||(t[98]=[e("option",{value:"no_internet"},"No Internet",-1),e("option",{value:"slow_performance"},"Slow Performance",-1),e("option",{value:"wifi_issue"},"Wifi Issue",-1),e("option",{value:"coverage_issue"},"Coverage Issue",-1),e("option",{value:"onu_issue"},"ONU issue",-1),e("option",{value:"home_router_issue"},"Home Router Issue",-1),e("option",{value:"password_change"},"Password Change",-1),e("option",{value:"other"},"Other",-1)]),8,Vr),[[W,s.form.topic]])]),r.$page.props.errors.topic?(o(),l("p",Tr,m(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),s.form.type=="technical_complaint"?(o(),l("div",Sr,[e("div",Ur,[_(e("select",{"onUpdate:modelValue":t[41]||(t[41]=n=>s.form.topic=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!u.write_permission},t[99]||(t[99]=[e("option",{value:"website_delay_issue"},"Website Delay Issue",-1),e("option",{value:"gaming_delay_issue"},"Gaming Delay Issue",-1),e("option",{value:"application_delay_issue"},"Application Delay Issue",-1),e("option",{value:"other"},"Other",-1)]),8,jr),[[W,s.form.topic]])]),r.$page.props.errors.topic?(o(),l("p",Dr,m(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),t[128]||(t[128]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",Ir,[e("div",Or,[_(e("select",{"onUpdate:modelValue":t[42]||(t[42]=n=>s.form.status=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!u.write_permission},t[100]||(t[100]=[e("option",{value:"1"},"Open",-1),e("option",{value:"2",disabled:""},"Escalated",-1),e("option",{value:"5",disabled:""},"Resolved Open",-1),e("option",{value:"3"},"Closed",-1)]),8,Pr),[[W,s.form.status]])]),r.$page.props.errors.status?(o(),l("p",Mr,m(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==3?(o(),l("div",Rr,t[101]||(t[101]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):i("",!0),s.form.status==3?(o(),l("div",Ar,[e("div",Nr,[_(e("input",{type:"date","onUpdate:modelValue":t[43]||(t[43]=n=>s.form.close_date=n),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.close_date]])]),r.$page.props.errors.close_date?(o(),l("p",Lr,m(r.$page.props.errors.close_date),1)):i("",!0)])):i("",!0),s.form.status==3?(o(),l("div",zr,[e("div",Br,[_(e("input",{type:"time","onUpdate:modelValue":t[44]||(t[44]=n=>s.form.close_time=n),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.close_time]])]),r.$page.props.errors.close_time?(o(),l("p",Er,m(r.$page.props.errors.close_time),1)):i("",!0)])):i("",!0),s.form.status==5?(o(),l("div",Fr,t[102]||(t[102]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):i("",!0),s.form.status==5?(o(),l("div",Hr,[e("div",Yr,[_(e("input",{type:"date","onUpdate:modelValue":t[45]||(t[45]=n=>s.form.resolved_date=n),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.resolved_date]])]),r.$page.props.errors.resolved_date?(o(),l("p",Wr,m(r.$page.props.errors.resolved_date),1)):i("",!0)])):i("",!0),s.form.status==5?(o(),l("div",Gr,[e("div",qr,[_(e("input",{type:"time","onUpdate:modelValue":t[46]||(t[46]=n=>s.form.resolved_time=n),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.resolved_time]])]),r.$page.props.errors.resolved_time?(o(),l("p",Kr,m(r.$page.props.errors.resolved_time),1)):i("",!0)])):i("",!0),s.form.type=="suspension"?(o(),l("div",Jr,t[103]||(t[103]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense Period : ")],-1)]))):i("",!0),s.form.type=="suspension"?(o(),l("div",Qr,[e("div",Xr,[e("div",Zr,[e("div",$r,[t[104]||(t[104]=e("span",{class:"-mt-1 z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[47]||(t[47]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",ei,m(r.$page.props.errors.start_date),1)):i("",!0)]),e("div",ti,[e("div",si,[t[105]||(t[105]=e("span",{class:"-mt-1 z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[48]||(t[48]=n=>s.form.end_date=n),name:"end_date",id:"end_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.end_date]])]),r.$page.props.errors.end_date?(o(),l("p",oi,m(r.$page.props.errors.end_date),1)):i("",!0)])])])):i("",!0),s.form.type=="resume"?(o(),l("div",li,t[106]||(t[106]=[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")],-1)]))):i("",!0),s.form.type=="resume"?(o(),l("div",ri,[e("div",ii,[t[107]||(t[107]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[49]||(t[49]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.resume?(o(),l("p",ni,m(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="termination"?(o(),l("div",ai,t[108]||(t[108]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):i("",!0),s.form.type=="termination"?(o(),l("div",di,[e("div",mi,[t[109]||(t[109]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[50]||(t[50]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",ci,m(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",pi,t[110]||(t[110]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",ui,[e("div",fi,[_(e("textarea",{"onUpdate:modelValue":t[51]||(t[51]=n=>s.form.new_address=n),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!u.write_permission}," ",8,gi),[[k,s.form.new_address]])]),r.$page.props.errors.new_address?(o(),l("p",yi,m(r.$page.props.errors.new_address),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",xi,t[111]||(t[111]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",bi,[u.townships.length!==0?(o(),l("div",_i,[O(v,{"deselect-label":"Selected already",options:u.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[52]||(t[52]=n=>s.form.new_township=n),"allow-empty":!1,disabled:!u.write_permission},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.new_township?(o(),l("p",vi,m(r.$page.props.errors.new_township),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(o(),l("div",wi,t[112]||(t[112]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",ki,[e("div",hi,[e("div",Ci,[e("div",Vi,[t[113]||(t[113]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[53]||(t[53]=n=>s.form.latitude=n),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude",disabled:!u.write_permission},null,8,Ti),[[k,s.form.latitude]])]),r.$page.props.errors.latitude?(o(),l("p",Si,m(r.$page.props.errors.latitude),1)):i("",!0)]),e("div",Ui,[e("div",ji,[t[114]||(t[114]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[54]||(t[54]=n=>s.form.longitude=n),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude",disabled:!u.write_permission},null,8,Di),[[k,s.form.longitude]])]),r.$page.props.errors.longitude?(o(),l("p",Ii,m(r.$page.props.errors.longitude),1)):i("",!0)])])])):i("",!0),s.form.type=="relocation"?(o(),l("div",Oi,t[115]||(t[115]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="relocation"?(o(),l("div",Pi,[e("div",Mi,[t[116]||(t[116]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[55]||(t[55]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!u.write_permission},null,8,Ri),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",Ai,m(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(o(),l("div",Ni,t[117]||(t[117]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_package",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Package: ")],-1)]))):i("",!0),s.form.type=="plan_change"?(o(),l("div",Li,[u.packages.length!==0?(o(),l("div",zi,[O(v,{"deselect-label":"Selected already",options:u.packages,"track-by":"id",label:"item_data",modelValue:s.form.package_id,"onUpdate:modelValue":t[56]||(t[56]=n=>s.form.package_id=n),"allow-empty":!1,disabled:!u.write_permission},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.package?(o(),l("p",Bi,m(r.$page.props.errors.package),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(o(),l("div",Ei,t[118]||(t[118]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="plan_change"?(o(),l("div",Fi,[e("div",Hi,[t[119]||(t[119]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),_(e("input",{type:"date","onUpdate:modelValue":t[57]||(t[57]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!u.write_permission},null,8,Yi),[[k,s.form.start_date]])]),r.$page.props.errors.start_date?(o(),l("p",Wi,m(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),t[129]||(t[129]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",Gi,[e("div",qi,[_(e("textarea",{"onUpdate:modelValue":t[58]||(t[58]=n=>s.form.description=n),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!u.write_permission}," ",8,Ki),[[k,s.form.description]])]),r.$page.props.errors.description?(o(),l("p",Ji,m(r.$page.props.errors.description),1)):i("",!0)]),s.editMode&&s.form.status==3?(o(),l(L,{key:28},[t[120]||(t[120]=e("div",{class:"col-span-5"},[e("hr")],-1)),t[121]||(t[121]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"rca",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," RCA : ")])],-1)),e("div",Qi,[((F=u.rootCause)==null?void 0:F.length)!==0?(o(),l("div",Xi,[O(v,{"deselect-label":"Selected already",options:u.rootCause,"track-by":"id",label:"name",modelValue:s.form.rca,"onUpdate:modelValue":[t[59]||(t[59]=n=>s.form.rca=n),t[60]||(t[60]=n=>s.form.root_cause_id=n==null?void 0:n.id)],"allow-empty":!1,disabled:!u.write_permission},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.root_cause_id?(o(),l("p",Zi,m(r.$page.props.errors.root_cause_id),1)):i("",!0)]),t[122]||(t[122]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"sub_rca",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Sub RCA : ")])],-1)),e("div",$i,[((q=s.subRCA)==null?void 0:q.length)!==0?(o(),l("div",en,[O(v,{"deselect-label":"Selected already",options:s.subRCA,"track-by":"id",label:"name",modelValue:s.form.sub_rca,"onUpdate:modelValue":[t[61]||(t[61]=n=>s.form.sub_rca=n),t[62]||(t[62]=n=>s.form.sub_root_cause_id=n==null?void 0:n.id)],"allow-empty":!1,disabled:!u.write_permission},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.sub_root_cause_id?(o(),l("p",tn,m(r.$page.props.errors.sub_root_cause_id),1)):i("",!0)]),t[123]||(t[123]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"rca_notes",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," RCA Note : ")])],-1)),e("div",sn,[e("div",on,[_(e("textarea",{"onUpdate:modelValue":t[63]||(t[63]=n=>s.form.rca_notes=n),name:"rca_notes",id:"rca_notes",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!u.write_permission}," ",8,ln),[[k,s.form.rca_notes]])]),r.$page.props.errors.rca_notes?(o(),l("p",rn,m(r.$page.props.errors.rca_notes),1)):i("",!0)])],64)):i("",!0)])],2),e("div",{class:N(["p-4",[s.tab==2?"":"hidden"]])},[(o(),Y(se,null,[s.tab==2?(o(),Y(w,{data:s.selected_id,errors:r.$page.props.errors,key:s.page_update},null,8,["data","errors"])):i("",!0)],1024))],2),e("div",{class:N(["p-4",[s.tab==3?"":"hidden"]])},[(o(),Y(se,null,[s.tab==3?(o(),Y(I,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:N(["p-4",[s.tab==4?"":"hidden"]])},[(o(),Y(se,null,[s.tab==4?(o(),Y(f,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:N(["p-4",[s.tab==5?"":"hidden"]])},[(o(),Y(se,null,[s.tab==5?(o(),Y(c,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:N(["p-4",[s.tab==6?"":"hidden"]])},[(o(),Y(se,null,[s.tab==6?(o(),Y(d,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2)])])])]),e("div",{class:N(["bg-indigo-50 px-3 py-3 sm:px-6 sm:flex sm:flex-row",[s.tab==1?"justify-between":"justify-end"]])},[s.tab==1&&u.write_permission?(o(),l("div",nn,[e("button",{class:"inline-flex items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-indigo-900 disabled:opacity-25 transition mr-1",onClick:t[64]||(t[64]=n=>s.submit())},[s.editMode?(o(),l("span",an,"Update")):i("",!0),s.editMode==!1?(o(),l("span",dn,"Save")):i("",!0),t[130]||(t[130]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))]),_(e("button",{onClick:t[65]||(t[65]=(...n)=>s.deleteIncident&&s.deleteIncident(...n)),class:"inline-flex items-center px-4 py-3 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition mr-1"},t[131]||(t[131]=[P("Delete"),e("i",{class:"lg:ml-1 fas fa-trash opacity-75 text-sm"},null,-1)]),512),[[ve,s.selected_id]])])):i("",!0),e("div",mn,[e("button",{onClick:t[66]||(t[66]=(...n)=>s.closeModal&&s.closeModal(...n)),type:"button",class:"inline-flex items-center px-4 py-3 bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-gray-600 uppercase tracking-widest hover:bg-gray-300 active:bg-gray-400 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition"},t[132]||(t[132]=[P("Close "),e("i",{class:"lg:ml-1 fas fa-times-circle opacity-75 text-sm"},null,-1)]))])],2)])])],512)):i("",!0),s.loading?(o(),l("div",cn,t[135]||(t[135]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):i("",!0)]}),_:1})}const kn=X(tl,[["render",pn]]);export{kn as default};
