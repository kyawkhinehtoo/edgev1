import{r as V,c as N,w as k,o as l,a as t,i as S,j as p,k as A,v as h,d as o,g as r,F as d,t as a,N as j,n as c,D as f,e as b,f as y}from"./app-D4kHwI1v.js";import{A as U}from"./AppLayout-ldcU5hlp.js";import"./DropdownLink-XYJmGyPC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"py-12"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},M={class:"p-6 bg-white border-b border-gray-200"},O=["value"],P=["value"],L={class:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6"},z={class:"p-5"},G={class:"flex items-center"},E={class:"flex-shrink-0"},W={class:"text-white font-bold text-sm"},q={class:"ml-5 w-0 flex-1"},H={class:"text-sm font-medium text-gray-500 truncate"},J={class:"text-lg font-medium text-gray-900"},K={class:"bg-white shadow overflow-hidden sm:rounded-lg"},Q={class:"px-4 py-5 sm:p-6"},R={class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200"},Y={class:"bg-gray-50"},Z={class:"bg-white divide-y divide-gray-200"},tt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},et={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},st={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"},lt={class:"bg-gray-50"},ot={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-200 text-gray-800"},at={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},it={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800"},nt={class:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg"},rt={class:"px-4 py-5 sm:p-6"},dt={class:"space-y-4"},ut={class:"flex justify-between items-center mb-2"},mt={class:"text-sm font-medium text-gray-900"},gt={class:"text-sm text-gray-500"},xt={class:"w-full bg-gray-200 rounded-full h-4"},pt={class:"h-4 rounded-full flex"},ct={class:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg"},ft={class:"px-4 py-5 sm:p-6"},bt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},yt=["value"],vt={class:"overflow-x-auto"},_t={class:"min-w-full divide-y divide-gray-200"},ht={class:"bg-gray-50"},wt={class:"bg-white divide-y divide-gray-200"},kt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},At={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},jt={class:"bg-gray-100"},Tt={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},Ct={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800"},It={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-200 text-gray-800"},Dt={class:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg"},Vt={class:"px-4 py-5 sm:p-6"},Nt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ut={class:"text-sm font-medium text-gray-700"},Ot={__name:"InstallationSupervisorDashboard",props:{installation_statuses:Object,supervisor_matrix:Array,grand_total:Object,team_workload_matrix:Array,team_grand_total:Object,subcoms:Array,supervisors:Array,supervisor_id:[String,Number],installation_status:String,subcom_id:[String,Number],date_from:String,date_to:String},setup(n){const x=n,u=V({date_from:x.date_from||"",date_to:x.date_to||"",supervisor_id:x.supervisor_id||"",installation_status:x.installation_status||"",subcom_id:x.subcom_id||""}),w=m=>({team_assigned:"bg-yellow-500",installation_complete:"bg-blue-500",photo_upload_complete:"bg-purple-500",supervisor_approved:"bg-green-500"})[m]||"bg-gray-500",T=m=>m===0?"bg-gray-100 text-gray-800":m<=5?"bg-green-100 text-green-800":m<=15?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",C=(m,s)=>s===0?"bg-gray-100 text-gray-800":{team_assigned:"bg-yellow-100 text-yellow-800",installation_complete:"bg-blue-100 text-blue-800",photo_upload_complete:"bg-purple-100 text-purple-800",supervisor_approved:"bg-green-100 text-green-800"}[m]||"bg-gray-100 text-gray-800",I=()=>{j.get(route("installation-supervisor-dashboard"),u.value,{preserveState:!0,preserveScroll:!0})},D=()=>{j.get(route("installation-supervisor-dashboard"),u.value,{preserveState:!0,preserveScroll:!0})};return(m,s)=>(l(),N(U,{title:"Installation Dashboard"},{header:k(()=>s[5]||(s[5]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"}," Installation Dashboard ",-1)])),default:k(()=>{var _;return[t("div",B,[t("div",F,[t("div",$,[t("div",M,[s[13]||(s[13]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Installation Progress by Supervisor",-1)),t("form",{onSubmit:S(I,["prevent"]),class:"grid grid-cols-1 md:grid-cols-5 gap-4"},[t("div",null,[s[6]||(s[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date From",-1)),p(t("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=e=>u.value.date_from=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[A,u.value.date_from]])]),t("div",null,[s[7]||(s[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date To",-1)),p(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>u.value.date_to=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[A,u.value.date_to]])]),t("div",null,[s[9]||(s[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"Supervisor",-1)),p(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>u.value.supervisor_id=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[s[8]||(s[8]=t("option",{value:""},"All Supervisors",-1)),(l(!0),o(d,null,r(n.supervisors,e=>(l(),o("option",{key:e.id,value:e.id},a(e.name),9,O))),128))],512),[[h,u.value.supervisor_id]])]),t("div",null,[s[11]||(s[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Installation Status",-1)),p(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>u.value.installation_status=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[s[10]||(s[10]=t("option",{value:""},"All Statuses",-1)),(l(!0),o(d,null,r(n.installation_statuses,(e,i)=>(l(),o("option",{key:i,value:i},a(e),9,P))),128))],512),[[h,u.value.installation_status]])]),s[12]||(s[12]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500"}," Apply Filters ")],-1))],32)])]),t("div",L,[(l(!0),o(d,null,r(n.installation_statuses,(e,i)=>(l(),o("div",{key:i,class:"bg-white overflow-hidden shadow rounded-lg"},[t("div",z,[t("div",G,[t("div",E,[t("div",{class:c(["w-8 h-8 rounded-full flex items-center justify-center",w(i)])},[t("span",W,a(i.charAt(0).toUpperCase()),1)],2)]),t("div",q,[t("dl",null,[t("dt",H,a(e),1),t("dd",J,a(n.grand_total[i]||0),1)])])])])]))),128))]),t("div",K,[t("div",Q,[s[17]||(s[17]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Supervisor Performance Matrix ",-1)),t("div",R,[t("table",X,[t("thead",Y,[t("tr",null,[s[14]||(s[14]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Supervisor ",-1)),(l(!0),o(d,null,r(n.installation_statuses,(e,i)=>(l(),o("th",{key:i,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},a(e),1))),128)),s[15]||(s[15]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total ",-1))])]),t("tbody",Z,[(l(!0),o(d,null,r(n.supervisor_matrix,e=>(l(),o("tr",{key:e.supervisor_id,class:"hover:bg-gray-50"},[t("td",tt,a(e.supervisor_name),1),(l(!0),o(d,null,r(n.installation_statuses,(i,g)=>(l(),o("td",{key:g,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},[t("span",{class:c(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",T(e[g])])},a(e[g]||0),3)]))),128)),t("td",et,[t("span",st,a(e.total||0),1)])]))),128))]),t("tfoot",lt,[t("tr",null,[s[16]||(s[16]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"}," Grand Total ",-1)),(l(!0),o(d,null,r(n.installation_statuses,(e,i)=>(l(),o("td",{key:i,class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},[t("span",ot,a(n.grand_total[i]||0),1)]))),128)),t("td",at,[t("span",it,a(n.grand_total.total||0),1)])])])])])])]),t("div",nt,[t("div",rt,[s[19]||(s[19]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Installation Progress Overview ",-1)),t("div",dt,[(l(!0),o(d,null,r(n.supervisor_matrix,e=>(l(),o("div",{key:e.supervisor_id,class:"border rounded-lg p-4"},[t("div",ut,[t("span",mt,a(e.supervisor_name),1),t("span",gt,"Total: "+a(e.total),1)]),t("div",xt,[t("div",pt,[e.total>0?(l(),o("div",{key:0,class:"bg-yellow-400 rounded-l-full flex items-center justify-center text-xs text-white font-bold",style:f({width:`${e.team_assigned/e.total*100}%`})},a(e.team_assigned>0?e.team_assigned:""),5)):b("",!0),e.total>0?(l(),o("div",{key:1,class:"bg-gray-500 flex items-center justify-center text-xs text-white font-bold",style:f({width:`${e.installation_started/e.total*100}%`})},a(e.installation_started>0?e.installation_started:""),5)):b("",!0),e.total>0?(l(),o("div",{key:2,class:"bg-purple-500 flex items-center justify-center text-xs text-white font-bold",style:f({width:`${e.photo_upload_complete/e.total*100}%`})},a(e.photo_upload_complete>0?e.photo_upload_complete:""),5)):b("",!0),e.total>0?(l(),o("div",{key:3,class:"bg-green-500 rounded-r-full flex items-center justify-center text-xs text-white font-bold",style:f({width:`${e.supervisor_approved/e.total*100}%`})},a(e.supervisor_approved>0?e.supervisor_approved:""),5)):b("",!0),e.total>0?(l(),o("div",{key:4,class:"bg-blue-500 flex items-center justify-center text-xs text-white font-bold",style:f({width:`${e.installation_complete/e.total*100}%`})},a(e.installation_complete>0?e.installation_complete:""),5)):b("",!0)])]),s[18]||(s[18]=t("div",{class:"flex justify-between mt-2 text-xs text-gray-600"},[t("span",{class:"flex items-center"},[t("div",{class:"w-3 h-3 bg-yellow-400 rounded mr-1"}),y(" Team Assigned ")]),t("span",{class:"flex items-center"},[t("div",{class:"w-3 h-3 bg-gray-500 rounded mr-1"}),y(" Installation Started ")]),t("span",{class:"flex items-center"},[t("div",{class:"w-3 h-3 bg-purple-500 rounded mr-1"}),y(" Photo Upload Complete ")]),t("span",{class:"flex items-center"},[t("div",{class:"w-3 h-3 bg-green-500 rounded mr-1"}),y(" Supervisor Approved ")]),t("span",{class:"flex items-center"},[t("div",{class:"w-3 h-3 bg-blue-500 rounded mr-1"}),y(" Installation Complete ")])],-1))]))),128))])])]),t("div",ct,[t("div",ft,[s[26]||(s[26]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Team Workload Dashboard ",-1)),t("form",{onSubmit:S(D,["prevent"]),class:"mb-6"},[t("div",bt,[t("div",null,[s[21]||(s[21]=t("label",{class:"block text-sm font-medium text-gray-700"},"Subcontractor",-1)),p(t("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>u.value.subcom_id=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[s[20]||(s[20]=t("option",{value:""},"All Subcontractors",-1)),(l(!0),o(d,null,r(n.subcoms,e=>(l(),o("option",{key:e.id,value:e.id},a(e.name),9,yt))),128))],512),[[h,u.value.subcom_id]])]),s[22]||(s[22]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"w-full bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:ring-2 focus:ring-green-500"}," Filter Team ")],-1))])],32),t("div",vt,[t("table",_t,[t("thead",ht,[t("tr",null,[s[23]||(s[23]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Subcontractor ",-1)),s[24]||(s[24]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Customers ",-1)),(l(!0),o(d,null,r(n.installation_statuses,(e,i)=>(l(),o("th",{key:i,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},a(e),1))),128))])]),t("tbody",wt,[(l(!0),o(d,null,r(n.team_workload_matrix,(e,i)=>(l(),o("tr",{key:e.subcom_id,class:c(i%2===0?"bg-white":"bg-gray-50")},[t("td",kt,a(e.subcom_name),1),t("td",St,[t("span",At,a(e.total_customers||0),1)]),(l(!0),o(d,null,r(n.installation_statuses,(g,v)=>(l(),o("td",{key:v,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},[t("span",{class:c(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",C(v,e[v])])},a(e[v]||0),3)]))),128))],2))),128))]),t("tfoot",jt,[t("tr",null,[s[25]||(s[25]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"}," Grand Total ",-1)),t("td",Tt,[t("span",Ct,a(((_=n.team_grand_total)==null?void 0:_.total_customers)||0),1)]),(l(!0),o(d,null,r(n.installation_statuses,(e,i)=>{var g;return l(),o("td",{key:i,class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},[t("span",It,a(((g=n.team_grand_total)==null?void 0:g[i])||0),1)])}),128))])])])])])]),t("div",Dt,[t("div",Vt,[s[27]||(s[27]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Installation Status Legend ",-1)),t("div",Nt,[(l(!0),o(d,null,r(n.installation_statuses,(e,i)=>(l(),o("div",{key:i,class:"flex items-center"},[t("div",{class:c(["w-4 h-4 rounded mr-3",w(i)])},null,2),t("span",Ut,a(e),1)]))),128))])])])])])]}),_:1}))}};export{Ot as default};
