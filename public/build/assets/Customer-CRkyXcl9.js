import{A as P}from"./AppLayout-D3RsVQ7N.js";import{P as L}from"./Pagination-BgdgMR5y.js";import{A as B,C as G}from"./Card-DUL52xYc.js";import{m as V,G as d,r as w,z as v,c as S,w as c,N as g,o as r,a as e,j as T,k as E,O as M,i as U,f as m,n as k,e as x,B as q,b as p,d as u,g as D,F as N,t as o}from"./app-D-9qcd9s.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-BlWtJOfe.js";import"./main-2siXptfs.js";import"./vue3-multiselect.umd.min-CI7J6qQ_.js";const F={components:{AppLayout:P,Pagination:L,AdvanceSearch:B,Card:G,Link:V},props:{customers:Object,active:Number,suspense:Number,installation_request:Number,terminate:Number,customers:Object,packages:Object,package_speed:Object,partners:Object,townships:Object,status:Object,errors:Object,dn:Object,radius:Boolean,user:Object,isps:Object,installationTeams:Object,onuSerials:Object},setup(l){d("packages",l.packages),d("partners",l.partners),d("townships",l.townships),d("status",l.status),d("dn",l.dn),d("package_speed",l.package_speed),d("isps",l.isps),d("installationTeams",l.installationTeams),d("onuSerials",l.onuSerials),d("user",l.user);const t=w(""),n=w(!1);return{search:t,show_search:n,toggleAdv:()=>n.value=!n.value,searchTsp:()=>g.post("/customer/search",{keyword:t.value},{preserveState:!0}),goSearch:i=>g.post("/customer/search",i,{preserveState:!0}),goAction:i=>i==="to_install"?g.post("/customer/search",{status:1},{preserveState:!0}):g.post("/customer/search",{status_type:i},{preserveState:!0}),goAll:()=>g.post("/customer/search",{status:0},{preserveState:!0}),deleteRow:i=>{confirm("Are you sure you want to delete?")&&g.post(`/customer/${i.id}`,{_method:"DELETE"})},getRowClass:i=>i.status.color?`text-${i.status.color}`:""}}},K={class:"py-2"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},J={class:"relative mb-2"},Q={class:"flex justify-between items-center mb-2 px-1 md:px-0"},W={class:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 gap-2 mb-4"},X={class:"grid gap-4 sm:hidden"},Y={class:"flex justify-between items-center mb-2"},Z={class:"flex space-x-2"},$=["onClick"],tt={class:"text-sm text-gray-600"},et={class:"text-sm text-gray-600"},st={class:"text-sm text-gray-600"},ot={class:"text-sm text-gray-600"},at={class:"text-sm text-gray-600"},nt={class:"text-sm text-gray-600"},lt={class:"text-sm text-gray-600"},rt={key:0,class:"hidden sm:block bg-white shadow-xl sm:rounded-lg overflow-auto"},it={class:"min-w-full divide-y divide-gray-200"},dt={class:"bg-gray-50"},ut={key:0,class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},mt={class:"px-3 py-3"},xt={class:"bg-white divide-y divide-gray-200"},pt={class:"px-3 py-3 text-xs font-medium"},ct={class:"px-3 py-3 text-xs font-medium"},gt={class:"px-3 py-3 text-xs font-medium"},ft={class:"px-3 py-3 text-xs font-medium"},yt={class:"px-3 py-3 text-xs font-medium"},ht={class:"px-3 py-3 text-xs font-medium"},_t={class:"px-3 py-3 text-xs font-medium"},bt={class:"px-3 py-3 text-xs font-medium"},vt={class:"px-3 py-3 text-xs font-medium"},kt={class:"px-3 py-3 text-xs font-medium"},Ct={key:0,class:"px-3 py-3 text-xs font-medium"},At={class:"px-3 py-3 text-xs font-medium"},St={class:"px-3 py-3 text-right"},jt={key:0},Ot={key:1,class:"block mt-4 text-xs text-gray-600"};function wt(l,t,n,a,I,R){const f=v("Link"),j=v("advance-search"),y=v("Card"),O=v("pagination"),i=v("app-layout");return r(),S(i,null,{header:c(()=>t[8]||(t[8]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"Customer Database ",-1)])),default:c(()=>[e("div",K,[e("div",H,[e("div",J,[t[9]||(t[9]=e("span",{class:"absolute left-3 top-3 text-blueGray-300"},[e("i",{class:"fas fa-search"})],-1)),T(e("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>a.search=s),onKeyup:t[1]||(t[1]=M((...s)=>a.searchTsp&&a.searchTsp(...s),["enter"])),placeholder:"Search here...",class:"w-full md:w-64 pl-10 py-2.5 border-gray-300 rounded shadow text-sm text-blueGray-600 bg-white placeholder-blueGray-300"},null,544),[[E,a.search]])]),e("div",Q,[e("a",{href:"#",class:"font-semibold text-xs text-gray-600",onClick:t[2]||(t[2]=U((...s)=>a.toggleAdv&&a.toggleAdv(...s),["prevent"]))},[t[10]||(t[10]=m(" Advance Search ")),e("i",{class:k([a.show_search?"fas fa-chevron-up":"fas fa-chevron-down","ml-2 text-blueGray-400"])},null,2)]),l.$page.props.login_type=="internal"||l.$page.props.login_type=="isp"?(r(),S(f,{key:0,href:"/customer/create",method:"get",as:"button",class:"px-4 py-2 bg-gray-800 text-white rounded-md text-xs font-semibold hover:bg-gray-700"},{default:c(()=>t[11]||(t[11]=[m(" Create ")])),_:1})):x("",!0)]),T(e("div",null,[p(j,{onSearch_parameter:a.goSearch},null,8,["onSearch_parameter"])],512),[[q,a.show_search]]),e("div",W,[p(y,{icon:"fa-users",bgColor:"blue",label:"Active Customers",count:n.active,onClick:t[3]||(t[3]=s=>a.goAction("active"))},null,8,["count"]),p(y,{icon:"fa-chart-line",bgColor:"green",label:"To Install",count:n.installation_request,onClick:t[4]||(t[4]=s=>a.goAction("to_install"))},null,8,["count"]),p(y,{icon:"fa-circle-pause",bgColor:"yellow",label:"Suspended Customers",count:n.suspense,onClick:t[5]||(t[5]=s=>a.goAction("suspense"))},null,8,["count"]),p(y,{icon:"fa-stop",bgColor:"red",label:"Terminated Customers",count:n.terminate,onClick:t[6]||(t[6]=s=>a.goAction("terminate"))},null,8,["count"])]),e("div",X,[(r(!0),u(N,null,D(n.customers.data,s=>{var h,_,b;return r(),u("div",{key:s.id,class:k(`p-4 bg-white rounded-lg shadow-md ${a.getRowClass(s)}`)},[e("div",Y,[e("h3",{class:k(["text-sm font-bold",a.getRowClass(s)])},"UID: "+o(s.ftth_id),3),e("div",Z,[p(f,{href:l.route("customer.edit",s.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600"},{default:c(()=>t[12]||(t[12]=[e("i",{class:"fas fa-edit"},null,-1)])),_:2},1032,["href"]),(_=(h=n.user)==null?void 0:h.role)!=null&&_.delete_customer?(r(),u("button",{key:0,onClick:C=>a.deleteRow(s),class:"text-red-500 hover:text-red-700"},t[13]||(t[13]=[e("i",{class:"fas fa-trash"},null,-1)]),8,$)):x("",!0)])]),e("p",tt,[t[14]||(t[14]=e("strong",null,"CID:",-1)),m(" "+o(s.isp_ftth_id),1)]),e("p",et,[t[15]||(t[15]=e("strong",null,"Name:",-1)),m(" "+o(s.name),1)]),e("p",st,[t[16]||(t[16]=e("strong",null,"Package:",-1)),m(" "+o(s.bandwidth)+" Mbps",1)]),e("p",ot,[t[17]||(t[17]=e("strong",null,"Township:",-1)),m(" "+o((b=s.current_address)==null?void 0:b.township.name),1)]),e("p",at,[t[18]||(t[18]=e("strong",null,"Status:",-1)),m(" "+o(s.status.name),1)]),e("p",nt,[t[19]||(t[19]=e("strong",null,"Order Date:",-1)),m(" "+o(s.order_date),1)]),e("p",lt,[t[20]||(t[20]=e("strong",null,"Prefer Install Date:",-1)),m(" "+o(s.prefer_install_date),1)])],2)}),128))]),n.customers.data?(r(),u("div",rt,[e("table",it,[e("thead",dt,[e("tr",null,[t[22]||(t[22]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ISP",-1)),t[23]||(t[23]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"UID",-1)),t[24]||(t[24]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"CID",-1)),t[25]||(t[25]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Order Date",-1)),t[26]||(t[26]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Assign Date",-1)),t[27]||(t[27]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Prefer Date",-1)),t[28]||(t[28]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Name",-1)),t[29]||(t[29]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Package",-1)),t[30]||(t[30]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Ins SLA",-1)),t[31]||(t[31]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Township",-1)),l.$page.props.user.user_type!="isp"?(r(),u("th",ut,"Installation Status")):x("",!0),t[32]||(t[32]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status",-1)),e("th",mt,[e("a",{onClick:t[7]||(t[7]=(...s)=>a.goAll&&a.goAll(...s)),class:"cursor-pointer text-gray-200 hover:text-gray-500"},t[21]||(t[21]=[e("i",{class:"fas fa-undo"},null,-1)]))])])]),e("tbody",xt,[(r(!0),u(N,null,D(n.customers.data,s=>{var h,_,b,C;return r(),u("tr",{key:s.id,class:k(a.getRowClass(s))},[e("td",pt,o((h=s.isp)==null?void 0:h.short_code),1),e("td",ct,o(s.ftth_id),1),e("td",gt,o(s.isp_ftth_id),1),e("td",ft,o(s.order_date),1),e("td",yt,o(s.subcom_assign_date),1),e("td",ht,o(s.prefer_install_date),1),e("td",_t,o(s.name),1),e("td",bt,o(s.bandwidth)+" Mbps",1),e("td",vt,o(s.installation_service_sla_hours)+" Hrs",1),e("td",kt,o((_=s.current_address)==null?void 0:_.township.short_code),1),l.$page.props.user.user_type!="isp"?(r(),u("td",Ct,o(s.installation_status?s.installation_status.split("_").map(A=>A.charAt(0).toUpperCase()+A.slice(1)).join(" "):""),1)):x("",!0),e("td",At,o(s.status.name),1),e("td",St,[p(f,{href:l.route("customer.edit",s==null?void 0:s.id),method:"get",as:"button",class:"text-indigo-400 hover:text-indigo-600 mr-2"},{default:c(()=>t[33]||(t[33]=[e("i",{class:"fas fa-folder"},null,-1)])),_:2},1032,["href"]),(C=(b=n.user)==null?void 0:b.role)!=null&&C.delete_customer?(r(),u("span",jt,[p(f,{href:"#",onClick:A=>a.deleteRow(s),class:"text-yellow-600 hover:text-yellow-900 ml-2"},{default:c(()=>t[34]||(t[34]=[e("i",{class:"fas fa-trash"},null,-1)])),_:2},1032,["onClick"])])):x("",!0)])],2)}),128))])])])):x("",!0),n.customers.total?(r(),u("span",Ot,o(n.customers.data.length)+" Customers in Current Page. Total Number of Customers: "+o(n.customers.total),1)):x("",!0),n.customers.links?(r(),S(O,{key:2,class:"mt-6",links:n.customers.links},null,8,["links"])):x("",!0)])])]),_:1})}const Gt=z(F,[["render",wt]]);export{Gt as default};
