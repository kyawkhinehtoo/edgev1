import{r as f,T as j,c as A,w as b,M as L,o as c,a as e,t as n,f as x,d as g,g as M,F as U,b as y,j as $,k as D,u as h,e as F,m as O}from"./app-H2w1vmnZ.js";import{A as V}from"./AppLayout-Dspi5UzH.js";import{P}from"./Pagination-_ENiukgt.js";import R from"./EditTempInvoice-w-UeWXpe.js";import"./DropdownLink-CwGO-xmN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"py-12"},G={class:"mx-auto sm:px-6 lg:px-8"},q={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},H={class:"flex justify-between items-center mb-4"},J={class:"text-xl font-semibold text-gray-600 mb-2"},K={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},X={class:"px-3 py-4 whitespace-nowrap"},Y={class:"px-3 py-4 whitespace-nowrap text-center"},Z={class:"px-2 py-1 text-sm font-bold rounded-full bg-blue-100 text-blue-800"},ee={class:"px-3 py-4 whitespace-nowrap text-right"},te={class:"px-2 py-1 text-sm font-bold rounded-full bg-blue-100 text-blue-800"},se={class:"px-3 py-4 whitespace-nowrap text-center"},oe={class:"px-2 py-1 text-sm font-bold rounded-full bg-green-100 text-green-800"},ne={class:"px-3 py-4 whitespace-nowrap text-right"},le={class:"px-2 py-1 text-sm font-bold rounded-full bg-green-100 text-green-800"},ae={class:"px-3 py-4 whitespace-nowrap text-right"},ie={class:"px-2 py-1 text-sm font-bold rounded-full bg-green-100 text-green-800"},re={class:"px-3 py-4 whitespace-nowrap text-right font-medium"},de={class:"px-3 py-4 whitespace-nowrap text-center space-x-2"},ce=["onClick"],pe=["href"],me={class:"mt-4"},ue={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},xe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},ge={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},fe={class:""},be={class:"mb-4"},ye={key:0,class:"text-red-500"},Ie={__name:"TempBilling",props:{tempInvoices:Object,packages:Array,townships:Array,status:Array,bill:Array},setup(p,{expose:S}){var E,N;const w=p,m=f(!1),u=f(null),a=f(!1),i=j({bill_name:(N=(E=w.tempInvoices.data[0])==null?void 0:E.temp_bill)==null?void 0:N.bill_number}),_=s=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s||0),v=s=>{u.value=s,m.value=!0},k=()=>{m.value=!1,u.value=null},T=()=>{a.value=!0},B=()=>{i.post("/saveFinal",{onSuccess:s=>{Toast.fire({icon:"success",title:s.props.flash.message}),a.value=!1,i.reset()},onError:s=>{console.log(s),i.errors=s.errors}})},I=()=>{a.value=!1},C=()=>{L.post("/exportTempBillingExcel",{},{responseType:"blob",headers:{"Content-Type":"application/json"}}).then(s=>{var o,d;const t=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download=`temp_billings_${(d=(o=w.tempInvoices.data[0])==null?void 0:o.temp_bill)==null?void 0:d.bill_number}_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(r)}).catch(s=>{console.error("Export failed:",s)})};return S({form:i,showEditModal:m,selectedInvoice:u,openBillName:a,formatNumber:_,openEditModal:v,closeEditModal:k,doSave:T,doExcel:C,saveFinal:B,closeFinal:I}),(s,t)=>(c(),A(V,{title:"Temporary Billing"},{header:b(()=>t[1]||(t[1]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"}," Temporary Billing List ",-1)])),default:b(()=>{var r,l;return[e("div",z,[e("div",G,[e("div",q,[e("div",H,[e("h2",J,"Bill Name : "+n((l=(r=p.tempInvoices.data[0])==null?void 0:r.temp_bill)==null?void 0:l.bill_number),1),e("div",{class:"space-x-2"},[e("a",{onClick:T,class:"cursor-pointer inline-flex items-center px-3 py-3 bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-700 active:bg-yellow-800 focus:outline-none focus:border-yellow-800 focus:ring focus:ring-yellow-300 disabled:opacity-25 transition"},t[2]||(t[2]=[x("Save Final "),e("i",{class:"ml-1 fa fa-save text-white"},null,-1)])),e("a",{onClick:C,class:"cursor-pointer inline-flex items-center px-3 py-3 bg-green-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},t[3]||(t[3]=[x("Export "),e("i",{class:"ml-1 fa fa-download text-white"},null,-1)]))])]),e("div",K,[e("table",Q,[t[6]||(t[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ISP "),e("th",{class:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Port Leasing "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Maintenance "),e("th",{class:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Installation "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Material Usage "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Suspension "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Amount "),e("th",{class:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",W,[(c(!0),g(U,null,M(p.tempInvoices.data,o=>{var d;return c(),g("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",X,n((d=o.isp)==null?void 0:d.name),1),e("td",Y,[e("span",Z,n(o.total_port_leasing_customer),1)]),e("td",ee,[e("span",te,n(o.total_maintenance_customer),1)]),e("td",se,[e("span",oe,n(o.total_installation_customer),1)]),e("td",ne,[e("span",le,n(o.total_material_customer),1)]),e("td",ae,[e("span",ie,n(o.total_suspension_customer),1)]),e("td",re,"$"+n(_(o.total_amount)),1),e("td",de,[y(h(O),{href:s.route("tempInvoice.details",o.id),class:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:b(()=>t[4]||(t[4]=[x(" Details ")])),_:2},1032,["href"]),e("button",{onClick:he=>v(o),class:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Edit ",8,ce),e("a",{href:`/pdfpreview1/${o.id}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"},t[5]||(t[5]=[e("span",null,"Invoice",-1)]),8,pe)])])}),128))])])]),e("div",me,[y(P,{links:p.tempInvoices.links},null,8,["links"])])])])]),y(R,{show:m.value,invoice:u.value,onClose:k},null,8,["show","invoice"]),a.value?(c(),g("div",{key:0,ref_key:"openBillName",ref:a,class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},[e("div",ue,[t[8]||(t[8]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[9]||(t[9]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),t[10]||(t[10]=x("â€‹ ")),e("div",xe,[e("div",ge,[e("div",fe,[e("div",be,[t[7]||(t[7]=e("label",{for:"name",class:"block text-gray-700 text-sm font-bold mb-2"},"Bill Name:",-1)),$(e("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"name",placeholder:"Enter Bill Name","onUpdate:modelValue":t[0]||(t[0]=o=>h(i).bill_name=o)},null,512),[[D,h(i).bill_name]]),s.$page.props.errors.bill_name?(c(),g("div",ye,n(s.$page.props.errors.bill_name),1)):F("",!0)])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("span",{class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},[e("button",{onClick:B,type:"button",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"GO !")]),e("span",{class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},[e("button",{onClick:I,type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Cancel")])])])])],512)):F("",!0)]}),_:1}))}};export{Ie as default};
