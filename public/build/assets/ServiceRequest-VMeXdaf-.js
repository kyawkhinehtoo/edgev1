import{A as fe}from"./AppLayout-CFvoxSiR.js";import{P as be}from"./Pagination-lXLaPqm3.js";import{h as we,r as p,x as A,y as xe,B as ge,z as L,c as ye,w as M,N as V,o as l,a as s,j,k as B,O as ve,n as D,d as r,f as b,e as a,F as U,g as ke,t as i,b as g}from"./app-COwjh_9t.js";import{M as he}from"./vue3-multiselect.umd.min-Bbt_wlLi.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-5B03Podi.js";const Se={name:"ServiceRequest",components:{AppLayout:fe,Multiselect:he,Pagination:be},props:{incidents:Object,townships:Object,packages:Object,partners:Object,subcons:Object,users:Object,relocationServices:Object,errors:Object},setup(u){const e=we({id:null,code:null,customer_id:null,ftth_id:null,date:null,start_date:null,end_date:null,type:null,request_by:null,status:null,status_id:null,current_package:null,new_package:null,current_address:null,new_address:null,current_location:null,new_location:null,current_township:null,new_township:null,description:null,bandwidth:null,current_partner:null,current_pop:null,current_sn_splitter_id:null,current_dn_splitter_id:null,current_pop_device_id:null,current_sn_splitter:null,current_dn_splitter:null,current_pop_device:null,current_port_number:null,new_partner:null,new_partner_id:null,new_pop:null,new_pop_id:null,new_pop_device:null,new_pop_device_id:null,new_sn_splitter:null,new_sn_splitter_id:null,new_dn_splitter:null,new_dn_splitter_id:null,new_port_number:null,new_port_number_id:null,subcon:null,subcon_id:null,assign_date:null,task_status:null,complete_date:null,relocation_service:null}),d=p([]),t=p([]),v=p([]),k=p([]),_=p([]),C=p(""),y=p(""),w=p("desc"),x=p("active");let h=p(!1),P=p(!1),f=p(!1);const S=p(1);function T(o){S.value=o}function n(){e.id=null,e.code=null,e.customer_id=null,e.ftth_id=null,e.date=null,e.start_date=null,e.end_date=null,e.type=null,e.request_by=null,e.status=null,e.status_id=null,e.current_package=null,e.new_package=null,e.current_address=null,e.new_address=null,e.current_location=null,e.new_location=null,e.current_township=null,e.new_township=null,e.description=null,e.bandwidth=null,e.current_partner=null,e.current_pop=null,e.current_sn_splitter_id=null,e.current_dn_splitter_id=null,e.current_pop_device_id=null,e.current_sn_splitter=null,e.current_dn_splitter=null,e.current_pop_device=null,e.current_port_number=null,e.new_partner=null,e.new_partner_id=null,e.new_pop=null,e.new_pop_id=null,e.new_pop_device=null,e.new_pop_device_id=null,e.new_sn_splitter=null,e.new_sn_splitter_id=null,e.new_dn_splitter=null,e.new_dn_splitter_id=null,e.new_port_number=null,e.new_port_number_id=null,e.subcon=null,e.subcon_id=null,e.assign_date=null,e.task_status=null,e.complete_date=null,e.relocation_service=null}function q(o){let c="WIP";return o==1?c="WIP":o==2?c="Escalated":o==3?c="Closed":o==4?c="Deleted":o==5&&(c="Resolved Open"),c}function E(){e._method="POST",V.post("/assign-subcon/"+e.id,e,{onSuccess:o=>{N(),n(),Toast.fire({icon:"success",title:o.props.flash.message})},onError:o=>{console.log("error ..".errors)}})}function oe(){e._method="PUT",V.post("/servicerequest/"+e.id,e,{onSuccess:o=>{N(),n(),Toast.fire({icon:"success",title:o.props.flash.message})},onError:o=>{N(),console.log("error ..".errors)}})}function ne(o){var c,O,F,z,W,G,K,H,J,Q,X,Y,Z,$,ee,se,te;e.id=o.id,e.code=o.code,e.customer_id=o.customer_id,e.ftth_id=o.ftth_id,e.date=o.date,e.start_date=o.start_date,e.end_date=o.end_date,e.type=o.type.replace(/_/g," "),e.request_by=u.users.filter(m=>m.id==o.incharge_id)[0],e.status=o.status_name,e.status_id=o.status_id,e.current_package=u.packages.filter(m=>m.id==o.current_package)[0],e.new_package=u.packages.filter(m=>m.id==o.new_package)[0],e.current_address=(c=o.customer.current_address)==null?void 0:c.address,e.new_address=o.new_address,e.current_location=(O=o.customer.current_address)==null?void 0:O.location,e.new_location=o.location,e.current_township=(F=o.customer.current_address)==null?void 0:F.township.name,e.new_township=u.townships.filter(m=>m.id==o.new_township)[0],e.description=o.description,e.bandwidth=o.bandwidth,e.current_partner=(W=(z=o.customer.sn_port)==null?void 0:z.pop)==null?void 0:W.partner.name,e.current_pop=(K=(G=o.customer.sn_port)==null?void 0:G.pop)==null?void 0:K.site_name,e.current_sn_splitter_id=(H=o.customer.sn_port)==null?void 0:H.sn_splitter_id,e.current_dn_splitter_id=(J=o.customer.sn_port)==null?void 0:J.dn_splitter_id,e.current_pop_device_id=(Q=o.customer.sn_port)==null?void 0:Q.pop_device_id,e.current_sn_splitter=(Y=(X=o.customer.sn_port)==null?void 0:X.sn_splitter)==null?void 0:Y.name,e.current_dn_splitter=($=(Z=o.customer.sn_port)==null?void 0:Z.dn_splitter)==null?void 0:$.name,e.current_pop_device=(se=(ee=o.customer.sn_port)==null?void 0:ee.pop_device)==null?void 0:se.device_name,e.current_port_number=(te=o.customer.sn_port)==null?void 0:te.port_number,e.new_partner=o.new_partner_id?u.partners.filter(m=>m.id===o.new_partner_id):null,e.new_partner_id=o.new_partner_id,e.new_pop=null,e.new_pop_id=o.new_pop_id,e.new_pop_device=null,e.new_pop_device_id=o.new_pop_device_id,e.new_sn_splitter=null,e.new_sn_splitter_id=o.new_sn_splitter_id,e.new_dn_splitter=null,e.new_dn_splitter_id=o.new_dn_splitter_id,e.new_port_number=null,e.new_port_number_id=o.new_port_number,e.subcon=o!=null&&o.subcon_id?u.subcons.find(m=>m.id=o==null?void 0:o.subcon_id):null,e.subcon_id=o==null?void 0:o.subcon_id,e.assign_date=o==null?void 0:o.assign_date,e.task_status=o==null?void 0:o.task_status,e.complete_date=o==null?void 0:o.complete_date,e.relocation_service=o!=null&&o.relocation_service_id?u.relocationServices.find(m=>m.id==o.relocation_service_id).name:null,h.value=!0,R()}function le(o){confirm("Are you sure want to remove?")&&(o._method="DELETE",V.post("/equiptment/"+o.id,o),N(),n())}function R(){P.value=!0}const N=()=>{P.value=!1,S.value=1,n(),h.value=!1},re=()=>{x.value="active",I()},ie=()=>{x.value="close",I()},ae=o=>{switch(Number(o)){case 1:return"WIP";case 2:return"Completed";case 3:return"Pending";default:return"WIP"}},I=()=>{V.get("/servicerequest/",{status:x.value,sort:y.value,order:w.value,general:C.value},{preserveState:!0,onSuccess:o=>{f.value=!1},onError:o=>{f.value=!1},onStart:o=>{f.value=!0}})},de=o=>{y.value=o,w.value=="asc"?w.value="desc":w.value="asc",console.log("search value is"+y.value),V.get("/servicerequest/",{status:x.value,sort:y.value,order:w.value,general:C.value},{preserveState:!0,onSuccess:c=>{f.value=!1},onError:c=>{f.value=!1},onStart:c=>{f.value=!0}})},ce=async()=>{if(!e.new_partner_id){console.log("No Partner"),d.value=[];return}try{const c=await(await fetch(`/getPop/${e.new_partner_id}`)).json();d.value=c||[],console.log("fetch POPs")}catch(o){console.error("Failed to fetch POPs",o)}},_e=async()=>{if(console.log("fetch POP Devices"),!e.new_pop_id){console.log("No POP Selected"),t.value=[];return}try{const c=await(await fetch(`/getOLTByPOP/${e.new_pop_id}`)).json();t.value=c||[],console.log("fetch POP Devices")}catch(o){console.error("Failed to fetch POP devices",o)}},me=async()=>{if(!e.new_pop_device_id){v.value=[];return}try{const c=await(await fetch(`/getDNByOLT/${e.new_pop_device_id}`)).json();v.value=c||[]}catch(o){console.error("Failed to fetch DNs",o)}},pe=async()=>{if(!e.new_dn_splitter_id){k.value=[];return}try{const c=await(await fetch(`/getDnId/${e.new_dn_splitter_id}`)).json();k.value=c||[]}catch(o){console.error("Failed to fetch SNs",o)}},ue=async()=>{if(!e.new_sn_splitter_id){_.value=Array.from({length:16},(o,c)=>({id:c+1,name:`SN Port ${c+1}`}));return}try{const c=await(await fetch(`/getAvailablePortBySplitterId/${e.new_sn_splitter_id}`)).json();_.value=c||[]}catch{_.value=Array.isArray(data)?data:[],_.value=Array.from({length:16},(c,O)=>({id:O+1,name:`SN Port ${O+1}`}))}};return A(()=>e.new_partner_id,()=>{(async()=>(await ce(),e.new_pop_id&&d.value&&(e.new_pop=d.value.find(o=>o.id===e.new_pop_id))))(),e.new_sn_splitter=null,e.new_dn_splitter=null,e.new_pop_device=null}),A(()=>e.new_pop_id,()=>{(async()=>(await _e(),e.new_pop_device_id&&t.value&&(e.new_pop_device=t.value.find(o=>o.id===e.new_pop_device_id))))(),e.new_dn_splitter=null,e.new_sn_splitter=null}),A(()=>e.new_pop_device_id,()=>{(async()=>(await me(),e.new_dn_splitter_id&&v.value&&(e.new_dn_splitter=v.value.find(o=>o.id===e.new_dn_splitter_id))))(),e.new_sn_splitter=null}),A(()=>e.new_dn_splitter_id,()=>{(async()=>(await pe(),e.new_sn_splitter_id&&k.value&&(e.new_sn_splitter=k.value.find(o=>o.id===e.new_sn_splitter_id))))()}),A(()=>e.new_sn_splitter_id,()=>{(async()=>{var o;await ue(),e.new_port_number_id&&((o=_.value)==null?void 0:o.length)>0?e.new_port_number=_.value.find(c=>c.id==e.new_port_number_id):e.new_port_number=null})()}),xe(()=>{u.packages.map(function(o){return o.item_data=`${o.speed} Mbps - ${o.name} - ${o.contract_period} Months Contract`})}),ge(()=>{u.packages.map(function(o){return o.item_data=`${o.speed} Mbps - ${o.name} - ${o.contract_period} Months Contract`})}),{form:e,submit:oe,editMode:h,isOpen:P,goActive:re,goClose:ie,openModal:R,closeModal:N,edit:ne,deleteRow:le,search:I,search_txt:C,getStatus:q,sortBy:de,sort:y,order:w,status:x,loading:f,popDevices:t,dnOptions:v,snOptions:k,filteredPops:d,snPortNoOptions:_,tab:S,tabClick:T,assign:E,getIncidentStatus:ae}}},Ce={class:"py-2"},Ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Oe={class:"flex justify-between space-x-2 items-end mb-2 px-1 md:px-0"},Ae={class:"relative flex flex-wrap"},Ve={class:"flex"},De={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Te={class:"min-w-full divide-y divide-gray-200 text-xs"},je={class:"bg-gray-50"},Be={key:0},qe={key:0,class:"fa fas fa-sort-up"},Ie={key:1,class:"fa fas fa-sort-down"},Le={key:0},Me={key:0,class:"fa fas fa-sort-up"},Ue={key:1,class:"fa fas fa-sort-down"},Ee={key:0},Re={key:0,class:"fa fas fa-sort-up"},Fe={key:1,class:"fa fas fa-sort-down"},ze={key:0},We={key:0,class:"fa fas fa-sort-up"},Ge={key:1,class:"fa fas fa-sort-down"},Ke={key:0},He={key:0,class:"fa fas fa-sort-up"},Je={key:1,class:"fa fas fa-sort-down"},Qe={key:0},Xe={key:0,class:"fa fas fa-sort-up"},Ye={key:1,class:"fa fas fa-sort-down"},Ze={key:0},$e={key:0,class:"fa fas fa-sort-up"},es={key:1,class:"fa fas fa-sort-down"},ss={key:0},ts={key:0,class:"fa fas fa-sort-up"},os={key:1,class:"fa fas fa-sort-down"},ns={class:"bg-white divide-y divide-gray-200"},ls={class:"px-6 py-3 whitespace-nowrap"},rs={class:"px-6 py-3 whitespace-nowrap"},is={class:"px-6 py-3 whitespace-nowrap"},as={class:"px-6 py-3 whitespace-nowrap"},ds={class:"px-6 py-3 whitespace-nowrap capitalize"},cs={class:"px-6 py-3 whitespace-nowrap"},_s={class:"px-6 py-3 whitespace-nowrap"},ms={class:"px-6 py-3 whitespace-nowrap"},ps={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},us=["onClick"],fs={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},bs={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ws={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},xs={class:"inline-flex w-full bg-gray-50 rounded-t-lg border-b"},gs={id:"tabs",class:"flex"},ys={key:0},vs={class:"py-4 border-gray-100"},ks={class:"mt-1 px-3 flex w-full justify-between"},hs={class:"flex"},Ps={class:"font-semibold text-md text-gray-800 leading-tight capitalize"},Ss={class:"flex"},Cs={class:"font-semibold text-sm text-gray-800 leading-tight"},Ns={class:"bg-white px-4"},Os={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},As={class:"col-span-1 grid grid-cols-2 gap-2"},Vs={class:"mb-4 col-span-1 sm:col-span-1"},Ds={class:"block w-full sm:text-sm"},Ts={class:"mb-4 col-span-1 sm:col-span-1"},js={class:"block w-full sm:text-sm"},Bs={class:"col-span-1 grid grid-cols-2 gap-2"},qs={class:"mb-4 col-span-1 sm:col-span-1"},Is={class:"block w-full sm:text-sm"},Ls={class:"mb-4 col-span-1 sm:col-span-1"},Ms={class:"block w-full sm:text-sm"},Us={key:0,class:"mb-4 col-span-1 sm:col-span-1"},Es={key:1,class:"mb-4 col-span-1 sm:col-span-1"},Rs=["value"],Fs={key:2,class:"mb-4 col-span-1 sm:col-span-1"},zs={key:3,class:"mb-4 col-span-1 sm:col-span-1"},Ws=["value"],Gs={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},Ks={class:"col-span-1 grid grid-cols-2 gap-2"},Hs={class:"mb-4 col-span-1 sm:col-span-1"},Js={class:"block w-full sm:text-sm"},Qs={class:"mb-4 col-span-1 sm:col-span-1"},Xs={class:"block w-full sm:text-sm"},Ys={class:"mb-4 col-span-1 sm:col-span-1"},Zs={class:"block w-full sm:text-sm"},$s={class:"col-span-1 grid grid-cols-2 gap-2"},et={class:"mb-4 col-span-1 sm:col-span-1"},st={class:"block w-full sm:text-sm"},tt={class:"mb-4 col-span-1 sm:col-span-1"},ot={class:"block w-full sm:text-sm"},nt={class:"mb-4 col-span-1 sm:col-span-1"},lt={class:"block w-full sm:text-sm"},rt={class:"mb-4 col-span-1 sm:col-span-1"},it={class:"block w-full sm:text-sm"},at={class:"mb-4 col-span-1 sm:col-span-2"},dt={class:"mb-4 col-span-1 sm:col-span-2"},ct={key:2,class:"mb-4 col-span-1 sm:col-span-1"},_t={key:3,class:"mb-4 col-span-1 sm:col-span-5"},mt=["value"],pt={key:1,class:"p-4"},ut={class:"grid grid-cols-1 sm:grid-cols-4 gap-2"},ft={class:"mb-4 col-span-1 sm:col-span-1"},bt={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},wt={class:"mb-4 col-span-1 sm:col-span-1"},xt={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},gt={class:"mb-4 col-span-1 sm:col-span-1"},yt={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},vt={class:"mb-4 col-span-1 sm:col-span-1"},kt={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},ht={class:"mb-4 col-span-1 sm:col-span-1"},Pt={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},St={class:"mb-4 col-span-1 sm:col-span-1"},Ct={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},Nt={class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},Ot={key:0},At={key:1,class:"text-red-500 text-xs mt-1"},Vt={class:"mb-4 col-span-1 sm:col-span-1 flex items-center flex-wrap text-sm"},Dt={key:0},Tt={key:1},jt={key:2,class:"text-red-500 text-xs mt-1"},Bt={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},qt={key:0},It={key:1},Lt={key:2,class:"text-red-500 text-xs mt-1"},Mt={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},Ut={key:0},Et={key:1},Rt={key:2,class:"text-red-500 text-xs mt-1"},Ft={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},zt={key:0},Wt={key:1},Gt={key:2,class:"text-red-500 text-xs mt-1"},Kt={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},Ht={key:0},Jt={key:1},Qt={key:2,class:"text-red-500 text-xs mt-1"},Xt={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},Yt={key:0},Zt={key:1},$t={key:2,class:"text-red-500 text-xs mt-1"},eo={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},so={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},to={class:"text-gray-600 border-gray-300 rounded-md text-sm"},oo={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},no={class:"text-gray-600 border-gray-300 rounded-md text-sm"},lo={class:"bg-gray-50 px-4 py-3 sm:px-6 flex justify-end gap-2"},ro={class:"flex w-full rounded-md shadow-sm sm:w-auto"},io={key:0,class:"flex w-full rounded-md shadow-sm sm:w-auto"},ao={class:"flex w-full rounded-md shadow-sm sm:w-auto"},co={key:1},_o={key:0,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function mo(u,e,d,t,v,k){const _=L("multiselect"),C=L("pagination"),y=L("app-layout");return l(),ye(y,null,{header:M(()=>e[34]||(e[34]=[s("h2",{class:"font-semibold text-xl text-white leading-tight"},"Customer Service Request",-1)])),default:M(()=>{var w,x,h,P,f,S,T;return[s("div",Ce,[s("div",Ne,[s("div",Oe,[s("div",Ae,[e[35]||(e[35]=s("span",{class:"z-10 h-full leading-snug font-normal absolute text-center text-gray-300 bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[s("i",{class:"fas fa-search"})],-1)),j(s("input",{type:"text",placeholder:"Search here...",class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:ring w-full pl-10",id:"search_txt","onUpdate:modelValue":e[0]||(e[0]=n=>t.search_txt=n),onKeyup:e[1]||(e[1]=ve((...n)=>t.search&&t.search(...n),["enter"]))},null,544),[[B,t.search_txt]])]),s("div",Ve,[s("button",{class:D([{"bg-gray-600":t.status=="active"},"inline-flex btn py-3 px-8 bg-gray-400 rounded rounded-r-none focus:ring-0 focus:border-transparent focus:outline-none focus:shadow-inner text-gray-50 text-xs font-semibold uppercase"]),onClick:e[2]||(e[2]=(...n)=>t.goActive&&t.goActive(...n))},"Active",2),s("button",{class:D([{"bg-gray-600":t.status=="close"},"inline-flex btn py-3 px-8 bg-gray-400 rounded rounded-l-none focus:ring-0 focus:border-transparent focus:outline-none focus:shadow-inner text-gray-50 text-xs font-semibold uppercase"]),onClick:e[3]||(e[3]=(...n)=>t.goClose&&t.goClose(...n))},"Closed",2)])]),d.incidents.data?(l(),r("div",De,[s("table",Te,[s("thead",je,[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[4]||(e[4]=n=>t.sortBy("id"))},[e[36]||(e[36]=b("No.")),t.sort=="id"?(l(),r("span",Be,[t.order=="asc"?(l(),r("i",qe)):(l(),r("i",Ie))])):a("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[5]||(e[5]=n=>t.sortBy("date"))},[e[37]||(e[37]=b("Date ")),t.sort=="date"?(l(),r("span",Le,[t.order=="asc"?(l(),r("i",Me)):(l(),r("i",Ue))])):a("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[6]||(e[6]=n=>t.sortBy("cid"))},[e[38]||(e[38]=b("Customer ID ")),t.sort=="cid"?(l(),r("span",Ee,[t.order=="asc"?(l(),r("i",Re)):(l(),r("i",Fe))])):a("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[7]||(e[7]=n=>t.sortBy("id"))},[e[39]||(e[39]=b("Incident ID ")),t.sort=="id"?(l(),r("span",ze,[t.order=="asc"?(l(),r("i",We)):(l(),r("i",Ge))])):a("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[8]||(e[8]=n=>t.sortBy("type"))},[e[40]||(e[40]=b("Request Type ")),t.sort=="type"?(l(),r("span",Ke,[t.order=="asc"?(l(),r("i",He)):(l(),r("i",Je))])):a("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[9]||(e[9]=n=>t.sortBy("start"))},[e[41]||(e[41]=b("Effective From ")),t.sort=="start"?(l(),r("span",Qe,[t.order=="asc"?(l(),r("i",Xe)):(l(),r("i",Ye))])):a("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[10]||(e[10]=n=>t.sortBy("request"))},[e[42]||(e[42]=b("Requested By ")),t.sort=="request"?(l(),r("span",Ze,[t.order=="asc"?(l(),r("i",$e)):(l(),r("i",es))])):a("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[11]||(e[11]=n=>t.sortBy("status"))},[e[43]||(e[43]=b("Status ")),t.sort=="status"?(l(),r("span",ss,[t.order=="asc"?(l(),r("i",ts)):(l(),r("i",os))])):a("",!0)]),e[44]||(e[44]=s("th",{scope:"col",class:"relative px-6 py-3"},[s("span",{class:"sr-only"},"Action")],-1))])]),s("tbody",ns,[(l(!0),r(U,null,ke(d.incidents.data,(n,q)=>(l(),r("tr",{key:n.id},[s("td",ls,i(q+=d.incidents.from),1),s("td",rs,i(n.date),1),s("td",is,i(n.ftth_id),1),s("td",as,i(n.code),1),s("td",ds,i(n.type.replace(/_/g," ")),1),s("td",cs,i(n.start_date),1),s("td",_s,i(n.incharge),1),s("td",ms,i(t.getStatus(n.status)),1),s("td",ps,[s("a",{href:"#",onClick:E=>t.edit(n),class:"text-yellow-600 hover:text-yellow-900"},e[45]||(e[45]=[s("i",{class:"fa fas fa-pen"},null,-1),b(" Open")]),8,us)])]))),128))])]),t.isOpen?(l(),r("div",fs,[s("div",bs,[e[82]||(e[82]=s("div",{class:"fixed inset-0 transition-opacity"},[s("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),e[83]||(e[83]=s("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e[84]||(e[84]=b("​ ")),s("div",ws,[s("div",xs,[s("ul",gs,[s("li",{class:D(["px-4 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[s("a",{href:"#",onClick:e[12]||(e[12]=n=>t.tabClick(1)),"preserve-state":""},"General")],2),t.form.type=="relocation"?(l(),r("li",{key:0,class:D(["px-4 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[s("a",{href:"#",onClick:e[13]||(e[13]=n=>t.tabClick(2)),"preserve-state":""},"Assign Team")],2)):a("",!0)])]),t.tab==1?(l(),r("div",ys,[s("div",vs,[s("div",ks,[s("div",hs,[s("h2",Ps,"Request for : "+i(t.form.type),1)]),s("div",Ss,[s("label",Cs," Date : "+i(t.form.date),1)])])]),s("div",Ns,[s("div",Os,[e[52]||(e[52]=s("div",{class:"col-span-2 mt-2"},[s("h2",{class:"text-sm font-semibold"},"General ")],-1)),s("div",As,[e[46]||(e[46]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"code",class:"block text-gray-700 text-sm font-bold mr-2"},"Ticket ID:")],-1)),s("div",Vs,[s("label",Ds,i(t.form.code),1)]),e[47]||(e[47]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"request_by",class:"block text-gray-700 text-sm font-bold"},"Requested By:")],-1)),s("div",Ts,[s("label",js,i(t.form.request_by.name),1)])]),s("div",Bs,[e[48]||(e[48]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"ftth_id",class:"block text-gray-700 text-sm font-bold"},"Customer ID:")],-1)),s("div",qs,[s("label",Is,i(t.form.ftth_id),1)]),e[49]||(e[49]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"status",class:"block text-gray-700 text-sm font-bold"},"Customer Status:")],-1)),s("div",Ls,[s("label",Ms,i(t.form.status),1)])]),t.form.bandwidth?(l(),r("div",Us,e[50]||(e[50]=[s("label",{for:"current_package",class:"block text-gray-700 text-sm font-bold"},"Current Plan:",-1)]))):a("",!0),t.form.bandwidth?(l(),r("div",Es,[s("input",{type:"text",class:D([{"ring-1 ring-blue-200":t.form.new_package},"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"]),id:"current_package",value:`${t.form.current_package.item_data}`,readonly:!0},null,10,Rs)])):a("",!0),t.form.new_package?(l(),r("div",Fs,e[51]||(e[51]=[s("label",{for:"new_package",class:"block text-gray-700 text-sm font-bold mt-3 mr-2"},"New Plan:",-1)]))):a("",!0),t.form.new_package?(l(),r("div",zs,[s("input",{type:"text",class:"mt-1 ring-1 ring-green-200 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"new_package",value:`${t.form.new_package.item_data}`,readonly:!0},null,8,Ws)])):a("",!0)]),t.form.new_address?(l(),r("div",Gs,[e[60]||(e[60]=s("div",{class:"col-span-2"},[s("hr"),s("h2",{class:"mt-2 text-sm font-semibold"},"Address ")],-1)),s("div",Ks,[e[53]||(e[53]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_address",class:"block text-gray-700 text-sm font-bold"},"Current Address:")],-1)),s("div",Hs,[s("label",Js,i(t.form.current_address),1)]),e[54]||(e[54]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_township",class:"block text-gray-700 text-sm font-bold"},"Current Township:")],-1)),s("div",Qs,[s("label",Xs,i(t.form.current_township),1)]),e[55]||(e[55]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_township",class:"block text-gray-700 text-sm font-bold"},"Current Lat Long:")],-1)),s("div",Ys,[s("label",Zs,i(t.form.current_location),1)])]),s("div",$s,[e[56]||(e[56]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"new_address",class:"block text-gray-700 text-sm font-bold"},"New Address:")],-1)),s("div",et,[s("label",st,i(t.form.new_address),1)]),e[57]||(e[57]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"new_township",class:"block text-gray-700 text-sm font-bold"},"New Township:")],-1)),s("div",tt,[s("label",ot,i(t.form.new_township.name),1)]),e[58]||(e[58]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_township",class:"block text-gray-700 text-sm font-bold"},"New Lat Long:")],-1)),s("div",nt,[s("label",lt,i(t.form.new_location),1)]),e[59]||(e[59]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_township",class:"block text-gray-700 text-sm font-bold"}," Relocation Package :")],-1)),s("div",rt,[s("label",it,i(t.form.relocation_service),1)])])])):a("",!0),s("div",null,[t.form.start_date?(l(),r(U,{key:0},[e[61]||(e[61]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"start_date",class:"block text-gray-700 text-sm font-bold mt-3 mr-2"},"Effective From :")],-1)),s("div",at,[j(s("input",{type:"text",class:"mt-1 ring-1 ring-green-200 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"start_date","onUpdate:modelValue":e[14]||(e[14]=n=>t.form.start_date=n),readonly:!0},null,512),[[B,t.form.start_date]])])],64)):a("",!0),t.form.end_date?(l(),r(U,{key:1},[e[62]||(e[62]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"end_date",class:"block text-gray-700 text-sm font-bold mt-3 mr-2"},"Effective To :")],-1)),s("div",dt,[j(s("input",{type:"text",class:"mt-1 ring-1 ring-green-200 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"end_date","onUpdate:modelValue":e[15]||(e[15]=n=>t.form.end_date=n),readonly:!0},null,512),[[B,t.form.end_date]])])],64)):a("",!0),t.form.description?(l(),r("div",ct,e[63]||(e[63]=[s("label",{for:"description",class:"block text-gray-700 text-sm font-bold mt-3 mr-2"},"Description:",-1)]))):a("",!0),t.form.description?(l(),r("div",_t,[s("textarea",{class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"description",value:`${t.form.description}`,readonly:!0},null,8,mt)])):a("",!0)])])])):a("",!0),t.tab==2?(l(),r("div",pt,[s("div",ut,[e[64]||(e[64]=s("div",{class:"col-span-4"},[s("h2",{class:"mt-2 text-sm font-semibold"},"ODN Information ")],-1)),e[65]||(e[65]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current Partner :")],-1)),s("div",ft,[s("label",bt,i(t.form.current_partner??"NA"),1)]),e[66]||(e[66]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current POP :")],-1)),s("div",wt,[s("label",xt,i(t.form.current_pop??"NA"),1)]),e[67]||(e[67]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current OLT :")],-1)),s("div",gt,[s("label",yt,i(t.form.current_pop_device??"NA"),1)]),e[68]||(e[68]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current DN Splitter :")],-1)),s("div",vt,[s("label",kt,i(t.form.current_dn_splitter??"NA"),1)]),e[69]||(e[69]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current SN Splitter :")],-1)),s("div",ht,[s("label",Pt,i(t.form.current_sn_splitter??"NA"),1)]),e[70]||(e[70]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current SN Port No. :")],-1)),s("div",St,[s("label",Ct,i(t.form.current_port_number?"SN Port: "+t.form.current_port_number:"NA"),1)]),e[71]||(e[71]=s("hr",{class:"col-span-4 py-2"},null,-1)),e[72]||(e[72]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"New Partner :")],-1)),s("div",Nt,[d.partners.length!==0?(l(),r("span",Ot,[g(_,{"deselect-label":"Selected already",options:d.partners,"track-by":"id",label:"name",modelValue:t.form.new_partner,"onUpdate:modelValue":[e[16]||(e[16]=n=>t.form.new_partner=n),e[17]||(e[17]=n=>t.form.new_partner_id=n==null?void 0:n.id)],"allow-empty":!0},null,8,["options","modelValue"])])):a("",!0),(w=d.errors)!=null&&w.new_partner_id?(l(),r("div",At,i(d.errors.new_partner_id),1)):a("",!0)]),e[73]||(e[73]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"New POP :")],-1)),s("div",Vt,[t.filteredPops.length!==0?(l(),r("span",Dt,[g(_,{"deselect-label":"Selected already",options:t.filteredPops,"track-by":"id",label:"site_name",modelValue:t.form.new_pop,"onUpdate:modelValue":[e[18]||(e[18]=n=>t.form.new_pop=n),e[19]||(e[19]=n=>t.form.new_pop_id=n==null?void 0:n.id)],"allow-empty":!1},null,8,["options","modelValue"])])):(l(),r("span",Tt," Please select Partner ")),(x=d.errors)!=null&&x.new_pop_id&&!t.form.new_pop_id?(l(),r("div",jt,i(d.errors.new_pop_id),1)):a("",!0)]),e[74]||(e[74]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"New OLT :")],-1)),s("div",Bt,[t.popDevices.length!==0?(l(),r("span",qt,[g(_,{"deselect-label":"Selected already",options:t.popDevices,"track-by":"id",label:"device_name",modelValue:t.form.new_pop_device,"onUpdate:modelValue":[e[20]||(e[20]=n=>t.form.new_pop_device=n),e[21]||(e[21]=n=>t.form.new_pop_device_id=n==null?void 0:n.id)],"allow-empty":!1},null,8,["options","modelValue"])])):(l(),r("span",It,"Please select POP site")),(h=d.errors)!=null&&h.new_pop_device_id&&!t.form.new_pop_device_id?(l(),r("div",Lt,i(d.errors.new_pop_device_id),1)):a("",!0)]),e[75]||(e[75]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"New DN Splitter :")],-1)),s("div",Mt,[t.dnOptions.length!==0?(l(),r("span",Ut,[g(_,{"deselect-label":"Selected already",options:t.dnOptions,"track-by":"id",label:"name",modelValue:t.form.new_dn_splitter,"onUpdate:modelValue":[e[22]||(e[22]=n=>t.form.new_dn_splitter=n),e[23]||(e[23]=n=>t.form.new_dn_splitter_id=n==null?void 0:n.id)],"allow-empty":!1},null,8,["options","modelValue"])])):(l(),r("span",Et,"Please select OLT")),(P=d.errors)!=null&&P.new_dn_splitter_id&&!t.form.new_dn_splitter_id?(l(),r("div",Rt,i(d.errors.new_dn_splitter_id),1)):a("",!0)]),e[76]||(e[76]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current SN Splitter :")],-1)),s("div",Ft,[t.snOptions.length!==0?(l(),r("span",zt,[g(_,{"deselect-label":"Selected already",options:t.snOptions,"track-by":"id",label:"name",modelValue:t.form.new_sn_splitter,"onUpdate:modelValue":[e[24]||(e[24]=n=>t.form.new_sn_splitter=n),e[25]||(e[25]=n=>t.form.new_sn_splitter_id=n==null?void 0:n.id)],"allow-empty":!0},null,8,["options","modelValue"])])):(l(),r("span",Wt,"Please DN Splitter")),(f=d.errors)!=null&&f.new_sn_splitter_id&&!t.form.new_sn_splitter_id?(l(),r("div",Gt,i(d.errors.new_sn_splitter_id),1)):a("",!0)]),e[77]||(e[77]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"SN Port No :")],-1)),s("div",Kt,[t.snPortNoOptions.length!==0?(l(),r("span",Ht,[g(_,{"deselect-label":"Selected already",options:t.snPortNoOptions,"track-by":"id",label:"name",modelValue:t.form.new_port_number,"onUpdate:modelValue":[e[26]||(e[26]=n=>t.form.new_port_number=n),e[27]||(e[27]=n=>t.form.new_port_number_id=n==null?void 0:n.id)],"allow-empty":!0},{singleLabel:M(({option:n})=>[s("strong",null,i(n.name)+" "+i(n.language),1)]),_:1},8,["options","modelValue"])])):(l(),r("span",Jt,"Please SN Splitter")),(S=d.errors)!=null&&S.new_port_number_id&&!t.form.new_port_number_id?(l(),r("div",Qt,i(d.errors.new_port_number_id),1)):a("",!0)]),e[78]||(e[78]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Assign Subcon :")],-1)),s("div",Xt,[d.subcons.length!==0&&t.form.new_port_number_id?(l(),r("span",Yt,[g(_,{"deselect-label":"Selected already",options:d.subcons,"track-by":"id",label:"name",modelValue:t.form.subcon,"onUpdate:modelValue":[e[28]||(e[28]=n=>t.form.subcon=n),e[29]||(e[29]=n=>t.form.subcon_id=n==null?void 0:n.id)],"allow-empty":!0},null,8,["options","modelValue"])])):(l(),r("span",Zt," Please Select SN Splitter Port ")),(T=d.errors)!=null&&T.subcon_id&&!t.form.subcon_id?(l(),r("div",$t,i(d.errors.subcon_id),1)):a("",!0)]),e[79]||(e[79]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Assign Date :")],-1)),s("div",eo,[j(s("input",{type:"date","onUpdate:modelValue":e[30]||(e[30]=n=>t.form.assign_date=n),class:"text-gray-600 border-gray-300 rounded-md text-sm"},null,512),[[B,t.form.assign_date]])]),e[80]||(e[80]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Task Status :")],-1)),s("div",so,[s("label",to,i(t.getIncidentStatus(t.form.task_status)),1)]),e[81]||(e[81]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Task Complete At :")],-1)),s("div",oo,[s("label",no,i(t.form.complete_date?t.form.complete_date:"NA"),1)])])])):a("",!0),s("div",lo,[s("span",ro,[t.form.type=="relocation"?(l(),r("button",{key:0,onClick:e[31]||(e[31]=(...n)=>t.assign&&t.assign(...n)),type:"button",class:"inline-flex items-center shadow-sm px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},"Assign")):a("",!0)]),t.status=="active"?(l(),r("span",io,[s("button",{onClick:e[32]||(e[32]=(...n)=>t.submit&&t.submit(...n)),type:"button",class:"inline-flex items-center shadow-sm px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"Process")])):a("",!0),s("span",ao,[s("button",{onClick:e[33]||(e[33]=(...n)=>t.closeModal&&t.closeModal(...n)),type:"button",class:"inline-flex items-center shadow-sm px-4 py-2 bg-gray-300 border border-gray-300 rounded-md font-semibold text-xs text-gray-600 uppercase tracking-widest hover:bg-gray-200 active:bg-gray-400 focus:outline-none focus:border-gray-300 focus:ring focus:ring-gray-200 disabled:opacity-25 transition"},"Close")])])])])],512)):a("",!0)])):a("",!0),d.incidents.links?(l(),r("span",co,[g(C,{class:"mt-6",links:d.incidents.links},null,8,["links"])])):a("",!0)])]),t.loading?(l(),r("div",_o,e[85]||(e[85]=[s("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),s("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),s("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):a("",!0)]}),_:1})}const go=Pe(Se,[["render",mo]]);export{go as default};
