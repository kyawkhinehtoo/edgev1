import{m as K,r as p,T as G,y as H,z as I,c as W,w as V,o as f,a as t,t as a,n as N,i as J,f as L,d as x,b as h,e as F,j as i,A as m,k as c,g as Q,M as R,F as X}from"./app-CphXmnFX.js";import{A as Y}from"./AppLayout-DCcQkBIW.js";import{_ as Z}from"./ImageUploader-4FjMfY5D.js";import{M as $}from"./vue3-multiselect.umd.min-CB584fVD.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                   */import"./DropdownLink-uxuXe7zh.js";const et={name:"EditCustomer",components:{AppLayout:Y,Multiselect:$,Link:K,ImageUploader:Z},props:{customer:Object,snPort:Object,bundle_equiptments:Object,subconCheckList:Object},setup(l){var P;const e=p(null),n=p(null),o=p(null),A=p(null),w=p(null),C=p({});let U=p(1);function S(r){U.value=r}let _="";(P=l.customer.current_address)!=null&&P.actual_location&&(_=l.customer.current_address.actual_location.split(",",2));const b=G({installation_status:null,way_list_date:l.customer.way_list_date,installation_date:l.customer.installation_date,fiber_distance:l.customer.fiber_distance,bundles:"",onu_serial:l.customer.onu_serial,onu_power:l.customer.onu_power,route_kmz_image:null,drum_no_txt:l.customer.drum_no_txt,drum_no_image:null,start_meter_txt:l.customer.start_meter_txt,start_meter_image:null,end_meter_txt:l.customer.end_meter_txt,end_meter_image:null,installation_remark:l.customer.installation_remark,actual_latitude:_[0]?_[0]:"",actual_longitude:_[1]?_[1]:"",...Object.fromEntries(l.subconCheckList?Object.values(l.subconCheckList).flatMap(r=>{var g,y,d,v;return[[`checklist_${r.id}_title`,((y=(g=l.customer.checklist_values)==null?void 0:g[r.id])==null?void 0:y.title)||""],[`checklist_${r.id}_attachment`,null],[`checklist_${r.id}_status`,((v=(d=l.customer.checklist_values)==null?void 0:d[r.id])==null?void 0:v.status)||""]]}):[])}),k=p([{id:"team_assigned",name:"Team Assigned",$isDisabled:!0},{id:"installation_start",name:"Installation Start"},{id:"installation_complete",name:"Installation Complete"},{id:"customer_cancel",name:"Customer Cancel"},{id:"port_full",name:"Port Full"}]);return H(()=>{if(b.installation_status=l.customer.installation_status?k.value.filter(r=>r.id==l.customer.installation_status)[0]:null,l.customer.bundle){let r=l.customer.bundle.split(",").filter(Boolean),g=[];w.value=[],r.forEach(y=>{const d=l.bundle_equiptments.find(v=>v.id==y);d&&(g.push(d),w.value=w.value?`${w.value},${d.name}`:d.name)}),b.bundles=g}}),{submit:()=>{b.post(route("subcom.customer.update",l.customer.id),{preserveScroll:!0,onSuccess:r=>{Toast.fire({icon:"success",title:r.props.flash.message})}})},installationStatus:k,form:b,routeImagePreview:e,drumImagePreview:n,startMeterImagePreview:o,endMeterImagePreview:A,checklistImagePreviews:C,tab:U,tabClick:S}}},st={class:"font-semibold text-xl text-white leading-tight"},ot={class:"py-12"},lt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},at={class:"inline-flex w-full bg-white rounded-t-lg font-semibold"},nt={id:"tabs",class:"flex"},it={class:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-6 mt-6"},rt={class:"mt-1"},dt={class:"mt-1"},mt={class:"mt-1"},ut={class:"mt-1"},ft={class:"mt-1"},ct={class:"mt-1"},gt={class:"mt-1"},pt={class:"mt-1"},xt={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},_t={class:"mt-1"},bt={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"},yt={class:"mt-1"},vt={class:"mt-1"},wt={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"},kt={class:"mt-1"},Pt={class:"mt-1"},Ut={class:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-6 mt-6"},It={class:"mt-1"},Vt={class:"mt-1"},Nt={class:"mt-1"},Ct={class:"mt-1"},St={class:"mt-1"},Dt={class:"mt-1"},Lt={class:"mt-1"},ht={class:"mt-1"},At={class:"mt-1"},Ot={class:"grid grid-cols-1 sm:grid-cols-4 gap-6 mt-6"},jt={class:"col-span-1"},Mt={key:0,class:"mt-1 flex rounded-md shadow-sm"},Et={class:"col-span-1"},Tt={class:"col-span-1"},qt={class:"col-span-1"},Bt={class:"col-span-1"},zt={class:"col-span-1"},Ft={class:"col-span-1 sm:col-span-1"},Rt={class:"mt-1 flex rounded-md shadow-sm"},Kt={class:"col-span-1 sm:col-span-1"},Gt={class:"mt-1 flex rounded-md shadow-sm"},Ht={class:"col-span-1 sm:col-span-4"},Wt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Jt={class:"block text-sm font-medium text-gray-700"},Qt=["onUpdate:modelValue"],Xt={key:0,class:"mt-2"},Yt={class:"py-2"},Zt={class:"mt-2 flex"},$t={class:"flex-auto items-center"},te=["name","onUpdate:modelValue","disabled"],ee={class:"flex-auto items-center"},se=["name","onUpdate:modelValue","disabled"],oe={class:"flex-auto items-center"},le={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-red-600"},ae={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-red-600"},ne={class:"flex-auto items-center"},ie={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-green-600"},re={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-green-600"},de={class:"mt-6 flex justify-end"};function me(l,e,n,o,A,w){const C=I("multiselect"),U=I("ImageUploader"),S=I("Link"),_=I("AppLayout");return f(),W(_,{title:"Customer Details"},{header:V(()=>[t("h2",st," ID :"+a(n.customer.ftth_id),1)]),default:V(()=>{var b,k,D,P,r,g,y,d,v,O,j,M,E,T,q,B;return[t("div",ot,[t("div",lt,[t("div",at,[t("ul",nt,[t("li",{class:N(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[o.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[t("a",{href:"#",onClick:e[0]||(e[0]=s=>o.tabClick(1)),"preserve-state":""},"General")],2),t("li",{class:N(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[o.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[t("a",{href:"#",onClick:e[1]||(e[1]=s=>o.tabClick(2)),"preserve-state":""},"Attachment")],2)])]),t("form",{onSubmit:e[14]||(e[14]=J((...s)=>o.submit&&o.submit(...s),["prevent"]))},[t("div",{class:N(["bg-white shadow-xl sm:rounded-lg sm:rounded-t-none p-6",[o.tab==1?"":"hidden"]])},[e[48]||(e[48]=t("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Customer Information",-1)),t("div",it,[t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-500"},"Unique ID",-1)),t("p",rt,a(n.customer.ftth_id),1)]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-500"},"Customer ID",-1)),t("p",dt,a(n.customer.isp_ftth_id),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-gray-500"},"Name",-1)),t("p",mt,a(n.customer.name),1)]),t("div",null,[e[18]||(e[18]=t("p",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),t("p",ut,a(n.customer.phone_1),1)]),t("div",null,[e[19]||(e[19]=t("p",{class:"text-sm font-medium text-gray-500"},"Township",-1)),t("p",ft,a((D=(k=(b=n.customer)==null?void 0:b.current_address)==null?void 0:k.township)==null?void 0:D.name),1)]),t("div",null,[e[20]||(e[20]=t("p",{class:"text-sm font-medium text-gray-500"},"Address",-1)),t("p",ct,a((r=(P=n.customer)==null?void 0:P.current_address)==null?void 0:r.address),1)]),t("div",null,[e[21]||(e[21]=t("p",{class:"text-sm font-medium text-gray-500"},"Location",-1)),t("p",gt,a((y=(g=n.customer)==null?void 0:g.current_address)==null?void 0:y.location),1)]),t("div",null,[e[22]||(e[22]=t("p",{class:"text-sm font-medium text-gray-500"},"Order Date",-1)),t("p",pt,[t("span",xt,a(n.customer.order_date),1)])]),t("div",null,[e[23]||(e[23]=t("p",{class:"text-sm font-medium text-gray-500"},"Assign Date",-1)),t("p",_t,[t("span",bt,a(n.customer.subcom_assign_date),1)])]),t("div",null,[e[24]||(e[24]=t("p",{class:"text-sm font-medium text-gray-500"},"Package",-1)),t("p",yt,a(n.customer.bandwidth)+" Mbps",1)]),t("div",null,[e[25]||(e[25]=t("p",{class:"text-sm font-medium text-gray-500"},"Installation Timeline",-1)),t("p",vt,[t("span",wt,a((d=n.customer.installation_service)==null?void 0:d.sla_hours)+" Hours ",1)])]),t("div",null,[e[26]||(e[26]=t("p",{class:"text-sm font-medium text-gray-500"},"Prefer Install Date",-1)),t("p",kt,a(n.customer.prefer_install_date),1)]),t("div",null,[e[27]||(e[27]=t("p",{class:"text-sm font-medium text-gray-500"},"Order Remark",-1)),t("p",Pt,a(n.customer.order_remark),1)])]),e[49]||(e[49]=t("hr",{class:"my-4 md:min-w-full"},null,-1)),e[50]||(e[50]=t("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," ODN Information",-1)),t("div",Ut,[t("div",null,[e[28]||(e[28]=t("p",{class:"text-sm font-medium text-gray-500"},"Internet Service Provider",-1)),t("p",It,a((O=(v=n.customer)==null?void 0:v.isp)==null?void 0:O.name),1)]),t("div",null,[e[29]||(e[29]=t("p",{class:"text-sm font-medium text-gray-500"},"POP ID",-1)),t("p",Vt,a((j=n.snPort)==null?void 0:j.pop.site_name),1)]),t("div",null,[e[30]||(e[30]=t("p",{class:"text-sm font-medium text-gray-500"},"DN Name",-1)),t("p",Nt,a((M=n.snPort)==null?void 0:M.dn_splitter.name),1)]),t("div",null,[e[31]||(e[31]=t("p",{class:"text-sm font-medium text-gray-500"},"DN Location",-1)),t("p",Ct,a((E=n.snPort)==null?void 0:E.dn_splitter.location),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-sm font-medium text-gray-500"},"SN Name",-1)),t("p",St,a((T=n.snPort)==null?void 0:T.sn_splitter.name),1)]),t("div",null,[e[33]||(e[33]=t("p",{class:"text-sm font-medium text-gray-500"},"SN Location",-1)),t("p",Dt,a((q=n.snPort)==null?void 0:q.sn_splitter.location),1)]),t("div",null,[e[34]||(e[34]=t("p",{class:"text-sm font-medium text-gray-500"},"SN Port No.",-1)),t("p",Lt,"SN Port "+a((B=n.snPort)==null?void 0:B.port_number),1)]),t("div",null,[e[35]||(e[35]=t("p",{class:"text-sm font-medium text-gray-500"},"PPPOE User Name",-1)),t("p",ht,a(n.customer.pppoe_username??"NA"),1)]),t("div",null,[e[36]||(e[36]=t("p",{class:"text-sm font-medium text-gray-500"},"PPPOE Password",-1)),t("p",At,a(n.customer.pppoe_password??"NA"),1)])]),e[51]||(e[51]=t("hr",{class:"my-4 md:min-w-full"},null,-1)),e[52]||(e[52]=t("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Information",-1)),t("div",Ot,[t("div",jt,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700"},[t("span",{class:"text-red-500"},"*"),L(" Installation Status")],-1)),o.installationStatus.length!==0?(f(),x("div",Mt,[h(C,{"deselect-label":"Selected already",options:o.installationStatus,"track-by":"id",label:"name",modelValue:o.form.installation_status,"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.installation_status=s),"allow-empty":!1,multiple:!1,taggable:!1},{singleLabel:V(({option:s})=>[t("strong",null,a(s.name),1)]),_:1},8,["options","modelValue"])])):F("",!0),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors.installation_status),513),[[m,l.$page.props.errors.installation_status]])]),t("div",Et,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700"},[t("span",{class:"text-red-500"},"*"),L(" Way List Date")],-1)),i(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>o.form.way_list_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,o.form.way_list_date]]),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors.way_list_date),513),[[m,l.$page.props.errors.way_list_date]])]),t("div",Tt,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700"},"Installation Date",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>o.form.installation_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,o.form.installation_date]]),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors.installation_date),513),[[m,l.$page.props.errors.installation_date]])]),t("div",qt,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700"},"Fiber Distance",-1)),i(t("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=s=>o.form.fiber_distance=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,o.form.fiber_distance]]),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors.fiber_distance),513),[[m,l.$page.props.errors.fiber_distance]])]),t("div",Bt,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700"},"ONU Serial",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=s=>o.form.onu_serial=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,o.form.onu_serial]]),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors.onu_serial),513),[[m,l.$page.props.errors.onu_serial]])]),t("div",zt,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700"},"ONU Power",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=s=>o.form.onu_power=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,o.form.onu_power]]),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors.onu_power),513),[[m,l.$page.props.errors.onu_power]])]),t("div",Ft,[e[44]||(e[44]=t("label",{for:"actual_latitude",class:"block text-sm font-medium text-gray-700"},"Actual Latitude ",-1)),t("div",Rt,[e[43]||(e[43]=t("span",{class:"z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[t("i",{class:"fas fa-location-arrow"})],-1)),i(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=s=>o.form.actual_latitude=s),name:"actual_latitude",id:"actual_latitude",class:"pl-10 mt-1 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",onKeypress:e[9]||(e[9]=s=>l.isNumber(l.event))},null,544),[[c,o.form.actual_latitude]])]),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors.actual_latitude),513),[[m,l.$page.props.errors.actual_latitude]])]),t("div",Kt,[e[46]||(e[46]=t("label",{for:"actual_longitude",class:"block text-sm font-medium text-gray-700"},"Actual Longitude ",-1)),t("div",Gt,[e[45]||(e[45]=t("span",{class:"z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[t("i",{class:"fas fa-location-arrow"})],-1)),i(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=s=>o.form.actual_longitude=s),name:"actual_longitude",id:"actual_longitude",class:"pl-10 mt-1 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",onKeypress:e[11]||(e[11]=s=>l.isNumber(l.event))},null,544),[[c,o.form.actual_longitude]])]),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors.actual_longitude),513),[[m,l.$page.props.errors.actual_longitude]])]),t("div",Ht,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700"},"Installation Remark",-1)),i(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.form.installation_remark=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,o.form.installation_remark]]),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors.installation_remark),513),[[m,l.$page.props.errors.installation_remark]])])])],2),t("div",{class:N(["bg-white overflow-hidden shadow-xl sm:rounded-lg sm:rounded-t-none p-6",[o.tab==2?"":"hidden"]])},[e[58]||(e[58]=t("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Data",-1)),t("div",Wt,[(f(!0),x(X,null,Q(n.subconCheckList,(s,ue)=>{var z;return f(),x("div",{key:s.id,class:"mt-6"},[t("label",Jt,a(s.name),1),i(t("input",{type:"text","onUpdate:modelValue":u=>o.form[`checklist_${s.id}_title`]=u,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Qt),[[c,o.form[`checklist_${s.id}_title`]]]),s.has_attachment?(f(),x("div",Xt,[h(U,{modelValue:o.form[`checklist_${s.id}_attachment`],"onUpdate:modelValue":u=>o.form[`checklist_${s.id}_attachment`]=u,imageUrl:o.checklistImagePreviews[s.id],"onUpdate:imageUrl":u=>o.checklistImagePreviews[s.id]=u,existingImage:n.customer.checklist_images&&n.customer.checklist_images[s.id]?`/storage/${n.customer.checklist_images[s.id]}`:null,"upload-text":`Upload ${s.name} image`,submitStatus:(z=n.customer.checklist_values[s.id])==null?void 0:z.status},null,8,["modelValue","onUpdate:modelValue","imageUrl","onUpdate:imageUrl","existingImage","upload-text","submitStatus"])])):F("",!0),t("div",Yt,[e[57]||(e[57]=t("label",{for:"status",class:"block text-md font-medium text-gray-700"}," Status ",-1)),t("div",Zt,[t("label",$t,[i(t("input",{type:"radio",class:"form-radio h-5 w-5 text-blue-600",name:o.form[`checklist_${s.id}`],"onUpdate:modelValue":u=>o.form[`checklist_${s.id}_status`]=u,value:"",disabled:o.form[`checklist_${s.id}_status`]=="approved"},null,8,te),[[R,o.form[`checklist_${s.id}_status`]]]),e[53]||(e[53]=t("span",{class:"ml-2 text-gray-700 text-sm"},"No Data",-1))]),t("label",ee,[i(t("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:o.form[`checklist_${s.id}`],"onUpdate:modelValue":u=>o.form[`checklist_${s.id}_status`]=u,value:"requested",disabled:o.form[`checklist_${s.id}_status`]=="approved"},null,8,se),[[R,o.form[`checklist_${s.id}_status`]]]),e[54]||(e[54]=t("span",{class:"ml-2 text-gray-700 text-sm"},"Request",-1))]),t("label",oe,[o.form[`checklist_${s.id}_status`]=="declined"?(f(),x("i",le)):(f(),x("i",ae)),e[55]||(e[55]=t("span",{class:"ml-2 text-gray-700 text-sm"},"Declined",-1))]),t("label",ne,[o.form[`checklist_${s.id}_status`]=="approved"?(f(),x("i",ie)):(f(),x("i",re)),e[56]||(e[56]=t("span",{class:"ml-2 text-gray-700 text-sm"},"Approved",-1))])])]),i(t("p",{class:"mt-2 text-sm text-red-500"},a(l.$page.props.errors[`checklist_${s.id}_attachment`]),513),[[m,l.$page.props.errors[`checklist_${s.id}_attachment`]]])])}),128))])],2),t("div",de,[h(S,{href:l.route("customer.index"),class:"inline-flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 shadow-sm focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150"},{default:V(()=>e[59]||(e[59]=[L(" Back")])),_:1},8,["href"]),t("button",{type:"button",onClick:e[13]||(e[13]=(...s)=>o.submit&&o.submit(...s)),class:"ml-3 inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Submit ")])],32)])])]}),_:1})}const ye=tt(et,[["render",me]]);export{ye as default};
