import{A as E}from"./AppLayout-DSJd57AO.js";import{P as B}from"./Pagination-DaoZCiAD.js";import{r as v,h as J,x as L,ak as z,z as U,c as K,w as D,N as w,o as n,a as t,j as i,k as f,O as q,d as a,e as u,F as C,g as P,f as k,i as G,A as x,l as Q,B as R,b as W,n as X,t as c}from"./app-lsthav8r.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DDD3U56C.js";const Z={name:"port-sharing-service",components:{AppLayout:E,Pagination:B},props:{services:Object,errors:Object},setup(_){const e=v([{min:1,fees:8e3}]),m=v([{min:1e4,fees:8e3},{min:10001,fees:7500}]),o=v([{min:1,fees:1e4}]),l=J({id:null,name:null,short_code:null,max_speed:null,rate:m.value,type:"FTTH",currency:"mmk",status:!0}),S=v("");let y=v(!1),h=v(!1);function s(){l.id=null,l.name=null,l.short_code=null,l.max_speed=null,l.rate=m.value,l.type="FTTH",l.currency="mmk",l.status=!0,e.value=null}const g=()=>{l.rate.push({min:"",fess:""})},p=r=>{l.rate.splice(r,1)},M=r=>{const d=r.split("-");if(d.length===1)return[0,parseInt(d[0].replace("<","").trim(),10)];{const N=parseInt(d[0].trim(),10),A=parseInt(d[1].trim(),10);return[N,A]}};function T(r){try{JSON.parse(r)}catch{return!1}return!0}function F(){y.value?(l._method="PUT",w.post("/port-sharing-service/"+l.id,l,{onSuccess:r=>{b(),s(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}})):(l._method="POST",w.post("/port-sharing-service",l,{preserveState:!0,onSuccess:r=>{b(),s(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}}))}function I(r){l.id=r.id,l.name=r.name,l.short_code=r.short_code,l.max_speed=r.max_speed,l.rate=T(r.rate)?JSON.parse(r.rate):m.value,l.type=r.type,e.value=T(r.rate)?JSON.parse(r.rate):m.value,l.currency=r.currency||"mmk",l.status=r.status==1,y.value=!0,V()}function O(r){r=r||window.event;var d=r.which?r.which:r.keyCode;if(d>31&&(d<48||d>57)&&d!==46)r.preventDefault();else return!0}function H(r){confirm("Are you sure want to remove?")&&(r._method="DELETE",w.post("/port-sharing-service/"+r.id,r,{preserveState:!0,onSuccess:d=>{b(),s(),Toast.fire({icon:"success",title:d.props.flash.message})},onError:d=>{b(),console.log("error ..",d)}}),b(),s())}function V(){h.value=!0}const b=()=>{h.value=!1,s(),y.value=!1},j=()=>{w.get("/port-sharing-service",{service:S.value},{preserveState:!0})};return L(z(l,"type"),r=>{r==="FTTH"||r==="DIA"?e.value===null?l.rate=m.value:l.rate=e.value:(l.max_speed=1,e.value===null?l.rate=m.value:l.rate=o.value)}),{form:l,submit:F,editMode:y,isOpen:h,openModal:V,closeModal:b,edit:I,deleteRow:H,searchService:j,isNumber:O,search:S,rateRules:m,rateRulesPerMbps:o,addRule:g,removeRule:p,parseRange:M,isJsonString:T,cacheRate:e}}},$={class:"py-2"},ee={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},te={class:"flex justify-between space-x-2 items-end mb-2 px-1 md:px-0"},se={class:"relative flex flex-wrap z-0"},oe={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},re={class:"min-w-full divide-y divide-gray-200"},le={class:"bg-gray-50"},ne={key:0,scope:"col",class:"relative px-6 py-3"},ae={class:"bg-white divide-y divide-gray-200 text-sm"},ie={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},de={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},me={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},ue={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},ce={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap uppercase"},pe={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},fe={key:0,class:"text-xs text-gray-500"},xe={key:1,class:"text-xs text-gray-500"},ye={key:2,class:"text-xs text-gray-500"},ge={key:3,class:"text-xs text-gray-500"},be={class:"px-3 py-3 text-left text-md font-medium"},ve={key:0,class:"flex flex-wrap gap-1"},he={class:"font-semibold"},_e={class:"ml-1 font-semibold"},we={class:"ml-1 uppercase"},ke={key:1},Se={key:0,class:"px-3 py-3 text-md font-medium whitespace-nowrap text-right"},Me=["onClick"],Te=["onClick"],Ce={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},Pe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ve={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Ne={class:"shadow sm:rounded-md sm:overflow-hidden"},Ue={class:"px-4 py-5 bg-white space-y-6 sm:p-6"},De={class:"col-span-1 sm:col-span-1"},Re={class:"py-2 grid grid-cols-3 gap-2"},Fe={class:"col-span-2"},Ie={class:"mt-1 flex rounded-md shadow-sm"},Oe={class:"col-span-1"},He={class:"mt-1 flex rounded-md shadow-sm"},je={class:"py-2"},Ae={class:"mt-1 flex"},Ee={class:"flex-auto items-center mt-3"},Be={class:"flex-auto items-center mt-3"},Je={class:"flex-auto items-center mt-3"},Le={class:"flex-auto items-center mt-3"},ze={key:0,class:"py-2"},Ke={class:"mt-1 flex rounded-md shadow-sm"},qe={key:1,class:"py-2"},Ge={class:"mt-1 flex rounded-md shadow-sm"},Qe={class:"py-2"},We={class:"mt-2 flex"},Xe={class:"flex-auto items-center"},Ye={class:"flex-auto items-center"},Ze={class:"flex-auto items-center"},$e={class:"mb-4"},et={class:"block text-gray-700 text-sm font-bold"},tt={class:"mt-1 flex rounded-md shadow-sm"},st=["onUpdate:modelValue"],ot={class:"mt-1 flex rounded-md shadow-sm"},rt=["onUpdate:modelValue"],lt={class:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm uppercase"},nt=["onClick"],at={class:"py-2"},it={class:"mt-1 flex"},dt={key:0,class:"flex-auto items-center ml-1"},mt={key:1,class:"flex-auto items-center ml-1"},ut={class:"px-4 py-3 bg-gray-50 text-right sm:px-6"},ct={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},pt={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},ft={type:"submit",class:"inline-flex justify-center w-full px-4 py-2 bg-gray-800 border border-gray-300 rounded-md font-medium text-base leading-6 sm:text-sm text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150"},xt={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},yt={type:"submit",class:"inline-flex justify-center w-full px-4 py-2 bg-gray-800 border border-gray-300 rounded-md font-medium text-base leading-6 sm:text-sm text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150"},gt={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},bt={key:1};function vt(_,e,m,o,l,S){const y=U("pagination"),h=U("app-layout");return n(),K(h,null,{header:D(()=>e[20]||(e[20]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"},"Network Point Services Info",-1)])),default:D(()=>[t("div",$,[t("div",ee,[t("div",te,[t("div",se,[e[21]||(e[21]=t("span",{class:"z-10 h-full leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[t("i",{class:"fas fa-search"})],-1)),i(t("input",{type:"text",placeholder:"Search here...",class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:ring w-full pl-10",id:"search","onUpdate:modelValue":e[0]||(e[0]=s=>o.search=s),onKeyup:e[1]||(e[1]=q((...s)=>o.searchService&&o.searchService(...s),["enter"]))},null,544),[[f,o.search]])]),_.$page.props.login_type=="internal"?(n(),a("button",{key:0,onClick:e[2]||(e[2]=(...s)=>o.openModal&&o.openModal(...s)),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"Create")):u("",!0)]),m.services.data?(n(),a("div",oe,[t("table",re,[t("thead",le,[t("tr",null,[e[23]||(e[23]=t("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No. ",-1)),e[24]||(e[24]=t("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Service Name",-1)),e[25]||(e[25]=t("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Short Code",-1)),e[26]||(e[26]=t("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Service Type",-1)),e[27]||(e[27]=t("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Unit ",-1)),e[28]||(e[28]=t("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Prices",-1)),_.$page.props.login_type=="internal"?(n(),a("th",ne,e[22]||(e[22]=[t("span",{class:"sr-only"},"Action",-1)]))):u("",!0)])]),t("tbody",ae,[(n(!0),a(C,null,P(m.services.data,(s,g)=>(n(),a("tr",{key:s.id,class:X({"text-gray-400":!s.status})},[t("td",ie,c(m.services.from+g),1),t("td",de,c(s.name),1),t("td",me,[t("span",ue,c(s.short_code),1)]),t("td",ce,c(s.type),1),t("td",pe,[k(c(s.max_speed)+" ",1),s.type==="FTTH"?(n(),a("span",fe,"Mbps (Max)")):u("",!0),s.type==="DIA"?(n(),a("span",xe,"Port (Per Port)")):u("",!0),s.type==="IPVPN"?(n(),a("span",ye,"Mbps (Per Mbps)")):u("",!0),s.type==="DPLC"?(n(),a("span",ge,"Mbps (Per Mbps)")):u("",!0)]),t("td",be,[o.isJsonString(s.rate)?(n(),a("div",ve,[(n(!0),a(C,null,P(JSON.parse(s.rate),(p,M)=>(n(),a("span",{key:M,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[t("span",he,c(p.min),1),k(" Â "+c(s.type=="FTTH"?"Ports:":"Mbps:")+" ",1),t("span",_e,c(p.fees),1),t("span",we,c(s.currency),1)]))),128))])):(n(),a("span",ke,c(s.rate),1))]),_.$page.props.login_type=="internal"?(n(),a("td",Se,[t("a",{href:"#",onClick:p=>o.edit(s),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,Me),e[29]||(e[29]=k(" | ")),t("a",{href:"#",onClick:p=>o.deleteRow(s),class:"text-red-600 hover:text-red-900"},"Delete",8,Te)])):u("",!0)],2))),128))])]),o.isOpen?(n(),a("div",Ce,[t("div",Pe,[e[50]||(e[50]=t("div",{class:"fixed inset-0 transition-opacity"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),e[51]||(e[51]=k(" â ")),t("div",Ve,[t("form",{onSubmit:e[19]||(e[19]=G((...s)=>o.submit&&o.submit(...s),["prevent"]))},[t("div",Ne,[t("div",Ue,[t("div",De,[t("div",Re,[t("div",Fe,[e[30]||(e[30]=t("label",{for:"name",class:"block text-md font-medium text-gray-700"},"Service Name",-1)),t("div",Ie,[i(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>o.form.name=s),name:"name",id:"name",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Service Name",required:""},null,512),[[f,o.form.name]])])]),t("div",Oe,[e[31]||(e[31]=t("label",{for:"short_code",class:"block text-md font-medium text-gray-700"},"Short Code",-1)),t("div",He,[i(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>o.form.short_code=s),name:"short_code",id:"short_code",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Short Code",required:""},null,512),[[f,o.form.short_code]])])])]),t("div",je,[e[36]||(e[36]=t("label",{for:"type",class:"block text-md font-medium text-gray-700"},"Service Type",-1)),t("div",Ae,[t("label",Ee,[i(t("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:"type","onUpdate:modelValue":e[5]||(e[5]=s=>o.form.type=s),value:"FTTH"},null,512),[[x,o.form.type]]),e[32]||(e[32]=t("span",{class:"ml-2 text-gray-700"},"FTTH",-1))]),t("label",Be,[i(t("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:"type","onUpdate:modelValue":e[6]||(e[6]=s=>o.form.type=s),value:"DIA"},null,512),[[x,o.form.type]]),e[33]||(e[33]=t("span",{class:"ml-2 text-gray-700"},"DIA",-1))]),t("label",Je,[i(t("input",{type:"radio",class:"form-radio h-5 w-5 text-blue-600",name:"type","onUpdate:modelValue":e[7]||(e[7]=s=>o.form.type=s),value:"DPLC"},null,512),[[x,o.form.type]]),e[34]||(e[34]=t("span",{class:"ml-2 text-gray-700"},"DPLC",-1))]),t("label",Le,[i(t("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:"type","onUpdate:modelValue":e[8]||(e[8]=s=>o.form.type=s),value:"IPVPN"},null,512),[[x,o.form.type]]),e[35]||(e[35]=t("span",{class:"ml-2 text-gray-700"},"IPVPN",-1))])])]),o.form.type==="FTTH"?(n(),a("div",ze,[e[38]||(e[38]=t("label",{for:"max_speed",class:"block text-md font-medium text-gray-700"},"Max Speed",-1)),t("div",Ke,[i(t("input",{type:"number","onUpdate:modelValue":e[9]||(e[9]=s=>o.form.max_speed=s),name:"max_speed",id:"max_speed",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300",placeholder:"Max Speed",onKeypress:e[10]||(e[10]=s=>o.isNumber(s)),required:""},null,544),[[f,o.form.max_speed]]),e[37]||(e[37]=t("span",{class:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"}," Mbps ",-1))])])):(n(),a("div",qe,[e[40]||(e[40]=t("label",{for:"max_speed",class:"block text-md font-medium text-gray-700"}," Bandwidth",-1)),t("div",Ge,[i(t("input",{type:"number","onUpdate:modelValue":e[11]||(e[11]=s=>o.form.max_speed=s),name:"max_speed",id:"max_speed",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300",placeholder:"Max Speed",onKeypress:e[12]||(e[12]=s=>o.isNumber(s)),required:"",disabled:""},null,544),[[f,o.form.max_speed]]),e[39]||(e[39]=t("span",{class:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"}," Mbps ",-1))])])),t("div",Qe,[e[44]||(e[44]=t("label",{for:"currency",class:"block text-md font-medium text-gray-700"},"Currency ",-1)),t("div",We,[t("label",Xe,[i(t("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:"currency","onUpdate:modelValue":e[13]||(e[13]=s=>o.form.currency=s),value:"mmk"},null,512),[[x,o.form.currency]]),e[41]||(e[41]=t("span",{class:"ml-2 text-gray-700 text-sm"},"MMK",-1))]),t("label",Ye,[i(t("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:"currency","onUpdate:modelValue":e[14]||(e[14]=s=>o.form.currency=s),value:"usd"},null,512),[[x,o.form.currency]]),e[42]||(e[42]=t("span",{class:"ml-2 text-gray-700 text-sm"},"USD",-1))]),t("label",Ze,[i(t("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:"currency","onUpdate:modelValue":e[15]||(e[15]=s=>o.form.currency=s),value:"baht"},null,512),[[x,o.form.currency]]),e[43]||(e[43]=t("span",{class:"ml-2 text-gray-700 text-sm"},"THB",-1))])])]),e[49]||(e[49]=t("label",{for:"rate",class:"block text-gray-700 text-md font-bold"},"Service Rate ",-1)),t("div",$e,[o.form.rate?(n(!0),a(C,{key:0},P(o.form.rate,(s,g)=>(n(),a("div",{key:g,class:"rule inline-flex items-center"},[t("label",et,c(o.form.type=="FTTH"?"Ports":"Min Mbps"),1),t("div",tt,[i(t("input",{type:"number","onUpdate:modelValue":p=>s.min=p,placeholder:"e.g., 10000",class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full m-4 shadow-sm sm:text-sm border-gray-300 rounded-md"},null,8,st),[[f,s.min]])]),e[46]||(e[46]=t("label",{class:"block text-gray-700 text-sm font-bold mr-2"},"Fees : ",-1)),t("div",ot,[i(t("input",{type:"number","onUpdate:modelValue":p=>s.fees=p,placeholder:"e.g., 25000",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300"},null,8,rt),[[f,s.fees]]),t("span",lt,c(o.form.currency),1)]),t("button",{type:"button",onClick:p=>o.removeRule(g),class:"m-2 btn"},e[45]||(e[45]=[t("i",{class:"fas fa-minus-circle text-yellow-600"},null,-1)]),8,nt)]))),128)):u("",!0),t("button",{type:"button",onClick:e[16]||(e[16]=(...s)=>o.addRule&&o.addRule(...s)),class:"m-2 btn"},e[47]||(e[47]=[t("i",{class:"fas fa-plus-circle text-indigo-600"},null,-1)]))]),t("div",at,[e[48]||(e[48]=t("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),t("div",it,[i(t("input",{type:"checkbox",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded mt-1",name:"status","onUpdate:modelValue":e[17]||(e[17]=s=>o.form.status=s),value:"true"},null,512),[[Q,o.form.status]]),o.form.status==!0?(n(),a("label",dt,"Enabled")):u("",!0),o.form.status==!1?(n(),a("label",mt,"Disabled")):u("",!0)])])])]),t("div",ut,[t("div",ct,[t("span",pt,[i(t("button",ft,"Save",512),[[R,!o.editMode]])]),t("span",xt,[i(t("button",yt,"Update",512),[[R,o.editMode]])]),t("span",gt,[t("button",{onClick:e[18]||(e[18]=(...s)=>o.closeModal&&o.closeModal(...s)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Cancel")])])])])],32)])])],512)):u("",!0)])):u("",!0),m.services.links?(n(),a("span",bt,[W(y,{class:"mt-6",links:m.services.links},null,8,["links"])])):u("",!0)])])]),_:1})}const Mt=Y(Z,[["render",vt],["__scopeId","data-v-75b32eda"]]);export{Mt as default};
