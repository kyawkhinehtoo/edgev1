import{A as T}from"./AppLayout-DQMHUDA-.js";import{P as A}from"./Pagination-BDaU9i64.js";import{_ as E}from"./PrimaryButton-CMsSAGp3.js";import{_ as J}from"./DialogModal-OvmMU03Y.js";import{_ as R}from"./SecondaryButton-CxTrsqTj.js";import{_ as q}from"./DangerButton-BRM_T1c6.js";import{_ as z,a as G}from"./TextInput-B7xG93F8.js";import{_ as H}from"./ConfirmationModal-C7Cw49kj.js";import{T as D,r as x,m as P,q as _,d as r,b as p,w as f,F as U,N as K,o as a,a as t,s as v,v as h,f as g,g as Q,e as b,t as c}from"./app-DdoqqyeN.js";import{M as W}from"./vue3-multiselect.umd.min-BtFOAPRA.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DupIRA2Y.js";const Y={name:"dnSnReport",components:{AppLayout:T,Pagination:A,PrimaryButton:E,JetDialogModal:J,JetSecondaryButton:R,JetDangerButton:q,JetConfirmationModal:H,JetInput:z,JetInputError:G,useForm:D,Multiselect:W},props:{partners:Object,overall:Object,sns:Object,dns:Object,sns_all:Object,errors:Object},setup(m){let e=x(null),i=x(!1),o=x(!1),F=x(""),N=x(""),y=x(""),w=x(""),k=x("");const l=D({general:null,partner:null,pop:null,pop_device:null,dn:null,sn:null,customer_min:null,customer_max:null}),S=()=>{k.value=null,l.reset(),O()},d=D({id:null,sn:null,dn_id:null,name:null,description:null,location:null,input_dbm:null});function C(n){e.value=n}function s(){d.id=null,d.dn_id=null,d.sn=null,d.name=null,d.description=null,d.location=null,d.input_dbm=null}function V(n){d.id=n.id,d.dn_id=m.dns.filter(u=>u.id==n.dn_id)[0],d.sn=m.sns_all.filter(u=>u.name==n.name)[0],d.name=n.name,d.description=n.description,d.location=n.location,d.input_dbm=n.input_dbm,i.value=!0,o.value=!0}function j(){i.value=!1,s()}function O(){K.post("/dnSnReport/",l,{preserveState:!0})}const L=async()=>{if(!l.partner){N.value=[];return}try{const u=await(await fetch(`/getPop/${l.partner.id}`)).json();N.value=u||[]}catch(n){console.error("Failed to fetch POPs",n)}},B=async()=>{if(!l.pop){y.value=[];return}try{const u=await(await fetch(`/getOLTByPOP/${l.pop.id}`)).json();y.value=u||[],console.log("fetch POP Devices")}catch(n){console.error("Failed to fetch POP devices",n)}},M=async()=>{if(!l.pop_device){w.value=[];return}try{const u=await(await fetch(`/getDNByOLT/${l.pop_device.id}`)).json();w.value=u||[]}catch(n){console.error("Failed to fetch DNs",n)}},I=async()=>{if(!l.dn){k.value=[];return}try{const u=await(await fetch(`/getDnId/${l.dn.id}`)).json();k.value=u||[]}catch(n){console.error("Failed to fetch SNs",n)}};return P(()=>l.partner,()=>{L(),l.pop=null}),P(()=>l.pop,()=>{B(),l.pop_device=null}),P(()=>l.pop_device,()=>{M(),l.dn=null,l.sn=null}),P(()=>l.dn,()=>{I()}),{id:e,editSN:V,cancelSN:j,showSN:i,form:d,editMode:o,searchForm:l,resetSearch:S,confirmDelete:C,searchPort:O,search:F,res_pop:N,res_pop_device:y,res_dn:w,res_sn:k}}},Z={class:"py-2"},$={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ee={class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full mb-4"},te={class:"col-span-1 sm:col-span-1"},oe={class:"mt-1 flex rounded-md"},se={class:"col-span-1 sm:col-span-1"},le={class:"mt-1"},ne={class:"col-span-1 sm:col-span-1"},re={key:0,class:"mt-1"},ae={key:1,class:"mt-1"},de={class:"col-span-1 sm:col-span-1"},ie={key:0,class:"mt-1"},me={key:1,class:"mt-1"},ce={class:"col-span-1 sm:col-span-1"},pe={key:0,class:"mt-1"},ue={key:1,class:"mt-1"},fe={class:"col-span-1 sm:col-span-1"},ye={key:0,class:"mt-1"},be={key:1,class:"mt-1"},xe={class:"col-span-1 sm:col-span-1 grid grid-cols-2 gap-2"},ge={class:"mt-1 flex rounded-md"},_e={class:"mt-1 flex rounded-md"},ve={class:"col-span-1 sm:col-span-1 flex self-end mb-1"},he={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},ke={class:"min-w-full divide-y divide-gray-200 table-auto"},we={class:"bg-white divide-y divide-gray-200 max-h-64"},Ne={class:"px-6 py-3 font-medium"},Pe={class:"px-6 py-3 font-medium"},Se={class:"px-6 py-3 font-medium"},Ce={class:"px-6 py-3 font-medium"},Ve={class:"px-6 py-3 font-medium"},De={class:"px-6 py-3 font-medium"},Fe={class:"px-6 py-3 font-medium"},je={class:"px-6 py-3 text-xs font-medium text-right"},Oe=["onClick"],Ue={key:1,class:"w-full block mt-4"},Le={class:"text-xs text-gray-600"},Be={key:2},Me={key:0,class:"text-red-500"},Ie={class:"mt-4 text-sm"},Te={key:0,class:"mt-1 flex rounded-md shadow-sm"},Ae={class:"mb-4 md:col-span-1"},Ee={key:0,class:"text-red-500"},Je={class:"mb-4 md:col-span-1"},Re={key:0,class:"text-red-500"},qe={class:"mb-4 md:col-span-1"},ze={key:0,class:"text-red-500"},Ge={class:"mb-4 md:col-span-1"},He={key:0,class:"text-red-500"};function Ke(m,e,i,o,F,N){const y=_("multiselect"),w=_("pagination"),k=_("app-layout"),l=_("jet-secondary-button"),S=_("jet-danger-button"),d=_("jet-confirmation-modal"),C=_("jet-dialog-modal");return a(),r(U,null,[p(k,null,{header:f(()=>e[18]||(e[18]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"},"DN SN Report",-1)])),default:f(()=>[t("div",Z,[t("div",$,[t("div",ee,[t("div",te,[e[20]||(e[20]=t("label",{for:"sh_general",class:"block text-sm font-medium text-gray-700"},"General ",-1)),t("div",oe,[e[19]||(e[19]=t("span",{class:"z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[t("i",{class:"fas fa-user"})],-1)),v(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o.searchForm.general=s),name:"sh_general",id:"sh_general",class:"pl-10 py-2 focus:ring-0 flex-1 block w-full rounded-md sm:text-sm border-gray-200 text-gray-600",placeholder:"Customer/Company Name etc.",tabindex:"1"},null,512),[[h,o.searchForm.general]])])]),t("div",se,[e[21]||(e[21]=t("label",{for:"sh_dn",class:"block text-sm font-medium text-gray-700"},"Partner ",-1)),t("div",le,[p(y,{"deselect-label":"Selected already",options:i.partners,"track-by":"id",label:"name",modelValue:o.searchForm.partner,"onUpdate:modelValue":e[1]||(e[1]=s=>o.searchForm.partner=s),"allow-empty":!0,placeholder:"Please Choose Partner"},null,8,["options","modelValue"])])]),t("div",ne,[e[23]||(e[23]=t("label",{for:"sh_dn",class:"block text-sm font-medium text-gray-700"},"POP ",-1)),o.res_pop?(a(),r("div",re,[p(y,{"deselect-label":"Selected already",options:o.res_pop,"track-by":"id",label:"site_name",modelValue:o.searchForm.pop,"onUpdate:modelValue":e[2]||(e[2]=s=>o.searchForm.pop=s),"allow-empty":!0,placeholder:"Please Choose DN"},null,8,["options","modelValue"])])):(a(),r("div",ae,e[22]||(e[22]=[t("input",{type:"text",class:"py-2 focus:ring-0 flex-1 block w-full rounded-md sm:text-sm border-gray-200 text-gray-400",value:"Please Choose Partner",disabled:""},null,-1)])))]),t("div",de,[e[25]||(e[25]=t("label",{for:"sh_dn",class:"block text-sm font-medium text-gray-700"},"POP Devices ",-1)),o.res_pop_device?(a(),r("div",ie,[p(y,{"deselect-label":"Selected already",options:o.res_pop_device,"track-by":"id",label:"device_name",modelValue:o.searchForm.pop_device,"onUpdate:modelValue":e[3]||(e[3]=s=>o.searchForm.pop_device=s),"allow-empty":!0,placeholder:"Please Choose DN"},null,8,["options","modelValue"])])):(a(),r("div",me,e[24]||(e[24]=[t("input",{type:"text",class:"py-2 focus:ring-0 flex-1 block w-full rounded-md sm:text-sm border-gray-200 text-gray-400",value:"Please Choose POP",disabled:""},null,-1)])))]),t("div",ce,[e[27]||(e[27]=t("label",{for:"sh_dn",class:"block text-sm font-medium text-gray-700"},"DN ",-1)),o.res_dn?(a(),r("div",pe,[p(y,{"deselect-label":"Selected already",options:o.res_dn,"track-by":"id",label:"name",modelValue:o.searchForm.dn,"onUpdate:modelValue":e[4]||(e[4]=s=>o.searchForm.dn=s),"allow-empty":!0,placeholder:"Please Choose DN"},null,8,["options","modelValue"])])):(a(),r("div",ue,e[26]||(e[26]=[t("input",{type:"text",class:"py-2 focus:ring-0 flex-1 block w-full rounded-md sm:text-sm border-gray-200 text-gray-400",value:"Please Choose POP Devices",disabled:""},null,-1)])))]),t("div",fe,[e[29]||(e[29]=t("label",{for:"sh_sn",class:"block text-sm font-medium text-gray-700"},"SN ",-1)),o.res_sn?(a(),r("div",ye,[p(y,{"deselect-label":"Selected already",options:o.res_sn,"track-by":"id",label:"name",modelValue:o.searchForm.sn,"onUpdate:modelValue":e[5]||(e[5]=s=>o.searchForm.sn=s),"allow-empty":!0},null,8,["options","modelValue"])])):(a(),r("div",be,e[28]||(e[28]=[t("input",{type:"text",class:"py-2 focus:ring-0 flex-1 block w-full rounded-md sm:text-sm border-gray-200 text-gray-400",value:"Please Choose SN",disabled:""},null,-1)])))]),t("div",xe,[t("div",null,[e[31]||(e[31]=t("label",{for:"sh_customer",class:"block text-sm font-medium text-gray-700"},"Min Customer ",-1)),t("div",ge,[e[30]||(e[30]=t("span",{class:"z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[t("i",{class:"fas fa-greater-than-equal"})],-1)),v(t("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=s=>o.searchForm.customer_min=s),name:"sh_general",id:"sh_general",class:"pl-10 py-2 focus:ring-0 flex-1 block w-full rounded-md sm:text-sm border-gray-200 text-gray-400",tabindex:"4"},null,512),[[h,o.searchForm.customer_min]])])]),t("div",null,[e[33]||(e[33]=t("label",{for:"sh_customer",class:"block text-sm font-medium text-gray-700"},"Max Customer ",-1)),t("div",_e,[e[32]||(e[32]=t("span",{class:"z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[t("i",{class:"fas fa-less-than-equal"})],-1)),v(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=s=>o.searchForm.customer_max=s),name:"sh_general",id:"sh_general",class:"pl-10 py-2 focus:ring-0 flex-1 block w-full rounded-md sm:text-sm border-gray-200 text-gray-400",tabindex:"5"},null,512),[[h,o.searchForm.customer_max]])])])]),t("div",ve,[t("a",{onClick:e[8]||(e[8]=(...s)=>o.searchPort&&o.searchPort(...s)),class:"cursor-pointer inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},e[34]||(e[34]=[g("Search "),t("i",{class:"ml-1 fa fa-search text-white",tabindex:"6"},null,-1)])),t("a",{onClick:e[9]||(e[9]=(...s)=>o.resetSearch&&o.resetSearch(...s)),class:"ml-2 cursor-pointer inline-flex items-center px-4 py-2 bg-yellow-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-700 active:bg-yellow-900 focus:outline-none focus:border-yellow-900 focus:ring focus:ring-yellow-300 disabled:opacity-25 transition"},e[35]||(e[35]=[g("Reset "),t("i",{class:"ml-1 fa fa-eraser text-white",tabindex:"7"},null,-1)]))])]),i.overall.data?(a(),r("div",he,[t("table",ke,[e[36]||(e[36]=t("thead",{class:"bg-gray-50"},[t("tr",{class:"text-left"},[t("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"No."),t("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"DN/Port "),t("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"SN Name "),t("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Total Customers "),t("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"}," Description"),t("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Location "),t("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Input dbm "),t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Action")])])],-1)),t("tbody",we,[(a(!0),r(U,null,Q(i.overall.data,(s,V)=>(a(),r("tr",{key:s.id},[t("td",Ne,c(i.overall.from+V),1),t("td",Pe,c(s.dn_name),1),t("td",Se,c(s.name),1),t("td",Ce,c(s.ports),1),t("td",Ve,c(s.description),1),t("td",De,c(s.location),1),t("td",Fe,c(s.input_dbm),1),t("td",je,[t("a",{href:"#",onClick:j=>o.editSN(s),class:"text-indigo-600 hover:text-indigo-900"},"View Detail",8,Oe)])]))),128))])])])):b("",!0),i.overall.total?(a(),r("span",Ue,[t("label",Le,c(i.overall.data.length)+" SN Port List in Current Page. Total Number of SN Ports : "+c(i.overall.total),1)])):b("",!0),i.overall.links?(a(),r("span",Be,[p(w,{class:"mt-6",links:i.overall.links},null,8,["links"])])):b("",!0)])])]),_:1}),p(d,{show:o.id,onClose:e[11]||(e[11]=s=>o.id=null)},{title:f(()=>e[37]||(e[37]=[g(" Delete Node")])),content:f(()=>e[38]||(e[38]=[g(" Are you sure you would like to delete this API token? ")])),footer:f(()=>[p(l,{onClick:e[10]||(e[10]=s=>o.id=null)},{default:f(()=>e[39]||(e[39]=[g(" Cancel ")])),_:1}),p(S,{class:"ml-2",onClick:m.deleteNode},{default:f(()=>e[40]||(e[40]=[g(" Delete ")])),_:1},8,["onClick"])]),_:1},8,["show"]),p(C,{show:o.showSN,onClose:e[17]||(e[17]=s=>o.showSN=!1)},{title:f(()=>e[41]||(e[41]=[g(" Add New Port ")])),content:f(()=>[m.$page.props.errors[0]?(a(),r("div",Me,c(m.$page.props.errors[0]),1)):b("",!0),t("div",null,[t("div",Ie,[i.dns.length!==0?(a(),r("div",Te,[p(y,{"deselect-label":"Selected already",options:i.dns,"track-by":"id",label:"name",modelValue:o.form.dn_id,"onUpdate:modelValue":e[12]||(e[12]=s=>o.form.dn_id=s),"allow-empty":!0},null,8,["options","modelValue"])])):b("",!0),t("div",Ae,[e[42]||(e[42]=t("label",{for:"name",class:"block text-gray-700 text-sm font-bold mb-2"},"SN Name :",-1)),v(t("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"name",placeholder:"Enter SN Name","onUpdate:modelValue":e[13]||(e[13]=s=>o.form.name=s)},null,512),[[h,o.form.name]]),m.$page.props.errors.name?(a(),r("div",Ee,c(m.$page.props.errors.name),1)):b("",!0)]),t("div",Je,[e[43]||(e[43]=t("label",{for:"description",class:"block text-gray-700 text-sm font-bold mb-2"},"Description :",-1)),v(t("textarea",{class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"description",placeholder:"Enter Description","onUpdate:modelValue":e[14]||(e[14]=s=>o.form.description=s)},null,512),[[h,o.form.description]]),m.$page.props.errors.description?(a(),r("div",Re,c(m.$page.props.errors.description),1)):b("",!0)]),t("div",qe,[e[44]||(e[44]=t("label",{for:"location",class:"block text-gray-700 text-sm font-bold mb-2"},"SN Location :",-1)),v(t("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"location",placeholder:"Enter Location (Lat,Long)","onUpdate:modelValue":e[15]||(e[15]=s=>o.form.location=s)},null,512),[[h,o.form.location]]),m.$page.props.errors.location?(a(),r("div",ze,c(m.$page.props.errors.location),1)):b("",!0)]),t("div",Ge,[e[45]||(e[45]=t("label",{for:"input_dbm",class:"block text-gray-700 text-sm font-bold mb-2"},"SN Input dbm :",-1)),v(t("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"input_dbm",placeholder:"Enter Input Dbm","onUpdate:modelValue":e[16]||(e[16]=s=>o.form.input_dbm=s)},null,512),[[h,o.form.input_dbm]]),m.$page.props.errors.input_dbm?(a(),r("div",He,c(m.$page.props.errors.input_dbm),1)):b("",!0)])])])]),footer:f(()=>[p(l,{onClick:o.cancelSN},{default:f(()=>e[46]||(e[46]=[g(" Close ")])),_:1},8,["onClick"])]),_:1},8,["show"])],64)}const rt=X(Y,[["render",Ke]]);export{rt as default};
