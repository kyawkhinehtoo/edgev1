import{A as ie,N as ne,C as de}from"./NoData-CNtyI0So.js";import{P as re}from"./Pagination-Bka6VJ1q.js";import{r as x,y as ee,q as te,z as A,o as a,d as l,a as e,F as D,g as O,i as se,f as q,t as n,e as m,j as k,A as H,n as w,k as R,b as P,M as V,T as oe,m as ce,E as me,h as ue,x as fe,c as $,w as pe,N as K,O as xe}from"./app-jvevrBWz.js";import{M as ge}from"./vue3-multiselect.umd.min-C3H6R8Qp.js";import{_ as ae,C as le}from"./ImageUploader-Bcp2ZIxE.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-BTHkLhSF.js";import"./Upload-Cq7NyPdj.js";const ye={name:"TaskCheckList",components:{ImageUploader:ae,CustomerFile:le},props:{taskId:{type:[String,Number],required:!0}},setup(u){const s=x([]),f=x([]),t=x([]),_=x(null),h=x(!1),v=x({}),p=x(null),o=()=>{p.value=oe({task_id:u.taskId,...Object.fromEntries(Object.values(s.value).flatMap(c=>{var b,C,L,T;return[[`checklist_${c.id}_title`,((C=(b=t.value.checklist_values)==null?void 0:b[c.id])==null?void 0:C.title)||""],[`checklist_${c.id}_attachment`,null],[`checklist_${c.id}_status`,((T=(L=t.value.checklist_values)==null?void 0:L[c.id])==null?void 0:T.status)||""]]}))})},j=async()=>{try{const b=await(await fetch(`/getTaskCheckList/${u.taskId}`)).json();s.value=b.subconCheckList||[],f.value=b.checkListSummary||[],t.value=b.taskCheckList||[],o()}catch(c){console.error("Failed to fetch checklist data:",c)}};ee(()=>{j()});const r=te(()=>_.value?(h.value=!!_.value,s.value.filter(c=>c.group_id===_.value)):null);function g(c){_.value=c,h.value=!0}function U(){_.value=null,h.value=!1}function I(c,b){const C=c.target.files[0];p.value&&(p.value[`checklist_${b}_attachment`]=C)}function S(){p.value&&p.value.post(route("taskCheckList.update",u.taskId),{preserveScroll:!0,onSuccess:c=>{Toast.fire({icon:"success",title:c.props.flash.message}),U()}})}return{subconCheckList:s,checkListSummary:f,selectedGroupId:_,showModal:h,form:p,filteredChecklists:r,taskCheckList:t,checklistImagePreviews:v,selectGroup:g,closeModal:U,handleFileUpload:I,submit:S}}},_e={class:"overflow-x-auto rounded-lg shadow mb-6 mt-4"},be={class:"min-w-full divide-y divide-gray-200 bg-white"},ke=["onClick"],he={class:"px-4 py-2 text-blue-600 underline font-medium"},ve={class:"px-4 py-2 text-center"},we={key:0,class:"px-2 py-1 rounded-xl bg-yellow-100 text-yellow-700 text-xs font-semibold"},Ce={key:1,class:"text-gray-400"},Ue={class:"px-4 py-2 text-center"},Se={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Te={key:1,class:"text-gray-400"},je={class:"px-4 py-2 text-center"},Ie={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Ve={key:1,class:"text-gray-400"},Le={class:"px-4 py-2 text-center"},Me={key:0,class:"px-2 py-1 rounded-xl bg-red-100 text-red-700 text-xs font-semibold"},Ae={key:1,class:"text-gray-400"},De={class:"px-4 py-2 text-center"},Re={key:0,class:"px-2 py-1 rounded-xl bg-green-100 text-green-700 text-xs font-semibold"},Ne={key:1,class:"text-gray-400"},Pe={class:"px-4 py-2 text-center"},Oe={key:0,class:"px-2 py-1 rounded-xl bg-gray-100 text-gray-700 text-xs font-semibold"},Ge={key:1,class:"text-gray-400"},qe={key:0,ref:"showModal",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},ze={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Fe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-7xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Be={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ee={key:0,class:"mt-2 text-sm text-indigo-600 font-semibold"},We={class:"underline"},Ye={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},$e={class:"block text-sm font-medium text-gray-700"},Ke=["onUpdate:modelValue"],He={key:0,class:"mt-2"},Je={class:"py-2"},Qe={class:"mt-2 flex"},Xe={class:"flex-auto items-center"},Ze=["name","onUpdate:modelValue"],et={class:"flex-auto items-center"},tt=["name","onUpdate:modelValue"],st={class:"flex-auto items-center"},ot=["name","onUpdate:modelValue"],at={class:"flex-auto items-center"},lt={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-red-600"},it={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-red-600"},nt={class:"flex-auto items-center"},dt={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-green-600"},rt={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-green-600"},ct={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},mt={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},ut={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},ft={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},pt={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function xt(u,s,f,t,_,h){var p;const v=A("ImageUploader");return a(),l("div",null,[s[12]||(s[12]=e("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Data ",-1)),e("div",_e,[e("table",be,[s[2]||(s[2]=e("thead",{class:"bg-indigo-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Group Name"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Skip"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Requested"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Rejected"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Approved"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Remaining")])],-1)),e("tbody",null,[(a(!0),l(D,null,O(t.checkListSummary,o=>(a(),l("tr",{key:o.group_name,onClick:j=>t.selectGroup(o.id),class:w(["cursor-pointer transition-colors",t.selectedGroupId===o.id?"bg-indigo-100":"hover:bg-gray-50"])},[e("td",he,n(o.group_name),1),e("td",ve,[o.total>0?(a(),l("span",we,n(o.total),1)):(a(),l("span",Ce,n(o.total),1))]),e("td",Ue,[o.skip>0?(a(),l("span",Se,n(o.skip),1)):(a(),l("span",Te,n(o.skip),1))]),e("td",je,[o.requested>0?(a(),l("span",Ie,n(o.requested),1)):(a(),l("span",Ve,n(o.requested),1))]),e("td",Le,[o.rejected>0?(a(),l("span",Me,n(o.rejected),1)):(a(),l("span",Ae,n(o.rejected),1))]),e("td",De,[o.approved>0?(a(),l("span",Re,n(o.approved),1)):(a(),l("span",Ne,n(o.approved),1))]),e("td",Pe,[o.remaining>0?(a(),l("span",Oe,n(o.remaining),1)):(a(),l("span",Ge,n(o.remaining),1))])],10,ke))),128))])])]),t.filteredChecklists&&t.showModal?(a(),l("div",qe,[e("div",ze,[s[10]||(s[10]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[11]||(s[11]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e("div",Fe,[e("form",{onSubmit:s[1]||(s[1]=se((...o)=>t.submit&&t.submit(...o),["prevent"]))},[e("div",Be,[e("div",null,[t.selectedGroupId?(a(),l("div",Ee,[s[3]||(s[3]=q(" Showing details for: ")),e("span",We,n((p=t.checkListSummary.find(o=>o.id===t.selectedGroupId))==null?void 0:p.group_name),1)])):m("",!0),e("div",Ye,[(a(!0),l(D,null,O(t.filteredChecklists,(o,j)=>{var r;return a(),l("div",{key:o.id,class:"mt-6"},[e("label",$e,n(o.name),1),k(e("input",{type:"text","onUpdate:modelValue":g=>t.form[`checklist_${o.id}_title`]=g,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Ke),[[R,t.form[`checklist_${o.id}_title`]]]),o.has_attachment?(a(),l("div",He,[P(v,{modelValue:t.form[`checklist_${o.id}_attachment`],"onUpdate:modelValue":g=>t.form[`checklist_${o.id}_attachment`]=g,imageUrl:t.checklistImagePreviews[o.id],"onUpdate:imageUrl":g=>t.checklistImagePreviews[o.id]=g,existingImage:t.taskCheckList.checklist_images&&t.taskCheckList.checklist_images[o.id]?`/storage/${t.taskCheckList.checklist_images[o.id]}`:null,"upload-text":`Upload ${o.name} image`,submitStatus:(r=t.taskCheckList.checklist_values[o.id])==null?void 0:r.status},null,8,["modelValue","onUpdate:modelValue","imageUrl","onUpdate:imageUrl","existingImage","upload-text","submitStatus"])])):m("",!0),e("div",Je,[s[9]||(s[9]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",Qe,[e("label",Xe,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-blue-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":g=>t.form[`checklist_${o.id}_status`]=g,value:""},null,8,Ze),[[V,t.form[`checklist_${o.id}_status`]]]),s[4]||(s[4]=e("span",{class:"ml-2 text-gray-700 text-sm"},"N/A",-1))]),e("label",et,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":g=>t.form[`checklist_${o.id}_status`]=g,value:"skip"},null,8,tt),[[V,t.form[`checklist_${o.id}_status`]]]),s[5]||(s[5]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Skip",-1))]),e("label",st,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":g=>t.form[`checklist_${o.id}_status`]=g,value:"requested"},null,8,ot),[[V,t.form[`checklist_${o.id}_status`]]]),s[6]||(s[6]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Request",-1))]),e("label",at,[t.form[`checklist_${o.id}_status`]=="declined"?(a(),l("i",lt)):(a(),l("i",it)),s[7]||(s[7]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Declined",-1))]),e("label",nt,[t.form[`checklist_${o.id}_status`]=="approved"?(a(),l("i",dt)):(a(),l("i",rt)),s[8]||(s[8]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Approved",-1))])])])])}),128))])])]),e("div",ct,[e("span",mt,[k(e("button",ut," Save ",512),[[H,!t.form.id]]),k(e("button",ft," Update ",512),[[H,t.form.id]])]),e("span",pt,[e("button",{onClick:s[0]||(s[0]=(...o)=>t.closeModal&&t.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):m("",!0)])}const gt=Q(ye,[["render",xt],["__scopeId","data-v-f744c14d"]]),yt={name:"TaskCheckList",components:{ImageUploader:ae,CustomerFile:le},props:{taskId:{type:[String,Number],required:!0},user:{type:Object,required:!0}},setup(u){const s=x([]),f=x([]),t=x([]),_=x(null),h=x(!1),v=x({}),p=x(null),o=()=>{p.value=oe({task_id:u.taskId,...Object.fromEntries(Object.values(s.value).flatMap(c=>{var b,C,L,T;return[[`checklist_${c.id}_title`,((C=(b=t.value.checklist_values)==null?void 0:b[c.id])==null?void 0:C.title)||""],[`checklist_${c.id}_attachment`,null],[`checklist_${c.id}_status`,((T=(L=t.value.checklist_values)==null?void 0:L[c.id])==null?void 0:T.status)||""]]}))})},j=async()=>{try{const b=await(await fetch(`/getTaskCheckList/${u.taskId}`)).json();s.value=b.subconCheckList||[],f.value=b.checkListSummary||[],t.value=b.taskCheckList||[],o()}catch(c){console.error("Failed to fetch checklist data:",c)}};ee(()=>{j()});const r=te(()=>_.value?(h.value=!!_.value,s.value.filter(c=>c.group_id===_.value)):null);function g(c){_.value=c,h.value=!0}function U(){_.value=null,h.value=!1}function I(c,b){const C=c.target.files[0];p.value&&(p.value[`checklist_${b}_attachment`]=C)}function S(){p.value&&p.value.post(route("taskCheckList.update",u.taskId),{preserveScroll:!0,onSuccess:c=>{Toast.fire({icon:"success",title:c.props.flash.message}),U()}})}return{subconCheckList:s,checkListSummary:f,selectedGroupId:_,showModal:h,form:p,filteredChecklists:r,taskCheckList:t,checklistImagePreviews:v,selectGroup:g,closeModal:U,handleFileUpload:I,submit:S}}},_t={class:"overflow-x-auto rounded-lg shadow mb-6 mt-4"},bt={class:"min-w-full divide-y divide-gray-200 bg-white"},kt=["onClick"],ht={class:"px-4 py-2 text-blue-600 underline font-medium"},vt={class:"px-4 py-2 text-center"},wt={key:0,class:"px-2 py-1 rounded-xl bg-yellow-100 text-yellow-700 text-xs font-semibold"},Ct={key:1,class:"text-gray-400"},Ut={class:"px-4 py-2 text-center"},St={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Tt={key:1,class:"text-gray-400"},jt={class:"px-4 py-2 text-center"},It={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Vt={key:1,class:"text-gray-400"},Lt={class:"px-4 py-2 text-center"},Mt={key:0,class:"px-2 py-1 rounded-xl bg-red-100 text-red-700 text-xs font-semibold"},At={key:1,class:"text-gray-400"},Dt={class:"px-4 py-2 text-center"},Rt={key:0,class:"px-2 py-1 rounded-xl bg-green-100 text-green-700 text-xs font-semibold"},Nt={key:1,class:"text-gray-400"},Pt={class:"px-4 py-2 text-center"},Ot={key:0,class:"px-2 py-1 rounded-xl bg-gray-100 text-gray-700 text-xs font-semibold"},Gt={key:1,class:"text-gray-400"},qt={key:0,ref:"showModal",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},zt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ft={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-7xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Bt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Et={key:0,class:"mt-2 text-sm text-indigo-600 font-semibold"},Wt={class:"underline"},Yt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},$t={class:"block text-sm font-medium text-gray-700"},Kt=["onUpdate:modelValue"],Ht={key:0,class:"mt-2"},Jt={class:"py-2"},Qt={class:"mt-2 flex"},Xt={class:"flex-auto items-center"},Zt=["name","onUpdate:modelValue","disabled"],es={class:"flex-auto items-center"},ts=["name","onUpdate:modelValue","disabled"],ss={class:"flex-auto items-center"},os=["name","onUpdate:modelValue","disabled"],as={class:"flex-auto items-center"},ls=["name","onUpdate:modelValue","disabled"],is={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ns={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},ds={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},rs={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},cs={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function ms(u,s,f,t,_,h){var p;const v=A("ImageUploader");return a(),l("div",null,[s[11]||(s[11]=e("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Data ",-1)),e("div",_t,[e("table",bt,[s[2]||(s[2]=e("thead",{class:"bg-indigo-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Group Name"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Skip"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Requested"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Rejected"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Approved"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Remaining")])],-1)),e("tbody",null,[(a(!0),l(D,null,O(t.checkListSummary,o=>(a(),l("tr",{key:o.group_name,onClick:j=>t.selectGroup(o.id),class:w(["cursor-pointer transition-colors",t.selectedGroupId===o.id?"bg-indigo-100":"hover:bg-gray-50"])},[e("td",ht,n(o.group_name),1),e("td",vt,[o.total>0?(a(),l("span",wt,n(o.total),1)):(a(),l("span",Ct,n(o.total),1))]),e("td",Ut,[o.skip>0?(a(),l("span",St,n(o.skip),1)):(a(),l("span",Tt,n(o.skip),1))]),e("td",jt,[o.requested>0?(a(),l("span",It,n(o.requested),1)):(a(),l("span",Vt,n(o.requested),1))]),e("td",Lt,[o.rejected>0?(a(),l("span",Mt,n(o.rejected),1)):(a(),l("span",At,n(o.rejected),1))]),e("td",Dt,[o.approved>0?(a(),l("span",Rt,n(o.approved),1)):(a(),l("span",Nt,n(o.approved),1))]),e("td",Pt,[o.remaining>0?(a(),l("span",Ot,n(o.remaining),1)):(a(),l("span",Gt,n(o.remaining),1))])],10,kt))),128))])])]),t.filteredChecklists&&t.showModal?(a(),l("div",qt,[e("div",zt,[s[9]||(s[9]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[10]||(s[10]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e("div",Ft,[e("form",{onSubmit:s[1]||(s[1]=se((...o)=>t.submit&&t.submit(...o),["prevent"]))},[e("div",Bt,[e("div",null,[t.selectedGroupId?(a(),l("div",Et,[s[3]||(s[3]=q(" Showing details for: ")),e("span",Wt,n((p=t.checkListSummary.find(o=>o.id===t.selectedGroupId))==null?void 0:p.group_name),1)])):m("",!0),e("div",Yt,[(a(!0),l(D,null,O(t.filteredChecklists,(o,j)=>{var r,g,U,I,S;return a(),l("div",{key:o.id,class:"mt-6"},[e("label",$t,n(o.name),1),k(e("input",{type:"text","onUpdate:modelValue":c=>t.form[`checklist_${o.id}_title`]=c,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Kt),[[R,t.form[`checklist_${o.id}_title`]]]),o.has_attachment?(a(),l("div",Ht,[P(v,{modelValue:t.form[`checklist_${o.id}_attachment`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_attachment`]=c,imageUrl:t.checklistImagePreviews[o.id],"onUpdate:imageUrl":c=>t.checklistImagePreviews[o.id]=c,existingImage:t.taskCheckList.checklist_images&&t.taskCheckList.checklist_images[o.id]?`/storage/${t.taskCheckList.checklist_images[o.id]}`:null,"upload-text":`Upload ${o.name} image`,submitStatus:(r=t.taskCheckList.checklist_values[o.id])==null?void 0:r.status},null,8,["modelValue","onUpdate:modelValue","imageUrl","onUpdate:imageUrl","existingImage","upload-text","submitStatus"])])):m("",!0),e("div",Jt,[s[8]||(s[8]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",Qt,[e("label",Xt,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"skip",disabled:(g=f.user.role)==null?void 0:g.incident_supervisor},null,8,Zt),[[V,t.form[`checklist_${o.id}_status`]]]),s[4]||(s[4]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Skip",-1))]),e("label",es,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"requested",disabled:(U=f.user.role)==null?void 0:U.incident_supervisor},null,8,ts),[[V,t.form[`checklist_${o.id}_status`]]]),s[5]||(s[5]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Request",-1))]),e("label",ss,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"declined",disabled:(I=f.user.role)==null?void 0:I.installation_oss},null,8,os),[[V,t.form[`checklist_${o.id}_status`]]]),s[6]||(s[6]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Declined",-1))]),e("label",as,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"approved",disabled:(S=f.user.role)==null?void 0:S.installation_oss},null,8,ls),[[V,t.form[`checklist_${o.id}_status`]]]),s[7]||(s[7]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Approved",-1))])])])])}),128))])])]),e("div",is,[e("span",ns,[k(e("button",ds," Save ",512),[[H,!t.form.id]]),k(e("button",rs," Update ",512),[[H,t.form.id]])]),e("span",cs,[e("button",{onClick:s[0]||(s[0]=(...o)=>t.closeModal&&t.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):m("",!0)])}const us=Q(yt,[["render",ms],["__scopeId","data-v-781c52ae"]]),fs={name:"IncidentTask",components:{AppLayout:ie,Pagination:re,Multiselect:ge,NoData:ne,Link:ce,CustomerDetail:de,TaskCheckListSubcon:gt,TaskCheckListSupervisor:us},props:{tasks:Object,errors:Object,task_write:Boolean,user:Object,noc:Object,critical:Number,high:Number,normal:Number,role:Object,subcons:Object,subcon:Object,pendingRootCause:Object,subRootCause:Object,checklistValues:Object,checkListSummary:Object},setup(u){const s=x("");x("");let f=x(!1),t=x(!1),_=x(!1),h=x(""),v=x(1),p=x("my"),o=x([]);const j=x({date:"YYYY-MM-DD",month:"MMM"});x(!1),me("user",u.user);const r=ue({id:null,code:null,edge_code:null,priority:null,assigned:null,target:null,status:1,description:null,comment:null,incident_id:null,data:null,root_causes:null,sub_root_causes:null,root_causes_id:null,sub_root_causes_id:null,complete_date:null});function g(){r.id=null,r.code=null,r.edge_code=null,r.priority=null,r.assigned=null,r.target=null,r.status=1,r.description=null,r.comment=null,r.incident_id=u.data,r.root_causes=null,r.sub_root_causes=null,r.root_causes_id=null,r.sub_root_causes_id=null,r.complete_date=null,h.value=null}function U(d){r.id=d.id,r.code=d.code,r.edge_code=d.edge_code,r.priority=d.priority,r.assigned=u.subcons.filter(y=>y.id==d.assigned)[0],r.description=d.description,r.incident_id=d.incident_id,r.comment=d.comment,r.status=d.status,r.target=d.target,r.data=d,r.root_causes=d.root_causes_id?u.pendingRootCause.filter(y=>y.id==d.root_causes_id)[0]:null,r.sub_root_causes=null,r.root_causes_id=d.root_causes_id,r.sub_root_causes_id=d.sub_root_causes_id,r.complete_date=d.complete_date,_.value=!0,t.value=!0,h.value=d.incident_id}function I(d){d.status!=2?Toast.fire({title:"Are you sure?",text:"Do you want to mark as completed !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(y=>{y.isConfirmed&&S(d,2)}):Toast.fire({title:"Are you sure?",text:"Do you want to mark as WIP !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(y=>{y.isConfirmed&&S(d,1)})}function S(d,y){r.id=d.id,r.assigned=u.subcons.filter(M=>M.id==d.assigned)[0],r.description=d.description,r.incident_id=d.incident_id,r.status=y,r.target=d.target,_.value=!0,t.value=!1,c()}function c(){_.value!=!0?(r._method="POST",K.post("/addTask",r,{preserveState:!0,onSuccess:d=>{t.value=!1,g(),Toast.fire({icon:"success",title:d.props.flash.message})},onError:d=>{console.log("error ..",d)}})):(r._method="PUT",K.post("/editTask/"+r.id,r,{onSuccess:d=>{t.value=!1,_.value=!1,g(),Toast.fire({icon:"success",title:d.props.flash.message})},onError:d=>{console.log("error ..",d)}}))}function b(){t.value=!1,preserveState=!0}function C(d){let y="WIP";return d==0?y="Deleted":d==1?y="WIP":d==2?y="Completed":d==3&&(y="Pending"),y}function L(){K.get("/mytask/",{keyword:s.value,status:v.value,task:p.value},{preserveState:!0})}function T(){let d="/mytask/";s.value!=null&&(d=d+"?keyword="+s.value),v.value!=""&&(d=d+"&status="+v.value),p.value!=""&&(d=d+"&task="+p.value),K.get(d,{keyword:s.value},{preserveState:!0})}function z(d){v.value=d,T()}function F(){p.value="my",T()}function B(){p.value="all",T()}const E=d=>{let y=u.subcons.filter(M=>M.id==d)[0];return y?y.name:""};function W(d){var M;o.value=[];let y=u.pendingRootCause.filter(N=>N.id==d.id);o.value=(M=y[0])==null?void 0:M.sub_root_causes,r.sub_root_causes_id&&(r.sub_root_causes=o.value.filter(N=>N.id==r.sub_root_causes_id)[0],r.sub_root_causes||(r.sub_root_causes_id=null))}fe(()=>r.root_causes,d=>{d&&W(d)});const G=x(1);function Y(d){G.value=d}return{search:s,loading:f,form:r,formatter:j,edit:t,editMode:_,search_status:v,task_user:p,getName:E,getStatus:C,editTask:U,completeIt:S,saveTask:c,cancelTask:b,completeTask:I,searchTask:L,goMyTasks:F,goAllTasks:B,changeStatus:T,subRCA:o,goSearch:z,tabClick:Y,tab:G,selected_id:h}}},ps={class:"py-1"},xs={class:"mx-auto sm:px-6 lg:px-8"},gs={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-2 py-2 w-full justify-items-end"},ys={class:"flex w-full"},_s={class:"flex w-full items-center justify-end"},bs={class:"mr-3 text-sm font-medium text-gray-700"},ks={class:"inline-flex relative cursor-pointer"},hs=["checked"],vs={class:"flex w-full"},ws={key:1},Cs={key:0,class:"hidden md:block"},Us={class:"min-w-full divide-y divide-gray-200 table-auto"},Ss={class:"bg-white divide-y divide-gray-200 text-sm w-full text-left"},Ts={class:"px-2 py-3 whitespace-nowrap"},js={class:"px-6 py-3 whitespace-nowrap"},Is={class:"px-6 py-3 whitespace-nowrap"},Vs={class:"px-6 py-3 whitespace-nowrap"},Ls={class:"px-6 py-3 whitespace-nowrap"},Ms={class:"px-6 py-3 whitespace-nowrap"},As={class:"px-6 py-3 whitespace-nowrap"},Ds={class:"px-6 py-3 whitespace-nowrap"},Rs={class:"px-6 py-3 whitespace-nowrap"},Ns={class:"px-6 py-3 whitespace-nowrap"},Ps=["onClick"],Os={key:1,class:"grid grid-cols-1 sm:grid-cols-2 gap-2 md:hidden"},Gs={class:"flex items-center justify-between space-x-2 text-sm"},qs={class:"font-bold"},zs={class:"text-sm text-gray-600"},Fs={class:"font-sm p-2 capitalize"},Bs={class:"mt-4"},Es={class:"text-xs text-gray-700"},Ws={class:"text-xs text-gray-700"},Ys={class:"text-xs text-gray-700"},$s={class:"flex flex-wrap justify-end"},Ks=["onClick"],Hs={key:2,class:"w-full block mt-4"},Js={class:"text-xs text-gray-600"},Qs={key:3},Xs={key:2,class:"inline-flex w-full bg-gray-50 rounded-t-lg"},Zs={id:"tabs",class:"flex"},eo={id:"tab-contents"},to={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full bg-white p-4"},so={class:"md:py-2 md:col-span-3 col-span-1"},oo={class:"flex"},ao={for:"ftth_id",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2"},lo={class:"md:py-2 md:col-span-3 col-span-1"},io={class:"flex"},no={for:"ftth_id",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2"},ro={class:"md:py-2 md:col-span-3 col-span-1"},co={class:"flex"},mo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 capitalize"},uo={key:0,class:"py-2 col-span-1 w-full"},fo={key:1,class:"md:py-2 md:col-span-3 col-span-1"},po={class:"flex"},xo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 capitalize"},go={class:"md:py-2 md:col-span-3 col-span-1"},yo={class:"flex"},_o={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 whitespace-normal"},bo={class:"md:py-2 md:col-span-3 col-span-1"},ko={class:"flex"},ho={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 whitespace-normal"},vo={class:"md:py-2 md:col-span-3 col-span-1"},wo={class:"flex rounded-md shadow-sm"},Co={key:0,class:"flex rounded-md shadow-sm w-full"},Uo={key:1,class:"mt-2 text-sm text-red-500"},So={class:"md:py-2 col-span-1 md:col-span-3"},To={class:"flex rounded-md shadow-sm"},jo={key:0,class:"mt-2 text-sm text-red-500"},Io={class:"md:py-2 col-span-1 md:col-span-3"},Vo={class:"flex rounded-md shadow-sm"},Lo={key:0,class:"mt-2 text-sm text-red-500"},Mo={class:"md:py-2 col-span-1 md:col-span-3"},Ao={class:"flex gap-4"},Do={class:"inline-flex items-center"},Ro={class:"inline-flex items-center"},No={class:"inline-flex items-center"},Po={class:"inline-flex items-center"},Oo={key:0,class:"mt-2 text-sm text-red-500"},Go={class:"md:py-2 col-span-1 md:col-span-3"},qo={class:"flex rounded-md shadow-sm"},zo={key:0,class:"mt-2 text-sm text-red-500"},Fo={class:"py-2 col-span-1 md:col-span-3"},Bo={key:0,class:"flex rounded-md shadow-sm w-full"},Eo={key:1,class:"mt-2 text-sm text-red-500"},Wo={class:"py-2 col-span-1 md:col-span-3"},Yo={key:0,class:"flex rounded-md shadow-sm w-full"},$o={key:1,class:"mt-2 text-sm text-red-500"},Ko={class:"md:py-2 col-span-1 md:col-span-3"},Ho={class:"flex rounded-md shadow-sm"},Jo={key:0,class:"mt-2 text-sm text-red-500"},Qo={class:"col-span-1 md:col-span-4 flex md:justify-end justify-between mt-4"},Xo={key:0},Zo={key:1},ea={key:0},ta={key:1},sa={key:0,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function oa(u,s,f,t,_,h){const v=A("pagination"),p=A("multiselect"),o=A("customer-detail"),j=A("task-check-list-supervisor"),r=A("task-check-list-subcon"),g=A("app-layout");return a(),$(g,null,{default:pe(()=>{var U,I,S,c,b,C,L,T,z,F,B,E,W,G,Y,d,y,M,N,X;return[e("div",ps,[e("div",xs,[t.edit?m("",!0):(a(),l("div",gs,[e("div",ys,[s[25]||(s[25]=e("span",{class:"z-10 mt-1 leading-snug font-normal text-center text-blueGray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-search"})],-1)),k(e("input",{type:"text",placeholder:"ID/Description",class:"pl-10 pr-12 py-2.5 w-full rounded-lg text-sm text-gray-700 placeholder-gray-400 transition-colors bg-white border border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-500 focus:ring-opacity-10 focus:outline-none dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 dark:placeholder-gray-500 dark:focus:border-indigo-500 dark:focus:ring-opacity-20",id:"search",tabindex:"1","onUpdate:modelValue":s[0]||(s[0]=i=>t.search=i),onKeyup:s[1]||(s[1]=xe((...i)=>t.searchTask&&t.searchTask(...i),["enter"]))},null,544),[[R,t.search]])]),e("div",_s,[e("span",bs,n(t.task_user==="my"?"My Tasks":"All Tasks"),1),e("label",ks,[e("input",{type:"checkbox",class:"sr-only peer",checked:t.task_user==="all",onChange:s[2]||(s[2]=i=>t.task_user==="my"?t.goAllTasks():t.goMyTasks())},null,40,hs),s[26]||(s[26]=e("div",{class:"w-14 h-8 bg-gray-400 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-6 peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600 shadow-sm"},null,-1))])]),e("div",vs,[e("button",{class:w(["w-32 btn py-3 px-8 bg-gray-400 rounded rounded-r-none focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-yellow-300 text-gray-600 font-bold":t.search_status==1}]),onClick:s[3]||(s[3]=i=>t.goSearch(1))},"WIP",2),e("button",{class:w(["w-32 btn py-3 px-8 bg-gray-400 focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-yellow-500 text-gray-600 font-bold":t.search_status==3}]),onClick:s[4]||(s[4]=i=>t.goSearch(3))},"Pending",2),e("button",{class:w(["w-32 btn py-3 px-8 bg-gray-400 focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-green-300 text-gray-600 font-bold":t.search_status==2}]),onClick:s[5]||(s[5]=i=>t.goSearch(2))},"Completed",2),e("button",{class:w(["w-32 btn py-3 px-8 bg-gray-400 rounded rounded-l-none focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase",{"bg-indigo-600 font-bold":t.search_status=="all"}]),onClick:s[6]||(s[6]=i=>t.goSearch("all"))},"All",2)])])),t.edit?m("",!0):(a(),l("div",ws,[(U=f.tasks)!=null&&U.data?(a(),l("div",Cs,[e("table",Us,[s[28]||(s[28]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," EDGE Ticket "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned To"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned By"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Target Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Complete Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Action")])],-1)),e("tbody",Ss,[(a(!0),l(D,null,O(f.tasks.data,(i,Z)=>{var J;return a(),l("tr",{key:i.id},[e("td",Ts,[e("i",{class:w(["fa fa-circle mr-2",{"text-yellow-400":i.priority=="normal","text-yellow-600":i.priority=="high","text-red-600":i.priority=="critical"}])},null,2),q(" "+n(Z+=f.tasks.from),1)]),e("td",js,n(i.edge_code),1),e("td",Is,n(i.ftth_id),1),e("td",Vs,n((J=i.description)==null?void 0:J.substring(0,50)),1),e("td",Ls,n(t.getName(i.assigned)),1),e("td",Ms,n(i.incharge.match(/\b\w/g).join("")),1),e("td",As,n(i.target),1),e("td",Ds,n(i.complete_date),1),e("td",Rs,n(t.getStatus(i.status)),1),e("td",Ns,[e("a",{href:"#",onClick:aa=>t.editTask(i),class:"text-blue-600"},s[27]||(s[27]=[e("i",{class:"fa fa-edit"},null,-1)]),8,Ps)])])}),128))])])])):m("",!0),(I=f.tasks)!=null&&I.data?(a(),l("div",Os,[(a(!0),l(D,null,O(f.tasks.data,(i,Z)=>(a(),l("div",{class:"bg-white p-4 rounded-lg shadow mt-2 space-y-1 text-gray-600",key:i.id},[e("div",Gs,[e("label",qs,n(i.ftth_id),1),e("div",null,[e("span",{class:w(["text-xs font-bold px-2.5 py-0.5 rounded items-center justify-center",{"bg-yellow-400":i.status==1,"bg-yellow-500":i.status==3,"bg-green-300":i.status!=1}])},n(t.getStatus(i.status)),3)])]),e("div",zs,[s[29]||(s[29]=e("label",{for:"details",class:"w-full font-bold"}," Instruction : ",-1)),e("p",Fs,n(i.description),1)]),e("span",Bs,[e("div",Es," Assigned To : "+n(i.assigned_to),1),e("div",Ws," Assigned By : "+n(i.incharge),1),e("div",Ys," Target Date : "+n(i.target),1)]),e("div",$s,[e("div",null,[e("a",{type:"button",onClick:J=>t.editTask(i),href:"#",class:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-30 items-center justify-center"},s[30]||(s[30]=[e("span",{class:"text-sm"},"Edit",-1),e("i",{class:"fa fa-angle-double-right fa-lg ml-2","aria-hidden":"true"},null,-1)]),8,Ks)])])]))),128))])):m("",!0),f.tasks.total?(a(),l("span",Hs,[e("label",Js,n(f.tasks.data.length)+" Tasks in Current Page. Total Number of Tasks : "+n(f.tasks.total),1)])):m("",!0),f.tasks.links?(a(),l("span",Qs,[P(v,{class:"mt-4",links:f.tasks.links},null,8,["links"])])):m("",!0)])),t.edit?(a(),l("div",Xs,[e("ul",Zs,[e("li",{class:w(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[7]||(s[7]=i=>t.tabClick(1)),"preserve-state":""},"Genaral")],2),e("li",{class:w(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[8]||(s[8]=i=>t.tabClick(2)),"preserve-state":""},"Customer Info")],2),e("li",{class:w(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==3?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[9]||(s[9]=i=>t.tabClick(3)),"preserve-state":""},"Attachment Info")],2)])])):m("",!0),e("div",eo,[e("div",{class:w([t.tab==1?"":"hidden"])},[t.edit?(a(),l("div",to,[s[41]||(s[41]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Code : ")])],-1)),e("div",so,[e("div",oo,[e("label",ao,[e("i",{class:w(["fa fa-circle mr-2",{"text-yellow-400":((S=t.form.data)==null?void 0:S.priority)=="normal","text-yellow-600":((c=t.form.data)==null?void 0:c.priority)=="high","text-red-600":((b=t.form.data)==null?void 0:b.priority)=="critical"}])},null,2),q(" "+n((C=t.form.data)==null?void 0:C.code)+" | "+n((L=t.form.data)==null?void 0:L.edge_code),1)])])]),s[42]||(s[42]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Customer ID : ")])],-1)),e("div",lo,[e("div",io,[e("label",no,n((T=t.form.data)==null?void 0:T.ftth_id),1)])]),s[43]||(s[43]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Type : ")])],-1)),e("div",ro,[e("div",co,[e("label",mo,n((z=t.form.data)==null?void 0:z.type.replace("_"," ")),1)])]),(F=t.form.data)!=null&&F.topic?(a(),l("div",uo,s[31]||(s[31]=[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Topic : ")],-1)]))):m("",!0),(B=t.form.data)!=null&&B.topic?(a(),l("div",fo,[e("div",po,[e("label",xo,n((E=t.form.data)==null?void 0:E.topic.replace("_"," ")),1)])])):m("",!0),s[44]||(s[44]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Detail : ")])],-1)),e("div",go,[e("div",yo,[e("label",_o,n((W=t.form.data)==null?void 0:W.incident_description),1)])]),s[45]||(s[45]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Opened At : ")])],-1)),e("div",bo,[e("div",ko,[e("label",ho,n((G=t.form.data)==null?void 0:G.date)+" : "+n((Y=t.form.data)==null?void 0:Y.time),1)])]),s[46]||(s[46]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Assigned : ")])],-1)),e("div",vo,[e("div",wo,[f.subcons.length!==0?(a(),l("div",Co,[P(p,{"deselect-label":"Selected already",options:f.subcons,"track-by":"id",label:"name",modelValue:t.form.assigned,"onUpdate:modelValue":s[10]||(s[10]=i=>t.form.assigned=i),"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.assigned?(a(),l("p",Uo,n(u.$page.props.errors.assigned),1)):m("",!0)])]),s[47]||(s[47]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Target : ")])],-1)),e("div",So,[e("div",To,[k(e("input",{type:"date","onUpdate:modelValue":s[11]||(s[11]=i=>t.form.target=i),name:"target",id:"target",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[R,t.form.target]])]),u.$page.props.errors.target?(a(),l("p",jo,n(u.$page.props.errors.target),1)):m("",!0)]),s[48]||(s[48]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Instruction : ")])],-1)),e("div",Io,[e("div",Vo,[k(e("textarea",{"onUpdate:modelValue":s[12]||(s[12]=i=>t.form.description=i),name:"description",id:"description",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[R,t.form.description]])]),u.$page.props.errors.description?(a(),l("p",Lo,n(u.$page.props.errors.description),1)):m("",!0)]),s[49]||(s[49]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"status",class:"block text-sm font-medium text-gray-700 md:mr-2"}," Status : ")])],-1)),e("div",Mo,[e("div",Ao,[e("label",Do,[k(e("input",{type:"radio","onUpdate:modelValue":s[13]||(s[13]=i=>t.form.status=i),name:"status",value:"1",class:"form-radio text-yellow-500"},null,512),[[V,t.form.status]]),s[32]||(s[32]=e("span",{class:"ml-2"},"WIP",-1))]),e("label",Ro,[k(e("input",{type:"radio","onUpdate:modelValue":s[14]||(s[14]=i=>t.form.status=i),name:"status",value:"3",class:"form-radio text-red-500"},null,512),[[V,t.form.status]]),s[33]||(s[33]=e("span",{class:"ml-2"},"Pending",-1))]),e("label",No,[k(e("input",{type:"radio","onUpdate:modelValue":s[15]||(s[15]=i=>t.form.status=i),name:"status",value:"2",class:"form-radio text-green-500"},null,512),[[V,t.form.status]]),s[34]||(s[34]=e("span",{class:"ml-2"},"Completed",-1))]),e("label",Po,[k(e("input",{type:"radio","onUpdate:modelValue":s[16]||(s[16]=i=>t.form.status=i),name:"status",value:"0",class:"form-radio text-indigo-500"},null,512),[[V,t.form.status]]),s[35]||(s[35]=e("span",{class:"ml-2"},"Deleted",-1))])]),u.$page.props.errors.status?(a(),l("p",Oo,n(u.$page.props.errors.status),1)):m("",!0)]),t.form.status==2?(a(),l(D,{key:2},[s[36]||(s[36]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Complete At : ")])],-1)),e("div",Go,[e("div",qo,[k(e("input",{type:"date","onUpdate:modelValue":s[17]||(s[17]=i=>t.form.complete_date=i),name:"complete_date",id:"complete_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[R,t.form.complete_date]]),u.$page.props.errors.complete_date?(a(),l("p",zo,n(u.$page.props.errors.complete_date)+">",1)):m("",!0)])])],64)):m("",!0),t.form.status==3?(a(),l(D,{key:3},[s[37]||(s[37]=e("div",{class:"py-2 col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"root_causes_id",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Root Cause for Pending : ")])],-1)),e("div",Fo,[((d=f.pendingRootCause)==null?void 0:d.length)!==0?(a(),l("div",Bo,[P(p,{"deselect-label":"Selected already",options:f.pendingRootCause,"track-by":"id",label:"name",modelValue:t.form.root_causes,"onUpdate:modelValue":[s[18]||(s[18]=i=>t.form.root_causes=i),s[19]||(s[19]=i=>t.form.root_causes_id=i==null?void 0:i.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.root_causes_id?(a(),l("p",Eo,n(u.$page.props.errors.root_causes_id),1)):m("",!0)]),s[38]||(s[38]=e("div",{class:"py-2 col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"sub_root_causes",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"},"Sub Root Cause : ")])],-1)),e("div",Wo,[((y=t.subRCA)==null?void 0:y.length)!==0?(a(),l("div",Yo,[P(p,{"deselect-label":"Selected already",options:t.subRCA,"track-by":"id",label:"name",modelValue:t.form.sub_root_causes,"onUpdate:modelValue":[s[20]||(s[20]=i=>t.form.sub_root_causes=i),s[21]||(s[21]=i=>t.form.sub_root_causes_id=i==null?void 0:i.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.sub_root_causes_id?(a(),l("p",$o,n(u.$page.props.errors.sub_root_causes_id),1)):m("",!0)])],64)):m("",!0),s[50]||(s[50]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"comment",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Comments : ")])],-1)),e("div",Ko,[e("div",Ho,[k(e("textarea",{"onUpdate:modelValue":s[22]||(s[22]=i=>t.form.comment=i),name:"comment",id:"comment",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[R,t.form.comment]])]),u.$page.props.errors.comment?(a(),l("p",Jo,n(u.$page.props.errors.comment),1)):m("",!0)]),e("div",Qo,[e("a",{href:"#",onClick:s[23]||(s[23]=i=>t.saveTask()),class:"text-center px-4 py-3 bg-green-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-400 active:bg-green-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},[t.editMode?m("",!0):(a(),l("span",Xo,"Save Task")),t.editMode?(a(),l("span",Zo,"Update Task")):m("",!0),s[39]||(s[39]=e("i",{class:"fas fa-save opacity-75 ml-1 text-sm"},null,-1))]),e("a",{href:"#",onClick:s[24]||(s[24]=i=>t.cancelTask()),class:"text-center px-4 py-3 bg-gray-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition"},s[40]||(s[40]=[q("Cancel"),e("i",{class:"fas fa-save opacity-75 ml-1 text-sm"},null,-1)]))])])):m("",!0)],2),e("div",{class:w([t.tab==2?"":"hidden"])},[t.selected_id&&t.tab==2?(a(),$(o,{key:0,data:t.selected_id},null,8,["data"])):m("",!0)],2),e("div",{class:w([t.tab==3?"":"hidden"])},[(M=f.user.role)!=null&&M.incident_supervisor?(a(),l("span",ea,[t.tab==3?(a(),$(j,{key:0,taskId:(N=t.form)==null?void 0:N.id,user:f.user},null,8,["taskId","user"])):m("",!0)])):m("",!0),f.user.user_type=="subcon"?(a(),l("span",ta,[t.tab==3?(a(),$(r,{key:0,taskId:(X=t.form)==null?void 0:X.id},null,8,["taskId"])):m("",!0)])):m("",!0)],2)])])]),t.loading?(a(),l("div",sa,s[51]||(s[51]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):m("",!0)]}),_:1})}const fa=Q(fs,[["render",oa]]);export{fa as default};
