import{H as p,d as c,a as t,t as e,j as i,k as l,e as b,T as f,x as g,o as y,N as x}from"./app-CFalFzNS.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const v=p({props:{show:Boolean,invoice:{type:Object,default:()=>({})}},emits:["close"],setup(n,{emit:o}){const s=f({id:"",bill_number:"",isp_name:"",total_port_leasing_customer:0,total_maintenance_customer:0,total_suspension_customer:0,total_installation_customer:0,total_relocation_customer:0,total_material_customer:0,total_port_leasing_amount:0,total_maintenance_amount:0,total_suspension_amount:0,total_installation_amount:0,total_relocation_amount:0,total_material_amount:0,additional_description:"",additional_fees:0,sub_total:0,discount_amount:0,tax_percent:0,tax_amount:0,total_amount:0,issue_date:"",due_date:""}),r=()=>{s.sub_total=Number(s.total_port_leasing_amount)+Number(s.total_maintenance_amount)+Number(s.total_suspension_amount)+Number(s.total_installation_amount)+Number(s.total_relocation_amount)+Number(s.total_material_amount)+Number(s.additional_fees),s.tax_amount=(s.sub_total-Number(s.discount_amount))*Number(s.tax_percent)/100,s.total_amount=s.sub_total-Number(s.discount_amount)+Number(s.tax_amount)};g(()=>n.invoice,a=>{var u,_;a&&(s.id=a.id,s.bill_number=(u=a.bill)==null?void 0:u.bill_number,s.isp_name=(_=a.isp)==null?void 0:_.name,s.total_port_leasing_customer=a.total_port_leasing_customer,s.total_maintenance_customer=a.total_maintenance_customer,s.total_suspension_customer=a.total_suspension_customer,s.total_installation_customer=a.total_installation_customer,s.total_relocation_customer=a.total_relocation_customer,s.total_material_customer=a.total_material_customer,s.total_port_leasing_amount=a.total_port_leasing_amount,s.total_maintenance_amount=a.total_maintenance_amount,s.total_suspension_amount=a.total_suspension_amount,s.total_installation_amount=a.total_installation_amount,s.total_relocation_amount=a.total_relocation_amount,s.total_material_amount=a.total_material_amount,s.total_new_customer=a.total_new_customer,s.additional_description=a.additional_description,s.additional_fees=a.additional_fees,s.sub_total=a.sub_total,s.discount_amount=a.discount_amount||0,s.tax_percent=a.tax_percent||0,s.tax_amount=a.tax_amount||0,s.total_amount=a.total_amount,s.issue_date=a.issue_date,s.due_date=a.due_date,r())},{immediate:!0,deep:!0});const m=()=>{s._method="PUT",x.post(route("invoice.update",{id:s.id}),s,{onSuccess:a=>{Toast.fire({icon:"success",title:a.props.flash.message}),d()},onError:a=>{console.error("Error submitting form:",a)}})},d=()=>{s.reset(),o("close")};return{form:s,submit:m,closeModal:d,updateCalculations:r}}}),C={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},N={class:"mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:max-w-4xl sm:mx-auto"},$={class:"p-8"},j={class:"border-b pb-4 mb-6"},k={class:"grid grid-cols-2 gap-8 mt-4"},I={class:"font-medium mt-1"},T={class:"text-sm text-gray-500"},D={class:"text-right"},M={class:"mb-2"},B={class:"mb-8"},w={class:"w-full"},E={class:"border-b"},S={class:"py-3 px-2 text-right"},U={class:"py-3 px-2 text-right"},A={class:"border-b"},O={class:"py-3 px-2 text-right"},P={class:"py-3 px-2 text-right"},z={class:"border-b"},H={class:"py-3 px-2 text-right"},L={class:"py-3 px-2 text-right"},R={class:"border-b"},q={class:"py-3 px-2 text-right"},F={class:"py-3 px-2 text-right"},G={class:"border-b"},J={class:"py-3 px-2 text-right"},K={class:"py-3 px-2 text-right"},Q={class:"border-b"},W={class:"py-3 px-2 text-right"},X={class:"py-3 px-2 text-right"},Y={class:"bg-gray-50 p-4 rounded-lg"},Z={class:"grid grid-cols-2 gap-4"},V={class:"space-y-3"},tt={class:"flex justify-between"},ot={class:"flex justify-between items-center"},st={class:"flex justify-between items-center"},at={class:"flex justify-between"},nt={class:"flex justify-between pt-3 border-t"},et={class:"font-bold"},it={class:"mt-8 flex justify-end space-x-3"},lt=["disabled"];function rt(n,o,s,r,m,d){return n.show?(y(),c("div",C,[o[25]||(o[25]=t("div",{class:"fixed inset-0 transform transition-all"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t("div",N,[t("div",$,[t("div",j,[o[11]||(o[11]=t("h1",{class:"text-2xl font-bold text-gray-800"},"INVOICE",-1)),t("div",k,[t("div",null,[o[8]||(o[8]=t("p",{class:"text-gray-600"},"Bill To:",-1)),t("p",I,e(n.form.isp_name),1),t("p",T,"Bill Number: "+e(n.form.bill_number),1)]),t("div",D,[t("div",M,[o[9]||(o[9]=t("label",{class:"block text-sm text-gray-600"},"Issue Date:",-1)),i(t("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>n.form.issue_date=a),type:"date",class:"mt-1 w-48 border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[l,n.form.issue_date]])]),t("div",null,[o[10]||(o[10]=t("label",{class:"block text-sm text-gray-600"},"Due Date:",-1)),i(t("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>n.form.due_date=a),type:"date",class:"mt-1 w-48 border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[l,n.form.due_date]])])])])]),t("div",B,[t("table",w,[o[18]||(o[18]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"text-left py-3 px-2"},"Description"),t("th",{class:"text-right py-3 px-2 w-32"},"Customers"),t("th",{class:"text-right py-3 px-2 w-32"},"Amount")])],-1)),t("tbody",null,[t("tr",E,[o[12]||(o[12]=t("td",{class:"py-3 px-2"},"Monthly Port Leasing Charges",-1)),t("td",S,e(n.form.total_port_leasing_customer),1),t("td",U,"$"+e(n.form.total_port_leasing_amount),1)]),t("tr",A,[o[13]||(o[13]=t("td",{class:"py-3 px-2"},"Maintenance Charges",-1)),t("td",O,e(n.form.total_maintenance_customer),1),t("td",P,"$"+e(n.form.total_maintenance_amount),1)]),t("tr",z,[o[14]||(o[14]=t("td",{class:"py-3 px-2"},"Suspension Charges",-1)),t("td",H,e(n.form.total_suspension_customer),1),t("td",L,"$"+e(n.form.total_suspension_amount),1)]),t("tr",R,[o[15]||(o[15]=t("td",{class:"py-3 px-2"},"Installation Charges",-1)),t("td",q,e(n.form.total_installation_customer),1),t("td",F,"$"+e(n.form.total_installation_amount),1)]),t("tr",G,[o[16]||(o[16]=t("td",{class:"py-3 px-2"},"Relocation Charges",-1)),t("td",J,e(n.form.total_relocation_customer),1),t("td",K,"$"+e(n.form.total_relocation_amount),1)]),t("tr",Q,[o[17]||(o[17]=t("td",{class:"py-3 px-2"},"Material Charges",-1)),t("td",W,e(n.form.total_material_customer),1),t("td",X,"$"+e(n.form.total_material_amount),1)])])])]),t("div",Y,[t("div",Z,[o[24]||(o[24]=t("div",null,null,-1)),t("div",V,[t("div",tt,[o[19]||(o[19]=t("span",{class:"font-medium"},"Subtotal:",-1)),t("span",null,"$"+e(n.form.sub_total),1)]),t("div",ot,[o[20]||(o[20]=t("span",{class:"font-medium"},"Discount:",-1)),i(t("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>n.form.discount_amount=a),type:"number",step:"0.01",class:"w-32 text-right border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",onInput:o[3]||(o[3]=(...a)=>n.updateCalculations&&n.updateCalculations(...a))},null,544),[[l,n.form.discount_amount]])]),t("div",st,[o[21]||(o[21]=t("span",{class:"font-medium"},"Tax (%):",-1)),i(t("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>n.form.tax_percent=a),type:"number",step:"0.01",class:"w-32 text-right border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",onInput:o[5]||(o[5]=(...a)=>n.updateCalculations&&n.updateCalculations(...a))},null,544),[[l,n.form.tax_percent]])]),t("div",at,[o[22]||(o[22]=t("span",{class:"font-medium"},"Tax Amount:",-1)),t("span",null,"$"+e(n.form.tax_amount),1)]),t("div",nt,[o[23]||(o[23]=t("span",{class:"font-bold"},"Total Amount:",-1)),t("span",et,"$"+e(n.form.total_amount),1)])])])]),t("div",it,[t("button",{type:"button",class:"px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-sm text-gray-700 hover:bg-gray-50",onClick:o[6]||(o[6]=(...a)=>n.closeModal&&n.closeModal(...a))}," Cancel "),t("button",{onClick:o[7]||(o[7]=(...a)=>n.submit&&n.submit(...a)),class:"px-4 py-2 bg-blue-600 text-white rounded-md font-semibold text-sm hover:bg-blue-700",disabled:n.form.processing}," Save Invoice ",8,lt)])])])])):b("",!0)}const ut=h(v,[["render",rt]]);export{ut as default};
