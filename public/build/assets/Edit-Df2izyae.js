import{r as U,T as C,x as D,c as O,w as c,o as r,a as d,i as A,j as x,k as _,u as t,d as a,t as p,e as n,b as m,v as j,f as E,m as L}from"./app-DEFBMW71.js";import{A as M}from"./AppLayout-BnzSYYjy.js";import{M as b}from"./vue3-multiselect.umd.min-2bL6vKp7.js";import"./DropdownLink-9oXNaPVi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"py-12"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},q={class:"grid grid-cols-1 gap-6"},z={class:"grid grid-cols-2 gap-2"},G={key:0,class:"text-red-500 text-sm mt-1"},H={key:0,class:"text-red-500 text-sm mt-1"},J={key:0},K={key:1},Q={key:0,class:"text-red-500 text-sm mt-1"},R={key:0,class:"text-red-500 text-sm mt-1"},W={key:0,class:"text-red-500 text-sm mt-1"},X={key:0,class:"text-red-500 text-sm mt-1"},Y={class:"flex justify-end space-x-3"},Z=["disabled"],le={__name:"Edit",props:{dnSplitter:Object,dnBoxes:Array,fiberCables:Array,pops:Object},setup(u){var y,g,v,S,k,w,V;const s=u,f=U([]),o=C({name:s.dnSplitter.name,pop:(g=(y=s.dnSplitter)==null?void 0:y.pop_device)==null?void 0:g.pop,pop_id:(S=(v=s.dnSplitter)==null?void 0:v.pop_device)==null?void 0:S.pop.id,pop_device:(k=s.dnSplitter)==null?void 0:k.pop_device,pop_device_id:(V=(w=s.dnSplitter)==null?void 0:w.pop_device)==null?void 0:V.id,dn:s.dnBoxes.find(i=>i.id===s.dnSplitter.dn_id),dn_id:s.dnSplitter.dn_id,fiber:s.fiberCables.find(i=>i.id===s.dnSplitter.fiber_id),fiber_id:s.dnSplitter.fiber_id,core:{id:s.dnSplitter.core_number.toString(),name:s.dnSplitter.core_number.toString()},core_number:s.dnSplitter.core_number,location:s.dnSplitter.location,status:s.dnSplitter.status}),P=Array.from({length:96},(i,e)=>{const l=(e+1).toString();return{id:l,name:l}}),B=()=>{o.put(route("dn-splitters.update",s.dnSplitter.id),{onSuccess:i=>{Toast.fire({icon:"success",title:i.props.flash.message})}})},N=async()=>{if(!o.pop_id){f.value=[];return}try{const e=await(await fetch(`/getOLTByPOP/${o.pop_id}`)).json();f.value=e||[],console.log("fetch POP Devices")}catch(i){console.error("Failed to fetch POP devices",i)}};return D(()=>o.pop_id,()=>{N(),o.pop_device=null,o.pop_device_id=null}),(i,e)=>(r(),O(M,{title:"Edit DN Splitter"},{header:c(()=>e[13]||(e[13]=[d("h2",{class:"font-semibold text-xl text-white leading-tight"}," Edit DN Splitter ",-1)])),default:c(()=>[d("div",T,[d("div",F,[d("div",I,[d("form",{onSubmit:A(B,["prevent"])},[d("div",q,[d("div",z,[d("div",null,[e[14]||(e[14]=d("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),x(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>t(o).name=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,t(o).name]]),t(o).errors.name?(r(),a("div",G,p(t(o).errors.name),1)):n("",!0)]),d("div",null,[e[15]||(e[15]=d("label",{class:"block text-sm font-medium text-gray-700"},"Node Box",-1)),m(t(b),{"deselect-label":"Selected already",options:u.dnBoxes,"track-by":"id",label:"name",modelValue:t(o).dn,"onUpdate:modelValue":[e[1]||(e[1]=l=>t(o).dn=l),e[2]||(e[2]=l=>t(o).dn_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"2"},null,8,["options","modelValue"]),t(o).errors.dn_id?(r(),a("div",H,p(t(o).errors.dn_id),1)):n("",!0)]),u.pops?(r(),a("div",J,[e[16]||(e[16]=d("label",{class:"block text-sm font-medium text-gray-700"},"POP Site",-1)),m(t(b),{"deselect-label":"Selected already",options:u.pops,"track-by":"id",label:"site_name",modelValue:t(o).pop,"onUpdate:modelValue":[e[3]||(e[3]=l=>t(o).pop=l),e[4]||(e[4]=l=>t(o).pop_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"2"},null,8,["options","modelValue"])])):n("",!0),f.value?(r(),a("div",K,[e[17]||(e[17]=d("label",{class:"block text-sm font-medium text-gray-700"},"POP Device",-1)),m(t(b),{"deselect-label":"Selected already",options:f.value,"track-by":"id",label:"device_name",modelValue:t(o).pop_device,"onUpdate:modelValue":[e[5]||(e[5]=l=>t(o).pop_device=l),e[6]||(e[6]=l=>t(o).pop_device_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"2"},null,8,["options","modelValue"])])):n("",!0),d("div",null,[e[18]||(e[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Source Fiber Cable",-1)),m(t(b),{"deselect-label":"Selected already",options:u.fiberCables,"track-by":"id",label:"name",modelValue:t(o).fiber,"onUpdate:modelValue":[e[7]||(e[7]=l=>t(o).fiber=l),e[8]||(e[8]=l=>t(o).fiber_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"3"},null,8,["options","modelValue"]),t(o).errors.fiber_id?(r(),a("div",Q,p(t(o).errors.fiber_id),1)):n("",!0)]),d("div",null,[e[19]||(e[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"Core Number",-1)),m(t(b),{"deselect-label":"Selected already",options:t(P),"track-by":"id",label:"name",modelValue:t(o).core,"onUpdate:modelValue":[e[9]||(e[9]=l=>t(o).core=l),e[10]||(e[10]=l=>t(o).core_number=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"4"},null,8,["options","modelValue"]),t(o).errors.core_number?(r(),a("div",R,p(t(o).errors.core_number),1)):n("",!0)])]),d("div",null,[e[20]||(e[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Location (Latitude, Longitude)",-1)),x(d("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=l=>t(o).location=l),placeholder:"e.g. 16.8661, 96.1951",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,t(o).location]]),t(o).errors.location?(r(),a("div",W,p(t(o).errors.location),1)):n("",!0),e[21]||(e[21]=d("p",{class:"mt-1 text-sm text-gray-500"},"Enter latitude (-90 to 90) and longitude (-180 to 180) separated by comma",-1))]),d("div",null,[e[23]||(e[23]=d("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),x(d("select",{"onUpdate:modelValue":e[12]||(e[12]=l=>t(o).status=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},e[22]||(e[22]=[d("option",{value:"active"},"Active",-1),d("option",{value:"plan"},"Plan",-1),d("option",{value:"inactive"},"Inactive",-1)]),512),[[j,t(o).status]]),t(o).errors.status?(r(),a("div",X,p(t(o).errors.status),1)):n("",!0)]),d("div",Y,[m(t(L),{href:i.route("dn-splitters.index"),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},{default:c(()=>e[24]||(e[24]=[E(" Cancel ")])),_:1},8,["href"]),d("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:t(o).processing}," Update ",8,Z)])])],32)])])])]),_:1}))}};export{le as default};
