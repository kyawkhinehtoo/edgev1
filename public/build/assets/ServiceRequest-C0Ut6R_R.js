import{A as fe}from"./AppLayout-ByT0_44S.js";import{P as be}from"./Pagination-CWHs2u64.js";import{h as we,r as p,x as V,y as xe,C as ge,z as I,c as ye,w as L,N as D,o as l,a as s,j,k as q,O as ve,n as g,d as r,f as b,e as i,F as U,g as ke,t as a,b as y}from"./app-BuVaNo93.js";import{M as he}from"./vue3-multiselect.umd.min-Dk8xTv1-.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-C_YcXYcr.js";const Se={name:"ServiceRequest",components:{AppLayout:fe,Multiselect:he,Pagination:be},props:{incidents:Object,townships:Object,packages:Object,partners:Object,subcons:Object,users:Object,relocationServices:Object,errors:Object},setup(u){const e=we({id:null,code:null,customer_id:null,ftth_id:null,date:null,start_date:null,end_date:null,type:null,request_by:null,status:null,status_id:null,current_package:null,new_package:null,current_address:null,new_address:null,current_location:null,new_location:null,current_township:null,new_township:null,description:null,current_bandwidth:null,maintenance_service_name:null,new_bandwidth:null,new_maintenance_service_name:null,current_partner:null,current_pop:null,current_sn_splitter_id:null,current_dn_splitter_id:null,current_pop_device_id:null,current_sn_splitter:null,current_dn_splitter:null,current_pop_device:null,current_port_number:null,new_partner:null,new_partner_id:null,new_pop:null,new_pop_id:null,new_pop_device:null,new_pop_device_id:null,new_sn_splitter:null,new_sn_splitter_id:null,new_dn_splitter:null,new_dn_splitter_id:null,new_port_number:null,new_port_number_id:null,subcon:null,subcon_id:null,assign_date:null,task_status:null,complete_date:null,relocation_service:null}),d=p([]),t=p([]),k=p([]),h=p([]),_=p([]),N=p(""),v=p(""),w=p("desc"),x=p("active");let P=p(!1),S=p(!1),f=p(!1);const C=p(1);function T(n){C.value=n}function o(){e.id=null,e.code=null,e.customer_id=null,e.ftth_id=null,e.date=null,e.start_date=null,e.end_date=null,e.type=null,e.request_by=null,e.status=null,e.status_id=null,e.current_package=null,e.new_package=null,e.current_address=null,e.new_address=null,e.current_location=null,e.new_location=null,e.current_township=null,e.new_township=null,e.description=null,e.current_bandwidth=null,e.maintenance_service_name=null,e.new_bandwidth=null,e.new_maintenance_service_name=null,e.current_partner=null,e.current_pop=null,e.current_sn_splitter_id=null,e.current_dn_splitter_id=null,e.current_pop_device_id=null,e.current_sn_splitter=null,e.current_dn_splitter=null,e.current_pop_device=null,e.current_port_number=null,e.new_partner=null,e.new_partner_id=null,e.new_pop=null,e.new_pop_id=null,e.new_pop_device=null,e.new_pop_device_id=null,e.new_sn_splitter=null,e.new_sn_splitter_id=null,e.new_dn_splitter=null,e.new_dn_splitter_id=null,e.new_port_number=null,e.new_port_number_id=null,e.subcon=null,e.subcon_id=null,e.assign_date=null,e.task_status=null,e.complete_date=null,e.relocation_service=null}function B(n){let c="WIP";return n==1?c="WIP":n==2?c="Escalated":n==3?c="Closed":n==4?c="Deleted":n==5&&(c="Resolved Open"),c}function E(){e._method="POST",D.post("/assign-subcon/"+e.id,e,{onSuccess:n=>{O(),o(),Toast.fire({icon:"success",title:n.props.flash.message})},onError:n=>{console.log("error ..".errors)}})}function ne(){e._method="PUT",D.post("/servicerequest/"+e.id,e,{onSuccess:n=>{O(),o(),Toast.fire({icon:"success",title:n.props.flash.message})},onError:n=>{O(),console.log("error ..".errors)}})}function oe(n){var c,A,F,z,W,G,K,H,J,Q,X,Y,Z,$,ee,se,te;e.id=n.id,e.code=n.code,e.customer_id=n.customer_id,e.ftth_id=n.ftth_id,e.date=n.date,e.start_date=n.start_date,e.end_date=n.end_date,e.type=n.type.replace(/_/g," "),e.request_by=u.users.filter(m=>m.id==n.incharge_id)[0],e.status=n.status_name,e.status_id=n.status_id,e.current_package=u.packages.filter(m=>m.id==n.current_package)[0],e.new_package=u.packages.filter(m=>m.id==n.new_package)[0],e.current_address=(c=n.customer.current_address)==null?void 0:c.address,e.new_address=n.new_address,e.current_location=(A=n.customer.current_address)==null?void 0:A.location,e.new_location=n.location,e.current_township=(F=n.customer.current_address)==null?void 0:F.township.name,e.new_township=u.townships.filter(m=>m.id==n.new_township)[0],e.description=n.description,e.current_bandwidth=n.current_bandwidth,e.maintenance_service_name=n.maintenance_service_name,e.new_bandwidth=n.new_bandwidth,e.new_maintenance_service_name=n.new_maintenance_service_name,e.current_partner=(W=(z=n.customer.sn_port)==null?void 0:z.pop)==null?void 0:W.partner.name,e.current_pop=(K=(G=n.customer.sn_port)==null?void 0:G.pop)==null?void 0:K.site_name,e.current_sn_splitter_id=(H=n.customer.sn_port)==null?void 0:H.sn_splitter_id,e.current_dn_splitter_id=(J=n.customer.sn_port)==null?void 0:J.dn_splitter_id,e.current_pop_device_id=(Q=n.customer.sn_port)==null?void 0:Q.pop_device_id,e.current_sn_splitter=(Y=(X=n.customer.sn_port)==null?void 0:X.sn_splitter)==null?void 0:Y.name,e.current_dn_splitter=($=(Z=n.customer.sn_port)==null?void 0:Z.dn_splitter)==null?void 0:$.name,e.current_pop_device=(se=(ee=n.customer.sn_port)==null?void 0:ee.pop_device)==null?void 0:se.device_name,e.current_port_number=(te=n.customer.sn_port)==null?void 0:te.port_number,e.new_partner=n.new_partner_id?u.partners.filter(m=>m.id===n.new_partner_id):null,e.new_partner_id=n.new_partner_id,e.new_pop=null,e.new_pop_id=n.new_pop_id,e.new_pop_device=null,e.new_pop_device_id=n.new_pop_device_id,e.new_sn_splitter=null,e.new_sn_splitter_id=n.new_sn_splitter_id,e.new_dn_splitter=null,e.new_dn_splitter_id=n.new_dn_splitter_id,e.new_port_number=null,e.new_port_number_id=n.new_port_number,e.subcon=n!=null&&n.subcon_id?u.subcons.find(m=>m.id=n==null?void 0:n.subcon_id):null,e.subcon_id=n==null?void 0:n.subcon_id,e.assign_date=n==null?void 0:n.assign_date,e.task_status=n==null?void 0:n.task_status,e.complete_date=n==null?void 0:n.complete_date,e.relocation_service=n!=null&&n.relocation_service_id?u.relocationServices.find(m=>m.id==n.relocation_service_id).name:null,P.value=!0,R()}function le(n){confirm("Are you sure want to remove?")&&(n._method="DELETE",D.post("/equiptment/"+n.id,n),O(),o())}function R(){S.value=!0}const O=()=>{S.value=!1,C.value=1,o(),P.value=!1},re=()=>{x.value="active",M()},ie=()=>{x.value="close",M()},ae=n=>{switch(Number(n)){case 1:return"WIP";case 2:return"Completed";case 3:return"Pending";default:return"WIP"}},M=()=>{D.get("/servicerequest/",{status:x.value,sort:v.value,order:w.value,general:N.value},{preserveState:!0,onSuccess:n=>{f.value=!1},onError:n=>{f.value=!1},onStart:n=>{f.value=!0}})},de=n=>{v.value=n,w.value=="asc"?w.value="desc":w.value="asc",console.log("search value is"+v.value),D.get("/servicerequest/",{status:x.value,sort:v.value,order:w.value,general:N.value},{preserveState:!0,onSuccess:c=>{f.value=!1},onError:c=>{f.value=!1},onStart:c=>{f.value=!0}})},ce=async()=>{if(!e.new_partner_id){console.log("No Partner"),d.value=[];return}try{const c=await(await fetch(`/getPop/${e.new_partner_id}`)).json();d.value=c||[],console.log("fetch POPs")}catch(n){console.error("Failed to fetch POPs",n)}},_e=async()=>{if(console.log("fetch POP Devices"),!e.new_pop_id){console.log("No POP Selected"),t.value=[];return}try{const c=await(await fetch(`/getOLTByPOP/${e.new_pop_id}`)).json();t.value=c||[],console.log("fetch POP Devices")}catch(n){console.error("Failed to fetch POP devices",n)}},me=async()=>{if(!e.new_pop_device_id){k.value=[];return}try{const c=await(await fetch(`/getDNByOLT/${e.new_pop_device_id}`)).json();k.value=c||[]}catch(n){console.error("Failed to fetch DNs",n)}},pe=async()=>{if(!e.new_dn_splitter_id){h.value=[];return}try{const c=await(await fetch(`/getDnId/${e.new_dn_splitter_id}`)).json();h.value=c||[]}catch(n){console.error("Failed to fetch SNs",n)}},ue=async()=>{if(!e.new_sn_splitter_id){_.value=Array.from({length:16},(n,c)=>({id:c+1,name:`SN Port ${c+1}`}));return}try{const c=await(await fetch(`/getAvailablePortBySplitterId/${e.new_sn_splitter_id}`)).json();_.value=c||[]}catch{_.value=Array.isArray(data)?data:[],_.value=Array.from({length:16},(c,A)=>({id:A+1,name:`SN Port ${A+1}`}))}};return V(()=>e.new_partner_id,()=>{(async()=>(await ce(),e.new_pop_id&&d.value&&(e.new_pop=d.value.find(n=>n.id===e.new_pop_id))))(),e.new_sn_splitter=null,e.new_dn_splitter=null,e.new_pop_device=null}),V(()=>e.new_pop_id,()=>{(async()=>(await _e(),e.new_pop_device_id&&t.value&&(e.new_pop_device=t.value.find(n=>n.id===e.new_pop_device_id))))(),e.new_dn_splitter=null,e.new_sn_splitter=null}),V(()=>e.new_pop_device_id,()=>{(async()=>(await me(),e.new_dn_splitter_id&&k.value&&(e.new_dn_splitter=k.value.find(n=>n.id===e.new_dn_splitter_id))))(),e.new_sn_splitter=null}),V(()=>e.new_dn_splitter_id,()=>{(async()=>(await pe(),e.new_sn_splitter_id&&h.value&&(e.new_sn_splitter=h.value.find(n=>n.id===e.new_sn_splitter_id))))()}),V(()=>e.new_sn_splitter_id,()=>{(async()=>{var n;await ue(),e.new_port_number_id&&((n=_.value)==null?void 0:n.length)>0?e.new_port_number=_.value.find(c=>c.id==e.new_port_number_id):e.new_port_number=null})()}),xe(()=>{u.packages.map(function(n){return n.item_data=`${n.speed} Mbps - ${n.name} - ${n.contract_period} Months Contract`})}),ge(()=>{u.packages.map(function(n){return n.item_data=`${n.speed} Mbps - ${n.name} - ${n.contract_period} Months Contract`})}),{form:e,submit:ne,editMode:P,isOpen:S,goActive:re,goClose:ie,openModal:R,closeModal:O,edit:oe,deleteRow:le,search:M,search_txt:N,getStatus:B,sortBy:de,sort:v,order:w,status:x,loading:f,popDevices:t,dnOptions:k,snOptions:h,filteredPops:d,snPortNoOptions:_,tab:C,tabClick:T,assign:E,getIncidentStatus:ae}}},Ce={class:"py-2"},Ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Oe={class:"flex justify-between space-x-2 items-end mb-2 px-1 md:px-0"},Ae={class:"relative flex flex-wrap"},Ve={class:"flex"},De={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Te={class:"min-w-full divide-y divide-gray-200 text-xs"},je={class:"bg-gray-50"},qe={key:0},Be={key:0,class:"fa fas fa-sort-up"},Me={key:1,class:"fa fas fa-sort-down"},Ie={key:0},Le={key:0,class:"fa fas fa-sort-up"},Ue={key:1,class:"fa fas fa-sort-down"},Ee={key:0},Re={key:0,class:"fa fas fa-sort-up"},Fe={key:1,class:"fa fas fa-sort-down"},ze={key:0},We={key:0,class:"fa fas fa-sort-up"},Ge={key:1,class:"fa fas fa-sort-down"},Ke={key:0},He={key:0,class:"fa fas fa-sort-up"},Je={key:1,class:"fa fas fa-sort-down"},Qe={key:0},Xe={key:0,class:"fa fas fa-sort-up"},Ye={key:1,class:"fa fas fa-sort-down"},Ze={key:0},$e={key:0,class:"fa fas fa-sort-up"},es={key:1,class:"fa fas fa-sort-down"},ss={key:0},ts={key:0,class:"fa fas fa-sort-up"},ns={key:1,class:"fa fas fa-sort-down"},os={class:"bg-white divide-y divide-gray-200"},ls={class:"px-6 py-3 whitespace-nowrap"},rs={class:"px-6 py-3 whitespace-nowrap"},is={class:"px-6 py-3 whitespace-nowrap"},as={class:"px-6 py-3 whitespace-nowrap"},ds={class:"px-6 py-3 whitespace-nowrap capitalize"},cs={class:"px-6 py-3 whitespace-nowrap"},_s={class:"px-6 py-3 whitespace-nowrap"},ms={class:"px-6 py-3 whitespace-nowrap"},ps={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},us=["onClick"],fs={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},bs={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ws={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},xs={class:"inline-flex w-full bg-gray-50 rounded-t-lg border-b"},gs={id:"tabs",class:"flex"},ys={key:0},vs={class:"py-4 border-gray-100"},ks={class:"mt-1 px-3 flex w-full justify-between"},hs={class:"flex"},Ps={class:"font-semibold text-md text-gray-800 leading-tight capitalize"},Ss={class:"flex"},Cs={class:"font-semibold text-sm text-gray-800 leading-tight"},Ns={class:"bg-white px-4"},Os={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},As={class:"col-span-1 grid grid-cols-2 gap-2"},Vs={class:"mb-4 col-span-1 sm:col-span-1"},Ds={class:"block w-full sm:text-sm"},Ts={class:"mb-4 col-span-1 sm:col-span-1"},js={class:"block w-full sm:text-sm"},qs={class:"col-span-1 grid grid-cols-2 gap-2"},Bs={class:"mb-4 col-span-1 sm:col-span-1"},Ms={class:"block w-full sm:text-sm"},Is={class:"mb-4 col-span-1 sm:col-span-1"},Ls={class:"block w-full sm:text-sm"},Us={class:"col-span-1 grid grid-cols-2 gap-2"},Es={key:0,class:"mb-4 col-span-1 sm:col-span-1"},Rs={key:1,class:"mb-4 col-span-1 sm:col-span-1"},Fs=["value"],zs={key:2,class:"mb-4 col-span-1 sm:col-span-1"},Ws={key:3,class:"mb-4 col-span-1 sm:col-span-1"},Gs=["value"],Ks={class:"col-span-1 grid grid-cols-2 gap-2"},Hs={key:0,class:"mb-4 col-span-1 sm:col-span-1"},Js={key:1,class:"mb-4 col-span-1 sm:col-span-1"},Qs=["value"],Xs={key:2,class:"mb-4 col-span-1 sm:col-span-1"},Ys={key:3,class:"mb-4 col-span-1 sm:col-span-1"},Zs=["value"],$s={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},et={class:"col-span-1 grid grid-cols-2 gap-2"},st={class:"mb-4 col-span-1 sm:col-span-1"},tt={class:"block w-full sm:text-sm"},nt={class:"mb-4 col-span-1 sm:col-span-1"},ot={class:"block w-full sm:text-sm"},lt={class:"mb-4 col-span-1 sm:col-span-1"},rt={class:"block w-full sm:text-sm"},it={class:"col-span-1 grid grid-cols-2 gap-2"},at={class:"mb-4 col-span-1 sm:col-span-1"},dt={class:"block w-full sm:text-sm"},ct={class:"mb-4 col-span-1 sm:col-span-1"},_t={class:"block w-full sm:text-sm"},mt={class:"mb-4 col-span-1 sm:col-span-1"},pt={class:"block w-full sm:text-sm"},ut={class:"mb-4 col-span-1 sm:col-span-1"},ft={class:"block w-full sm:text-sm"},bt={class:"mb-4 col-span-1 sm:col-span-2"},wt={class:"mb-4 col-span-1 sm:col-span-2"},xt={key:2,class:"mb-4 col-span-1 sm:col-span-1"},gt={key:3,class:"mb-4 col-span-1 sm:col-span-5"},yt=["value"],vt={key:1,class:"p-4"},kt={class:"grid grid-cols-1 sm:grid-cols-4 gap-2"},ht={class:"mb-4 col-span-1 sm:col-span-1"},Pt={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},St={class:"mb-4 col-span-1 sm:col-span-1"},Ct={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},Nt={class:"mb-4 col-span-1 sm:col-span-1"},Ot={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},At={class:"mb-4 col-span-1 sm:col-span-1"},Vt={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},Dt={class:"mb-4 col-span-1 sm:col-span-1"},Tt={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},jt={class:"mb-4 col-span-1 sm:col-span-1"},qt={class:"block w-full sm:text-sm py-2.5 px-2 rounded shadow-sm border border-gray-200"},Bt={class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},Mt={key:0},It={key:1,class:"text-red-500 text-xs mt-1"},Lt={class:"mb-4 col-span-1 sm:col-span-1 flex items-center flex-wrap text-sm"},Ut={key:0},Et={key:1},Rt={key:2,class:"text-red-500 text-xs mt-1"},Ft={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},zt={key:0},Wt={key:1},Gt={key:2,class:"text-red-500 text-xs mt-1"},Kt={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},Ht={key:0},Jt={key:1},Qt={key:2,class:"text-red-500 text-xs mt-1"},Xt={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},Yt={key:0},Zt={key:1},$t={key:2,class:"text-red-500 text-xs mt-1"},en={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},sn={key:0},tn={key:1},nn={key:2,class:"text-red-500 text-xs mt-1"},on={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},ln={key:0},rn={key:1},an={key:2,class:"text-red-500 text-xs mt-1"},dn={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},cn={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},_n={class:"text-gray-600 border-gray-300 rounded-md text-sm"},mn={class:"mb-4 col-span-1 sm:col-span-1 flex intems-center flex-wrap text-sm"},pn={class:"text-gray-600 border-gray-300 rounded-md text-sm"},un={class:"bg-gray-50 px-4 py-3 sm:px-6 flex justify-end gap-2"},fn={class:"flex w-full rounded-md shadow-sm sm:w-auto"},bn={key:0,class:"flex w-full rounded-md shadow-sm sm:w-auto"},wn={class:"flex w-full rounded-md shadow-sm sm:w-auto"},xn={key:1},gn={key:0,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function yn(u,e,d,t,k,h){const _=I("multiselect"),N=I("pagination"),v=I("app-layout");return l(),ye(v,null,{header:L(()=>e[34]||(e[34]=[s("h2",{class:"font-semibold text-xl text-white leading-tight"},"Customer Service Request",-1)])),default:L(()=>{var w,x,P,S,f,C,T;return[s("div",Ce,[s("div",Ne,[s("div",Oe,[s("div",Ae,[e[35]||(e[35]=s("span",{class:"z-10 h-full leading-snug font-normal absolute text-center text-gray-300 bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[s("i",{class:"fas fa-search"})],-1)),j(s("input",{type:"text",placeholder:"Search here...",class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:ring w-full pl-10",id:"search_txt","onUpdate:modelValue":e[0]||(e[0]=o=>t.search_txt=o),onKeyup:e[1]||(e[1]=ve((...o)=>t.search&&t.search(...o),["enter"]))},null,544),[[q,t.search_txt]])]),s("div",Ve,[s("button",{class:g([{"bg-gray-600":t.status=="active"},"inline-flex btn py-3 px-8 bg-gray-400 rounded rounded-r-none focus:ring-0 focus:border-transparent focus:outline-none focus:shadow-inner text-gray-50 text-xs font-semibold uppercase"]),onClick:e[2]||(e[2]=(...o)=>t.goActive&&t.goActive(...o))},"Active",2),s("button",{class:g([{"bg-gray-600":t.status=="close"},"inline-flex btn py-3 px-8 bg-gray-400 rounded rounded-l-none focus:ring-0 focus:border-transparent focus:outline-none focus:shadow-inner text-gray-50 text-xs font-semibold uppercase"]),onClick:e[3]||(e[3]=(...o)=>t.goClose&&t.goClose(...o))},"Closed",2)])]),d.incidents.data?(l(),r("div",De,[s("table",Te,[s("thead",je,[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[4]||(e[4]=o=>t.sortBy("id"))},[e[36]||(e[36]=b("No.")),t.sort=="id"?(l(),r("span",qe,[t.order=="asc"?(l(),r("i",Be)):(l(),r("i",Me))])):i("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[5]||(e[5]=o=>t.sortBy("date"))},[e[37]||(e[37]=b("Date ")),t.sort=="date"?(l(),r("span",Ie,[t.order=="asc"?(l(),r("i",Le)):(l(),r("i",Ue))])):i("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[6]||(e[6]=o=>t.sortBy("cid"))},[e[38]||(e[38]=b("Customer ID ")),t.sort=="cid"?(l(),r("span",Ee,[t.order=="asc"?(l(),r("i",Re)):(l(),r("i",Fe))])):i("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[7]||(e[7]=o=>t.sortBy("id"))},[e[39]||(e[39]=b("Incident ID ")),t.sort=="id"?(l(),r("span",ze,[t.order=="asc"?(l(),r("i",We)):(l(),r("i",Ge))])):i("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[8]||(e[8]=o=>t.sortBy("type"))},[e[40]||(e[40]=b("Request Type ")),t.sort=="type"?(l(),r("span",Ke,[t.order=="asc"?(l(),r("i",He)):(l(),r("i",Je))])):i("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[9]||(e[9]=o=>t.sortBy("start"))},[e[41]||(e[41]=b("Effective From ")),t.sort=="start"?(l(),r("span",Qe,[t.order=="asc"?(l(),r("i",Xe)):(l(),r("i",Ye))])):i("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[10]||(e[10]=o=>t.sortBy("request"))},[e[42]||(e[42]=b("Requested By ")),t.sort=="request"?(l(),r("span",Ze,[t.order=="asc"?(l(),r("i",$e)):(l(),r("i",es))])):i("",!0)]),s("th",{scope:"col",class:"px-6 py-3 cursor-pointer text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:e[11]||(e[11]=o=>t.sortBy("status"))},[e[43]||(e[43]=b("Status ")),t.sort=="status"?(l(),r("span",ss,[t.order=="asc"?(l(),r("i",ts)):(l(),r("i",ns))])):i("",!0)]),e[44]||(e[44]=s("th",{scope:"col",class:"relative px-6 py-3"},[s("span",{class:"sr-only"},"Action")],-1))])]),s("tbody",os,[(l(!0),r(U,null,ke(d.incidents.data,(o,B)=>(l(),r("tr",{key:o.id},[s("td",ls,a(B+=d.incidents.from),1),s("td",rs,a(o.date),1),s("td",is,a(o.ftth_id),1),s("td",as,a(o.code),1),s("td",ds,a(o.type.replace(/_/g," ")),1),s("td",cs,a(o.start_date),1),s("td",_s,a(o.incharge),1),s("td",ms,a(t.getStatus(o.status)),1),s("td",ps,[s("a",{href:"#",onClick:E=>t.edit(o),class:"text-yellow-600 hover:text-yellow-900"},e[45]||(e[45]=[s("i",{class:"fa fas fa-pen"},null,-1),b(" Open")]),8,us)])]))),128))])]),t.isOpen?(l(),r("div",fs,[s("div",bs,[e[84]||(e[84]=s("div",{class:"fixed inset-0 transition-opacity"},[s("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),e[85]||(e[85]=s("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e[86]||(e[86]=b("â€‹ ")),s("div",ws,[s("div",xs,[s("ul",gs,[s("li",{class:g(["px-4 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[s("a",{href:"#",onClick:e[12]||(e[12]=o=>t.tabClick(1)),"preserve-state":""},"General")],2),t.form.type=="relocation"?(l(),r("li",{key:0,class:g(["px-4 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[s("a",{href:"#",onClick:e[13]||(e[13]=o=>t.tabClick(2)),"preserve-state":""},"Assign Team")],2)):i("",!0)])]),t.tab==1?(l(),r("div",ys,[s("div",vs,[s("div",ks,[s("div",hs,[s("h2",Ps,"Request for : "+a(t.form.type),1)]),s("div",Ss,[s("label",Cs," Date : "+a(t.form.date),1)])])]),s("div",Ns,[s("div",Os,[e[54]||(e[54]=s("div",{class:"col-span-2 mt-2"},[s("h2",{class:"text-sm font-semibold"},"General ")],-1)),s("div",As,[e[46]||(e[46]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"code",class:"block text-gray-700 text-sm font-bold mr-2"},"Ticket ID:")],-1)),s("div",Vs,[s("label",Ds,a(t.form.code),1)]),e[47]||(e[47]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"request_by",class:"block text-gray-700 text-sm font-bold"},"Requested By:")],-1)),s("div",Ts,[s("label",js,a(t.form.request_by.name),1)])]),s("div",qs,[e[48]||(e[48]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"ftth_id",class:"block text-gray-700 text-sm font-bold"},"Customer ID:")],-1)),s("div",Bs,[s("label",Ms,a(t.form.ftth_id),1)]),e[49]||(e[49]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"status",class:"block text-gray-700 text-sm font-bold"},"Customer Status:")],-1)),s("div",Is,[s("label",Ls,a(t.form.status),1)])]),s("div",Us,[t.form.current_bandwidth?(l(),r("div",Es,e[50]||(e[50]=[s("label",{for:"current_package",class:"block text-gray-700 text-sm font-bold"},"Current Plan:",-1)]))):i("",!0),t.form.current_bandwidth?(l(),r("div",Rs,[s("input",{type:"text",class:g([{"ring-1 ring-blue-200":t.form.current_bandwidth},"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"]),id:"current_package",value:`${t.form.current_bandwidth}`,readonly:!0},null,10,Fs)])):i("",!0),t.form.maintenance_service_name?(l(),r("div",zs,e[51]||(e[51]=[s("label",{for:"current_package",class:"block text-gray-700 text-sm font-bold"},"Current Maintenance Plan:",-1)]))):i("",!0),t.form.maintenance_service_name?(l(),r("div",Ws,[s("input",{type:"text",class:g([{"ring-1 ring-blue-200":t.form.maintenance_service_name},"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"]),id:"current_package",value:`${t.form.maintenance_service_name}`,readonly:!0},null,10,Gs)])):i("",!0)]),s("div",Ks,[t.form.new_bandwidth?(l(),r("div",Hs,e[52]||(e[52]=[s("label",{for:"current_package",class:"block text-gray-700 text-sm font-bold"},"New Plan:",-1)]))):i("",!0),t.form.new_bandwidth?(l(),r("div",Js,[s("input",{type:"text",class:g([{"ring-1 ring-blue-200":t.form.new_bandwidth},"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"]),id:"current_package",value:`${t.form.new_bandwidth}`,readonly:!0},null,10,Qs)])):i("",!0),t.form.new_maintenance_service_name?(l(),r("div",Xs,e[53]||(e[53]=[s("label",{for:"current_package",class:"block text-gray-700 text-sm font-bold"},"New Maintenance Plan:",-1)]))):i("",!0),t.form.new_maintenance_service_name?(l(),r("div",Ys,[s("input",{type:"text",class:g([{"ring-1 ring-blue-200":t.form.new_maintenance_service_name},"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"]),id:"current_package",value:`${t.form.new_maintenance_service_name}`,readonly:!0},null,10,Zs)])):i("",!0)])]),t.form.new_address?(l(),r("div",$s,[e[62]||(e[62]=s("div",{class:"col-span-2"},[s("hr"),s("h2",{class:"mt-2 text-sm font-semibold"},"Address ")],-1)),s("div",et,[e[55]||(e[55]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_address",class:"block text-gray-700 text-sm font-bold"},"Current Address:")],-1)),s("div",st,[s("label",tt,a(t.form.current_address),1)]),e[56]||(e[56]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_township",class:"block text-gray-700 text-sm font-bold"},"Current Township:")],-1)),s("div",nt,[s("label",ot,a(t.form.current_township),1)]),e[57]||(e[57]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_township",class:"block text-gray-700 text-sm font-bold"},"Current Lat Long:")],-1)),s("div",lt,[s("label",rt,a(t.form.current_location),1)])]),s("div",it,[e[58]||(e[58]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"new_address",class:"block text-gray-700 text-sm font-bold"},"New Address:")],-1)),s("div",at,[s("label",dt,a(t.form.new_address),1)]),e[59]||(e[59]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"new_township",class:"block text-gray-700 text-sm font-bold"},"New Township:")],-1)),s("div",ct,[s("label",_t,a(t.form.new_township.name),1)]),e[60]||(e[60]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_township",class:"block text-gray-700 text-sm font-bold"},"New Lat Long:")],-1)),s("div",mt,[s("label",pt,a(t.form.new_location),1)]),e[61]||(e[61]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"current_township",class:"block text-gray-700 text-sm font-bold"}," Relocation Package :")],-1)),s("div",ut,[s("label",ft,a(t.form.relocation_service),1)])])])):i("",!0),s("div",null,[t.form.start_date?(l(),r(U,{key:0},[e[63]||(e[63]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"start_date",class:"block text-gray-700 text-sm font-bold mt-3 mr-2"},"Effective From :")],-1)),s("div",bt,[j(s("input",{type:"text",class:"mt-1 ring-1 ring-green-200 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"start_date","onUpdate:modelValue":e[14]||(e[14]=o=>t.form.start_date=o),readonly:!0},null,512),[[q,t.form.start_date]])])],64)):i("",!0),t.form.end_date?(l(),r(U,{key:1},[e[64]||(e[64]=s("div",{class:"mb-4 col-span-1 sm:col-span-1"},[s("label",{for:"end_date",class:"block text-gray-700 text-sm font-bold mt-3 mr-2"},"Effective To :")],-1)),s("div",wt,[j(s("input",{type:"text",class:"mt-1 ring-1 ring-green-200 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"end_date","onUpdate:modelValue":e[15]||(e[15]=o=>t.form.end_date=o),readonly:!0},null,512),[[q,t.form.end_date]])])],64)):i("",!0),t.form.description?(l(),r("div",xt,e[65]||(e[65]=[s("label",{for:"description",class:"block text-gray-700 text-sm font-bold mt-3 mr-2"},"Description:",-1)]))):i("",!0),t.form.description?(l(),r("div",gt,[s("textarea",{class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"description",value:`${t.form.description}`,readonly:!0},null,8,yt)])):i("",!0)])])])):i("",!0),t.tab==2?(l(),r("div",vt,[s("div",kt,[e[66]||(e[66]=s("div",{class:"col-span-4"},[s("h2",{class:"mt-2 text-sm font-semibold"},"ODN Information ")],-1)),e[67]||(e[67]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current Partner :")],-1)),s("div",ht,[s("label",Pt,a(t.form.current_partner??"NA"),1)]),e[68]||(e[68]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current POP :")],-1)),s("div",St,[s("label",Ct,a(t.form.current_pop??"NA"),1)]),e[69]||(e[69]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current OLT :")],-1)),s("div",Nt,[s("label",Ot,a(t.form.current_pop_device??"NA"),1)]),e[70]||(e[70]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current DN Splitter :")],-1)),s("div",At,[s("label",Vt,a(t.form.current_dn_splitter??"NA"),1)]),e[71]||(e[71]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current SN Splitter :")],-1)),s("div",Dt,[s("label",Tt,a(t.form.current_sn_splitter??"NA"),1)]),e[72]||(e[72]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current SN Port No. :")],-1)),s("div",jt,[s("label",qt,a(t.form.current_port_number?"SN Port: "+t.form.current_port_number:"NA"),1)]),e[73]||(e[73]=s("hr",{class:"col-span-4 py-2"},null,-1)),e[74]||(e[74]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"New Partner :")],-1)),s("div",Bt,[d.partners.length!==0?(l(),r("span",Mt,[y(_,{"deselect-label":"Selected already",options:d.partners,"track-by":"id",label:"name",modelValue:t.form.new_partner,"onUpdate:modelValue":[e[16]||(e[16]=o=>t.form.new_partner=o),e[17]||(e[17]=o=>t.form.new_partner_id=o==null?void 0:o.id)],"allow-empty":!0},null,8,["options","modelValue"])])):i("",!0),(w=d.errors)!=null&&w.new_partner_id?(l(),r("div",It,a(d.errors.new_partner_id),1)):i("",!0)]),e[75]||(e[75]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"New POP :")],-1)),s("div",Lt,[t.filteredPops.length!==0?(l(),r("span",Ut,[y(_,{"deselect-label":"Selected already",options:t.filteredPops,"track-by":"id",label:"site_name",modelValue:t.form.new_pop,"onUpdate:modelValue":[e[18]||(e[18]=o=>t.form.new_pop=o),e[19]||(e[19]=o=>t.form.new_pop_id=o==null?void 0:o.id)],"allow-empty":!1},null,8,["options","modelValue"])])):(l(),r("span",Et," Please select Partner ")),(x=d.errors)!=null&&x.new_pop_id&&!t.form.new_pop_id?(l(),r("div",Rt,a(d.errors.new_pop_id),1)):i("",!0)]),e[76]||(e[76]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"New OLT :")],-1)),s("div",Ft,[t.popDevices.length!==0?(l(),r("span",zt,[y(_,{"deselect-label":"Selected already",options:t.popDevices,"track-by":"id",label:"device_name",modelValue:t.form.new_pop_device,"onUpdate:modelValue":[e[20]||(e[20]=o=>t.form.new_pop_device=o),e[21]||(e[21]=o=>t.form.new_pop_device_id=o==null?void 0:o.id)],"allow-empty":!1},null,8,["options","modelValue"])])):(l(),r("span",Wt,"Please select POP site")),(P=d.errors)!=null&&P.new_pop_device_id&&!t.form.new_pop_device_id?(l(),r("div",Gt,a(d.errors.new_pop_device_id),1)):i("",!0)]),e[77]||(e[77]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"New DN Splitter :")],-1)),s("div",Kt,[t.dnOptions.length!==0?(l(),r("span",Ht,[y(_,{"deselect-label":"Selected already",options:t.dnOptions,"track-by":"id",label:"name",modelValue:t.form.new_dn_splitter,"onUpdate:modelValue":[e[22]||(e[22]=o=>t.form.new_dn_splitter=o),e[23]||(e[23]=o=>t.form.new_dn_splitter_id=o==null?void 0:o.id)],"allow-empty":!1},null,8,["options","modelValue"])])):(l(),r("span",Jt,"Please select OLT")),(S=d.errors)!=null&&S.new_dn_splitter_id&&!t.form.new_dn_splitter_id?(l(),r("div",Qt,a(d.errors.new_dn_splitter_id),1)):i("",!0)]),e[78]||(e[78]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Current SN Splitter :")],-1)),s("div",Xt,[t.snOptions.length!==0?(l(),r("span",Yt,[y(_,{"deselect-label":"Selected already",options:t.snOptions,"track-by":"id",label:"name",modelValue:t.form.new_sn_splitter,"onUpdate:modelValue":[e[24]||(e[24]=o=>t.form.new_sn_splitter=o),e[25]||(e[25]=o=>t.form.new_sn_splitter_id=o==null?void 0:o.id)],"allow-empty":!0},null,8,["options","modelValue"])])):(l(),r("span",Zt,"Please DN Splitter")),(f=d.errors)!=null&&f.new_sn_splitter_id&&!t.form.new_sn_splitter_id?(l(),r("div",$t,a(d.errors.new_sn_splitter_id),1)):i("",!0)]),e[79]||(e[79]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"SN Port No :")],-1)),s("div",en,[t.snPortNoOptions.length!==0?(l(),r("span",sn,[y(_,{"deselect-label":"Selected already",options:t.snPortNoOptions,"track-by":"id",label:"name",modelValue:t.form.new_port_number,"onUpdate:modelValue":[e[26]||(e[26]=o=>t.form.new_port_number=o),e[27]||(e[27]=o=>t.form.new_port_number_id=o==null?void 0:o.id)],"allow-empty":!0},{singleLabel:L(({option:o})=>[s("strong",null,a(o.name)+" "+a(o.language),1)]),_:1},8,["options","modelValue"])])):(l(),r("span",tn,"Please SN Splitter")),(C=d.errors)!=null&&C.new_port_number_id&&!t.form.new_port_number_id?(l(),r("div",nn,a(d.errors.new_port_number_id),1)):i("",!0)]),e[80]||(e[80]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Assign Subcon :")],-1)),s("div",on,[d.subcons.length!==0&&t.form.new_port_number_id?(l(),r("span",ln,[y(_,{"deselect-label":"Selected already",options:d.subcons,"track-by":"id",label:"name",modelValue:t.form.subcon,"onUpdate:modelValue":[e[28]||(e[28]=o=>t.form.subcon=o),e[29]||(e[29]=o=>t.form.subcon_id=o==null?void 0:o.id)],"allow-empty":!0},null,8,["options","modelValue"])])):(l(),r("span",rn," Please Select SN Splitter Port ")),(T=d.errors)!=null&&T.subcon_id&&!t.form.subcon_id?(l(),r("div",an,a(d.errors.subcon_id),1)):i("",!0)]),e[81]||(e[81]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Assign Date :")],-1)),s("div",dn,[j(s("input",{type:"date","onUpdate:modelValue":e[30]||(e[30]=o=>t.form.assign_date=o),class:"text-gray-600 border-gray-300 rounded-md text-sm"},null,512),[[q,t.form.assign_date]])]),e[82]||(e[82]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Task Status :")],-1)),s("div",cn,[s("label",_n,a(t.getIncidentStatus(t.form.task_status)),1)]),e[83]||(e[83]=s("div",{class:"mb-4 col-span-1 sm:col-span-1 flex items-center"},[s("label",{class:"block text-gray-700 text-sm font-bold"},"Task Complete At :")],-1)),s("div",mn,[s("label",pn,a(t.form.complete_date?t.form.complete_date:"NA"),1)])])])):i("",!0),s("div",un,[s("span",fn,[t.form.type=="relocation"?(l(),r("button",{key:0,onClick:e[31]||(e[31]=(...o)=>t.assign&&t.assign(...o)),type:"button",class:"inline-flex items-center shadow-sm px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},"Assign")):i("",!0)]),t.status=="active"?(l(),r("span",bn,[s("button",{onClick:e[32]||(e[32]=(...o)=>t.submit&&t.submit(...o)),type:"button",class:"inline-flex items-center shadow-sm px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"Process")])):i("",!0),s("span",wn,[s("button",{onClick:e[33]||(e[33]=(...o)=>t.closeModal&&t.closeModal(...o)),type:"button",class:"inline-flex items-center shadow-sm px-4 py-2 bg-gray-300 border border-gray-300 rounded-md font-semibold text-xs text-gray-600 uppercase tracking-widest hover:bg-gray-200 active:bg-gray-400 focus:outline-none focus:border-gray-300 focus:ring focus:ring-gray-200 disabled:opacity-25 transition"},"Close")])])])])],512)):i("",!0)])):i("",!0),d.incidents.links?(l(),r("span",xn,[y(N,{class:"mt-6",links:d.incidents.links},null,8,["links"])])):i("",!0)])]),t.loading?(l(),r("div",gn,e[87]||(e[87]=[s("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),s("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),s("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):i("",!0)]}),_:1})}const Nn=Pe(Se,[["render",yn]]);export{Nn as default};
