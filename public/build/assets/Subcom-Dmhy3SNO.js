import{A as D}from"./AppLayout-DQMHUDA-.js";import{P as B}from"./Pagination-BDaU9i64.js";import{M as L}from"./vue3-multiselect.umd.min-BtFOAPRA.js";import{r as w,K as z,q as V,c as F,w as T,N as v,o as i,a as e,s as a,v as b,L as J,d,g as N,F as R,f as K,h as q,B as S,t as m,e as c,b as _,n as k,y as P,x as O}from"./app-DdoqqyeN.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DupIRA2Y.js";const H={name:"Subcom",components:{AppLayout:D,Pagination:B,Multiselect:L},props:{subcoms:Object,isps:Object,errors:Object,townships:Array},setup(r){const t=w([{range:"1-200",rate:25e3},{range:"201-300",rate:3e4}]),n=z({id:null,name:null,contact_person:null,email:null,phone:null,disabled:0,type:"internal",installation:null,maintenance:null,installation_townships:[],maintenance_townships:[],isps:[],rate:t.value,maintenance_fees:0}),o=()=>{n.rate.push({range:"",rate:""})},U=l=>{n.rate.splice(l,1)},M=l=>{const u=l.split("-");if(u.length===1)return[0,parseInt(u[0].replace("<","").trim(),10)];{const E=parseInt(u[0].trim(),10),j=parseInt(u[1].trim(),10);return[E,j]}},f=w("");let g=w(!1),h=w(!1);function s(){n.name=null,n.contact_person=null,n.email=null,n.phone=null,n.disabled=0,n.type="internal",n.installation=null,n.maintenance=null,n.installation_townships=[],n.maintenance_townships=[],n.isps=[],n.rate=t.value,n.maintenance_fees=0}function x(){g.value?(n._method="PUT",n._method="PUT",v.post("/subcom/"+n.id,n,{onSuccess:l=>{y(),s(),Toast.fire({icon:"success",title:l.props.flash.message})},onError:l=>{console.log("error ..".errors)}})):(n._method="POST",v.post("/subcom",n,{preserveState:!0,onSuccess:l=>{y(),s(),Toast.fire({icon:"success",title:l.props.flash.message})},onError:l=>{console.log("error ..".errors)}}))}function p(l){try{JSON.parse(l)}catch{return!1}return!0}function A(l){n.id=l.id,n.name=l.name,n.contact_person=l.contact_person,n.email=l.email,n.phone=l.phone,n.disabled=l.disabled===1,n.rate=p(l.rate)?JSON.parse(l.rate):t.value,n.installation=l.installation===1,n.maintenance=l.maintenance===1,n.type=l.type,n.installation_townships=l.installation_townships||[],n.maintenance_townships=l.maintenance_townships||[],n.isps=l.isps||[],n.maintenance_fees=l.maintenance_fees,g.value=!0,C()}function I(l){confirm("Are you sure want to remove?")&&(l._method="DELETE",v.post("/subcom/"+l.id,l,{preserveState:!0,onSuccess:u=>{y(),s(),Toast.fire({icon:"success",title:u.props.flash.message})},onError:u=>{y(),console.log("error ..".errors)}}),y(),s())}function C(){h.value=!0}const y=()=>{h.value=!1,s(),g.value=!1};return{form:n,submit:x,editMode:g,isOpen:h,openModal:C,closeModal:y,edit:A,deleteRow:I,searchTsp:()=>{console.log("search value is"+f.value),v.get("/subcom/",{subcom:f.value},{preserveState:!0})},search:f,rateRules:t,addRule:o,removeRule:U,parseRange:M}}},Q={class:"py-12"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},X={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},Y={class:"flex justify-between mb-6"},Z={class:"flex items-center flex-1"},$={class:"w-1/3"},ee={class:"min-w-full divide-y divide-gray-200"},te={class:"bg-white divide-y divide-gray-200"},se={class:"px-6 py-4 whitespace-nowrap"},oe={class:"px-6 py-4 whitespace-nowrap"},ne={class:"px-6 py-4 whitespace-nowrap"},le={class:"px-6 py-4 whitespace-nowrap"},ae={class:"px-6 py-4 whitespace-nowrap"},re=["href"],ie={class:"px-6 py-4 whitespace-nowrap capitalize"},de={class:"px-6 py-4 whitespace-nowrap"},me=["onClick"],ce=["onClick"],pe={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},ue={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},be={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},fe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ge={class:"grid md:grid-cols-2 gap-6"},xe={class:"col-span-1 sm:col-span-1"},ye={class:"mb-4"},he={class:"mb-4"},we={key:0,class:"text-red-500"},ve={class:"mb-4"},_e={key:0,class:"text-red-500"},ke={class:"mb-4"},Ve={key:0,class:"text-red-500"},Se={class:"mb-4"},Ue={key:0,class:"text-red-500"},Me={class:"mb-4"},Ce={key:0,class:"text-red-500"},Ee={class:"mb-4"},Te=["onUpdate:modelValue"],Ne=["onUpdate:modelValue"],Re=["onClick"],Pe={key:0,class:"text-red-500"},Oe={class:"col-span-1 sm:col-span-1"},Ae={class:"mb-4"},Ie={class:"mb-4"},je={class:"mb-4"},De={class:"mt-2 flex"},Be={class:"flex-auto items-center"},Le={class:"flex-auto items-center"},ze={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Fe={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},Je={"wire:click.prevent":"submit",type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},Ke={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},qe={"wire:click.prevent":"submit",type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},Ge={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},He={key:0};function Qe(r,t,n,o,U,M){const f=V("Multiselect"),g=V("pagination"),h=V("app-layout");return i(),F(h,null,{header:T(()=>t[19]||(t[19]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"Subcon Setup",-1)])),default:T(()=>[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",$,[a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.search=s),type:"text",placeholder:"Search subcons...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onKeyup:t[1]||(t[1]=J((...s)=>o.searchTsp&&o.searchTsp(...s),["enter"]))},null,544),[[b,o.search]])])]),e("button",{onClick:t[2]||(t[2]=(...s)=>o.openModal&&o.openModal(...s)),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Add Subcon ")]),e("table",ee,[t[20]||(t[20]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"No."),e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Name"),e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Contact Person"),e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"User"),e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",te,[(i(!0),d(R,null,N(n.subcoms.data,(s,x)=>(i(),d("tr",{key:s.id},[e("td",se,m(n.subcoms.from+x),1),e("td",oe,m(s.name),1),e("td",ne,m(s.contact_person),1),e("td",le,[e("span",{class:k([s.disabled?"bg-red-100 text-red-800":"bg-green-100 text-green-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},m(s.disabled?"Disabled":"Enabled"),3)]),e("td",ae,[e("a",{href:r.route("subcom.show",s.id),class:"text-blue-600 hover:text-blue-900"},m(s.users_count)+" Users ",9,re)]),e("td",ie,m(s.type),1),e("td",de,[e("a",{href:"#",onClick:p=>o.edit(s),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,me),e("a",{href:"#",onClick:p=>o.deleteRow(s),class:"text-red-600 hover:text-red-900"},"Delete",8,ce)])]))),128))])]),o.isOpen?(i(),d("div",pe,[e("div",ue,[t[37]||(t[37]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[38]||(t[38]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),t[39]||(t[39]=K("â€‹ ")),e("div",be,[e("form",{onSubmit:t[18]||(t[18]=q((...s)=>o.submit&&o.submit(...s),["prevent"]))},[e("div",fe,[e("div",ge,[e("div",xe,[e("div",ye,[a(e("input",{class:"text-red-500 w-6 h-6 mr-2 focus:ring-indigo-400 focus:ring-opacity-25 border border-gray-300 rounded",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>o.form.disabled=s)},null,512),[[S,o.form.disabled]]),t[21]||(t[21]=e("label",{for:"disabled",class:"text-gray-700 text-sm font-bold mb-2"},"Disabled :",-1))]),e("div",he,[t[22]||(t[22]=e("label",{for:"name",class:"block text-gray-700 text-sm font-bold mb-2"},"Name :",-1)),a(e("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"name",placeholder:"Enter Name","onUpdate:modelValue":t[4]||(t[4]=s=>o.form.name=s)},null,512),[[b,o.form.name]]),r.$page.props.errors.name?(i(),d("div",we,m(r.$page.props.errors.name),1)):c("",!0)]),e("div",ve,[t[23]||(t[23]=e("label",{for:"contact_person",class:"block text-gray-700 text-sm font-bold mb-2"},"Contact Person :",-1)),a(e("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"contact_person",placeholder:"Enter Contact Person Name","onUpdate:modelValue":t[5]||(t[5]=s=>o.form.contact_person=s)},null,512),[[b,o.form.contact_person]]),r.$page.props.errors.contact_person?(i(),d("div",_e,m(r.$page.props.errors.contact_person),1)):c("",!0)]),e("div",ke,[t[24]||(t[24]=e("label",{for:"email",class:"block text-gray-700 text-sm font-bold mb-2"},"Email :",-1)),a(e("input",{type:"email",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"email",placeholder:"Enter Email","onUpdate:modelValue":t[6]||(t[6]=s=>o.form.email=s)},null,512),[[b,o.form.email]]),r.$page.props.errors.email?(i(),d("div",Ve,m(r.$page.props.errors.email),1)):c("",!0)]),e("div",Se,[t[25]||(t[25]=e("label",{for:"phone",class:"block text-gray-700 text-sm font-bold mb-2"},"Phone :",-1)),a(e("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"phone",placeholder:"Enter Phone No.","onUpdate:modelValue":t[7]||(t[7]=s=>o.form.phone=s)},null,512),[[b,o.form.phone]]),r.$page.props.errors.phone?(i(),d("div",Ue,m(r.$page.props.errors.phone),1)):c("",!0)]),e("div",Me,[t[26]||(t[26]=e("label",{for:"maintenance_fees",class:"block text-gray-700 text-sm font-bold mb-2"},"Maintenance Rate :",-1)),a(e("input",{type:"number",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"maintenance_fees",placeholder:"Enter Maintanence","onUpdate:modelValue":t[8]||(t[8]=s=>o.form.maintenance_fees=s)},null,512),[[b,o.form.maintenance_fees]]),r.$page.props.errors.maintenance_fees?(i(),d("div",Ce,m(r.$page.props.errors.maintenance_fees),1)):c("",!0)]),t[31]||(t[31]=e("label",{for:"rate",class:"block text-gray-700 text-md font-bold"},"Installation Rate ",-1)),e("div",Ee,[o.form.rate?(i(!0),d(R,{key:0},N(o.form.rate,(s,x)=>(i(),d("div",{key:x,class:"rule inline-flex items-center"},[t[28]||(t[28]=e("label",{class:"block text-gray-700 text-sm font-bold"},"Range:",-1)),a(e("input",{type:"text","onUpdate:modelValue":p=>s.range=p,pattern:"^(<\\d+|>\\d+|\\d+-\\d+)$",placeholder:"e.g., <200",class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full m-4 shadow-sm sm:text-sm border-gray-300 rounded-md"},null,8,Te),[[b,s.range]]),t[29]||(t[29]=e("label",{class:"block text-gray-700 text-sm font-bold"},"Rate:",-1)),a(e("input",{type:"number","onUpdate:modelValue":p=>s.rate=p,placeholder:"e.g., 25000",class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full m-4 shadow-sm sm:text-sm border-gray-300 rounded-md"},null,8,Ne),[[b,s.rate]]),e("button",{type:"button",onClick:p=>o.removeRule(x),class:"btn"},t[27]||(t[27]=[e("i",{class:"fas fa-minus-circle text-yellow-600"},null,-1)]),8,Re)]))),128)):c("",!0),e("button",{type:"button",onClick:t[9]||(t[9]=(...s)=>o.addRule&&o.addRule(...s)),class:"btn"},t[30]||(t[30]=[e("i",{class:"fas fa-plus-circle text-indigo-600"},null,-1)]))]),r.$page.props.errors.rate?(i(),d("div",Pe,m(r.$page.props.errors.rate),1)):c("",!0)]),e("div",Oe,[e("div",Ae,[a(e("input",{class:"text-indigo-500 w-6 h-6 mr-2 focus:ring-indigo-400 focus:ring-opacity-25 border border-gray-300 rounded",type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=s=>o.form.installation=s),id:"installation"},null,512),[[S,o.form.installation]]),t[32]||(t[32]=e("label",{class:"text-gray-700 text-sm font-bold mb-2"},"Assign Installation :",-1)),_(f,{modelValue:o.form.installation_townships,"onUpdate:modelValue":t[11]||(t[11]=s=>o.form.installation_townships=s),options:n.townships,multiple:!0,"track-by":"id",label:"name",placeholder:"Select townships",class:k(["mt-1",{invisible:!o.form.installation}]),disabled:!o.form.installation},null,8,["modelValue","options","disabled","class"])]),e("div",Ie,[a(e("input",{class:"ml-4text-indigo-500 w-6 h-6 mr-2 focus:ring-indigo-400 focus:ring-opacity-25 border border-gray-300 rounded",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=s=>o.form.maintenance=s),id:"maintenance"},null,512),[[S,o.form.maintenance]]),t[33]||(t[33]=e("label",{class:"text-gray-700 text-sm font-bold mb-2"},"Assign Maintenance:",-1)),_(f,{modelValue:o.form.maintenance_townships,"onUpdate:modelValue":t[13]||(t[13]=s=>o.form.maintenance_townships=s),options:n.townships,multiple:!0,"track-by":"id",label:"name",placeholder:"Select townships",class:k(["mt-1",{invisible:!o.form.maintenance}]),disabled:!o.form.maintenance},null,8,["modelValue","options","disabled","class"])]),e("div",je,[t[36]||(t[36]=e("label",{for:"phone",class:"block text-gray-700 text-sm font-bold mb-2"},"Type :",-1)),e("div",De,[e("label",Be,[a(e("input",{type:"radio",class:"form-radio h-5 w-5 text-blue-600",checked:"",name:"type","onUpdate:modelValue":t[14]||(t[14]=s=>o.form.type=s),value:"internal"},null,512),[[P,o.form.type]]),t[34]||(t[34]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Internal",-1))]),e("label",Le,[a(e("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:"type","onUpdate:modelValue":t[15]||(t[15]=s=>o.form.type=s),value:"external"},null,512),[[P,o.form.type]]),t[35]||(t[35]=e("span",{class:"ml-2 text-gray-700 text-sm"},"External",-1))])]),_(f,{modelValue:o.form.isps,"onUpdate:modelValue":t[16]||(t[16]=s=>o.form.isps=s),options:n.isps,multiple:!0,"track-by":"id",label:"name",placeholder:"Select ISP",class:k(["mt-1",{invisible:o.form.type=="internal"}]),disabled:o.form.type=="internal"},null,8,["modelValue","options","disabled","class"])])])])]),e("div",ze,[e("span",Fe,[a(e("button",Je," Save ",512),[[O,!o.editMode]])]),e("span",Ke,[a(e("button",qe," Update ",512),[[O,o.editMode]])]),e("span",Ge,[e("button",{onClick:t[17]||(t[17]=(...s)=>o.closeModal&&o.closeModal(...s)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):c("",!0)]),n.subcoms.links?(i(),d("span",He,[_(g,{class:"mt-6",links:n.subcoms.links},null,8,["links"])])):c("",!0)])])]),_:1})}const st=G(H,[["render",Qe]]);export{st as default};
