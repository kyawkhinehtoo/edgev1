import{r as k,T as w,x as V,c as S,w as f,o as d,a as s,i as P,j as x,k as y,u as o,d as i,t as r,e as a,b as n,v as C,f as D,m as N}from"./app-D4kHwI1v.js";import{A as _}from"./AppLayout-ldcU5hlp.js";import{M as u}from"./vue3-multiselect.umd.min-BHxOkaZP.js";import"./DropdownLink-XYJmGyPC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"py-12"},B={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},A={class:"grid grid-cols-1 gap-6"},L={class:"grid grid-cols-2 gap-2"},M={key:0,class:"text-red-500 text-sm mt-1"},j={key:0,class:"text-red-500 text-sm mt-1"},T={key:0,class:"text-red-500 text-sm mt-1"},E={key:0,class:"text-red-500 text-sm mt-1"},F={key:0,class:"text-red-500 text-sm mt-1"},I={key:0,class:"text-red-500 text-sm mt-1"},q={class:"flex justify-end space-x-3"},z=["disabled"],R={__name:"Create",props:{pops:Object,dnBoxes:Array,fiberCables:Array},setup(p){const b=k([]),t=w({name:"",pop:"",pop_id:"",pop_device:"",pop_device_id:"",dn:"",dn_id:"",fiber:"",fiber_id:"",core:"",core_number:"",location:"",status:"active"}),c=Array.from({length:96},(m,e)=>{const l=(e+1).toString();return{id:l,name:l}}),g=()=>{t.post(route("dn-splitters.store"),{onSuccess:()=>{t.reset()}})},v=async()=>{if(!t.pop_id){b.value=[];return}try{const e=await(await fetch(`/getOLTByPOP/${t.pop_id}`)).json();b.value=e||[],console.log("fetch POP Devices")}catch(m){console.error("Failed to fetch POP devices",m)}};return V(()=>t.pop_id,()=>{v(),t.pop_device=null,t.pop_device_id=null}),(m,e)=>(d(),S(_,{title:"Create DN Splitter"},{header:f(()=>e[13]||(e[13]=[s("h2",{class:"font-semibold text-xl text-white leading-tight"}," Create DN Splitter ",-1)])),default:f(()=>[s("div",U,[s("div",B,[s("div",O,[s("form",{onSubmit:P(g,["prevent"])},[s("div",A,[s("div",L,[s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),x(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>o(t).name=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[y,o(t).name]]),o(t).errors.name?(d(),i("div",M,r(o(t).errors.name),1)):a("",!0)]),s("div",null,[e[15]||(e[15]=s("label",{class:"block text-sm font-medium text-gray-700"},"Distribution Node",-1)),n(o(u),{"deselect-label":"Selected already",options:p.dnBoxes,"track-by":"id",label:"name",modelValue:o(t).dn,"onUpdate:modelValue":[e[1]||(e[1]=l=>o(t).dn=l),e[2]||(e[2]=l=>o(t).dn_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"2"},null,8,["options","modelValue"]),o(t).errors.dn_id?(d(),i("div",j,r(o(t).errors.dn_id),1)):a("",!0)]),s("div",null,[e[16]||(e[16]=s("label",{class:"block text-sm font-medium text-gray-700"},"POP Site",-1)),n(o(u),{"deselect-label":"Selected already",options:p.pops,"track-by":"id",label:"site_name",modelValue:o(t).pop,"onUpdate:modelValue":[e[3]||(e[3]=l=>o(t).pop=l),e[4]||(e[4]=l=>o(t).pop_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"2"},null,8,["options","modelValue"])]),s("div",null,[e[17]||(e[17]=s("label",{class:"block text-sm font-medium text-gray-700"},"POP Device",-1)),n(o(u),{"deselect-label":"Selected already",options:b.value,"track-by":"id",label:"device_name",modelValue:o(t).pop_device,"onUpdate:modelValue":[e[5]||(e[5]=l=>o(t).pop_device=l),e[6]||(e[6]=l=>o(t).pop_device_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"2"},null,8,["options","modelValue"])]),s("div",null,[e[18]||(e[18]=s("label",{class:"block text-sm font-medium text-gray-700"},"Source Fiber Cable",-1)),n(o(u),{"deselect-label":"Selected already",options:p.fiberCables,"track-by":"id",label:"name",modelValue:o(t).fiber,"onUpdate:modelValue":[e[7]||(e[7]=l=>o(t).fiber=l),e[8]||(e[8]=l=>o(t).fiber_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"3"},null,8,["options","modelValue"]),o(t).errors.fiber_id?(d(),i("div",T,r(o(t).errors.fiber_id),1)):a("",!0)]),s("div",null,[e[19]||(e[19]=s("label",{class:"block text-sm font-medium text-gray-700"},"Core Number",-1)),n(o(u),{"deselect-label":"Selected already",options:o(c),"track-by":"id",label:"name",modelValue:o(t).core,"onUpdate:modelValue":[e[9]||(e[9]=l=>o(t).core=l),e[10]||(e[10]=l=>o(t).core_number=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"4"},null,8,["options","modelValue"]),o(t).errors.core_number?(d(),i("div",E,r(o(t).errors.core_number),1)):a("",!0)])]),s("div",null,[e[20]||(e[20]=s("label",{class:"block text-sm font-medium text-gray-700"},"Location (Latitude, Longitude)",-1)),x(s("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=l=>o(t).location=l),placeholder:"e.g. 16.8661, 96.1951",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[y,o(t).location]]),o(t).errors.location?(d(),i("div",F,r(o(t).errors.location),1)):a("",!0),e[21]||(e[21]=s("p",{class:"mt-1 text-sm text-gray-500"},"Enter latitude (-90 to 90) and longitude (-180 to 180) separated by comma",-1))]),s("div",null,[e[23]||(e[23]=s("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),x(s("select",{"onUpdate:modelValue":e[12]||(e[12]=l=>o(t).status=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},e[22]||(e[22]=[s("option",{value:"active"},"Active",-1),s("option",{value:"plan"},"Plan",-1),s("option",{value:"inactive"},"Inactive",-1)]),512),[[C,o(t).status]]),o(t).errors.status?(d(),i("div",I,r(o(t).errors.status),1)):a("",!0)]),s("div",q,[n(o(N),{href:m.route("dn-splitters.index"),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},{default:f(()=>e[24]||(e[24]=[D(" Cancel ")])),_:1},8,["href"]),s("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:o(t).processing}," Create ",8,z)])])],32)])])])]),_:1}))}};export{R as default};
