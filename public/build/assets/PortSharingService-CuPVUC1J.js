import{A as j}from"./AppLayout-CI4wi3GC.js";import{P as F}from"./Pagination-QHkpW2DY.js";import{r as h,Q as A,p as U,c as L,w as N,N as w,o as i,a as e,q as n,v as y,M as z,d,F as S,g as C,f as V,h as B,L as p,e as g,z as H,s as P,b as J,n as q,t as c}from"./app-gOgVOHRJ.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CQV_2l3i.js";const Q={name:"port-sharing-service",components:{AppLayout:j,Pagination:F},props:{services:Object,errors:Object},setup(D){const t=h([{min:1e4,fees:8e3},{min:10001,fees:7500}]),l=A({id:null,name:null,short_code:null,max_speed:null,rate:t.value,type:"FTTH",currency:"mmk",status:!0}),o=h("");let b=h(!1),v=h(!1);function u(){l.id=null,l.name=null,l.short_code=null,l.max_speed=null,l.rate=t.value,l.type="FTTH",l.currency="mmk",l.status=!0}const _=()=>{l.rate.push({min:"",fess:""})},s=r=>{l.rate.splice(r,1)},f=r=>{const a=r.split("-");if(a.length===1)return[0,parseInt(a[0].replace("<","").trim(),10)];{const T=parseInt(a[0].trim(),10),O=parseInt(a[1].trim(),10);return[T,O]}};function m(r){try{JSON.parse(r)}catch{return!1}return!0}function k(){b.value?(l._method="PUT",w.post("/port-sharing-service/"+l.id,l,{onSuccess:r=>{x(),u(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}})):(l._method="POST",w.post("/port-sharing-service",l,{preserveState:!0,onSuccess:r=>{x(),u(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}}))}function R(r){l.id=r.id,l.name=r.name,l.short_code=r.short_code,l.max_speed=r.max_speed,l.rate=m(r.rate)?JSON.parse(r.rate):t.value,l.type=r.type,l.currency=r.currency||"mmk",l.status=r.status==1,b.value=!0,M()}function E(r){r=r||window.event;var a=r.which?r.which:r.keyCode;if(a>31&&(a<48||a>57)&&a!==46)r.preventDefault();else return!0}function I(r){confirm("Are you sure want to remove?")&&(r._method="DELETE",w.post("/port-sharing-service/"+r.id,r,{preserveState:!0,onSuccess:a=>{x(),u(),Toast.fire({icon:"success",title:a.props.flash.message})},onError:a=>{x(),console.log("error ..",a)}}),x(),u())}function M(){v.value=!0}const x=()=>{v.value=!1,u(),b.value=!1};return{form:l,submit:k,editMode:b,isOpen:v,openModal:M,closeModal:x,edit:R,deleteRow:I,searchService:()=>{w.get("/port-sharing-service",{service:o.value},{preserveState:!0})},isNumber:E,search:o,rateRules:t,addRule:_,removeRule:s,parseRange:f,isJsonString:m}}},G={class:"py-2"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},X={class:"flex justify-between space-x-2 items-end mb-2 px-1 md:px-0"},Y={class:"relative flex flex-wrap z-0"},Z={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},$={class:"min-w-full divide-y divide-gray-200"},ee={class:"bg-white divide-y divide-gray-200 text-sm"},te={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},se={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},oe={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},re={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},le={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap uppercase"},ne={class:"px-3 py-3 text-left text-md font-medium whitespace-nowrap"},ae={class:"px-3 py-3 text-left text-md font-medium"},ie={key:0,class:"flex flex-wrap gap-1"},de={class:"font-semibold"},me={class:"ml-1 font-semibold"},ce={class:"ml-1 uppercase"},ue={key:1},pe={class:"px-3 py-3 text-md font-medium whitespace-nowrap text-right"},fe=["onClick"],xe=["onClick"],ye={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},ge={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},be={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},ve={class:"shadow sm:rounded-md sm:overflow-hidden"},he={class:"px-4 py-5 bg-white space-y-6 sm:p-6"},we={class:"col-span-1 sm:col-span-1"},_e={class:"py-2 grid grid-cols-3 gap-2"},ke={class:"col-span-2"},Se={class:"mt-1 flex rounded-md shadow-sm"},Ce={class:"col-span-1"},Ve={class:"mt-1 flex rounded-md shadow-sm"},Me={class:"py-2"},Te={class:"mt-1 flex rounded-md shadow-sm"},Ue={class:"py-2"},Ne={class:"mt-1 flex"},Pe={class:"flex-auto items-center mt-3"},De={class:"flex-auto items-center mt-3"},Re={class:"flex-auto items-center mt-3"},Ee={class:"flex-auto items-center mt-3"},Ie={class:"py-2"},Oe={class:"mt-2 flex"},je={class:"flex-auto items-center"},Fe={class:"flex-auto items-center"},Ae={class:"flex-auto items-center"},Le={class:"mb-4"},ze={class:"mt-1 flex rounded-md shadow-sm"},Be=["onUpdate:modelValue"],He={class:"mt-1 flex rounded-md shadow-sm"},Je=["onUpdate:modelValue"],qe={class:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm uppercase"},Ke=["onClick"],Qe={class:"py-2"},Ge={class:"mt-1 flex"},We={key:0,class:"flex-auto items-center ml-1"},Xe={key:1,class:"flex-auto items-center ml-1"},Ye={class:"px-4 py-3 bg-gray-50 text-right sm:px-6"},Ze={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},$e={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},et={type:"submit",class:"inline-flex justify-center w-full px-4 py-2 bg-gray-800 border border-gray-300 rounded-md font-medium text-base leading-6 sm:text-sm text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150"},tt={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},st={type:"submit",class:"inline-flex justify-center w-full px-4 py-2 bg-gray-800 border border-gray-300 rounded-md font-medium text-base leading-6 sm:text-sm text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150"},ot={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},rt={key:1};function lt(D,t,l,o,b,v){const u=U("pagination"),_=U("app-layout");return i(),L(_,null,{header:N(()=>t[18]||(t[18]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"Port Sharing Services Setup",-1)])),default:N(()=>[e("div",G,[e("div",W,[e("div",X,[e("div",Y,[t[19]||(t[19]=e("span",{class:"z-10 h-full leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-search"})],-1)),n(e("input",{type:"text",placeholder:"Search here...",class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:ring w-full pl-10",id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>o.search=s),onKeyup:t[1]||(t[1]=z((...s)=>o.searchService&&o.searchService(...s),["enter"]))},null,544),[[y,o.search]])]),e("button",{onClick:t[2]||(t[2]=(...s)=>o.openModal&&o.openModal(...s)),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"Create")]),l.services.data?(i(),d("div",Z,[e("table",$,[t[22]||(t[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No. "),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Service Name"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Short Code"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Service Type"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Max Speed"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Prices"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Action")])])],-1)),e("tbody",ee,[(i(!0),d(S,null,C(l.services.data,(s,f)=>(i(),d("tr",{key:s.id,class:q({"text-gray-400":!s.status})},[e("td",te,c(l.services.from+f),1),e("td",se,c(s.name),1),e("td",oe,[e("span",re,c(s.short_code),1)]),e("td",le,c(s.type),1),e("td",ne,c(s.max_speed)+" Mbps ",1),e("td",ae,[o.isJsonString(s.rate)?(i(),d("div",ie,[(i(!0),d(S,null,C(JSON.parse(s.rate),(m,k)=>(i(),d("span",{key:k,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[e("span",de,c(m.min),1),t[20]||(t[20]=V("  Ports: ")),e("span",me,c(m.fees),1),e("span",ce,c(s.currency),1)]))),128))])):(i(),d("span",ue,c(s.rate),1))]),e("td",pe,[e("a",{href:"#",onClick:m=>o.edit(s),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,fe),t[21]||(t[21]=V(" | ")),e("a",{href:"#",onClick:m=>o.deleteRow(s),class:"text-red-600 hover:text-red-900"},"Delete",8,xe)])],2))),128))])]),o.isOpen?(i(),d("div",ye,[e("div",ge,[t[42]||(t[42]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[43]||(t[43]=V(" ​ ")),e("div",be,[e("form",{onSubmit:t[17]||(t[17]=B((...s)=>o.submit&&o.submit(...s),["prevent"]))},[e("div",ve,[e("div",he,[e("div",we,[e("div",_e,[e("div",ke,[t[23]||(t[23]=e("label",{for:"name",class:"block text-md font-medium text-gray-700"},"Service Name",-1)),e("div",Se,[n(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.form.name=s),name:"name",id:"name",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Service Name",required:""},null,512),[[y,o.form.name]])])]),e("div",Ce,[t[24]||(t[24]=e("label",{for:"short_code",class:"block text-md font-medium text-gray-700"},"Short Code",-1)),e("div",Ve,[n(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>o.form.short_code=s),name:"short_code",id:"short_code",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Short Code",required:""},null,512),[[y,o.form.short_code]])])])]),e("div",Me,[t[26]||(t[26]=e("label",{for:"max_speed",class:"block text-md font-medium text-gray-700"},"Max Speed",-1)),e("div",Te,[n(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>o.form.max_speed=s),name:"max_speed",id:"max_speed",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300",placeholder:"Max Speed",onKeypress:t[6]||(t[6]=s=>o.isNumber(s)),required:""},null,544),[[y,o.form.max_speed]]),t[25]||(t[25]=e("span",{class:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"}," Mbps ",-1))])]),e("div",Ue,[t[31]||(t[31]=e("label",{for:"type",class:"block text-md font-medium text-gray-700"},"Service Type",-1)),e("div",Ne,[e("label",Pe,[n(e("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:"type","onUpdate:modelValue":t[7]||(t[7]=s=>o.form.type=s),value:"FTTH"},null,512),[[p,o.form.type]]),t[27]||(t[27]=e("span",{class:"ml-2 text-gray-700"},"FTTH",-1))]),e("label",De,[n(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:"type","onUpdate:modelValue":t[8]||(t[8]=s=>o.form.type=s),value:"DIA"},null,512),[[p,o.form.type]]),t[28]||(t[28]=e("span",{class:"ml-2 text-gray-700"},"DIA",-1))]),e("label",Re,[n(e("input",{type:"radio",class:"form-radio h-5 w-5 text-blue-600",name:"type","onUpdate:modelValue":t[9]||(t[9]=s=>o.form.type=s),value:"DPLC"},null,512),[[p,o.form.type]]),t[29]||(t[29]=e("span",{class:"ml-2 text-gray-700"},"DPLC",-1))]),e("label",Ee,[n(e("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:"type","onUpdate:modelValue":t[10]||(t[10]=s=>o.form.type=s),value:"IPVPN"},null,512),[[p,o.form.type]]),t[30]||(t[30]=e("span",{class:"ml-2 text-gray-700"},"IPVPN",-1))])])]),e("div",Ie,[t[35]||(t[35]=e("label",{for:"currency",class:"block text-md font-medium text-gray-700"},"Currency ",-1)),e("div",Oe,[e("label",je,[n(e("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:"currency","onUpdate:modelValue":t[11]||(t[11]=s=>o.form.currency=s),value:"mmk"},null,512),[[p,o.form.currency]]),t[32]||(t[32]=e("span",{class:"ml-2 text-gray-700 text-sm"},"MMK",-1))]),e("label",Fe,[n(e("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:"currency","onUpdate:modelValue":t[12]||(t[12]=s=>o.form.currency=s),value:"usd"},null,512),[[p,o.form.currency]]),t[33]||(t[33]=e("span",{class:"ml-2 text-gray-700 text-sm"},"USD",-1))]),e("label",Ae,[n(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:"currency","onUpdate:modelValue":t[13]||(t[13]=s=>o.form.currency=s),value:"baht"},null,512),[[p,o.form.currency]]),t[34]||(t[34]=e("span",{class:"ml-2 text-gray-700 text-sm"},"THB",-1))])])]),t[41]||(t[41]=e("label",{for:"rate",class:"block text-gray-700 text-md font-bold"},"Installation Rate ",-1)),e("div",Le,[o.form.rate?(i(!0),d(S,{key:0},C(o.form.rate,(s,f)=>(i(),d("div",{key:f,class:"rule inline-flex items-center"},[t[37]||(t[37]=e("label",{class:"block text-gray-700 text-sm font-bold"},"Ports:",-1)),e("div",ze,[n(e("input",{type:"number","onUpdate:modelValue":m=>s.min=m,placeholder:"e.g., 10000",class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full m-4 shadow-sm sm:text-sm border-gray-300 rounded-md"},null,8,Be),[[y,s.min]])]),t[38]||(t[38]=e("label",{class:"block text-gray-700 text-sm font-bold mr-2"},"Fees : ",-1)),e("div",He,[n(e("input",{type:"number","onUpdate:modelValue":m=>s.fees=m,placeholder:"e.g., 25000",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300"},null,8,Je),[[y,s.fees]]),e("span",qe,c(o.form.currency),1)]),e("button",{type:"button",onClick:m=>o.removeRule(f),class:"m-2 btn"},t[36]||(t[36]=[e("i",{class:"fas fa-minus-circle text-yellow-600"},null,-1)]),8,Ke)]))),128)):g("",!0),e("button",{type:"button",onClick:t[14]||(t[14]=(...s)=>o.addRule&&o.addRule(...s)),class:"m-2 btn"},t[39]||(t[39]=[e("i",{class:"fas fa-plus-circle text-indigo-600"},null,-1)]))]),e("div",Qe,[t[40]||(t[40]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",Ge,[n(e("input",{type:"checkbox",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded mt-1",name:"status","onUpdate:modelValue":t[15]||(t[15]=s=>o.form.status=s),value:"true"},null,512),[[H,o.form.status]]),o.form.status==!0?(i(),d("label",We,"Enabled")):g("",!0),o.form.status==!1?(i(),d("label",Xe,"Disabled")):g("",!0)])])])]),e("div",Ye,[e("div",Ze,[e("span",$e,[n(e("button",et,"Save",512),[[P,!o.editMode]])]),e("span",tt,[n(e("button",st,"Update",512),[[P,o.editMode]])]),e("span",ot,[e("button",{onClick:t[16]||(t[16]=(...s)=>o.closeModal&&o.closeModal(...s)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Cancel")])])])])],32)])])],512)):g("",!0)])):g("",!0),l.services.links?(i(),d("span",rt,[J(u,{class:"mt-6",links:l.services.links},null,8,["links"])])):g("",!0)])])]),_:1})}const ut=K(Q,[["render",lt],["__scopeId","data-v-3c22b32c"]]);export{ut as default};
