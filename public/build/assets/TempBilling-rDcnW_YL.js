import{r as b,T as F,c as S,w as y,K as j,o as p,a as e,t as n,f as g,d as f,g as L,F as D,b as h,s as M,v as R,u as w,e as $,i as U}from"./app-XjIQHOyI.js";import{A as V}from"./AppLayout-Dk4wOMIn.js";import{P as O}from"./Pagination-MUHNSnsW.js";import P from"./EditTempInvoice-BzBwNsGU.js";import"./DropdownLink-XC1d7OME.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"py-12"},G={class:"mx-auto sm:px-6 lg:px-8"},K={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},q={class:"flex justify-between items-center mb-4"},H={class:"text-xl font-semibold text-gray-600 mb-2"},J={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},X={class:"px-3 py-4 whitespace-nowrap"},Y={class:"px-3 py-4 whitespace-nowrap text-center"},Z={class:"px-2 py-1 text-sm font-bold rounded-full bg-blue-100 text-blue-800"},ee={class:"px-3 py-4 whitespace-nowrap text-right"},te={class:"px-3 py-4 whitespace-nowrap text-center"},se={class:"px-2 py-1 text-sm font-bold rounded-full bg-green-100 text-green-800"},oe={class:"px-3 py-4 whitespace-nowrap text-right"},ne={class:"px-3 py-4 whitespace-nowrap text-right"},ie={class:"px-3 py-4 whitespace-nowrap text-right"},re={class:"px-3 py-4 whitespace-nowrap text-right"},ae={class:"px-3 py-4 whitespace-nowrap text-right font-medium"},le={class:"px-3 py-4 whitespace-nowrap text-center space-x-2"},de=["onClick"],ce=["href"],pe={class:"mt-4"},me={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ue={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},xe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ge={class:""},fe={class:"mb-4"},be={key:0,class:"text-red-500"},Te={__name:"TempBilling",props:{tempInvoices:Object,packages:Array,townships:Array,status:Array,bill:Array},setup(m,{expose:A}){var E,N;const _=m,u=b(!1),x=b(null),r=b(!1),a=F({bill_name:(N=(E=_.tempInvoices.data[0])==null?void 0:E.temp_bill)==null?void 0:N.bill_number}),l=o=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o||0),v=o=>{x.value=o,u.value=!0},k=()=>{u.value=!1,x.value=null},C=()=>{r.value=!0},T=()=>{a.post("/saveFinal",{onSuccess:o=>{Toast.fire({icon:"success",title:o.props.flash.message}),r.value=!1,a.reset()},onError:o=>{console.log(o),a.errors=o.errors}})},B=()=>{r.value=!1},I=()=>{j.post("/exportTempBillingExcel",{},{responseType:"blob",headers:{"Content-Type":"application/json"}}).then(o=>{var s,c;const t=new Blob([o.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=window.URL.createObjectURL(t),i=document.createElement("a");i.href=d,i.download=`temp_billings_${(c=(s=_.tempInvoices.data[0])==null?void 0:s.temp_bill)==null?void 0:c.bill_number}_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(d)}).catch(o=>{console.error("Export failed:",o)})};return A({form:a,showEditModal:u,selectedInvoice:x,openBillName:r,formatNumber:l,openEditModal:v,closeEditModal:k,doSave:C,doExcel:I,saveFinal:T,closeFinal:B}),(o,t)=>(p(),S(V,{title:"Temporary Billing"},{header:y(()=>t[1]||(t[1]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"}," Temporary Billing List ",-1)])),default:y(()=>{var d,i;return[e("div",z,[e("div",G,[e("div",K,[e("div",q,[e("h2",H,"Bill Number : "+n((i=(d=m.tempInvoices.data[0])==null?void 0:d.temp_bill)==null?void 0:i.bill_number),1),e("div",{class:"space-x-2"},[e("a",{onClick:C,class:"cursor-pointer inline-flex items-center px-3 py-3 bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-700 active:bg-yellow-800 focus:outline-none focus:border-yellow-800 focus:ring focus:ring-yellow-300 disabled:opacity-25 transition"},t[2]||(t[2]=[g("Save Final "),e("i",{class:"ml-1 fa fa-save text-white"},null,-1)])),e("a",{onClick:I,class:"cursor-pointer inline-flex items-center px-3 py-3 bg-green-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},t[3]||(t[3]=[g("Export "),e("i",{class:"ml-1 fa fa-download text-white"},null,-1)]))])]),e("div",J,[e("table",Q,[t[6]||(t[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ISP "),e("th",{class:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," MRC Customers "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," MRC Amount "),e("th",{class:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," New Customers "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Installation Amount "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sub Total "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tax (%) "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Discount "),e("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Amount "),e("th",{class:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",W,[(p(!0),f(D,null,L(m.tempInvoices.data,s=>{var c;return p(),f("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",X,n((c=s.isp)==null?void 0:c.name),1),e("td",Y,[e("span",Z,n(s.total_mrc_customer),1)]),e("td",ee,"$"+n(l(s.total_mrc_amount)),1),e("td",te,[e("span",se,n(s.total_new_customer),1)]),e("td",oe,"$"+n(l(s.total_installation_amount)),1),e("td",ne,"$"+n(l(s.sub_total)),1),e("td",ie,n(s.tax_percent)+"%",1),e("td",re,"$"+n(l(s.discount_amount)),1),e("td",ae,"$"+n(l(s.total_amount)),1),e("td",le,[h(w(U),{href:o.route("tempInvoice.details",s.id),class:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:y(()=>t[4]||(t[4]=[g(" View ")])),_:2},1032,["href"]),e("button",{onClick:ye=>v(s),class:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Edit ",8,de),e("a",{href:`/pdfpreview1/${s.id}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"},t[5]||(t[5]=[e("span",null,"Invoice",-1)]),8,ce)])])}),128))])])]),e("div",pe,[h(O,{links:m.tempInvoices.links},null,8,["links"])])])])]),h(P,{show:u.value,invoice:x.value,onClose:k},null,8,["show","invoice"]),r.value?(p(),f("div",{key:0,ref_key:"openBillName",ref:r,class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},[e("div",me,[t[8]||(t[8]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[9]||(t[9]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),t[10]||(t[10]=g("â€‹ ")),e("div",ue,[e("div",xe,[e("div",ge,[e("div",fe,[t[7]||(t[7]=e("label",{for:"name",class:"block text-gray-700 text-sm font-bold mb-2"},"Bill Name:",-1)),M(e("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"name",placeholder:"Enter Bill Name","onUpdate:modelValue":t[0]||(t[0]=s=>w(a).bill_name=s)},null,512),[[R,w(a).bill_name]]),o.$page.props.errors.bill_name?(p(),f("div",be,n(o.$page.props.errors.bill_name),1)):$("",!0)])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("span",{class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},[e("button",{onClick:T,type:"button",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"GO !")]),e("span",{class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},[e("button",{onClick:B,type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Cancel")])])])])],512)):$("",!0)]}),_:1}))}};export{Te as default};
