import{A as q}from"./AppLayout-cORlJp66.js";import{R as E,r as p,z,c as g,w as A,N as Q,o,a as t,i as G,j as u,A as M,k as R,d as a,t as n,e as i,F as j,g as O}from"./app-DIQ69jzl.js";import{P as H}from"./Pagination-DqtzgRE-.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-BMn-Czyd.js";const J={name:"NearbySnSplitter",components:{AppLayout:q,Pagination:H},setup(){const r=E(),e=p(r.props.type||"sn_splitter"),m=p(r.props.location||""),s=p(r.props.radius||10),h=p(r.props.splitters||[]),f=p(r.props.dnBoxes||[]),d=p(r.props.error||null);function _(y){return/^\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?\s*$/.test(y)}function x(){if(!_(m.value)){d.value="Please enter a valid location in 'lat,lng' format.";return}d.value=null,Q.get("/sn/nearby",{location:m.value,radius:s.value,type:e.value},{preserveState:!1,replace:!0})}return{location:m,type:e,radius:s,splitters:h,dnBoxes:f,error:d,searchNearby:x}}},K={class:"py-2"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},X={class:"bg-white shadow sm:rounded-lg p-6"},Y={class:"grid grid-cols-1 sm:grid-cols-4 gap-4 mb-4"},Z={class:"flex items-center space-x-4 mt-1"},$={class:"inline-flex items-center"},tt={class:"inline-flex items-center"},st={key:0,class:"text-red-500 mb-4"},et={key:1},lt={class:"min-w-full divide-y divide-gray-200 text-sm"},nt={class:"px-4 py-2"},ot={class:"px-4 py-2"},at={class:"px-4 py-2"},it={class:"px-4 py-2"},rt={class:"px-4 py-2"},dt={class:"px-4 py-2"},pt={class:"px-4 py-2"},ct={class:"px-4 py-2"},mt={class:"px-4 py-2 capitalize"},xt={key:0,class:"block mt-4 text-xs text-gray-600"},yt={key:2},ut={class:"min-w-full divide-y divide-gray-200 text-sm"},_t={class:"px-4 py-2"},bt={class:"px-4 py-2"},gt={class:"px-4 py-2"},ht={class:"px-4 py-2"},ft={class:"px-4 py-2"},vt={class:"px-4 py-2"},kt={class:"px-4 py-2 capitalize"},Nt={key:0,class:"block mt-4 text-xs text-gray-600"},Bt={key:3,class:"text-gray-500"};function St(r,e,m,s,h,f){const d=z("pagination"),_=z("app-layout");return o(),g(_,null,{header:A(()=>e[5]||(e[5]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"}," Feasibility Checker ",-1)])),default:A(()=>{var x,y,b,v;return[t("div",K,[t("div",W,[t("div",X,[t("form",{onSubmit:e[4]||(e[4]=G((...l)=>s.searchNearby&&s.searchNearby(...l),["prevent"]))},[t("div",Y,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Type",-1)),t("div",Z,[t("label",$,[u(t("input",{type:"radio",class:"form-radio",value:"cabinet","onUpdate:modelValue":e[0]||(e[0]=l=>s.type=l)},null,512),[[M,s.type]]),e[6]||(e[6]=t("span",{class:"ml-2"},"Cabinet",-1))]),t("label",tt,[u(t("input",{type:"radio",class:"form-radio",value:"sn_splitter","onUpdate:modelValue":e[1]||(e[1]=l=>s.type=l)},null,512),[[M,s.type]]),e[7]||(e[7]=t("span",{class:"ml-2"},"SN Splitter",-1))])])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"Location (lat,lng)",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.location=l),type:"text",class:"mt-1 block w-full rounded-md border-gray-300",placeholder:"e.g. 16.8,96.15",required:""},null,512),[[R,s.location]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Radius (meter)",-1)),u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.radius=l),type:"number",min:"1",class:"mt-1 block w-full rounded-md border-gray-300"},null,512),[[R,s.radius,void 0,{number:!0}]])]),e[11]||(e[11]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"},"Search")],-1))])],32),s.error?(o(),a("div",st,n(s.error),1)):i("",!0),s.type==="sn_splitter"&&((x=s.splitters.data)!=null&&x.length)?(o(),a("div",et,[e[13]||(e[13]=t("h3",{class:"text-lg font-medium mb-4"},"SN Splitters",-1)),t("table",lt,[e[12]||(e[12]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2"},"SN Name"),t("th",{class:"px-4 py-2"},"Location"),t("th",{class:"px-4 py-2"},"Distance (m)"),t("th",{class:"px-4 py-2"},"DN Splitter"),t("th",{class:"px-4 py-2"},"DN Box"),t("th",{class:"px-4 py-2"},"OLT"),t("th",{class:"px-4 py-2"},"POP"),t("th",{class:"px-4 py-2"},"Partner"),t("th",{class:"px-4 py-2"},"Status")])],-1)),t("tbody",null,[(o(!0),a(j,null,O(s.splitters.data,l=>{var c,k,N,B,S,w,D,L,P,C,T,V,F,U;return o(),a("tr",{key:l.id},[t("td",nt,n(l.name),1),t("td",ot,n(l.location),1),t("td",at,n(l.distance?l.distance.toFixed(2):"-"),1),t("td",it,n((c=l.sn_box.dn_splitter)==null?void 0:c.name),1),t("td",rt,n((N=(k=l.sn_box.dn_splitter)==null?void 0:k.dn_box)==null?void 0:N.name)+" "+n((S=(B=l.sn_box.dn_splitter)==null?void 0:B.dn_box)==null?void 0:S.type),1),t("td",dt,n((D=(w=l.sn_box.dn_splitter)==null?void 0:w.pop_device)==null?void 0:D.device_name),1),t("td",pt,n((C=(P=(L=l.sn_box.dn_splitter)==null?void 0:L.pop_device)==null?void 0:P.pop)==null?void 0:C.site_name),1),t("td",ct,n((U=(F=(V=(T=l.sn_box.dn_splitter)==null?void 0:T.pop_device)==null?void 0:V.pop)==null?void 0:F.partner)==null?void 0:U.name),1),t("td",mt,n(l.status),1)])}),128))])]),s.splitters.total?(o(),a("span",xt,n(s.splitters.data.length)+" Splitter in Current Page. Total Number of Splitters: "+n(s.splitters.total),1)):i("",!0),s.splitters.links?(o(),g(d,{key:1,class:"mt-6",links:s.splitters.links},null,8,["links"])):i("",!0)])):i("",!0),s.type==="cabinet"&&((y=s.dnBoxes.data)!=null&&y.length)?(o(),a("div",yt,[e[15]||(e[15]=t("h3",{class:"text-lg font-medium mb-4"},"DN Boxes",-1)),t("table",ut,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2"},"Box Name"),t("th",{class:"px-4 py-2"},"Type"),t("th",{class:"px-4 py-2"},"Location"),t("th",{class:"px-4 py-2"},"Distance (m)"),t("th",{class:"px-4 py-2"},"Township"),t("th",{class:"px-4 py-2"},"Description"),t("th",{class:"px-4 py-2"},"Status")])],-1)),t("tbody",null,[(o(!0),a(j,null,O(s.dnBoxes.data,l=>{var c;return o(),a("tr",{key:l.id},[t("td",_t,n(l.name),1),t("td",bt,n(l.type),1),t("td",gt,n(l.location),1),t("td",ht,n(l.distance?l.distance.toFixed(2):"-"),1),t("td",ft,n((c=l.township)==null?void 0:c.name),1),t("td",vt,n(l.description),1),t("td",kt,n(l.status),1)])}),128))])]),s.dnBoxes.total?(o(),a("span",Nt,n(s.dnBoxes.data.length)+" DN Box in Current Page. Total Number of DN Boxes: "+n(s.dnBoxes.total),1)):i("",!0),s.dnBoxes.links?(o(),g(d,{key:1,class:"mt-6",links:s.dnBoxes.links},null,8,["links"])):i("",!0)])):i("",!0),!((b=s.splitters.data)!=null&&b.length)&&s.type==="sn_splitter"||!((v=s.dnBoxes.data)!=null&&v.length)&&s.type==="cabinet"?(o(),a("div",Bt," No "+n(s.type==="sn_splitter"?"splitters":"DN boxes")+" found. ",1)):i("",!0)])])])]}),_:1})}const Tt=I(J,[["render",St]]);export{Tt as default};
