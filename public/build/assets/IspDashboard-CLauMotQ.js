import{A as E}from"./AppLayout-C5kTv2Li.js";import{L as J}from"./LineChart-CKx1JDmO.js";import{m as K,r as y,q as Q,z as M,c as I,w as S,N as k,o as n,a as e,f as V,b as U,t as i,i as z,j as b,k as T,d as l,g as p,F as _,v as C}from"./app-CUc8g28W.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-BW-_ZUfw.js";import"./chart-Kvy_m8bm.js";const W={name:"IspDashboard",components:{AppLayout:E,LineChart:J,Link:K},props:{matrix:Object,status_types:Array,grand_total:Object,zone_matrix:Array,zone_grand_total:Object,zones:{type:Array,default:()=>[]},township_matrix:Array,township_grand_total:Object,townships:{type:Array,default:()=>[]},months:Array,chart_data:Object,chart_date_from:String,chart_date_to:String,chart_zone_id:String,chart_township_id:String,chart_status_id:String,service_types:{type:Array,default:()=>["ALL"]}},setup(u,{emit:t}){const o=y(""),a=y(""),x=y(""),f=y(""),d=y([...u.service_types]),v=y(u.chart_date_from||""),g=y(u.chart_date_to||""),s=y(u.chart_zone_id||""),r=y(u.chart_township_id||""),c=y(u.chart_status_id||""),L=y(0),Z=Q(()=>u.months.map(m=>{const[h,w]=m.split("-");return new Date(h,w-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}));function j(m){return{active:"#10b981",disabled:"#f59e0b",suspense:"#ef4444",terminate:"#6b7280"}[m]||"#6366f1"}function A(m){const h=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16","#ec4899","#6b7280"];return h[m%h.length]}function B(){const m=u.months[0];return(m&&u.chart_data[m]?Object.keys(u.chart_data[m]):[]).map((w,F)=>({label:w,data:u.months.map(D=>u.chart_data[D]&&u.chart_data[D][w]?u.chart_data[D][w]:0),borderColor:A(F),backgroundColor:A(F)+"20",fill:!1,tension:.4}))}function O(){k.post(route("isp.dashboard"),{date_from:o.value,date_to:a.value,zone_id:x.value,township_id:f.value,service_types:d.value,chart_date_from:v.value,chart_date_to:g.value,chart_zone_id:s.value,chart_township_id:r.value,chart_status_id:c.value})}function N(){k.post(route("isp.dashboard"),{date_from:o.value,date_to:a.value,zone_id:x.value,township_id:f.value,service_types:d.value,chart_date_from:v.value,chart_date_to:g.value,chart_zone_id:s.value,chart_township_id:r.value,chart_status_id:c.value})}function H(){k.post(route("isp.dashboard"),{date_from:o.value,date_to:a.value,zone_id:x.value,township_id:f.value,service_types:d.value,chart_date_from:v.value,chart_date_to:g.value,chart_zone_id:s.value,chart_township_id:r.value,chart_status_id:c.value})}function G(){console.log("Applying chart filter with:",{date_from:v.value,date_to:g.value,zone_id:s.value,township_id:r.value}),k.post(route("isp.dashboard"),{date_from:o.value,date_to:a.value,zone_id:x.value,township_id:f.value,service_types:d.value,chart_date_from:v.value,chart_date_to:g.value,chart_zone_id:s.value,chart_township_id:r.value,chart_status_id:c.value},{onSuccess:()=>{L.value++}})}function q(m){m==="ALL"?d.value=["ALL"]:(d.value=d.value.filter(h=>h!=="ALL"),d.value.includes(m)?d.value=d.value.filter(h=>h!==m):d.value.push(m),d.value.length===0&&(d.value=["ALL"])),P()}function P(){k.post(route("isp.dashboard"),{date_from:o.value,date_to:a.value,zone_id:x.value,township_id:f.value,service_types:d.value,chart_date_from:v.value,chart_date_to:g.value,chart_zone_id:s.value,chart_township_id:r.value,chart_status_id:c.value},{onSuccess:()=>{L.value++}})}return{date_from:o,date_to:a,zone_id:x,township_id:f,service_types:d,chart_date_from:v,chart_date_to:g,chart_zone_id:s,chart_township_id:r,chart_status_id:c,chartLabels:Z,getStatusColor:j,getServiceColor:A,getPortSharingServiceDatasets:B,applyDateFilter:O,applyZoneFilter:N,applyTownshipFilter:H,applyChartFilter:G,handleServiceTypeChange:q,applyServiceTypeFilter:P,key:L}}},X={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 grid gap-4"},$={class:"bg-white shadow-xl sm:rounded-lg p-4"},tt={class:"flex flex-wrap gap-2"},et={class:"bg-white shadow-xl sm:rounded-lg p-6"},st={class:"mb-6"},at={class:"flex flex-wrap gap-4"},ot={class:"flex items-center cursor-pointer"},nt=["checked"],lt={class:"flex items-center cursor-pointer"},it=["checked"],rt={class:"flex items-center cursor-pointer"},dt=["checked"],ut={class:"flex items-center cursor-pointer"},pt=["checked"],_t={class:"flex items-center cursor-pointer"},mt=["checked"],ct={class:"mt-2 text-sm text-gray-600"},yt={class:"bg-white shadow-xl sm:rounded-lg p-6"},ht={class:"mb-6"},vt={class:"min-w-full divide-y divide-gray-200 mb-8"},gt={class:"bg-white divide-y divide-gray-200"},bt={class:"px-6 py-4 whitespace-nowrap font-bold"},xt={class:"px-6 py-4 whitespace-nowrap font-bold"},ft={class:"bg-gray-100 font-bold"},wt={class:"px-6 py-4 whitespace-nowrap"},kt={class:"mt-4 text-lg font-bold"},Ct={class:"bg-white shadow-xl sm:rounded-lg p-6"},St={class:"mb-6"},zt=["value"],Tt={class:"min-w-full divide-y divide-gray-200 mb-8"},Lt={class:"bg-white divide-y divide-gray-200"},At={class:"px-6 py-4 whitespace-nowrap font-bold"},Ft={class:"px-6 py-4 whitespace-nowrap font-bold"},Dt={class:"bg-gray-100 font-bold"},Mt={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"mt-4 text-lg font-bold"},Pt={class:"bg-white shadow-xl sm:rounded-lg p-6"},It={class:"mb-6"},Ut=["value"],Zt={class:"min-w-full divide-y divide-gray-200 mb-8"},jt={class:"bg-white divide-y divide-gray-200"},Bt={class:"px-6 py-4 whitespace-nowrap font-bold"},Ot={class:"px-6 py-4 whitespace-nowrap font-bold"},Nt={class:"bg-gray-100 font-bold"},Ht={class:"px-6 py-4 whitespace-nowrap"},Gt={class:"mt-4 text-lg font-bold"},qt={class:"bg-white shadow-xl sm:rounded-lg p-6"},Et={class:"mb-6"},Jt=["value"],Kt=["value"],Qt=["value"];function Rt(u,t,o,a,x,f){const d=M("Link"),v=M("LineChart"),g=M("app-layout");return n(),I(g,null,{header:S(()=>t[18]||(t[18]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"ISP Dashboard",-1)])),default:S(()=>[e("div",X,[e("div",Y,[e("div",$,[e("div",tt,[t[21]||(t[21]=e("div",{class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md"},[e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})]),V(" Main Dashboard "),e("span",{class:"ml-2 bg-blue-500 text-xs px-2 py-1 rounded-full"},"Current")],-1)),U(d,{href:u.route("isp.installation.dashboard"),class:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-md transition duration-150 ease-in-out"},{default:S(()=>t[19]||(t[19]=[e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 2L3 8v10a1 1 0 001 1h4a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1h4a1 1 0 001-1V8l-7-6z","clip-rule":"evenodd"})],-1),V(" Installation Dashboard ")])),_:1},8,["href"]),U(d,{href:u.route("isp.maintenance.dashboard"),class:"inline-flex items-center px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white text-sm font-medium rounded-md transition duration-150 ease-in-out"},{default:S(()=>t[20]||(t[20]=[e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1),V(" Maintenance Dashboard ")])),_:1},8,["href"])])]),e("div",et,[e("div",st,[t[27]||(t[27]=e("h3",{class:"text-lg font-bold mb-4"},"Service Type Filter",-1)),e("div",at,[e("label",ot,[e("input",{type:"checkbox",checked:a.service_types.includes("ALL"),onChange:t[0]||(t[0]=s=>a.handleServiceTypeChange("ALL")),class:"mr-2 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,40,nt),t[22]||(t[22]=e("span",{class:"text-sm font-medium text-gray-900"},"ALL",-1))]),e("label",lt,[e("input",{type:"checkbox",checked:a.service_types.includes("FTTH"),onChange:t[1]||(t[1]=s=>a.handleServiceTypeChange("FTTH")),class:"mr-2 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,40,it),t[23]||(t[23]=e("span",{class:"text-sm font-medium text-gray-900"},"FTTH",-1))]),e("label",rt,[e("input",{type:"checkbox",checked:a.service_types.includes("DIA"),onChange:t[2]||(t[2]=s=>a.handleServiceTypeChange("DIA")),class:"mr-2 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,40,dt),t[24]||(t[24]=e("span",{class:"text-sm font-medium text-gray-900"},"DIA",-1))]),e("label",ut,[e("input",{type:"checkbox",checked:a.service_types.includes("DPLC"),onChange:t[3]||(t[3]=s=>a.handleServiceTypeChange("DPLC")),class:"mr-2 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,40,pt),t[25]||(t[25]=e("span",{class:"text-sm font-medium text-gray-900"},"DPLC",-1))]),e("label",_t,[e("input",{type:"checkbox",checked:a.service_types.includes("IPLC"),onChange:t[4]||(t[4]=s=>a.handleServiceTypeChange("IPLC")),class:"mr-2 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,40,mt),t[26]||(t[26]=e("span",{class:"text-sm font-medium text-gray-900"},"IPLC",-1))])]),e("div",ct," Selected: "+i(a.service_types.join(", ")),1)])]),e("div",yt,[e("div",ht,[t[34]||(t[34]=e("h3",{class:"text-lg font-bold mb-2"},"Customer Matrix by Port Sharing Service",-1)),e("form",{class:"flex items-center mb-4 gap-4",onSubmit:t[7]||(t[7]=z((...s)=>a.applyDateFilter&&a.applyDateFilter(...s),["prevent"]))},[t[28]||(t[28]=e("label",{class:"font-semibold"},"From:",-1)),b(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=s=>a.date_from=s),class:"border rounded px-2 py-1"},null,512),[[T,a.date_from]]),t[29]||(t[29]=e("label",{class:"font-semibold"},"To:",-1)),b(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=s=>a.date_to=s),class:"border rounded px-2 py-1"},null,512),[[T,a.date_to]]),t[30]||(t[30]=e("button",{type:"submit",class:"bg-indigo-600 text-white px-4 py-2 rounded"},"Filter",-1))],32),e("table",vt,[e("thead",null,[e("tr",null,[t[31]||(t[31]=e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Port Sharing Service",-1)),(n(!0),l(_,null,p(o.status_types,s=>(n(),l("th",{key:s,class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},i(s),1))),128)),t[32]||(t[32]=e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Total",-1))])]),e("tbody",gt,[(n(!0),l(_,null,p(o.matrix,s=>(n(),l("tr",{key:s.port_sharing_service_id},[e("td",bt,i(s.port_sharing_service_name),1),(n(!0),l(_,null,p(o.status_types,r=>(n(),l("td",{key:r,class:"px-6 py-4 whitespace-nowrap"},i(s[r]),1))),128)),e("td",xt,i(o.status_types.reduce((r,c)=>r+(s[c]||0),0)),1)]))),128)),e("tr",ft,[t[33]||(t[33]=e("td",{class:"px-6 py-4 whitespace-nowrap"},"Grand Total",-1)),(n(!0),l(_,null,p(o.status_types,s=>(n(),l("td",{key:"grand-"+s,class:"px-6 py-4 whitespace-nowrap"},i(o.grand_total[s]),1))),128)),e("td",wt,i(o.grand_total.total),1)])])]),e("div",kt,"Total Customers: "+i(o.grand_total.total),1)])]),e("div",Ct,[e("div",St,[t[41]||(t[41]=e("h3",{class:"text-lg font-bold mb-2"},"Customer Matrix by Zone",-1)),e("form",{class:"flex items-center mb-4 gap-4",onSubmit:t[9]||(t[9]=z((...s)=>a.applyZoneFilter&&a.applyZoneFilter(...s),["prevent"]))},[t[36]||(t[36]=e("label",{class:"font-semibold"},"Zone:",-1)),b(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.zone_id=s),class:"border rounded px-2 py-1 w-48"},[t[35]||(t[35]=e("option",{value:""},"All Zones",-1)),(n(!0),l(_,null,p(o.zones,s=>(n(),l("option",{key:s.id,value:s.id},i(s.name),9,zt))),128))],512),[[C,a.zone_id]]),t[37]||(t[37]=e("button",{type:"submit",class:"bg-indigo-600 text-white px-4 py-2 rounded"},"Filter",-1))],32),e("table",Tt,[e("thead",null,[e("tr",null,[t[38]||(t[38]=e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Zone",-1)),(n(!0),l(_,null,p(o.status_types,s=>(n(),l("th",{key:"zone-header-"+s,class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},i(s),1))),128)),t[39]||(t[39]=e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Total",-1))])]),e("tbody",Lt,[(n(!0),l(_,null,p(o.zone_matrix,s=>(n(),l("tr",{key:s.zone_id},[e("td",At,i(s.zone_name),1),(n(!0),l(_,null,p(o.status_types,r=>(n(),l("td",{key:"zone-"+s.zone_id+"-"+r,class:"px-6 py-4 whitespace-nowrap"},i(s[r]),1))),128)),e("td",Ft,i(o.status_types.reduce((r,c)=>r+(s[c]||0),0)),1)]))),128)),e("tr",Dt,[t[40]||(t[40]=e("td",{class:"px-6 py-4 whitespace-nowrap"},"Grand Total",-1)),(n(!0),l(_,null,p(o.status_types,s=>(n(),l("td",{key:"zone-grand-"+s,class:"px-6 py-4 whitespace-nowrap"},i(o.zone_grand_total[s]),1))),128)),e("td",Mt,i(o.zone_grand_total.total),1)])])]),e("div",Vt,"Total Customers: "+i(o.zone_grand_total.total),1)])]),e("div",Pt,[e("div",It,[t[48]||(t[48]=e("h3",{class:"text-lg font-bold mb-2"},"Customer Matrix by Township",-1)),e("form",{class:"flex items-center mb-4 gap-4",onSubmit:t[11]||(t[11]=z((...s)=>a.applyTownshipFilter&&a.applyTownshipFilter(...s),["prevent"]))},[t[43]||(t[43]=e("label",{class:"font-semibold"},"Township:",-1)),b(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>a.township_id=s),class:"border rounded px-2 py-1"},[t[42]||(t[42]=e("option",{value:""},"All Townships",-1)),(n(!0),l(_,null,p(o.townships,s=>(n(),l("option",{key:s.id,value:s.id},i(s.name),9,Ut))),128))],512),[[C,a.township_id]]),t[44]||(t[44]=e("button",{type:"submit",class:"bg-indigo-600 text-white px-4 py-2 rounded"},"Filter",-1))],32),e("table",Zt,[e("thead",null,[e("tr",null,[t[45]||(t[45]=e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Township",-1)),(n(!0),l(_,null,p(o.status_types,s=>(n(),l("th",{key:"township-header-"+s,class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},i(s),1))),128)),t[46]||(t[46]=e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Total",-1))])]),e("tbody",jt,[(n(!0),l(_,null,p(o.township_matrix,s=>(n(),l("tr",{key:s.township_id},[e("td",Bt,i(s.township_name),1),(n(!0),l(_,null,p(o.status_types,r=>(n(),l("td",{key:"township-"+s.township_id+"-"+r,class:"px-6 py-4 whitespace-nowrap"},i(s[r]),1))),128)),e("td",Ot,i(o.status_types.reduce((r,c)=>r+(s[c]||0),0)),1)]))),128)),e("tr",Nt,[t[47]||(t[47]=e("td",{class:"px-6 py-4 whitespace-nowrap"},"Grand Total",-1)),(n(!0),l(_,null,p(o.status_types,s=>(n(),l("td",{key:"township-grand-"+s,class:"px-6 py-4 whitespace-nowrap"},i(o.township_grand_total[s]),1))),128)),e("td",Ht,i(o.township_grand_total.total),1)])])]),e("div",Gt,"Total Customers: "+i(o.township_grand_total.total),1)])]),e("div",qt,[e("div",Et,[t[58]||(t[58]=e("h3",{class:"text-lg font-bold mb-2"},"Customer Trends by Port Sharing Service (Monthly)",-1)),e("form",{class:"flex items-center mb-4 gap-4",onSubmit:t[17]||(t[17]=z((...s)=>a.applyChartFilter&&a.applyChartFilter(...s),["prevent"]))},[t[52]||(t[52]=e("label",{class:"font-semibold"},"From:",-1)),b(e("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=s=>a.chart_date_from=s),class:"border rounded px-2 py-1"},null,512),[[T,a.chart_date_from]]),t[53]||(t[53]=e("label",{class:"font-semibold"},"To:",-1)),b(e("input",{type:"date","onUpdate:modelValue":t[13]||(t[13]=s=>a.chart_date_to=s),class:"border rounded px-2 py-1"},null,512),[[T,a.chart_date_to]]),t[54]||(t[54]=e("label",{class:"font-semibold"},"Status:",-1)),b(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>a.chart_status_id=s),class:"border rounded px-2 py-1 w-32 capitalize"},[t[49]||(t[49]=e("option",{value:""},"All Statuses",-1)),(n(!0),l(_,null,p(o.status_types,s=>(n(),l("option",{value:s},i(s),9,Jt))),256))],512),[[C,a.chart_status_id]]),t[55]||(t[55]=e("label",{class:"font-semibold"},"Zone:",-1)),b(e("select",{"onUpdate:modelValue":t[15]||(t[15]=s=>a.chart_zone_id=s),class:"border rounded px-2 py-1 w-32"},[t[50]||(t[50]=e("option",{value:""},"All Zones",-1)),(n(!0),l(_,null,p(o.zones,s=>(n(),l("option",{key:s.id,value:s.id},i(s.name),9,Kt))),128))],512),[[C,a.chart_zone_id]]),t[56]||(t[56]=e("label",{class:"font-semibold"},"Township:",-1)),b(e("select",{"onUpdate:modelValue":t[16]||(t[16]=s=>a.chart_township_id=s),class:"border rounded px-2 py-1 w-32"},[t[51]||(t[51]=e("option",{value:""},"All Townships",-1)),(n(!0),l(_,null,p(o.townships,s=>(n(),l("option",{key:s.id,value:s.id},i(s.name),9,Qt))),128))],512),[[C,a.chart_township_id]]),t[57]||(t[57]=e("button",{type:"submit",class:"bg-indigo-600 text-white px-4 py-2 rounded"},"Filter",-1))],32),(n(),I(v,{"chart-id":"service-trends-chart",title:"Total Customers by Port Sharing Service Over Time",labels:a.chartLabels,datasets:a.getPortSharingServiceDatasets(),key:a.key},null,8,["labels","datasets"]))])])])])]),_:1})}const se=R(W,[["render",Rt]]);export{se as default};
