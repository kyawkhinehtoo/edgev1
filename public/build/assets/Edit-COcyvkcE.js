import{r as O,T as F,y as N,c as x,w as k,o as r,a as d,i as L,u as s,d as a,t as n,e as m,b,f as E,m as M}from"./app-2o1wbrmm.js";import{A as q}from"./AppLayout-B9zqHQZj.js";import{M as u}from"./vue3-multiselect.umd.min-Cc5rzdq6.js";import"./DropdownLink-wbI6uO0Z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},J={class:"bg-white shadow-xl sm:rounded-lg p-6"},R={class:"grid grid-cols-1 gap-6"},W={class:"grid grid-cols-3 gap-4"},z={key:1,class:"border-gray-200 border p-2 rounded-sm text-gray-600"},H={key:2,class:"text-red-500 text-sm mt-1"},K={key:1,class:"border-gray-200 border p-2 rounded-sm text-gray-600"},Q={key:2,class:"text-red-500 text-sm mt-1"},X={key:1,class:"border-gray-200 border p-2 rounded-sm text-gray-600"},Y={key:2,class:"text-red-500 text-sm mt-1"},Z={key:0,class:"text-red-500 text-sm mt-1"},h={key:0,class:"text-red-500 text-sm mt-1"},$={class:"grid grid-cols-3 gap-4"},ee={key:0,class:"text-red-500 text-sm mt-1"},oe={key:0,class:"text-red-500 text-sm mt-1"},se={key:0,class:"text-red-500 text-sm mt-1"},te={key:0,class:"text-red-500 text-sm mt-1"},le={key:0,class:"text-red-500 text-sm mt-1"},de={class:"flex justify-end space-x-3"},ie=["disabled"],pe={__name:"Edit",props:{coreAssignment:Object,fiberCables:Array,jcBoxes:Array,pops:Object,pop_id:{type:Number,required:!0},pop_device:{type:Object,required:!0}},setup(_){var A,w,S,P;const i=_,y=O([]),g=O([]),p=[{id:"blue",name:"Blue"},{id:"orange",name:"Orange"},{id:"green",name:"Green"},{id:"brown",name:"Brown"},{id:"gray",name:"Gray"},{id:"white",name:"White"},{id:"red",name:"Red"},{id:"black",name:"Black"}],f=[{id:"active",name:"Active"},{id:"inactive",name:"Inactive"}],c=[{id:"1",name:"1"},{id:"2",name:"2"},{id:"3",name:"3"},{id:"4",name:"4"},{id:"5",name:"5"},{id:"6",name:"6"},{id:"7",name:"7"},{id:"8",name:"8"},{id:"9",name:"9"},{id:"10",name:"10"},{id:"11",name:"11"},{id:"12",name:"12"}],o=F({source:(A=i.fiberCables)==null?void 0:A.find(l=>l.id===i.coreAssignment.source_id),source_id:i.coreAssignment.source_id,source_color:p==null?void 0:p.find(l=>l.id===i.coreAssignment.source_color),source_color_id:i.coreAssignment.source_color,source_port:c==null?void 0:c.find(l=>l.id==i.coreAssignment.source_port),source_port_id:i.coreAssignment.source_port,dest:(w=i.fiberCables)==null?void 0:w.find(l=>l.id===i.coreAssignment.dest_id),dest_id:i.coreAssignment.dest_id,dest_color:p==null?void 0:p.find(l=>l.id===i.coreAssignment.dest_color),dest_color_id:i.coreAssignment.dest_color,dest_port:c==null?void 0:c.find(l=>l.id==i.coreAssignment.dest_port),dest_port_id:i.coreAssignment.dest_port,jc:(S=i.jcBoxes)==null?void 0:S.find(l=>l.id===i.coreAssignment.jc_id),jc_id:i.coreAssignment.jc_id,status:f==null?void 0:f.find(l=>l.id===i.coreAssignment.status),status_id:i.coreAssignment.status,pop:(P=i.pops)==null?void 0:P.find(l=>l.id===i.pop_id),pop_id:i.pop_id,pop_device:i.pop_device,pop_device_id:i.pop_device.pop_device_id}),V=async()=>{if(!o.pop_id){y.value=[];return}try{const e=await(await fetch(`/getOLTByPOP/${o.pop_id}`)).json();y.value=e||[],console.log("fetch POP Devices")}catch(l){console.error("Failed to fetch POP devices",l)}},v=async()=>{if(console.log("pop_device_id",o.pop_device_id),!o.pop_device_id){g.value=[];return}try{const e=await(await fetch(`/getFeederByOLT/${o.pop_id}`)).json();g.value=e||[],console.log("fetch Feeder Cables")}catch(l){console.error("Failed to fetch Feeder Cables",l)}},U=l=>{v(),o.source=null,o.source_id=null,o.source_color=null,o.source_color_id=null,o.source_port=null,o.source_port_id=null},D=l=>{V(),o.pop_device=null,o.pop_device_id=null},T=()=>{o.put(route("core-assignments.update",i.coreAssignment.id),{onSuccess:l=>{Toast.fire({icon:"success",title:l.props.flash.message})}})};return N(()=>{var l;V(),o.source=(l=i.fiberCables)==null?void 0:l.find(e=>e.id===i.coreAssignment.source_id),o.source_id=i.coreAssignment.source_id,v()}),(l,e)=>(r(),x(q,{title:"Edit Core Assignment"},{header:k(()=>e[20]||(e[20]=[d("h2",{class:"font-semibold text-xl text-white leading-tight"}," Edit Core Assignment ",-1)])),default:k(()=>{var j,C,B;return[d("div",G,[d("div",I,[d("div",J,[d("form",{onSubmit:L(T,["prevent"])},[d("div",R,[d("div",W,[d("div",null,[e[21]||(e[21]=d("label",{class:"block text-sm font-medium text-gray-700"},"Source POP",-1)),((j=_.pops)==null?void 0:j.length)>0?(r(),x(s(u),{key:0,"deselect-label":"Selected already",options:_.pops,"track-by":"id",label:"site_name",modelValue:s(o).pop,"onUpdate:modelValue":[e[0]||(e[0]=t=>s(o).pop=t),e[1]||(e[1]=t=>{s(o).pop_id=t==null?void 0:t.id,D(t)})],"allow-empty":!1,multiple:!1,tabindex:"1"},null,8,["options","modelValue"])):(r(),a("span",z,"No POP Site")),s(o).errors.pop_id?(r(),a("div",H,n(s(o).errors.pop_id),1)):m("",!0)]),d("div",null,[e[22]||(e[22]=d("label",{class:"block text-sm font-medium text-gray-700"},"Source OLT (Pop Devices)",-1)),((C=y.value)==null?void 0:C.length)>0?(r(),x(s(u),{key:0,"deselect-label":"Selected already",options:y.value,"track-by":"id",label:"device_name",modelValue:s(o).pop_device,"onUpdate:modelValue":[e[2]||(e[2]=t=>s(o).pop_device=t),e[3]||(e[3]=t=>{s(o).pop_device_id=t==null?void 0:t.id,U(l.event)})],"allow-empty":!1,multiple:!1,tabindex:"1"},null,8,["options","modelValue"])):(r(),a("div",K,"Please Select Pop Site")),s(o).errors.pop_device_id?(r(),a("div",Q,n(s(o).errors.pop_device_id),1)):m("",!0)]),d("div",null,[e[23]||(e[23]=d("label",{class:"block text-sm font-medium text-gray-700"},"Source Cable",-1)),((B=g.value)==null?void 0:B.length)>0?(r(),x(s(u),{key:0,"deselect-label":"Selected already",options:g.value,"track-by":"id",label:"name",modelValue:s(o).source,"onUpdate:modelValue":[e[4]||(e[4]=t=>s(o).source=t),e[5]||(e[5]=t=>s(o).source_id=t==null?void 0:t.id)],"allow-empty":!1,multiple:!1,tabindex:"1"},null,8,["options","modelValue"])):(r(),a("div",X,"Please Select OLT")),s(o).errors.source_id?(r(),a("div",Y,n(s(o).errors.source_id),1)):m("",!0)]),d("div",null,[e[24]||(e[24]=d("label",{class:"block text-sm font-medium text-gray-700"},"Source Color",-1)),b(s(u),{"deselect-label":"Selected already",options:p,"track-by":"id",label:"name",modelValue:s(o).source_color,"onUpdate:modelValue":[e[6]||(e[6]=t=>s(o).source_color=t),e[7]||(e[7]=t=>s(o).source_color_id=t==null?void 0:t.id)],"allow-empty":!1,multiple:!1,tabindex:"2"},null,8,["modelValue"]),s(o).errors.source_color_id?(r(),a("div",Z,n(s(o).errors.source_color_id),1)):m("",!0)]),d("div",null,[e[25]||(e[25]=d("label",{class:"block text-sm font-medium text-gray-700"},"Source Port",-1)),b(s(u),{"deselect-label":"Selected already",options:c,"track-by":"id",label:"name",modelValue:s(o).source_port,"onUpdate:modelValue":[e[8]||(e[8]=t=>s(o).source_port=t),e[9]||(e[9]=t=>s(o).source_port_id=t==null?void 0:t.id)],"allow-empty":!1,multiple:!1,tabindex:"3"},null,8,["modelValue"]),s(o).errors.source_port_id?(r(),a("div",h,n(s(o).errors.source_port_id),1)):m("",!0)])]),d("div",$,[d("div",null,[e[26]||(e[26]=d("label",{class:"block text-sm font-medium text-gray-700"},"Destination Cable",-1)),b(s(u),{"deselect-label":"Selected already",options:_.fiberCables,"track-by":"id",label:"name",modelValue:s(o).dest,"onUpdate:modelValue":[e[10]||(e[10]=t=>s(o).dest=t),e[11]||(e[11]=t=>s(o).dest_id=t==null?void 0:t.id)],"allow-empty":!1,multiple:!1,tabindex:"4"},null,8,["options","modelValue"]),s(o).errors.dest_id?(r(),a("div",ee,n(s(o).errors.dest_id),1)):m("",!0)]),d("div",null,[e[27]||(e[27]=d("label",{class:"block text-sm font-medium text-gray-700"},"Destination Color",-1)),b(s(u),{"deselect-label":"Selected already",options:p,"track-by":"id",label:"name",modelValue:s(o).dest_color,"onUpdate:modelValue":[e[12]||(e[12]=t=>s(o).dest_color=t),e[13]||(e[13]=t=>s(o).dest_color_id=t==null?void 0:t.id)],"allow-empty":!1,multiple:!1,tabindex:"5"},null,8,["modelValue"]),s(o).errors.dest_color_id?(r(),a("div",oe,n(s(o).errors.dest_color_id),1)):m("",!0)]),d("div",null,[e[28]||(e[28]=d("label",{class:"block text-sm font-medium text-gray-700"},"Destination Port",-1)),b(s(u),{"deselect-label":"Selected already",options:c,"track-by":"id",label:"name",modelValue:s(o).dest_port,"onUpdate:modelValue":[e[14]||(e[14]=t=>s(o).dest_port=t),e[15]||(e[15]=t=>s(o).dest_port_id=t==null?void 0:t.id)],"allow-empty":!1,multiple:!1,tabindex:"6"},null,8,["modelValue"]),s(o).errors.dest_port_id?(r(),a("div",se,n(s(o).errors.dest_port_id),1)):m("",!0)])]),d("div",null,[e[29]||(e[29]=d("label",{class:"block text-sm font-medium text-gray-700"},"JC Box",-1)),b(s(u),{"deselect-label":"Selected already",options:_.jcBoxes,"track-by":"id",label:"name",modelValue:s(o).jc,"onUpdate:modelValue":[e[16]||(e[16]=t=>s(o).jc=t),e[17]||(e[17]=t=>s(o).jc_id=t==null?void 0:t.id)],"allow-empty":!1,multiple:!1,tabindex:"7"},null,8,["options","modelValue"]),s(o).errors.jc_id?(r(),a("div",te,n(s(o).errors.jc_id),1)):m("",!0)]),d("div",null,[e[30]||(e[30]=d("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),b(s(u),{"deselect-label":"Selected already",options:f,"track-by":"id",label:"name",modelValue:s(o).status,"onUpdate:modelValue":[e[18]||(e[18]=t=>s(o).status=t),e[19]||(e[19]=t=>s(o).status_id=t==null?void 0:t.id)],"allow-empty":!1,multiple:!1,tabindex:"8"},null,8,["modelValue"]),s(o).errors.status_id?(r(),a("div",le,n(s(o).errors.status_id),1)):m("",!0)]),d("div",de,[b(s(M),{href:l.route("core-assignments.index"),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},{default:k(()=>e[31]||(e[31]=[E(" Cancel ")])),_:1},8,["href"]),d("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:s(o).processing}," Update ",8,ie)])])],32)])])])]}),_:1}))}};export{pe as default};
