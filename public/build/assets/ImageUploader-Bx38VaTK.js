import{r as c,m as S,p as C,o as r,d,t as f,e as v,a as l,n as F,h as u}from"./app-DdoqqyeN.js";const B=["for"],V={class:"relative"},M=["disabled"],P={key:0,class:"space-y-1 text-center"},N={class:"text-sm text-gray-600"},R={class:"font-medium text-indigo-600 hover:text-indigo-500"},T={key:1,class:"relative w-full h-full"},z=["src","alt"],G={class:"absolute top-1 right-1 flex space-x-1"},j=["disabled","id"],L={key:1,class:"mt-2 text-sm text-red-500"},$={__name:"ImageUploader",props:{modelValue:{type:[File,null],default:null},imageUrl:{type:String,default:null},existingImage:{type:String,default:null},label:{type:String,default:""},uploadText:{type:String,default:"Click to upload"},disabled:{type:Boolean,default:!1},error:{type:String,default:""},id:{type:String,default:()=>`file-upload-${Math.random().toString(36).substring(2,9)}`}},emits:["update:modelValue","update:imageUrl"],setup(a,{emit:b}){const n=a,o=b,m=c(null),g=c(!1),i=c(n.imageUrl||n.existingImage);S(()=>n.existingImage,t=>{if(t){const e=t.replace(/\/customer\/\d+\//,"/");i.value=e,o("update:imageUrl",e)}}),C(()=>{if(n.existingImage){const t=n.existingImage.replace(/\/customer\/\d+\//,"/");i.value=t,o("update:imageUrl",t)}});function x(t){m.value=t}function h(){n.disabled||m.value.click()}function y(t){g.value=!0}function w(t){g.value=!1}function k(t){if(g.value=!1,n.disabled)return;const e=t.dataTransfer.files;if(e.length>0){const s=e[0];s.type.startsWith("image/")&&p(s)}}function I(t){const e=t.target.files[0];e&&p(e)}function p(t){if(t.size>10*1024*1024){alert("File size exceeds 10MB limit");return}o("update:modelValue",t);const e=new FileReader;e.onload=s=>{i.value=s.target.result,o("update:imageUrl",s.target.result)},e.readAsDataURL(t)}function U(){i.value&&window.open(i.value,"_blank")}function D(t){t.stopPropagation(),o("update:modelValue",null),i.value=null,o("update:imageUrl",null)}return(t,e)=>(r(),d("div",null,[a.label?(r(),d("label",{key:0,for:a.id,class:"block text-sm font-medium text-gray-700 mb-1"},f(a.label),9,B)):v("",!0),l("div",V,[l("div",{class:F(["flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-md border-gray-300 hover:border-indigo-500 transition-colors duration-200 cursor-pointer bg-gray-50",{"border-indigo-500 bg-indigo-50":g.value}]),onClick:h,onDragover:u(y,["prevent"]),onDragleave:u(w,["prevent"]),onDrop:u(k,["prevent"]),disabled:a.disabled},[i.value?(r(),d("div",T,[l("img",{src:i.value,alt:`${a.label} Preview`,class:"object-contain w-full h-full rounded-md"},null,8,z),l("div",G,[l("button",{onClick:u(U,["stop"]),type:"button",class:"bg-blue-500 text-white rounded-full p-1 shadow-md hover:bg-blue-600 transition-colors duration-200",title:"View in new tab"},e[3]||(e[3]=[l("i",{class:"fas fa-external-link-alt text-xs"},null,-1)])),l("button",{onClick:u(D,["stop"]),type:"button",class:"bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 transition-colors duration-200",title:"Remove image"},e[4]||(e[4]=[l("i",{class:"fas fa-times text-xs"},null,-1)]))])])):(r(),d("div",P,[e[1]||(e[1]=l("i",{class:"fas fa-cloud-upload-alt text-3xl text-gray-400"},null,-1)),l("div",N,[l("span",R,f(a.uploadText),1),e[0]||(e[0]=l("span",null," or drag and drop",-1))]),e[2]||(e[2]=l("p",{class:"text-xs text-gray-500"}," PNG, JPG, GIF up to 10MB ",-1))]))],42,M),l("input",{ref:x,type:"file",onChange:I,accept:"image/*",class:"hidden",disabled:a.disabled,id:a.id},null,40,j)]),a.error?(r(),d("p",L,f(a.error),1)):v("",!0)]))}};export{$ as _};
