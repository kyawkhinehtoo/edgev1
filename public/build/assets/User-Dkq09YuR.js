import{A as O}from"./AppLayout-DQMHUDA-.js";import{P as L}from"./Pagination-BDaU9i64.js";import{M as R}from"./vue3-multiselect.umd.min-BtFOAPRA.js";import{K as A,r as y,q as P,c as D,w as M,N as h,o as i,a as s,s as p,v as g,L as I,d as n,g as B,F as q,f as T,h as K,t as a,e as d,n as C,y as k,b as x,B as F,x as N}from"./app-DdoqqyeN.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DupIRA2Y.js";const G={name:"Project",components:{AppLayout:O,Pagination:L,Multiselect:R},props:{users:Object,roles:Object,isps:Object,subcoms:Object,partners:Object,errors:Object},setup(l){const e=A({id:null,name:null,password:null,confirm_password:null,email:null,phone:null,role:null,user_type:"internal",isp:null,isp_id:null,partner:null,partner_id:null,subcom:null,subcom_id:null,disabled:!1}),u=y("");let r=y(!1),w=y(!1),_=y(""),c=y("indigo-500");function f(){e.name=null,e.password=null,e.confirm_password=null,e.email=null,e.phone=null,e.role=null,e.role_id=null,e.user_type="internal",e.isp=null,e.isp_id=null,e.partner=null,e.partner_id=null,e.subcom=null,e.subcom_id=null,e.disabled=!1}function v(){e.password!=e.confirm_password?(console.log("incorrect psw"),_.value="Password does not match !",c.value="red-500"):(console.log("correct !"),_.value="",c.value="indigo-500")}function o(){r.value?(e._method="PUT",h.post("/user/"+e.id,e,{onSuccess:t=>{b(),f(),Toast.fire({icon:"success",title:t.props.flash.message})},onError:t=>{console.log("error ..".errors)}})):(e._method="POST",h.post("/user",e,{preserveState:!0,onSuccess:t=>{b(),f(),Toast.fire({icon:"success",title:t.props.flash.message})},onError:t=>{console.log("error ..".errors)}}))}function S(t){e.id=t.id,e.name=t.name,e.email=t.email,e.phone=t.phone,e.role=l.roles.filter(m=>m.id==t.role)[0],e.role_id=t.role,e.isp_id=t.isp_id,e.partner_id=t.partner_id,e.user_type=t.user_type,e.isp=l.isps.filter(m=>m.id==t.isp_id)[0],e.partner=l.partners.filter(m=>m.id==t.partner_id)[0],e.subcom=l.subcoms.filter(m=>m.id==t.subcom_id)[0],e.disabled=t.disabled==1,r.value=!0,E()}function V(t){let m=l.roles.filter(U=>U.id==t).map(U=>U.name)[0];return console.log(m),m}function j(t){confirm("Are you sure want to remove?")&&(t._method="DELETE",h.post("/user/"+t.id,t,{preserveState:!0,onSuccess:m=>{b(),f(),Toast.fire({icon:"success",title:m.props.flash.message})},onError:m=>{b(),console.log("error ..".errors)}}),b(),f())}function E(){w.value=!0}const b=()=>{w.value=!1,f(),r.value=!1};return{form:e,psw_err:_,border:c,getRole:V,submit:o,checkPsw:v,editMode:r,isOpen:w,openModal:E,closeModal:b,edit:S,deleteRow:j,searchTsp:()=>{console.log("search value is"+u.value),h.get("/user/",{user:u.value},{preserveState:!0})},search:u}}},H={class:"py-12"},J={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},W={class:"flex justify-between mb-6"},X={class:"flex items-center flex-1"},Y={class:"w-1/3"},Z={class:"min-w-full divide-y divide-gray-200"},$={class:"bg-white divide-y divide-gray-200 text-sm"},ee={class:"px-6 py-4 whitespace-nowrap"},se={class:"px-6 py-4 whitespace-nowrap"},oe={key:0,class:"px-6 py-4 whitespace-nowrap"},re={key:1,class:"px-6 py-4 whitespace-nowrap uppercase"},te={class:"px-6 py-4 whitespace-nowrap"},le={class:"px-6 py-4 whitespace-nowrap"},ie={class:"px-6 py-4 whitespace-nowrap"},ne={class:"px-6 py-4 whitespace-nowrap"},ae=["onClick"],de=["onClick"],me={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},pe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ue={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},ce={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},fe={class:""},be={class:"mb-4"},ge={key:0,class:"mt-2 text-sm text-red-500"},ye={class:"mb-4"},xe={key:0,class:"mt-2 text-sm text-red-500"},we={class:"mb-4"},_e={key:0,class:"mt-2 text-sm text-red-500"},he={class:"mb-4"},ke={key:0,class:"mt-2 text-sm text-red-500"},ve={class:"mb-4"},Se={key:0,class:"text-red-500"},Ve={key:1,class:"mt-2 text-sm text-red-500"},Ue={class:"mb-4"},Pe={class:"flex space-x-4"},Ee={class:"inline-flex items-center"},Me={class:"inline-flex items-center"},Te={class:"inline-flex items-center"},Ce={class:"inline-flex items-center"},Ne={key:0,class:"mt-2 text-sm text-red-500"},je={key:0,class:"mb-4"},Oe={key:0,class:"text-red-500"},Le={key:1,class:"mb-4"},Re={key:2,class:"mb-4"},Ae={key:3,class:"mb-4"},De={class:"mb-4"},Ie={class:"inline-flex ml-2"},Be={key:0,class:"text-red-500"},qe={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ke={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},Fe={"wire:click.prevent":"submit",type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},ze={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},Ge={"wire:click.prevent":"submit",type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},He={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},Je={key:0};function Qe(l,e,u,r,w,_){const c=P("multiselect"),f=P("pagination"),v=P("app-layout");return i(),D(v,null,{header:M(()=>e[24]||(e[24]=[s("h2",{class:"font-semibold text-xl text-white leading-tight"},"User Setup",-1)])),default:M(()=>[s("div",H,[s("div",J,[s("div",Q,[s("div",W,[s("div",X,[s("div",Y,[p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.search=o),type:"text",placeholder:"Search users...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onKeyup:e[1]||(e[1]=I((...o)=>r.searchTsp&&r.searchTsp(...o),["enter"]))},null,544),[[g,r.search]])])]),s("button",{onClick:e[2]||(e[2]=(...o)=>r.openModal&&r.openModal(...o)),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Add User ")]),s("table",Z,[e[25]||(e[25]=s("thead",null,[s("tr",null,[s("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"No."),s("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Name"),s("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Role/Type"),s("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Status"),s("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Last Login IP"),s("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Last Login Time"),s("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),s("tbody",$,[(i(!0),n(q,null,B(u.users.data,(o,S)=>(i(),n("tr",{key:o.id},[s("td",ee,a(S+u.users.from),1),s("td",se,a(o.name),1),o.user_type=="internal"?(i(),n("td",oe,a(r.getRole(o.role)),1)):(i(),n("td",re,a(o.user_type),1)),s("td",te,[s("span",{class:C(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",o.disabled?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(o.disabled?"Disabled":"Enabled"),3)]),s("td",le,a(o.last_login_ip),1),s("td",ie,a(o.last_login_time),1),s("td",ne,[s("a",{href:"#",onClick:V=>r.edit(o),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,ae),s("a",{href:"#",onClick:V=>r.deleteRow(o),class:"text-red-600 hover:text-red-900"},"Delete",8,de)])]))),128))])]),r.isOpen?(i(),n("div",me,[s("div",pe,[e[42]||(e[42]=s("div",{class:"fixed inset-0 transition-opacity"},[s("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),e[43]||(e[43]=T(" â€‹ ")),s("div",ue,[s("form",{onSubmit:e[23]||(e[23]=K((...o)=>r.submit&&r.submit(...o),["prevent"]))},[s("div",ce,[s("div",fe,[s("div",be,[e[26]||(e[26]=s("label",{for:"name",class:"block text-gray-700 text-sm font-bold mb-2"},"User Name:",-1)),p(s("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"name",placeholder:"Enter User Name","onUpdate:modelValue":e[3]||(e[3]=o=>r.form.name=o),required:""},null,512),[[g,r.form.name]]),l.$page.props.errors.name?(i(),n("p",ge,a(l.$page.props.errors.name),1)):d("",!0)]),s("div",ye,[e[27]||(e[27]=s("label",{for:"email",class:"block text-gray-700 text-sm font-bold mb-2"},"Email:",-1)),p(s("input",{type:"email",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"email",placeholder:"Enter Email Address","onUpdate:modelValue":e[4]||(e[4]=o=>r.form.email=o),required:""},null,512),[[g,r.form.email]]),l.$page.props.errors.email?(i(),n("p",xe,a(l.$page.props.errors.email),1)):d("",!0)]),s("div",we,[e[28]||(e[28]=s("label",{for:"phone",class:"block text-gray-700 text-sm font-bold mb-2"},"Phone Number:",-1)),p(s("input",{type:"tel",pattern:"^[0-9]{0,11}$",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"phone",placeholder:"09123456789","onUpdate:modelValue":e[5]||(e[5]=o=>r.form.phone=o),required:""},null,512),[[g,r.form.phone]]),l.$page.props.errors.phone?(i(),n("p",_e,a(l.$page.props.errors.phone),1)):d("",!0)]),s("div",he,[e[29]||(e[29]=s("label",{for:"password",class:"block text-gray-700 text-sm font-bold mb-2"},"Enter Password:",-1)),p(s("input",{type:"password",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"password",placeholder:"Enter Password","onUpdate:modelValue":e[6]||(e[6]=o=>r.form.password=o)},null,512),[[g,r.form.password]]),l.$page.props.errors.password?(i(),n("p",ke,a(l.$page.props.errors.password),1)):d("",!0)]),s("div",ve,[e[30]||(e[30]=s("label",{for:"confirm_password",class:"block text-gray-700 text-sm font-bold mb-2"},"Confirm Password:",-1)),p(s("input",{type:"password",class:C("mt-1 focus:ring-"+r.border+" focus:border-"+r.border+" block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"),id:"confirm_password",placeholder:"Confirm the Password","onUpdate:modelValue":e[7]||(e[7]=o=>r.form.confirm_password=o),onKeyup:e[8]||(e[8]=(...o)=>r.checkPsw&&r.checkPsw(...o))},null,34),[[g,r.form.confirm_password]]),l.$page.props.errors.confirm_password?(i(),n("div",Se,a(l.$page.props.errors.confirm_password[0]),1)):d("",!0),r.psw_err?(i(),n("p",Ve,a(r.psw_err),1)):d("",!0)]),s("div",Ue,[e[35]||(e[35]=s("label",{for:"user_type",class:"block text-gray-700 text-sm font-bold mb-2"},"User Type:",-1)),s("div",Pe,[s("label",Ee,[p(s("input",{type:"radio","onUpdate:modelValue":e[9]||(e[9]=o=>r.form.user_type=o),value:"internal",class:"text-indigo-500 focus:ring-indigo-400 focus:ring-opacity-25 border-gray-300"},null,512),[[k,r.form.user_type]]),e[31]||(e[31]=s("span",{class:"ml-2"},"Internal",-1))]),s("label",Me,[p(s("input",{type:"radio","onUpdate:modelValue":e[10]||(e[10]=o=>r.form.user_type=o),value:"partner",class:"text-indigo-500 focus:ring-indigo-400 focus:ring-opacity-25 border-gray-300"},null,512),[[k,r.form.user_type]]),e[32]||(e[32]=s("span",{class:"ml-2"},"Partner",-1))]),s("label",Te,[p(s("input",{type:"radio","onUpdate:modelValue":e[11]||(e[11]=o=>r.form.user_type=o),value:"isp",class:"text-indigo-500 focus:ring-indigo-400 focus:ring-opacity-25 border-gray-300"},null,512),[[k,r.form.user_type]]),e[33]||(e[33]=s("span",{class:"ml-2"},"ISP",-1))]),s("label",Ce,[p(s("input",{type:"radio","onUpdate:modelValue":e[12]||(e[12]=o=>r.form.user_type=o),value:"subcon",class:"text-indigo-500 focus:ring-indigo-400 focus:ring-opacity-25 border-gray-300"},null,512),[[k,r.form.user_type]]),e[34]||(e[34]=s("span",{class:"ml-2"},"Subcon",-1))])]),l.$page.props.errors.user_type?(i(),n("div",Ne,a(l.$page.props.errors.user_type),1)):d("",!0)])]),r.form.user_type=="internal"?(i(),n("div",je,[e[36]||(e[36]=s("label",{for:"role",class:"block text-gray-700 text-sm font-bold mb-2"},"User Role:",-1)),x(c,{"deselect-label":"Selected already",options:u.roles,"track-by":"id",label:"name",modelValue:r.form.role,"onUpdate:modelValue":[e[13]||(e[13]=o=>r.form.role=o),e[14]||(e[14]=o=>r.form.role_id=o==null?void 0:o.id)],placeholder:"Select Role","allow-empty":!1},null,8,["options","modelValue"]),l.$page.props.errors.name?(i(),n("div",Oe,a(l.$page.props.errors.name[0]),1)):d("",!0)])):d("",!0),r.form.user_type=="partner"?(i(),n("div",Le,[e[37]||(e[37]=s("label",{for:"role",class:"block text-gray-700 text-sm font-bold mb-2"},"Partner Name:",-1)),x(c,{"deselect-label":"Selected already",options:u.partners,"track-by":"id",label:"name",modelValue:r.form.partner,"onUpdate:modelValue":[e[15]||(e[15]=o=>r.form.partner=o),e[16]||(e[16]=o=>r.form.partner_id=o==null?void 0:o.id)],placeholder:"Select Partner","allow-empty":!1},null,8,["options","modelValue"])])):d("",!0),r.form.user_type=="isp"?(i(),n("div",Re,[e[38]||(e[38]=s("label",{for:"role",class:"block text-gray-700 text-sm font-bold mb-2"},"ISP Name:",-1)),x(c,{"deselect-label":"Selected already",options:u.isps,"track-by":"id",label:"name",modelValue:r.form.isp,"onUpdate:modelValue":[e[17]||(e[17]=o=>r.form.isp=o),e[18]||(e[18]=o=>r.form.isp_id=o==null?void 0:o.id)],placeholder:"Select ISP","allow-empty":!1},null,8,["options","modelValue"])])):d("",!0),r.form.user_type=="subcon"?(i(),n("div",Ae,[e[39]||(e[39]=s("label",{for:"role",class:"block text-gray-700 text-sm font-bold mb-2"},"Subcon Name:",-1)),x(c,{"deselect-label":"Selected already",options:u.subcoms,"track-by":"id",label:"name",modelValue:r.form.subcom,"onUpdate:modelValue":[e[19]||(e[19]=o=>r.form.subcom=o),e[20]||(e[20]=o=>r.form.subcom_id=o==null?void 0:o.id)],placeholder:"Select Subcon","allow-empty":!1},null,8,["options","modelValue"])])):d("",!0),s("div",De,[e[41]||(e[41]=s("label",{for:"disabled",class:"block text-gray-700 text-sm font-bold mb-2"},"User Status:",-1)),s("label",Ie,[p(s("input",{class:"text-indigo-500 w-6 h-6 mr-2 focus:ring-indigo-400 focus:ring-opacity-25 border border-gray-300 rounded",type:"checkbox","onUpdate:modelValue":e[21]||(e[21]=o=>r.form.disabled=o)},null,512),[[F,r.form.disabled]]),e[40]||(e[40]=T(" Disabled "))]),l.$page.props.errors.disabled?(i(),n("div",Be,a(l.$page.props.errors.disabled[0]),1)):d("",!0)])]),s("div",qe,[s("span",Ke,[p(s("button",Fe,"Save",512),[[N,!r.editMode]])]),s("span",ze,[p(s("button",Ge,"Update",512),[[N,r.editMode]])]),s("span",He,[s("button",{onClick:e[22]||(e[22]=(...o)=>r.closeModal&&r.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Cancel")])])],32)])])],512)):d("",!0)]),u.users.links?(i(),n("span",Je,[x(f,{class:"mt-6",links:u.users.links},null,8,["links"])])):d("",!0)])])]),_:1})}const os=z(G,[["render",Qe],["__scopeId","data-v-48376977"]]);export{os as default};
