import{r as p,c as _,w as c,o as l,a as t,i as y,j as x,k as m,t as d,d as n,g,F as u,N as h,D as b,e as v,n as w}from"./app-Dasm1AVW.js";import{A as k}from"./AppLayout-CleuMCKR.js";import"./DropdownLink-UiFy-ThI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"py-12"},R={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},A={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},D={class:"p-6 bg-white border-b border-gray-200"},S={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},T={class:"bg-white overflow-hidden shadow rounded-lg"},j={class:"p-5"},F={class:"flex items-center"},I={class:"ml-5 w-0 flex-1"},M={class:"text-lg font-medium text-gray-900"},B={class:"bg-white overflow-hidden shadow rounded-lg"},N={class:"p-5"},V={class:"flex items-center"},L={class:"ml-5 w-0 flex-1"},z={class:"text-lg font-medium text-gray-900"},U={class:"bg-white overflow-hidden shadow rounded-lg"},E={class:"p-5"},G={class:"flex items-center"},O={class:"ml-5 w-0 flex-1"},$={class:"text-lg font-medium text-gray-900"},q={class:"bg-white shadow overflow-hidden sm:rounded-lg mb-6"},H={class:"px-4 py-5 sm:p-6"},J={class:"space-y-4"},K={class:"flex justify-between items-center mb-2"},P={class:"text-sm font-medium text-gray-900"},Q={class:"text-sm text-gray-500"},W={key:0,class:"w-full bg-gray-200 rounded-full h-4"},X={class:"bg-blue-500 rounded-full flex items-center justify-center text-xs text-white font-bold w-full"},Y={class:"mt-2 text-xs text-gray-600"},Z={class:"bg-white shadow overflow-hidden sm:rounded-lg"},tt={class:"px-4 py-5 sm:p-6"},et={class:"overflow-x-auto"},st={class:"min-w-full divide-y divide-gray-200"},dt={class:"bg-white divide-y divide-gray-200"},ot={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},it={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},at={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ct={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},xt={class:"bg-gray-100"},mt={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},gt={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800"},ut={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},ft={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-200 text-green-800"},pt={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},_t={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-200 text-gray-800"},kt={__name:"RcaDashboard",props:{rca_matrix:Array,grand_total:Object,top_root_causes:Array,date_from:String,date_to:String},setup(o){const r=o,i=p({date_from:r.date_from||"",date_to:r.date_to||""}),f=()=>{h.get(route("rca-dashboard"),i.value,{preserveState:!0,preserveScroll:!0})};return(yt,e)=>(l(),_(k,{title:"RCA Dashboard"},{header:c(()=>e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"}," Root Cause Analysis Dashboard (Maintenance) ",-1)])),default:c(()=>[t("div",C,[t("div",R,[t("div",A,[t("div",D,[e[6]||(e[6]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Maintenance Incident Analysis",-1)),t("form",{onSubmit:y(f,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date From",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>i.value.date_from=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[m,i.value.date_from]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date To",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>i.value.date_to=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[m,i.value.date_to]])]),e[5]||(e[5]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500"}," Apply Filters ")],-1))],32)])]),t("div",S,[t("div",T,[t("div",j,[t("div",F,[e[8]||(e[8]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[t("span",{class:"text-white font-bold text-sm"},"T")])],-1)),t("div",I,[t("dl",null,[e[7]||(e[7]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Incidents",-1)),t("dd",M,d(o.grand_total.total_incidents||0),1)])])])])]),t("div",B,[t("div",N,[t("div",V,[e[10]||(e[10]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[t("span",{class:"text-white font-bold text-sm"},"R")])],-1)),t("div",L,[t("dl",null,[e[9]||(e[9]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Resolved",-1)),t("dd",z,d(o.grand_total.resolved_incidents||0),1)])])])])]),t("div",U,[t("div",E,[t("div",G,[e[12]||(e[12]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-gray-500 rounded-full flex items-center justify-center"},[t("span",{class:"text-white font-bold text-sm"},"C")])],-1)),t("div",O,[t("dl",null,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Closed",-1)),t("dd",$,d(o.grand_total.closed_incidents||0),1)])])])])])]),t("div",q,[t("div",H,[e[13]||(e[13]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Top 5 Root Causes by Incident Count ",-1)),t("div",J,[(l(!0),n(u,null,g(o.top_root_causes,(s,a)=>(l(),n("div",{key:s.root_cause_id,class:"border rounded-lg p-4"},[t("div",K,[t("span",P,d(a+1)+". "+d(s.root_cause_name),1),t("span",Q,"Total: "+d(s.total_incidents),1)]),o.grand_total.total_incidents>0?(l(),n("div",W,[t("div",{class:"h-4 rounded-full flex",style:b({width:`${s.total_incidents/o.grand_total.total_incidents*100}%`})},[t("div",X,d(s.total_incidents>0?s.total_incidents:""),1)],4)])):v("",!0),t("div",Y,d(o.grand_total.total_incidents>0?(s.total_incidents/o.grand_total.total_incidents*100).toFixed(1):0)+"% of total incidents ",1)]))),128))])])]),t("div",Z,[t("div",tt,[e[16]||(e[16]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Root Cause Analysis Matrix ",-1)),t("div",et,[t("table",st,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Root Cause "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Incidents "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Resolved "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Closed ")])],-1)),t("tbody",dt,[(l(!0),n(u,null,g(o.rca_matrix,(s,a)=>(l(),n("tr",{key:s.root_cause_id,class:w(a%2===0?"bg-white":"bg-gray-50")},[t("td",ot,d(s.root_cause_name),1),t("td",lt,[t("span",it,d(s.total_incidents),1)]),t("td",nt,[t("span",at,d(s.resolved_incidents),1)]),t("td",rt,[t("span",ct,d(s.closed_incidents),1)])],2))),128))]),t("tfoot",xt,[t("tr",null,[e[14]||(e[14]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"}," Grand Total ",-1)),t("td",mt,[t("span",gt,d(o.grand_total.total_incidents),1)]),t("td",ut,[t("span",ft,d(o.grand_total.resolved_incidents),1)]),t("td",pt,[t("span",_t,d(o.grand_total.closed_incidents),1)])])])])])])]),e[17]||(e[17]=t("div",{class:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg"},[t("div",{class:"px-4 py-5 sm:p-6"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Incident Status Legend "),t("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4"},[t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-4 bg-green-500 rounded mr-3"}),t("span",{class:"text-sm font-medium text-gray-700"},"Resolved")]),t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-4 bg-gray-500 rounded mr-3"}),t("span",{class:"text-sm font-medium text-gray-700"},"Closed")])])])],-1))])])]),_:1}))}};export{kt as default};
