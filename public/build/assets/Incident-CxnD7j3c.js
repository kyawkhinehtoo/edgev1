import{A as Te,C as Ve,N as De}from"./NoData-w09AmiXL.js";import{_ as Ue}from"./InputLabel-BePwOg3f.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as k,y as ee,o as l,d as n,a as e,Q as ne,F as A,g as X,e as i,t as c,E as N,T as re,C as ce,z as E,j as y,k as v,b as P,v as F,N as B,x as me,f as R,A as Z,G as z,c as Y,w as je,O as Ae,n as L,P as oe,B as Oe}from"./app-CE8isyGN.js";import{M as ie}from"./vue3-multiselect.umd.min-B7FIFXCk.js";import{U as Pe}from"./Upload-CIpOTrMx.js";import{P as Re}from"./Pagination-SOKSxI2c.js";import{V as Ie}from"./main-qgSVSk7Y.js";import"./DropdownLink-C75W12rT.js";const Me={components:{Label:Ue},name:"IncidentAlert",emits:["show_edit"],setup(r,t){let m=k("Loading .."),s=k("Loading ..");const j=async()=>{let h="/incidentOverdue";console.log(h);try{return await(await fetch(h)).json()}catch(w){console.error(w)}},T=async()=>{let h="/incidentRemain";console.log(h);try{return await(await fetch(h)).json()}catch(w){console.error(w)}};function x(h){let w=h%3600/60,O=h%(24*3600)/3600,g=h/(24*3600),u=null;if(h>=86400){let C=g-Math.floor(g);g=g-C,C=C*24;let d=C-Math.floor(C);C=C-d,C!=0?u=g+" d, "+C+" hr":u=g+" d"}else if(h>1440){let C=O-Math.floor(O),d=O-C;C=Math.round(C*60),d!=0?u=d+" hr,"+C+" m":u=C+" m"}else u=Math.round(w)+" m";return u}function p(h){let w=2592e3;return w-h/100*w}function D(h){t.emit("show_edit",h)}function f(){j().then(h=>{m.value=h}),T().then(h=>{s.value=h})}return ee(()=>{f()}),{bundle:m,remain:s,getList:f,getDay:x,percenttosecond:p,doEdit:D}}},Ne={class:"w-full flex justify-between text-sm px-2"},Le={key:0},Be={class:"min-w-full divide-y divide-gray-200 mt-1 shadow-xl"},ze={class:"bg-white rounded-b-lg divide-y divide-gray-200 text-sm text-center max-h-80 overflow-auto block scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white w-full"},Ee=["onClick"],Fe={class:"px-2 py-2 whitespace-nowrap col-span-1"},We={class:"px-2 py-2 whitespace-nowrap col-span-1"},He={class:"px-2 py-2 whitespace-nowrap col-span-1"};function qe(r,t,m,s,j,T){return l(),n(A,null,[e("div",Ne,[t[2]||(t[2]=e("label",{class:"mt-5 uppercase text-md"}," Ticket Overdue Hours Chart",-1)),e("button",{onClick:t[0]||(t[0]=x=>s.getList()),class:"my-2 ml-2 align-right text-center items-center px-3 py-2 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[1]||(t[1]=[e("i",{class:"fas fa-sync opacity-75 text-sm"},null,-1)]))]),s.bundle?(l(),n("div",Le,[t[4]||(t[4]=e("h2",{class:"m-2 uppercase text-md"},null,-1)),e("div",Be,[t[3]||(t[3]=ne('<div class="bg-gray-50 text-center inline-grid grid-cols-4 gap-2rounded-t-lg w-full" data-v-11ba7e6d><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Ticket ID</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>SLA Overdue</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Actual Hrs</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Based SLA</div></div>',1)),e("div",ze,[(l(!0),n(A,null,X(s.bundle,x=>(l(),n("div",{key:x.id,class:"cursor-pointer inline-grid grid-cols-4 gap-2 w-full"},[e("div",{class:"px-2 py-2 whitespace-nowrap col-span-1",onClick:p=>s.doEdit(x)},c(x.code),9,Ee),e("div",Fe,c(s.getDay(x.over)),1),e("div",We,c(s.getDay(x.diff)),1),e("div",He,c(x.percentage),1)]))),128))])])])):i("",!0)],64)}const Ye=$(Me,[["render",qe],["__scopeId","data-v-11ba7e6d"]]),Ge={name:"IncidentDetail",emits:["loading"],emits:["selected_id"],components:{Multiselect:ie},props:{errors:Object,data:Object,parentform:Object},setup(r,t){const m=N("noc"),s=N("team"),j=N("user"),T=N("incidents"),x=N("customers"),p=N("townships"),D=N("packages"),f=N("parent_form");let h=k(),w=k(!1),O=k(!1),g=k(null);const u=re({id:null,code:null,priority:"normal",customer_id:null,incharge_id:s.filter(o=>o.id==j.id)[0],type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null});function C(){g.value=null,w.value=!1,u.id="",u.code="",u.priority="normal",u.customer_id="",u.incharge_id=s.filter(o=>o.id==j.id)[0],u.type="default",u.topic="",u.status=1,u.start_date="",u.end_date="",u.new_address="",u.new_township="",u.latitude="",u.longitude="",u.package_id="",u.description="",u.date="",u.time="",u.close_date="",u.close_time="",u.resolved_date="",u.resolved_time=""}function d(){w.value!=!0?(u._method="POST",B.post("/incident",u,{preserveState:!0,onSuccess:o=>{g.value=o.props.response.id;let V=T.data.filter(I=>I.id==g.value)[0];w.value=!0,t.emit("selected_id",g.value),t.emit("loading",!1),V!==void 0&&(console.log("response is : "+V),W(V)),Toast.fire({icon:"success",title:o.props.flash.message})},onError:o=>{t.emit("loading",!1),console.log("error ..")},onStart:o=>{t.emit("loading",!0)}})):(u._method="PUT",B.post("/incident/"+u.id,u,{onSuccess:o=>{Toast.fire({icon:"success",title:o.props.flash.message}),t.emit("loading",!1)},onError:o=>{t.emit("loading",!1),console.log("error .."+o)},onStart:o=>{t.emit("loading",!0)}}))}function W(o){let V=null;g.value=o.id,w.value=!0,o.location!=null&&(V=o.location.split(",",2),u.latitude=V[0],u.longitude=V[1]),u.id=o.id,u.code=o.code,u.priority=o.priority,u.customer_id=x.filter(I=>I.id==o.customer_id)[0],u.incharge_id=m.filter(I=>I.id==o.incharge_id)[0],u.type=o.type,u.topic=o.topic,u.status=o.status,u.start_date=o.start_date,u.end_date=o.end_date,u.new_address=o.new_address,u.new_township=p.filter(I=>I.id==o.new_township)[0],u.package_id=D.filter(I=>I.id==o.package_id)[0],u.description=o.description,u.date=o.date,u.time=o.time,u.close_date=o.close_date,u.close_time=o.close_time,u.resolved_date=o.resolved_date,u.resolved_time=o.resolved_time}function q(o){w.value=!0,u.priority=o.priority}function G(o){let V="Open";return o==1?V="Open":o==2?V="Escalated":o==3?V="Closed":o==4?V="Deleted":o==5&&(V="Resolved"),V}function K(o){confirm("Are you sure want to remove?")&&(u._method="PUT",u.status=4,B.post("/incident/"+u.id,u,{onSuccess:V=>{Toast.fire({icon:"success",title:V.props.flash.message})},onError:V=>{console.log("error .."+V)}}))}const H=async()=>{let o="/getIncident/"+r.data;console.log(o);try{return t.emit("loading",!0),await(await fetch(o)).json()}catch(V){t.emit("loading",!1),console.error(V)}},Q=()=>{H().then(o=>{h.value=o})};return ee(()=>{console.log("Incident Detail - onMounted"),r.data&&(g.value=r.data,H().then(o=>{t.emit("loading",!1),o!==void 0?(console.log("appending response"),W(o),console.log("show parent form"),console.log(f),f&&q(f)):console.log("not appending response")})),D.map(function(o){return o.item_data=`${o.speed} Mbps - ${o.name} - ${o.contract_period} Months`})}),ce(()=>{console.log("Incident Detail - onUpdated"),D.map(function(o){return o.item_data=`${o.speed} Mbps - ${o.name} - ${o.contract_period} Months`})}),{loading:O,getIncident:H,calculate:Q,deleteIncident:K,doSubmit:d,getStatus:G,form:u,clearform:C,customers:x,team:s,townships:p,packages:D,openForm:q,editMode:w,edit:W}}},Ke={class:"grid grid-cols-5 gap-2"},Qe={class:"py-2 col-span-2 sm:col-span-2"},Je={class:"mt-1 flex rounded-md shadow-sm"},Xe={key:0,class:"mt-2 text-sm text-red-500"},Ze={class:"py-2 col-span-2 sm:col-span-2"},$e={class:"mt-1 flex rounded-md shadow-sm"},et={key:0,class:"mt-2 text-sm text-red-500"},tt={class:"py-2 col-span-4 sm:col-span-4"},st={key:0,class:"mt-1 flex rounded-md shadow-sm"},ot={key:1,class:"mt-2 text-sm text-red-500"},lt={class:"py-2 col-span-4 sm:col-span-4"},nt={key:0,class:"mt-1 flex rounded-md shadow-sm"},rt={key:1,class:"mt-2 text-sm text-red-500"},it={class:"py-2 col-span-4 sm:col-span-4"},at={class:"mt-1 flex"},dt={key:0,class:"mt-2 text-sm text-red-500"},ct={key:0,class:"py-2 col-span-1 sm:col-span-1"},mt={key:1,class:"py-2 col-span-4 sm:col-span-4"},ut={class:"mt-1 flex"},pt={key:0,class:"mt-2 text-sm text-red-500"},ft={class:"py-2 col-span-4 sm:col-span-4"},gt={class:"mt-1 flex"},yt={key:0,class:"mt-2 text-sm text-red-500"},bt={key:2,class:"py-2 col-span-1 sm:col-span-1"},xt={key:3,class:"py-2 col-span-2 sm:col-span-2"},_t={class:"mt-1 flex rounded-md shadow-sm"},vt={key:0,class:"mt-2 text-sm text-red-500"},wt={key:4,class:"py-2 col-span-2 sm:col-span-2"},kt={class:"mt-1 flex rounded-md shadow-sm"},ht={key:0,class:"mt-2 text-sm text-red-500"},Ct={key:5,class:"py-2 col-span-1 sm:col-span-1"},St={key:6,class:"py-2 col-span-2 sm:col-span-2"},Tt={class:"mt-1 flex rounded-md shadow-sm"},Vt={key:0,class:"mt-2 text-sm text-red-500"},Dt={key:7,class:"py-2 col-span-2 sm:col-span-2"},Ut={class:"mt-1 flex rounded-md shadow-sm"},jt={key:0,class:"mt-2 text-sm text-red-500"},At={key:8,class:"py-2 col-span-1 sm:col-span-1"},Ot={key:9,class:"py-2 col-span-4 sm:col-span-4"},Pt={class:"grid grid-cols-2 gap-2"},Rt={class:"col-span-1 sm:col-span-1"},It={class:"mt-1 flex rounded-md shadow-sm"},Mt={key:0,class:"mt-2 text-sm text-red-500"},Nt={class:"col-span-1 sm:col-span-1"},Lt={class:"mt-1 flex rounded-md shadow-sm"},Bt={key:0,class:"mt-2 text-sm text-red-500"},zt={key:10,class:"py-2 col-span-1 sm:col-span-1"},Et={key:11,class:"py-2 col-span-4 sm:col-span-4"},Ft={class:"mt-1 flex rounded-md shadow-sm"},Wt={key:0,class:"mt-2 text-sm text-red-500"},Ht={key:12,class:"py-2 col-span-1 sm:col-span-1"},qt={key:13,class:"py-2 col-span-4 sm:col-span-4"},Yt={class:"mt-1 flex rounded-md shadow-sm"},Gt={key:0,class:"mt-2 text-sm text-red-500"},Kt={key:14,class:"py-2 col-span-1 sm:col-span-1"},Qt={key:15,class:"py-2 col-span-4 sm:col-span-4"},Jt={class:"mt-1 flex"},Xt={key:0,class:"mt-2 text-sm text-red-500"},Zt={key:16,class:"py-2 col-span-1 sm:col-span-1"},$t={key:17,class:"py-2 col-span-4 sm:col-span-4"},es={key:0,class:"mt-1 flex rounded-md shadow-sm"},ts={key:1,class:"mt-2 text-sm text-red-500"},ss={key:18,class:"py-2 col-span-1 sm:col-span-1"},os={key:19,class:"py-2 col-span-4 sm:col-span-4"},ls={class:"grid grid-cols-2 gap-2"},ns={class:"col-span-1 sm:col-span-1"},rs={class:"mt-1 flex rounded-md shadow-sm"},is={key:0,class:"mt-2 text-sm text-red-500"},as={class:"col-span-1 sm:col-span-1"},ds={class:"mt-1 flex rounded-md shadow-sm"},cs={key:0,class:"mt-2 text-sm text-red-500"},ms={key:20,class:"py-2 col-span-1 sm:col-span-1"},us={key:21,class:"py-2 col-span-4 sm:col-span-4"},ps={class:"mt-1 flex rounded-md shadow-sm"},fs={key:0,class:"mt-2 text-sm text-red-500"},gs={key:22,class:"py-2 col-span-1 sm:col-span-1"},ys={key:23,class:"py-2 col-span-4 sm:col-span-4"},bs={key:0,class:"mt-1 flex rounded-md shadow-sm"},xs={key:1,class:"mt-2 text-sm text-red-500"},_s={key:24,class:"py-2 col-span-1 sm:col-span-1"},vs={key:25,class:"py-2 col-span-4 sm:col-span-4"},ws={class:"mt-1 flex rounded-md shadow-sm"},ks={key:0,class:"mt-2 text-sm text-red-500"},hs={class:"py-2 col-span-4 sm:col-span-4"},Cs={class:"mt-1 flex"},Ss={key:0,class:"mt-2 text-sm text-red-500"},Ts={key:0,class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function Vs(r,t,m,s,j,T){const x=E("multiselect");return l(),n(A,null,[e("div",Ke,[t[46]||(t[46]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",Qe,[e("div",Je,[y(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=p=>s.form.date=p),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.date]])]),r.$page.props.errors.date?(l(),n("p",Xe,c(r.$page.props.errors.date),1)):i("",!0)]),e("div",Ze,[e("div",$e,[y(e("input",{type:"time","onUpdate:modelValue":t[1]||(t[1]=p=>s.form.time=p),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.time]])]),r.$page.props.errors.time?(l(),n("p",et,c(r.$page.props.errors.time),1)):i("",!0)]),t[47]||(t[47]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",tt,[s.customers.length!==0?(l(),n("div",st,[P(x,{"deselect-label":"Selected already",options:s.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer_id,"onUpdate:modelValue":t[2]||(t[2]=p=>s.form.customer_id=p),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.customer?(l(),n("p",ot,c(r.$page.props.errors.customer),1)):i("",!0)]),t[48]||(t[48]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",lt,[s.team.length!==0?(l(),n("div",nt,[P(x,{"deselect-label":"Selected already",options:s.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[3]||(t[3]=p=>s.form.incharge_id=p),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.incharge?(l(),n("p",rt,c(r.$page.props.errors.incharge),1)):i("",!0)]),t[49]||(t[49]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",it,[e("div",at,[y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=p=>s.form.type=p),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:""},t[23]||(t[23]=[ne('<option value="default">Please Choose Ticket Type</option><option value="service_complaint">Service Complaint</option><option value="gaming_issue">Gaming Issue</option><option value="relocation">Relocation</option><option value="plan_change">Plan Change</option><option value="information_update">Information Update</option><option value="suspension">Suspension</option><option value="resume">Resume</option><option value="termination">Termination</option>',9)]),512),[[F,s.form.type]])]),r.$page.props.errors.type?(l(),n("p",dt,c(r.$page.props.errors.type),1)):i("",!0)]),s.form.type=="service_complaint"?(l(),n("div",ct,t[24]||(t[24]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):i("",!0),s.form.type=="service_complaint"?(l(),n("div",mt,[e("div",ut,[y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=p=>s.form.topic=p),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[25]||(t[25]=[ne('<option value="no_internet">No Internet</option><option value="los_redlight">LOS Redlight</option><option value="slow_performance">Slow Performance</option><option value="wifi_issue">Wifi Issue</option><option value="onu_issue">ONU Issue</option><option value="password_change">Password Changed</option><option value="other">Other</option>',7)]),512),[[F,s.form.topic]])]),r.$page.props.errors.topic?(l(),n("p",pt,c(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),t[50]||(t[50]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",ft,[e("div",gt,[y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=p=>s.form.status=p),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[26]||(t[26]=[e("option",{value:"1"},"Open",-1),e("option",{value:"2",disabled:""},"Escalated",-1),e("option",{value:"5",disabled:""},"Resolved",-1),e("option",{value:"3"},"Closed",-1)]),512),[[F,s.form.status]])]),r.$page.props.errors.status?(l(),n("p",yt,c(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==3?(l(),n("div",bt,t[27]||(t[27]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):i("",!0),s.form.status==3?(l(),n("div",xt,[e("div",_t,[y(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=p=>s.form.close_date=p),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.close_date]])]),r.$page.props.errors.close_date?(l(),n("p",vt,c(r.$page.props.errors.close_date),1)):i("",!0)])):i("",!0),s.form.status==3?(l(),n("div",wt,[e("div",kt,[y(e("input",{type:"time","onUpdate:modelValue":t[8]||(t[8]=p=>s.form.close_time=p),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.close_time]])]),r.$page.props.errors.close_time?(l(),n("p",ht,c(r.$page.props.errors.close_time),1)):i("",!0)])):i("",!0),s.form.status==5?(l(),n("div",Ct,t[28]||(t[28]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):i("",!0),s.form.status==5?(l(),n("div",St,[e("div",Tt,[y(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=p=>s.form.resolved_date=p),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.resolved_date]])]),r.$page.props.errors.resolved_date?(l(),n("p",Vt,c(r.$page.props.errors.resolved_date),1)):i("",!0)])):i("",!0),s.form.status==5?(l(),n("div",Dt,[e("div",Ut,[y(e("input",{type:"time","onUpdate:modelValue":t[10]||(t[10]=p=>s.form.resolved_time=p),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.resolved_time]])]),r.$page.props.errors.resolved_time?(l(),n("p",jt,c(r.$page.props.errors.resolved_time),1)):i("",!0)])):i("",!0),s.form.type=="suspension"?(l(),n("div",At,t[29]||(t[29]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense Period : ")],-1)]))):i("",!0),s.form.type=="suspension"?(l(),n("div",Ot,[e("div",Pt,[e("div",Rt,[e("div",It,[t[30]||(t[30]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",Mt,c(r.$page.props.errors.start_date),1)):i("",!0)]),e("div",Nt,[e("div",Lt,[t[31]||(t[31]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=p=>s.form.end_date=p),name:"end_date",id:"end_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.end_date]])]),r.$page.props.errors.end_date?(l(),n("p",Bt,c(r.$page.props.errors.end_date),1)):i("",!0)])])])):i("",!0),s.form.type=="resume"?(l(),n("div",zt,t[32]||(t[32]=[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")],-1)]))):i("",!0),s.form.type=="resume"?(l(),n("div",Et,[e("div",Ft,[t[33]||(t[33]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[13]||(t[13]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.start_date]])]),r.$page.props.errors.resume?(l(),n("p",Wt,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="termination"?(l(),n("div",Ht,t[34]||(t[34]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):i("",!0),s.form.type=="termination"?(l(),n("div",qt,[e("div",Yt,[t[35]||(t[35]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[14]||(t[14]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",Gt,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",Kt,t[36]||(t[36]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",Qt,[e("div",Jt,[y(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=p=>s.form.new_address=p),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[v,s.form.new_address]])]),r.$page.props.errors.new_address?(l(),n("p",Xt,c(r.$page.props.errors.new_address),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",Zt,t[37]||(t[37]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",$t,[s.townships.length!==0?(l(),n("div",es,[P(x,{"deselect-label":"Selected already",options:s.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[16]||(t[16]=p=>s.form.new_township=p),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.new_township?(l(),n("p",ts,c(r.$page.props.errors.new_township),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",ss,t[38]||(t[38]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",os,[e("div",ls,[e("div",ns,[e("div",rs,[t[39]||(t[39]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=p=>s.form.latitude=p),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude"},null,512),[[v,s.form.latitude]])]),r.$page.props.errors.latitude?(l(),n("p",is,c(r.$page.props.errors.latitude),1)):i("",!0)]),e("div",as,[e("div",ds,[t[40]||(t[40]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=p=>s.form.longitude=p),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude"},null,512),[[v,s.form.longitude]])]),r.$page.props.errors.longitude?(l(),n("p",cs,c(r.$page.props.errors.longitude),1)):i("",!0)])])])):i("",!0),s.form.type=="relocation"?(l(),n("div",ms,t[41]||(t[41]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",us,[e("div",ps,[t[42]||(t[42]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[19]||(t[19]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",fs,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(l(),n("div",gs,t[43]||(t[43]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_package",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Package: ")],-1)]))):i("",!0),s.form.type=="plan_change"?(l(),n("div",ys,[s.packages.length!==0?(l(),n("div",bs,[P(x,{"deselect-label":"Selected already",options:s.packages,"track-by":"id",label:"item_data",modelValue:s.form.package_id,"onUpdate:modelValue":t[20]||(t[20]=p=>s.form.package_id=p),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.package?(l(),n("p",xs,c(r.$page.props.errors.package),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(l(),n("div",_s,t[44]||(t[44]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="plan_change"?(l(),n("div",vs,[e("div",ws,[t[45]||(t[45]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[21]||(t[21]=p=>s.form.start_date=p),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",ks,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),t[51]||(t[51]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",hs,[e("div",Cs,[y(e("textarea",{"onUpdate:modelValue":t[22]||(t[22]=p=>s.form.description=p),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[v,s.form.description]])]),r.$page.props.errors.description?(l(),n("p",Ss,c(r.$page.props.errors.description),1)):i("",!0)])]),s.loading?(l(),n("div",Ts,t[52]||(t[52]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):i("",!0)],64)}const Ds=$(Ge,[["render",Vs]]),Us={name:"Task",components:{Multiselect:ie},props:["data","errors"],setup(r){const t=N("noc"),m=N("subcons"),s=N("write_permission"),j=N("read_permission"),T=N("task_write"),x=N("pendingRootCause");N("subRootCause");const p=k({});let D=k([]),f=k(),h=k(!1),w=k(!1),O=k(!1);const g=re({id:null,assigned:null,target:null,status:1,description:null,comment:null,incident_id:null,root_causes:null,sub_root_causes:null,root_causes_id:null,sub_root_causes_id:null,complete_date:null});function u(){w.value=!0,g.incident_id=r.data}function C(){g.id=null,g.assigned=null,g.target=null,g.status=1,g.description=null,g.comment=null,g.incident_id=r.data,g.root_causes=null,g.sub_root_causes=null,g.root_causes_id=null,g.sub_root_causes_id=null,g.complete_date=null}function d(b){console.log(b),g.id=b.id,g.assigned=m.filter(S=>S.id==b.assigned)[0],g.description=b.description,g.incident_id=b.incident_id,g.status=b.status,g.target=b.target,g.comment=b.comment,g.root_causes=b.root_causes_id?x.filter(S=>S.id==b.root_causes_id)[0]:null,g.sub_root_causes="",g.root_causes_id=b.root_causes_id,g.sub_root_causes_id=b.sub_root_causes_id,g.complete_date=b.complete_date,O.value=!0,w.value=!0}function W(b){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(S=>{S.isConfirmed?q(b):Toast.fire("Your data is safe!")})}function q(b){g.id=b.id,g.assigned=m.filter(S=>S.id==b.assigned)[0],g.description=b.description,g.incident_id=b.incident_id,g.status=0,g.target=b.target,O.value=!0,w.value=!1,H()}function G(b){b.status!=2?Toast.fire({title:"Are you sure?",text:"Do you want to mark as completed !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(S=>{S.isConfirmed&&K(b,2)}):Toast.fire({title:"Are you sure?",text:"Do you want to mark as WIP !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(S=>{S.isConfirmed&&K(b,1)})}function K(b,S){g.id=b.id,g.assigned=b.assigned,g.description=b.description,g.incident_id=b.incident_id,g.status=S,g.target=b.target,O.value=!0,w.value=!1,H()}function H(){O.value!=!0?(g._method="POST",B.post("/addTask",g,{preserveState:!0,onSuccess:b=>{w.value=!1,C(),te(),Toast.fire({icon:"success",title:b.props.flash.message})},onError:b=>{console.log("error ..",b)}})):(g._method="PUT",B.post("/editTask/"+g.id,g,{onSuccess:b=>{w.value=!1,O.value=!1,C(),te(),Toast.fire({icon:"success",title:b.props.flash.message}),closeModal()},onError:b=>{p.value=b,console.log("error ..",b)}}))}function Q(){w.value=!1,preserveState=!0}const o=async()=>{let b="/getTask/"+r.data;console.log(b);try{return await(await fetch(b)).json()}catch(S){console.error(S)}},V=b=>{let S=m.filter(J=>J.id==b)[0];return S?S.name:""};function I(b){let S="WIP";return b==0?S="Deleted":b==1?S="WIP":b==2?S="Completed":b==3&&(S="Pending"),S}const te=()=>{o().then(b=>{f.value=b})};function le(b){var J;D.value=[];let S=x.filter(se=>se.id==b.id);D.value=(J=S[0])==null?void 0:J.sub_root_causes,g.sub_root_causes_id&&(g.sub_root_causes=D.value.filter(se=>se.id==g.sub_root_causes_id)[0],g.sub_root_causes||(g.sub_root_causes_id=null))}return me(()=>g.root_causes,b=>{b&&le(b)}),ee(()=>{console.log(f.value),te()}),{loading:h,task_list:f,edit:w,editMode:O,newTask:u,saveTask:H,cancelTask:Q,getName:V,getStatus:I,editTask:d,deleteTask:W,completeTask:G,form:g,noc:t,subcons:m,write_permission:s,read_permission:j,task_write:T,pendingRootCause:x,subRCA:D,formErrors:p}}},js={class:"flex w-full justify-end"},As={key:0},Os={key:1},Ps={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Rs={key:1},Is={class:"min-w-full divide-y divide-gray-200"},Ms={class:"bg-white text-sm scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white text-left"},Ns={class:"px-6 py-3 whitespace-nowrap"},Ls={class:"px-6 py-3 whitespace-nowrap"},Bs={class:"px-6 py-3 whitespace-nowrap"},zs={class:"px-6 py-3 whitespace-nowrap"},Es={class:"px-6 py-3 whitespace-nowrap"},Fs={class:"px-6 py-3 whitespace-nowrap"},Ws={key:0,class:"px-6 py-3 whitespace-nowrap"},Hs=["onClick"],qs={key:0},Ys=["onClick"],Gs={key:1,class:"px-6 py-3 whitespace-nowrap"},Ks=["onClick"],Qs={key:2},Js={class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full"},Xs={class:"py-2 col-span-3 sm:col-span-3"},Zs={class:"flex rounded-md shadow-sm"},$s={key:0,class:"flex rounded-md shadow-sm w-full"},eo={key:1,class:"mt-2 text-sm text-red-500"},to={class:"py-2 col-span-3 sm:col-span-3"},so={class:"flex rounded-md shadow-sm"},oo={key:0,class:"mt-2 text-sm text-red-500"},lo={class:"py-2 col-span-3 sm:col-span-3"},no={class:"flex rounded-md shadow-sm"},ro={key:0,class:"mt-2 text-sm text-red-500"},io={class:"py-2 col-span-3 sm:col-span-3"},ao={class:"flex rounded-md shadow-sm"},co={class:"flex gap-4"},mo={class:"inline-flex items-center"},uo={class:"inline-flex items-center"},po={class:"inline-flex items-center"},fo={class:"inline-flex items-center"},go={key:0,class:"mt-2 text-sm text-red-500"},yo={class:"py-2 col-span-3 sm:col-span-3"},bo={class:"flex rounded-md shadow-sm"},xo={key:0,class:"mt-2 text-sm text-red-500"},_o={class:"py-2 col-span-3 sm:col-span-3"},vo={key:0,class:"flex rounded-md shadow-sm w-full"},wo={key:1,class:"mt-2 text-sm text-red-500"},ko={class:"py-2 col-span-3 sm:col-span-3"},ho={key:0,class:"flex rounded-md shadow-sm w-full"},Co={key:1,class:"mt-2 text-sm text-red-500"},So={class:"py-2 col-span-3 sm:col-span-3"},To={class:"flex rounded-md shadow-sm"},Vo={key:0,class:"mt-2 text-sm text-red-500"};function Do(r,t,m,s,j,T){var p,D;const x=E("multiselect");return l(),n(A,null,[e("div",js,[!s.edit&&s.write_permission==1&&s.task_write==1?(l(),n("a",{key:0,href:"#",onClick:t[0]||(t[0]=f=>s.newTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[16]||(t[16]=[R("Add Task"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0),s.edit&&s.write_permission==1&&s.task_write==1?(l(),n("a",{key:1,href:"#",onClick:t[1]||(t[1]=f=>s.saveTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-green-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-400 active:bg-green-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},[s.editMode?i("",!0):(l(),n("span",As,"Save Task")),s.editMode?(l(),n("span",Os,"Update Task")):i("",!0),t[17]||(t[17]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))])):i("",!0),s.edit?(l(),n("a",{key:2,href:"#",onClick:t[2]||(t[2]=f=>s.cancelTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-gray-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[18]||(t[18]=[R("Cancel"),e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)]),s.task_list?i("",!0):(l(),n("div",Ps,t[19]||(t[19]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.task_list&&!s.edit?(l(),n("div",Rs,[e("table",Is,[t[25]||(t[25]=e("thead",{class:"bg-gray-50 text-xs"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"No. "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Instruction"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Assigned"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Target"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Complete At"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Action")])],-1)),e("tbody",Ms,[(l(!0),n(A,null,X(s.task_list,(f,h)=>(l(),n("tr",{key:f.id},[e("td",Ns,c(h+1),1),e("td",Ls,c(f.description.length>50?f.description.substring(0,50)+" ...":f.description),1),e("td",Bs,c(s.getName(f.assigned)),1),e("td",zs,c(f.target),1),e("td",Es,c(f.complete_date??"N/A"),1),e("td",Fs,c(s.getStatus(f.status)),1),s.write_permission==1?(l(),n("td",Ws,[e("a",{href:"#",onClick:w=>s.editTask(f),class:"text-blue-600"},t[20]||(t[20]=[e("i",{class:"fa fa-edit"},null,-1)]),8,Hs),t[23]||(t[23]=R()),s.task_write?(l(),n("span",qs,[t[22]||(t[22]=R(" | ")),e("a",{href:"#",onClick:w=>s.deleteTask(f),class:"text-red-600"},t[21]||(t[21]=[e("i",{class:"fa fa-trash"},null,-1)]),8,Ys)])):i("",!0)])):(l(),n("td",Gs,[e("a",{href:"#",onClick:w=>s.editTask(f),class:"text-blue-600"},t[24]||(t[24]=[e("i",{class:"fa fa-eye"},null,-1)]),8,Ks)]))]))),128))])])])):i("",!0),s.edit?(l(),n("div",Qs,[e("div",Js,[t[33]||(t[33]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Assigned : ")])],-1)),e("div",Xs,[e("div",Zs,[s.subcons.length!==0?(l(),n("div",$s,[P(x,{"deselect-label":"Selected already",options:s.subcons,"track-by":"id",label:"name",modelValue:s.form.assigned,"onUpdate:modelValue":t[3]||(t[3]=f=>s.form.assigned=f),"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.assigned?(l(),n("p",eo,c(r.$page.props.errors.assigned),1)):i("",!0)])]),t[34]||(t[34]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Target : ")])],-1)),e("div",to,[e("div",so,[y(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=f=>s.form.target=f),name:"target",id:"target",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.target]])]),r.$page.props.errors.target?(l(),n("p",oo,c(r.$page.props.errors.target),1)):i("",!0)]),t[35]||(t[35]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Instruction : ")])],-1)),e("div",lo,[e("div",no,[y(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=f=>s.form.description=f),name:"description",id:"description",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.description]])]),r.$page.props.errors.description?(l(),n("p",ro,c(r.$page.props.errors.description),1)):i("",!0)]),t[36]||(t[36]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",io,[e("div",ao,[e("div",co,[e("label",mo,[y(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=f=>s.form.status=f),value:"1",class:"form-radio text-yellow-500"},null,512),[[Z,s.form.status]]),t[26]||(t[26]=e("span",{class:"ml-2"},"WIP",-1))]),e("label",uo,[y(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=f=>s.form.status=f),value:"3",class:"form-radio text-red-500"},null,512),[[Z,s.form.status]]),t[27]||(t[27]=e("span",{class:"ml-2"},"Pending",-1))]),e("label",po,[y(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=f=>s.form.status=f),value:"2",class:"form-radio text-green-500"},null,512),[[Z,s.form.status]]),t[28]||(t[28]=e("span",{class:"ml-2"},"Completed",-1))]),e("label",fo,[y(e("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=f=>s.form.status=f),value:"0",class:"form-radio text-indigo-500"},null,512),[[Z,s.form.status]]),t[29]||(t[29]=e("span",{class:"ml-2"},"Deleted",-1))])])]),r.$page.props.errors.status?(l(),n("p",go,c(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==2?(l(),n(A,{key:0},[t[30]||(t[30]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"complete_date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Complete Date : ")])],-1)),e("div",yo,[e("div",bo,[y(e("input",{type:"date","onUpdate:modelValue":t[10]||(t[10]=f=>s.form.complete_date=f),name:"complete_date",id:"complete_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.complete_date]])]),r.$page.props.errors.complete_date?(l(),n("p",xo,c(r.$page.props.errors.complete_date),1)):i("",!0)])],64)):i("",!0),s.form.status==3?(l(),n(A,{key:1},[t[31]||(t[31]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"root_causes_id",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Root Cause for Pending : ")])],-1)),e("div",_o,[((p=s.pendingRootCause)==null?void 0:p.length)!==0?(l(),n("div",vo,[P(x,{"deselect-label":"Selected already",options:s.pendingRootCause,"track-by":"id",label:"name",modelValue:s.form.root_causes,"onUpdate:modelValue":[t[11]||(t[11]=f=>s.form.root_causes=f),t[12]||(t[12]=f=>s.form.root_causes_id=f==null?void 0:f.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.root_causes_id?(l(),n("p",wo,c(r.$page.props.errors.root_causes_id),1)):i("",!0)]),t[32]||(t[32]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"sub_root_causes",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Sub Root Cause : ")])],-1)),e("div",ko,[((D=s.subRCA)==null?void 0:D.length)!==0?(l(),n("div",ho,[P(x,{"deselect-label":"Selected already",options:s.subRCA,"track-by":"id",label:"name",modelValue:s.form.sub_root_causes,"onUpdate:modelValue":[t[13]||(t[13]=f=>s.form.sub_root_causes=f),t[14]||(t[14]=f=>s.form.sub_root_causes_id=f==null?void 0:f.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.sub_root_causes_id?(l(),n("p",Co,c(r.$page.props.errors.sub_root_causes_id),1)):i("",!0)])],64)):i("",!0),t[37]||(t[37]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"comment",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Comments : ")])],-1)),e("div",So,[e("div",To,[y(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=f=>s.form.comment=f),name:"comment",id:"comment",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.comment]])]),r.$page.props.errors.comment?(l(),n("p",Vo,c(r.$page.props.errors.comment),1)):i("",!0)])])])):i("",!0)],64)}const Uo=$(Us,[["render",Do]]),jo={name:"Log",props:["data"],setup(r){const t=k(""),m=async()=>{let j="/getLog/"+r.data;try{return await(await fetch(j)).json()}catch(T){console.error(T)}},s=()=>{m().then(j=>{t.value=j})};return ee(()=>{s()}),{logs:t}}},Ao={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Oo={key:1},Po={class:"min-w-full divide-y divide-gray-200 table-auto"},Ro={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},Io={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/12 flex"},Mo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/4 flex-1"},No={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/3 flex-1"},Lo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-full flex-1"};function Bo(r,t,m,s,j,T){return l(),n(A,null,[s.logs?i("",!0):(l(),n("div",Ao,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(l(),n("div",Oo,[e("table",Po,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3 flex-1"},"Actor"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full flex-1"},"Action")])],-1)),e("tbody",Ro,[(l(!0),n(A,null,X(s.logs,(x,p)=>(l(),n("tr",{key:x.id,class:"flex"},[e("td",Io,c(p+1),1),e("td",Mo,c(x.created_at),1),e("td",No,c(x.name),1),e("td",Lo,c(x.action),1)]))),128))])])])):i("",!0)],64)}const zo=$(jo,[["render",Bo]]),Eo={name:"History",props:["data"],setup(r){const t=k(),m=async()=>{let j="/getHistory/"+r.data;try{return await(await fetch(j)).json()}catch(T){console.error(T)}},s=()=>{m().then(j=>{t.value=j})};return ee(()=>{s()}),{logs:t}}},Fo={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Wo={key:1},Ho={class:"min-w-full divide-y divide-gray-200 table-auto"},qo={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},Yo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex"},Go={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Ko={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Qo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Jo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Xo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Zo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"};function $o(r,t,m,s,j,T){return l(),n(A,null,[s.logs?i("",!0):(l(),n("div",Fo,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(l(),n("div",Wo,[e("table",Ho,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Type"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Topic (if exists)"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Opened By")])],-1)),e("tbody",qo,[(l(!0),n(A,null,X(s.logs,(x,p)=>(l(),n("tr",{key:x.id,class:"flex"},[e("td",Yo,c(p+1),1),e("td",Go,c(x.date+" "+x.time),1),e("td",Ko,c(x.code),1),e("td",Qo,c(x.ftth_id),1),e("td",Jo,c(x.type),1),e("td",Xo,c(x.topic?x.topic:"N/A"),1),e("td",Zo,c(x.name),1)]))),128))])])])):i("",!0)],64)}const el=$(Eo,[["render",$o]]),tl={name:"File",components:{Upload:Pe},props:["data"],setup(r){let t=k(!1),m=k();const s=N("write_permission"),j=N("read_permission");let T=k(!1),x=k("");function p(){T.value=!0,x.value={incident_id:r.data}}function D(){T.value=!1,g()}function f(u){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(C=>{C.isConfirmed?h(u):Toast.fire("Your data is safe!")})}function h(u){u._method="DELETE",B.post("/deleteFile/"+u.id,u,{onSuccess(C){Toast.fire({icon:"success",title:"Your File has been Deleted !"}),g()}})}const w=async()=>{let u="/getFile/"+r.data;console.log(u);try{return await(await fetch(u)).json()}catch(C){console.error(C)}},O=u=>{u&&(T.value=!1,g(),Toast.fire({icon:"success",title:"Successfully Uploaded the File"}))},g=()=>{w().then(u=>{m.value=u})};return ee(()=>{g()}),{file_list:m,add:T,deleteFile:f,addFile:p,closeFile:D,checkUpload:O,incident_id:x,write_permission:s,read_permission:j,loading:t}}},sl={class:"flex w-full justify-end"},ol={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},ll={key:1},nl={class:"min-w-full divide-y divide-gray-200 table-auto"},rl={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},il={class:"px-6 py-3 whitespace-nowrap tracking-wider w-1/12"},al={class:"px-6 py-3 whitespace-nowrap tracking-wider w-full"},dl={key:0,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},cl=["href"],ml=["onClick"],ul={key:1,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},pl=["href"],fl={key:2};function gl(r,t,m,s,j,T){const x=E("upload");return l(),n(A,null,[e("div",sl,[!s.add&&s.write_permission==1?(l(),n("a",{key:0,href:"#",onClick:t[0]||(t[0]=p=>s.addFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[2]||(t[2]=[R("Add File"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0),s.add?(l(),n("a",{key:1,href:"#",onClick:t[1]||(t[1]=p=>s.closeFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[3]||(t[3]=[R("Close"),e("i",{class:"fas fa-times-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)]),s.file_list?i("",!0):(l(),n("div",ol,t[4]||(t[4]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.file_list&&!s.add?(l(),n("div",ll,[e("table",nl,[t[9]||(t[9]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"},"ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full"},"File"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Action ")])],-1)),e("tbody",rl,[(l(!0),n(A,null,X(s.file_list,(p,D)=>(l(),n("tr",{key:p.id,class:"flex"},[e("td",il,c(D+1),1),e("td",al,c(p.name),1),s.write_permission==1?(l(),n("td",dl,[e("a",{href:p.path,target:"_blank"},t[5]||(t[5]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,cl),t[7]||(t[7]=R(" | ")),e("a",{href:"#",onClick:f=>s.deleteFile(p),class:"text-red-600"},t[6]||(t[6]=[e("i",{class:"fa fa-trash"},null,-1)]),8,ml)])):(l(),n("td",ul,[e("a",{href:p.path,target:"_blank"},t[8]||(t[8]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,pl)]))]))),128))])])])):i("",!0),s.add?(l(),n("div",fl,[P(x,{data:s.incident_id,onStatus:s.checkUpload},null,8,["data","onStatus"])])):i("",!0)],64)}const yl=$(tl,[["render",gl]]),bl={name:"Incident",components:{AppLayout:Te,Pagination:Re,IncidentAlert:Ye,IncidentDetail:Ds,Multiselect:ie,VueDatePicker:Ie,Task:Uo,File:yl,Log:zo,History:el,CustomerDetail:Ve,NoData:De},props:{incidents:Object,incidents_2:Object,isps:Object,slas:Object,team:Object,townships:Object,customers:Object,packages:Object,critical:Object,high:Object,normal:Object,errors:Object,read_permission:Boolean,write_permission:Boolean,task_write:Boolean,user:Object,subcons:Object,rootCause:Object,subRootCause:Object,pendingRootCause:Object,relocationServices:Object,supervisors:Object,ticketRequest:Object,teamAssign:Object,supervisorAssign:Object,close:Object,suspensionTickets:Object,maintenanceServices:Object,noc:Object},setup(r){const t=k(""),m=k(""),s=k(1);let j=k(!1),T=k(!1),x=k(""),p=k(0),D=k("default"),f=k("default"),h=k("default"),w=k([]),O=k([]);const g=k({date:"YYYY-MM-DD",month:"MMM"});let u=k(!1),C=k(!1);z("noc",r.noc),z("subcons",r.subcons),z("team",r.team),z("townships",r.townships),z("user",r.user),z("packages",r.packages),z("read_permission",r.read_permission),z("write_permission",r.write_permission),z("task_write",r.task_write),z("customers",r.customers),z("pendingRootCause",r.pendingRootCause),z("rootCause",r.rootCause),z("subRootCause",r.subRootCause);const d=re({id:null,code:null,edge_code:null,suspension_incident:null,suspension_incident_id:null,priority:null,customer:null,customer_id:null,incharge_id:r.team.filter(a=>a.id==r.user.id)[0],supervisor_id:null,supervisor:null,type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null,rca:null,sub_rca:null,root_cause_id:null,sub_root_cause_id:null,rca_notes:null,relocation_service:null,relocation_service_id:null,current_bandwidth:null,current_maintenance_plan:null,new_bandwidth:null,new_maintenance_plan:null,new_maintenance_plan_id:null,partner_id:null,customer_partner_id:null,customer_partner_name:null});let W=k([]),q=k(!0),G=k("");function K(a){G.value=a}function H(a){if(x.value!=null&&(q.value=a,a==1)){let _=r.incidents.data.filter(M=>M.id==x.value)[0];S(_)}}k([{id:1,name:"Request",$isDisabled:!0},{id:2,name:"Team Assign"},{id:3,name:"Close"},{id:4,name:"Deleted"},{id:5,name:"Resolved Open",$isDisabled:!0},{id:6,name:"Supervisor Assign",$isDisabled:!0},{id:7,name:"Waiting to Suspend"},{id:8,name:"Waiting to Reopen"},{id:9,name:"Waiting To Terminate"},{id:10,name:"Waiting to Plan Change"},{id:11,name:"Waiting to Dismantle"}]);function Q(){return r.user.user_type==="internal"?!1:r.write_permission==!1?!0:d.status==1||d.status==""?(console.log("status is 1 or empty"),!1):!0}function o(){return r.user.user_type=="partner"?(console.log("user type is partner"),!(d.status==10||d.status==5||d.status==9)):r.user.user_type==="internal"||r.user.user_type==="isp"&&(d.status==1||d.status==""||d.status==5)?!1:r.write_permission==!1?!0:d.status==1||d.status==""?(console.log("status is 1 or empty"),!1):!0}function V(){const a=new Date;var _=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),M=a.getHours()+":"+a.getMinutes();!d.close_date&&p.value!=3&&(d.close_date=_),!d.close_time&&p.value!=3&&(d.close_time=M),q.value=1,u.value=!0}function I(){u.value=!1,x.value=null}function te(){J(),V()}function le(a){let _=r.incidents_2.filter(M=>M.id==a.id)[0];S(_)}const b=k("");function S(a){let _=null;x.value=a.id,T.value=!0,a.location!=null&&(_=a.location.split(",",2),d.latitude=_[0],d.longitude=_[1]),a.maintenance_service_type&&(W.value=r.maintenanceServices.filter(U=>U.service_type==a.maintenance_service_type));let M=r.customers.filter(U=>U.id==a.customer_id)[0];d.id=a.id,d.code=a.code,d.edge_code=a.edge_code,d.suspension_incident=r.suspensionTickets.filter(U=>U.id==a.suspension_incident_id)[0],d.suspension_incident_id=a.suspension_incident_id,d.priority=a.priority,d.customer=r.customers.filter(U=>U.id==a.customer_id)[0],d.customer_id=a.customer_id,d.incharge_id=r.noc.filter(U=>U.id==a.incharge_id)[0],d.type=a.type,d.topic=a.topic,d.status=a.status,d.start_date=a.start_date,d.end_date=a.end_date,d.new_address=a.new_address,d.supervisor=r.supervisors.filter(U=>U.id==a.supervisor_id)[0],d.supervisor_id=a.supervisor_id,d.new_township=r.townships.filter(U=>U.id==a.new_township)[0],d.package_id=r.packages.filter(U=>U.id==a.package_id)[0],d.description=a.description,d.date=a.date,d.time=a.time,d.partner_id=a.partner_id,d.close_date=a.close_date,d.close_time=a.close_time,d.resolved_date=a.resolved_date,d.resolved_time=a.resolved_time,d.rca=r.rootCause.filter(U=>U.id==a.root_cause_id)[0],d.sub_rca="",d.root_cause_id=a.root_cause_id,d.sub_root_cause_id=a.sub_root_cause_id,d.rca_notes=a.rca_notes,d.relocation_service=a.relocation_service_id?r.relocationServices.find(U=>U.id==a.relocation_service_id):null,d.relocation_service_id=a.relocation_service_id,d.current_bandwidth=M.bandwidth,d.current_maintenance_plan=a.maintenance_service_name,d.new_bandwidth=a.new_bandwidth,d.new_maintenance_plan=r.maintenanceServices.filter(U=>U.id==a.new_maintenance_service_id)[0],d.new_maintenance_plan_id=a.new_maintenance_service_id,d.customer_partner_id=a.customer_partner_id,d.customer_partner_name=a.customer_partner_name,console.log("maintenance service id : "+a.new_maintenance_service_id),V()}function J(){x.value=null,T.value=!1,d.id="",d.code="",d.edge_code="",d.suspension_incident="",d.suspension_incident_id="",d.priority="normal",d.customer="",d.customer_id="",d.incharge_id=r.team.filter(a=>a.id==r.user.id)[0],d.type="default",d.topic="",d.status=1,d.start_date="",d.end_date="",d.new_address="",d.new_township="",d.latitude="",d.longitude="",d.package_id="",d.description="",d.date="",d.time="",d.close_date="",d.close_time="",d.resolved_date="",d.resolved_time="",d.rca="",d.sub_rca="",d.rca_notes="",d.root_cause_id=null,d.sub_root_cause_id=null,d.relocation_service="",d.relocation_service_id=null,d.partner_id=null,d.supervisor=null,d.supervisor_id=null}function se(a){a!=null?(d.current_bandwidth=d.customer.bandwidth,d.current_maintenance_plan=d.customer.maintenance_service_name,console.log("updateCustomer : "+d.customer.maintenance_service_type),W.value=r.maintenanceServices.filter(_=>_.service_type==d.customer.maintenance_service_type)):(d.current_bandwidth=null,d.current_maintenance_plan=null)}function ue(a){let _="Request";return a==1?_="Request":a==2?_="Team Assign":a==3?_="Closed":a==4?_="Deleted":a==5?_="Resolved Open":a==6?_="Supervisor Assign":a==7?_="Waiting to Suspend":a==8?_="Waiting to Reopen":a==9?_="Waiting to Terminate":a==10?_="Waiting to Plan Change":a==11&&(_="Waiting to Dismantle"),_}const pe=k([{id:"1",name:"WIP"},{id:"3",name:"Pending"},{id:"4",name:"Photo Upload Complete"},{id:"5",name:"Photo Upload Rejected"},{id:"2",name:"Supervisor Approved"},{id:"0",name:"Deleted"}]);function fe(a){if(a){console.log("getTeamStatus : "+a);const _=pe.value.find(M=>M.id==String(a));return _?_.name:"WIP"}else return console.log("getTeamStatus :  NA "+a),"NA"}function ge(a){confirm("Are you sure want to remove?")&&(d._method="PUT",d.status=4,B.post("/incident/"+d.id,d,{onSuccess:_=>{s.value+=1,Toast.fire({icon:"success",title:_.props.flash.message}),I()},onError:_=>{console.log("error ..".errors)}}))}const ye=()=>{let a="/incident/";p.value!=null&&(a=a+"?status="+p.value),B.get(a,{keyword:t.value},{preserveState:!0})},be=a=>{if(console.log("changeType : "+a),a=="plan_change"){const _=new Date,M=6.5*60,U=_.getTime()+_.getTimezoneOffset()*6e4,de=new Date(U+M*6e4),Se=new Date(de.getFullYear(),de.getMonth()+1,2).toISOString().split("T")[0];b.value=Se,d.start_date=b.value}},xe=()=>{let a="/incident/";t.value!=null&&(a=a+"?keyword="+t.value),D.value!="default"&&(a=a+"&type="+D.value),f.value!="default"&&(a=a+"&isp="+f.value),h.value!="default"&&(a=a+"&sla_hour="+h.value),w.value!=""&&(a=a+"&date="+w.value),B.get(a,{status:p.value},{preserveState:!0})};function _e(a){console.log("clickStatus : "+a);let _="/incident/";t.value!=null&&(_=_+"?keyword="+t.value),a!=null&&(_=_+"&status="+a),D.value!="default"&&(_=_+"&type="+D.value),h.value!="default"&&(_=_+"&sla_hour="+h.value),f.value!="default"&&(_=_+"&isp="+f.value),w.value!=""&&(_=_+"&date="+w.value),B.get(_,{status:a},{preserveState:!1})}const ve=a=>{let _="/incident";a!="all"?B.get(_,{priority:a},{preserveState:!0}):B.get(_,{},{preserveState:!0})},we=a=>{let _="/incident/?";m.value=a,m.order=m.order!=="asc"?"asc":"desc";let M=ke();B.get(_+M,{sort:m.value,order:m.order},{preserveState:!0})},ke=()=>{let a="";return t.value!=null&&(a="&keyword="+t.value),D.value!="default"&&(a+="&type="+D.value),f.value!="default"&&(a+="&isp="+f.value),h.value!="default"&&(a+="&sla_hour="+h.value),p.value!=null&&(a+="&status="+p.value),w.value!=""&&(a+="&date="+w.value),a};function ae(){r.incidents.data.map(function(a){a.priority=="high"?a.color=a.status!=3&&a.status!=4?"yellow-600":"gray-200":a.priority=="critical"?a.color=a.status!=3&&a.status!=4?"red-600":"gray-200":a.color=a.status!=3&&a.status!=4?"yellow-300":"gray-200"})}function he(){T.value!=!0?(d._method="POST",B.post("/incident",d,{preserveState:!0,onSuccess:a=>{x.value=a.props.response.id;let _=r.incidents.data.filter(M=>M.id==x.value)[0];T.value=!0,C.value=!1,_!==void 0&&(console.log("response is : "+_),S(_)),Toast.fire({icon:"success",title:a.props.flash.message}),I()},onError:a=>{C.value=!1,console.log("error ..")},onStart:a=>{C.value=!0}})):(d._method="PUT",B.post("/incident/"+d.id,d,{onSuccess:a=>{Toast.fire({icon:"success",title:a.props.flash.message}),C.value=!1,I()},onError:a=>{C.value=!1,console.log("error .."+a)},onStart:a=>{C.value=!0}}))}ee(()=>{console.log("Incident - On Mounted"),r.packages.map(function(a){return a.item_data=`${a.name}`}),ae()});function Ce(a){var M;O.value=[];let _=r.rootCause.filter(U=>U.id==a.id);O.value=(M=_[0])==null?void 0:M.sub_root_causes,d.sub_root_cause_id&&(d.sub_rca=O.value.filter(U=>U.id==d.sub_root_cause_id)[0],d.sub_rca||(d.sub_root_cause_id=null))}return me(()=>d.rca,a=>{a&&Ce(a)}),ce(()=>{console.log("Incident - On Updated"),r.packages.map(function(a){return a.item_data=`${a.name}`}),ae()}),{loading:C,form:d,openModal:V,closeModal:I,newTicket:te,isOpen:u,deleteIncident:ge,searchIncident:ye,edit:S,sortBy:we,getStatus:ue,changeStatus:xe,sort:m,search:t,show:j,tabClick:H,tab:q,selection:G,selected_id:x,editMode:T,typeChange:K,showPriority:ve,incidentStatus:p,page_update:s,alert_edit:le,submit:he,clearform:J,incidentType:D,incidentBy:f,incidentDate:w,formatter:g,subRCA:O,clickStatus:_e,checkDisable:Q,updateCustomer:se,filteredMaintenanceServices:W,checkDisableType:o,nextMonthFirstDay:b,changeType:be,sla_hour:h,getTeamStatus:fe}}},xl={class:"py-1"},_l={class:"mx-auto sm:px-6 lg:px-8"},vl={class:"py-2 md:inline-flex justify-between w-full gap-4"},wl={class:"flex w-full"},kl={class:"flex w-full"},hl={class:"flex w-full"},Cl=["value"],Sl={class:"flex w-full"},Tl=["value"],Vl={class:"flex w-full"},Dl={class:"flex w-full self-center"},Ul={class:"flex w-full md:w-1/4"},jl={class:"flex w-full md:w-1/2 md:justify-end"},Al={class:"mt-2 grid grid-cols-1 md:grid-cols-5 gap-6 w-full"},Ol={class:"col-span-2"},Pl={class:"bg-white rounded-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200 py-2 px-2"},Rl={class:"grid grid-cols-4 gap-2"},Il={class:"col-span-1"},Ml={class:"col-span-1"},Nl={class:"col-span-3"},Ll={class:"bg-white rounded-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200 py-2 px-2"},Bl={class:"grid grid-cols-5 gap-2"},zl={class:"col-span-1"},El={class:"col-span-1"},Fl={class:"col-span-1"},Wl={key:0,class:"w-full"},Hl={key:0,class:"bg-white overflow-auto md:overflow-hidden shadow-xl sm:rounded-lg mt-1"},ql={class:"min-w-full divide-y divide-gray-200"},Yl={class:"bg-gray-50"},Gl={class:"bg-white divide-y divide-gray-200 text-sm"},Kl=["onClick"],Ql={class:"px-2 py-3 whitespace-nowrap"},Jl={class:"px-2 py-3 whitespace-nowrap"},Xl={class:"px-2 py-3 whitespace-nowrap"},Zl={class:"px-2 py-3 whitespace-nowrap"},$l={class:"px-2 py-3 whitespace-nowrap"},en={class:"px-2 py-3 whitespace-nowrap"},tn={key:0,class:"px-2 py-3 whitespace-nowrap"},sn={key:1,class:"px-2 py-3 whitespace-nowrap"},on={class:"px-2 py-3 whitespace-nowrap capitalize"},ln={class:"px-2 py-3 whitespace-nowrap"},nn={class:"px-2 py-3 whitespace-nowrap"},rn={class:"px-2 py-3 whitespace-nowrap"},an={key:1,class:"w-full block mt-4"},dn={class:"text-xs text-gray-600"},cn={key:2},mn={key:3,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mt-1 py-4 flex flex-col items-center"},un={key:1,class:"flex justify-center"},pn={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},fn={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},gn={class:"bg-gray-50 rounded-sm pt-1 inline-block align-bottom overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},yn={class:""},bn={class:""},xn={class:"py-2 divide-y divide-yellow-500"},_n={class:"mt-1 px-3 flex w-full justify-between"},vn={class:"flex"},wn={class:"flex col-span-1"},kn={class:"px-2 lg:px-3"},hn={class:"px-2 lg:px-3"},Cn={class:"px-2 lg:px-3"},Sn={class:"bg-white rounded-t-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200"},Tn={class:"inline-flex w-full bg-gray-50 rounded-t-lg"},Vn={id:"tabs",class:"flex"},Dn={id:"tab-contents"},Un={class:"grid grid-cols-5 gap-2"},jn={class:"py-2 col-span-2 sm:col-span-2"},An={class:"mt-1 flex rounded-md shadow-sm"},On=["disabled"],Pn={key:0,class:"mt-2 text-sm text-red-500"},Rn={class:"py-2 col-span-2 sm:col-span-2"},In={class:"mt-1 flex rounded-md shadow-sm"},Mn=["disabled"],Nn={key:0,class:"mt-2 text-sm text-red-500"},Ln={class:"py-2 col-span-4 sm:col-span-4"},Bn={key:0,class:"mt-1 flex rounded-md shadow-sm"},zn={key:1,class:"mt-2 text-sm text-red-500"},En={class:"py-2 col-span-4 sm:col-span-4"},Fn={key:0,class:"mt-1 flex rounded-md shadow-sm"},Wn={key:1,class:"mt-2 text-sm text-red-500"},Hn={key:0,class:"py-2 col-span-4 sm:col-span-4"},qn={key:0,class:"mt-1 flex rounded-md shadow-sm"},Yn={key:1,class:"mt-2 text-sm text-red-500"},Gn={class:"py-2 col-span-4 sm:col-span-4"},Kn={class:"mt-1 flex rounded-md shadow-sm"},Qn=["value"],Jn={key:0,class:"mt-2 text-sm text-red-500"},Xn={key:0,class:"py-2 col-span-4 sm:col-span-4"},Zn={key:0,class:"mt-1 flex rounded-md shadow-sm"},$n={key:1,class:"mt-2 text-sm text-red-500"},er={class:"py-2 col-span-4 sm:col-span-4"},tr={class:"mt-1 flex"},sr=["disabled"],or={key:0,class:"mt-2 text-sm text-red-500"},lr={key:1,class:"py-2 col-span-1 sm:col-span-1"},nr={key:2,class:"py-2 col-span-4 sm:col-span-4"},rr={class:"mt-1 flex"},ir=["disabled"],ar={key:0,class:"mt-2 text-sm text-red-500"},dr={key:3,class:"py-2 col-span-4 sm:col-span-4"},cr={class:"mt-1 flex"},mr=["disabled"],ur={key:0,class:"mt-2 text-sm text-red-500"},pr={key:4,class:"py-2 col-span-4 sm:col-span-4"},fr={class:"mt-1 flex"},gr=["disabled"],yr={key:0,class:"mt-2 text-sm text-red-500"},br={class:"py-2 col-span-4 sm:col-span-4"},xr={class:"mt-1 flex"},_r=["disabled"],vr=["disabled"],wr=["disabled"],kr=["disabled"],hr=["disabled"],Cr={key:0,class:"mt-2 text-sm text-red-500"},Sr={key:5,class:"py-2 col-span-1 sm:col-span-1"},Tr={key:6,class:"py-2 col-span-2 sm:col-span-2"},Vr={class:"mt-1 flex rounded-md shadow-sm"},Dr={key:0,class:"mt-2 text-sm text-red-500"},Ur={key:7,class:"py-2 col-span-2 sm:col-span-2"},jr={class:"mt-1 flex rounded-md shadow-sm"},Ar={key:0,class:"mt-2 text-sm text-red-500"},Or={key:8,class:"py-2 col-span-1 sm:col-span-1"},Pr={key:9,class:"py-2 col-span-2 sm:col-span-2"},Rr={class:"mt-1 flex rounded-md shadow-sm"},Ir=["disabled"],Mr={key:0,class:"mt-2 text-sm text-red-500"},Nr={key:10,class:"py-2 col-span-2 sm:col-span-2"},Lr={class:"mt-1 flex rounded-md shadow-sm"},Br=["disabled"],zr={key:0,class:"mt-2 text-sm text-red-500"},Er={key:11,class:"py-2 col-span-1 sm:col-span-1"},Fr={key:12,class:"py-2 col-span-4 sm:col-span-4"},Wr={class:"mt-1 flex rounded-md shadow-sm"},Hr=["disabled"],qr={key:0,class:"mt-2 text-sm text-red-500"},Yr={class:"py-2 col-span-4 sm:col-span-4"},Gr={key:0,class:"mt-1 flex rounded-md shadow-sm"},Kr={key:1,class:"mt-2 text-sm text-red-500"},Qr={key:0,class:"py-2 col-span-4 sm:col-span-4"},Jr={class:"mt-1 flex rounded-md shadow-sm"},Xr=["disabled"],Zr={key:0,class:"mt-2 text-sm text-red-500"},$r={key:14,class:"py-2 col-span-1 sm:col-span-1"},ei={key:15,class:"py-2 col-span-4 sm:col-span-4"},ti={class:"mt-1 flex rounded-md shadow-sm"},si=["disabled"],oi={key:0,class:"mt-2 text-sm text-red-500"},li={key:16,class:"py-2 col-span-1 sm:col-span-1"},ni={key:17,class:"py-2 col-span-4 sm:col-span-4"},ri={class:"mt-1 flex"},ii=["disabled"],ai={key:0,class:"mt-2 text-sm text-red-500"},di={key:18,class:"py-2 col-span-1 sm:col-span-1"},ci={key:19,class:"py-2 col-span-4 sm:col-span-4"},mi={key:0,class:"mt-1 flex rounded-md shadow-sm"},ui={key:1,class:"mt-2 text-sm text-red-500"},pi={key:20,class:"py-2 col-span-1 sm:col-span-1"},fi={key:21,class:"py-2 col-span-4 sm:col-span-4"},gi={class:"grid grid-cols-2 gap-2"},yi={class:"col-span-1 sm:col-span-1"},bi={class:"mt-1 flex rounded-md shadow-sm"},xi=["disabled"],_i={key:0,class:"mt-2 text-sm text-red-500"},vi={class:"col-span-1 sm:col-span-1"},wi={class:"mt-1 flex rounded-md shadow-sm"},ki=["disabled"],hi={key:0,class:"mt-2 text-sm text-red-500"},Ci={key:22,class:"py-2 col-span-1 sm:col-span-1"},Si={key:23,class:"py-2 col-span-4 sm:col-span-4"},Ti={class:"mt-1 flex rounded-md shadow-sm"},Vi=["disabled"],Di={key:0,class:"mt-2 text-sm text-red-500"},Ui={key:24,class:"py-2 col-span-1 sm:col-span-1"},ji={key:25,class:"py-2 col-span-4 sm:col-span-4"},Ai={class:"mt-1 flex rounded-md shadow-sm"},Oi={key:0,class:"mt-2 text-sm text-red-500"},Pi={class:"py-2 col-span-4 sm:col-span-4"},Ri={class:"mt-1 flex rounded-md shadow-sm"},Ii={key:0,class:"mt-2 text-sm text-red-500"},Mi={class:"py-2 col-span-4 sm:col-span-4"},Ni={class:"mt-1 flex rounded-md shadow-sm"},Li={key:0,class:"mt-2 text-sm text-red-500"},Bi={class:"py-2 col-span-4 sm:col-span-4"},zi={class:"mt-1 flex rounded-md shadow-sm"},Ei=["disabled"],Fi={key:0,class:"mt-2 text-sm text-red-500"},Wi={class:"py-2 col-span-4 sm:col-span-4"},Hi={key:0,class:"mt-1 flex rounded-md shadow-sm"},qi={key:1,class:"mt-2 text-sm text-red-500"},Yi={key:27,class:"py-2 col-span-1 sm:col-span-1"},Gi={key:28,class:"py-2 col-span-4 sm:col-span-4"},Ki={class:"mt-1 flex rounded-md shadow-sm"},Qi=["min","max","disabled"],Ji={key:0,class:"mt-2 text-sm text-red-500"},Xi={class:"py-2 col-span-4 sm:col-span-4"},Zi={class:"mt-1 flex"},$i=["disabled"],ea={key:0,class:"mt-2 text-sm text-red-500"},ta={class:"py-2 col-span-4 sm:col-span-4"},sa={key:0,class:"mt-1 flex rounded-md shadow-sm"},oa={key:1,class:"mt-2 text-sm text-red-500"},la={class:"py-2 col-span-4 sm:col-span-4"},na={key:0,class:"mt-1 flex rounded-md shadow-sm"},ra={key:1,class:"mt-2 text-sm text-red-500"},ia={class:"py-2 col-span-4 sm:col-span-4"},aa={class:"mt-1 flex"},da=["disabled"],ca={key:0,class:"mt-2 text-sm text-red-500"},ma={key:0,class:"flex"},ua={key:0},pa={key:1},fa={class:"flex"},ga={key:1,class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function ya(r,t,m,s,j,T){const x=E("VueDatePicker"),p=E("pagination"),D=E("no-data"),f=E("multiselect"),h=E("task"),w=E("file"),O=E("customer-detail"),g=E("log"),u=E("history"),C=E("app-layout");return l(),Y(C,null,{default:je(()=>{var d,W,q,G,K,H,Q;return[e("div",xl,[e("div",_l,[e("div",vl,[e("div",wl,[t[92]||(t[92]=e("span",{class:"z-10 font-normal text-gray-400 absolute selection:rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-search"})],-1)),y(e("input",{type:"text",placeholder:"Ticket/Customer",class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",id:"search",tabindex:"1","onUpdate:modelValue":t[0]||(t[0]=o=>s.search=o),onKeyup:t[1]||(t[1]=Ae((...o)=>s.searchIncident&&s.searchIncident(...o),["enter"]))},null,544),[[v,s.search]])]),e("div",kl,[t[94]||(t[94]=e("span",{class:"z-10 font-normal text-gray-400 absolute bg-transparent rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.incidentType=o),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"3",onChange:t[3]||(t[3]=(...o)=>s.changeStatus&&s.changeStatus(...o))},t[93]||(t[93]=[e("option",{value:"default"},"All Ticket",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"resume"},"Reopen",-1),e("option",{value:"termination"},"Termination",-1)]),544),[[F,s.incidentType]])]),e("div",hl,[t[96]||(t[96]=e("span",{class:"z-10 font-normal text-gray-400 absolute bg-transparent rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.incidentBy=o),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"4",onChange:t[5]||(t[5]=(...o)=>s.changeStatus&&s.changeStatus(...o))},[t[95]||(t[95]=e("option",{value:"default"},"All ISP",-1)),(l(!0),n(A,null,X(m.isps,o=>(l(),n("option",{key:o.id,value:o.id},c(o.name),9,Cl))),128))],544),[[F,s.incidentBy]])]),e("div",Sl,[t[98]||(t[98]=e("span",{class:"z-10 font-normal text-gray-400 absolute bg-transparent rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.sla_hour=o),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"4",onChange:t[7]||(t[7]=(...o)=>s.changeStatus&&s.changeStatus(...o))},[t[97]||(t[97]=e("option",{value:"default"},"All SLA Hours",-1)),(l(!0),n(A,null,X(m.slas,o=>(l(),n("option",{key:o.sla_hours,value:o.sla_hours},c(o.sla_hours),9,Tl))),128))],544),[[F,s.sla_hour]])]),e("div",Vl,[t[100]||(t[100]=e("span",{class:"z-10 font-normal text-gray-400 absolute bg-transparent rounded text-base items-center justify-center self-center p-2"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.incidentStatus=o),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"5",onChange:t[9]||(t[9]=(...o)=>s.changeStatus&&s.changeStatus(...o))},t[99]||(t[99]=[e("option",{value:"0"},"All Status",-1),e("option",{value:"1"},"Request",-1),e("option",{value:"6"},"Supervisor Assign",-1),e("option",{value:"2"},"Team Assign",-1),e("option",{value:"5"},"Resolved Open",-1),e("option",{value:"3"},"Closed",-1),e("option",{value:"4"},"Deleted",-1)]),544),[[F,s.incidentStatus]])]),e("div",Dl,[P(x,{modelValue:s.incidentDate,"onUpdate:modelValue":t[10]||(t[10]=o=>s.incidentDate=o),range:{partialRange:!0},placeholder:"Ticket Date","enable-time-picker":!1,"model-type":"yyyy-MM-dd",id:"order_date",class:"text-gray-400 text-sm focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none"},null,8,["modelValue"])]),e("div",Ul,[e("button",{onClick:t[11]||(t[11]=(...o)=>s.changeStatus&&s.changeStatus(...o)),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1"},t[101]||(t[101]=[e("i",{class:"fas fa-search opacity-75 lg:ml-1 text-sm"},null,-1)]))]),e("div",jl,[m.write_permission?(l(),n("button",{key:0,onClick:t[12]||(t[12]=o=>s.newTicket()),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1",tabindex:"7"},t[102]||(t[102]=[R("Ticket"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)])]),e("div",Al,[e("div",Ol,[e("div",Pl,[e("div",Rl,[e("div",Il,[t[103]||(t[103]=e("label",{class:"block text-sm font-normal text-center"},"Critical",-1)),e("button",{class:"block py-2 px-2 w-full bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:border-red-300 focus:ring focus:ring-red-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[13]||(t[13]=o=>s.showPriority("critical"))},c(m.critical),1)]),e("div",{class:"col-span-1",onClick:t[15]||(t[15]=o=>s.showPriority("high"))},[t[104]||(t[104]=e("label",{class:"block text-sm font-normal text-center"},"High",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-500 active:bg-yellow-700 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[14]||(t[14]=o=>s.showPriority("high"))},c(m.high),1)]),e("div",{class:"col-span-1",onClick:t[17]||(t[17]=o=>s.showPriority("normal"))},[t[105]||(t[105]=e("label",{class:"block text-sm font-normal text-center"},"Normal",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-400 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-300 active:bg-yellow-500 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[16]||(t[16]=o=>s.showPriority("normal"))},c(m.normal),1)]),e("div",Ml,[t[106]||(t[106]=e("label",{class:"block text-sm font-normal text-center"},"All",-1)),e("button",{class:"block py-2 px-2 w-full bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-indigo-300 focus:ring focus:ring-indigo-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[18]||(t[18]=o=>s.showPriority("all"))},c(m.critical+m.high+m.normal),1)])])])]),e("div",Nl,[e("div",Ll,[e("div",Bl,[e("div",zl,[t[107]||(t[107]=e("label",{class:"block text-sm font-normal text-center"},"Ticket Request",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[19]||(t[19]=o=>s.clickStatus(1))},c(m.ticketRequest),1)]),e("div",{class:"col-span-1",onClick:t[21]||(t[21]=o=>s.clickStatus("6"))},[t[108]||(t[108]=e("label",{class:"block text-sm font-normal text-center"},"Supervisor Assign",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[20]||(t[20]=o=>s.clickStatus("6"))},c(m.supervisorAssign),1)]),e("div",{class:"col-span-1",onClick:t[23]||(t[23]=o=>s.clickStatus("2"))},[t[109]||(t[109]=e("label",{class:"block text-sm font-normal text-center"},"Team Assign",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[22]||(t[22]=o=>s.clickStatus("2"))},c(m.teamAssign),1)]),e("div",El,[t[110]||(t[110]=e("label",{class:"block text-sm font-normal text-center"},"Close",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[24]||(t[24]=o=>s.clickStatus("3"))},c(m.close),1)]),e("div",Fl,[t[111]||(t[111]=e("label",{class:"block text-sm font-normal text-center"},"All",-1)),e("button",{class:"block py-2 px-2 w-full bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:border-green-300 focus:ring focus:ring-green-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[25]||(t[25]=o=>s.clickStatus(""))},c(m.ticketRequest+m.teamAssign+m.supervisorAssign+m.close),1)])])])])]),m.write_permission||m.read_permission?(l(),n("div",Wl,[m.incidents.data?(l(),n("div",Hl,[e("table",ql,[e("thead",Yl,[e("tr",null,[t[120]||(t[120]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},null,-1)),t[121]||(t[121]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No.",-1)),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[26]||(t[26]=o=>s.sortBy("date"))},t[112]||(t[112]=[R("Open Date "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[27]||(t[27]=o=>s.sortBy("code"))},t[113]||(t[113]=[R("Customer Ticket "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[28]||(t[28]=o=>s.sortBy("edge_code"))},t[114]||(t[114]=[R("EDGE Ticket "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[29]||(t[29]=o=>s.sortBy("maintenance_sla_hours"))},t[115]||(t[115]=[R("SLA "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[30]||(t[30]=o=>s.sortBy("ftth_id"))},t[116]||(t[116]=[R("User "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[31]||(t[31]=o=>s.sortBy("township_id"))},t[117]||(t[117]=[R("TSP "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[32]||(t[32]=o=>s.sortBy("type"))},t[118]||(t[118]=[R("Type "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[33]||(t[33]=o=>s.sortBy("incharge"))},t[119]||(t[119]=[R("Created "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),t[122]||(t[122]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1)),t[123]||(t[123]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Team Status",-1))])]),e("tbody",Gl,[(l(!0),n(A,null,X(m.incidents.data,(o,V)=>(l(),n("tr",{key:o.id,class:L([[o.id==s.selected_id?"bg-indigo-200":""],"cursor-pointer"]),onClick:I=>s.edit(o)},[e("td",Ql,[e("i",{class:L("fa fa-circle text-"+o.color)},null,2)]),e("td",Jl,c(V+=m.incidents.from),1),e("td",Xl,c(o.date)+" "+c(o.time),1),e("td",Zl,c(o.code),1),e("td",$l,c(o.edge_code),1),e("td",en,c(o.maintenance_sla_hours)+" Hrs",1),o.ftth_id?(l(),n("td",tn,c(o.ftth_id),1)):i("",!0),o.township_short?(l(),n("td",sn,c(o.township_short),1)):i("",!0),e("td",on,c(o.type.replace("_"," ")),1),e("td",ln,c(o.incharge.match(/\b\w/g).join("")),1),e("td",nn,c(s.getStatus(o.status)),1),e("td",rn,c(s.getTeamStatus((o==null?void 0:o.task_status)??!1)),1)],10,Kl))),128))])])])):i("",!0),m.incidents.total?(l(),n("span",an,[e("label",dn,c(m.incidents.data.length)+" Tickets in Current Page. Total Number of Tickets : "+c(m.incidents.total),1)])):i("",!0),m.incidents.links?(l(),n("span",cn,[P(p,{class:"mt-4",links:m.incidents.links},null,8,["links"])])):i("",!0),m.incidents.data?i("",!0):(l(),n("div",mn,[P(D)]))])):(l(),n("div",un,t[124]||(t[124]=[e("span",{class:"px-20 py-10 center bg-white inline-flex"},[e("i",{class:"fa fas fa-exclamation-triangle fa-2x text-yellow-600 mr-2"}),e("label",{class:"font-bold mt-2 text-sm"}," You Don't Have Permission To Access This Page")],-1)])))])]),s.isOpen?(l(),n("div",pn,[e("div",fn,[t[182]||(t[182]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[183]||(t[183]=R("  ")),e("div",gn,[e("div",yn,[e("div",bn,[e("div",xn,[e("div",_n,[t[130]||(t[130]=e("div",{class:"flex"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight mt-2"},"Ticket Detail")],-1)),e("div",vn,[t[128]||(t[128]=e("span",{class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-l-md text-sm shadow outline-none focus:outline-none"}," Customer Ticket ID ",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[34]||(t[34]=o=>s.form.code=o),name:"code",id:"code",class:"mr-2 border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-r-md text-sm shadow outline-none focus:outline-none",disabled:""},null,512),[[v,s.form.code]]),t[129]||(t[129]=e("span",{class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-l-md text-sm shadow outline-none focus:outline-none"}," EDGE Ticket ID ",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[35]||(t[35]=o=>s.form.edge_code=o),name:"edge_code",id:"edge_code",class:"mr-2 border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-r-md text-sm shadow outline-none focus:outline-none",disabled:""},null,512),[[v,s.form.edge_code]]),e("ul",wn,[e("li",kn,[t[125]||(t[125]=e("label",{class:"block text-sm"},"Critical",-1)),y(e("input",{"onUpdate:modelValue":t[36]||(t[36]=o=>s.form.priority=o),name:"priority",value:"critical",type:"radio",class:"form-radio h-5 w-5 text-red-600 bg-red-600",title:"(1-4hrs)"},null,512),[[Z,s.form.priority]])]),e("li",hn,[t[126]||(t[126]=e("label",{class:"block text-sm"},"High",-1)),y(e("input",{"onUpdate:modelValue":t[37]||(t[37]=o=>s.form.priority=o),name:"priority",value:"high",type:"radio",class:"form-radio h-5 w-5 text-yellow-600 bg-yellow-600",title:"(1-12hrs)"},null,512),[[Z,s.form.priority]])]),e("li",Cn,[t[127]||(t[127]=e("label",{class:"block text-sm"},"Normal",-1)),y(e("input",{"onUpdate:modelValue":t[38]||(t[38]=o=>s.form.priority=o),name:"priority",value:"normal",type:"radio",class:"form-radio h-5 w-5 text-yellow-300 bg-yellow-300",title:"(1-48hrs)"},null,512),[[Z,s.form.priority]])])])])])]),e("div",Sn,[e("div",Tn,[e("ul",Vn,[e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[39]||(t[39]=o=>s.tabClick(1)),"preserve-state":""},"Genaral")],2),s.checkDisable()==!1?(l(),n("li",{key:0,class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[40]||(t[40]=o=>s.tabClick(2)),"preserve-state":""},"Tasks")],2)):i("",!0),e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==3?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[41]||(t[41]=o=>s.tabClick(3)),"preserve-state":""},"Files")],2),e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==4?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[42]||(t[42]=o=>s.tabClick(4)),"preserve-state":""},"Customer Info")],2),e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==5?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[43]||(t[43]=o=>s.tabClick(5)),"preserve-state":""},"LOGS")],2),e("li",{class:L(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==6?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[44]||(t[44]=o=>s.tabClick(6)),"preserve-state":""},"History")],2)])]),e("div",Dn,[e("div",{class:L(["p-4",[s.tab==1?"":"hidden"]])},[e("div",Un,[t[173]||(t[173]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",jn,[e("div",An,[y(e("input",{type:"date","onUpdate:modelValue":t[45]||(t[45]=o=>s.form.date=o),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,On),[[v,s.form.date]])]),r.$page.props.errors.date?(l(),n("p",Pn,c(r.$page.props.errors.date),1)):i("",!0)]),e("div",Rn,[e("div",In,[y(e("input",{type:"time","onUpdate:modelValue":t[46]||(t[46]=o=>s.form.time=o),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,Mn),[[v,s.form.time]])]),r.$page.props.errors.time?(l(),n("p",Nn,c(r.$page.props.errors.time),1)):i("",!0)]),t[174]||(t[174]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",Ln,[m.customers.length!==0?(l(),n("div",Bn,[P(f,{"deselect-label":"Selected already",options:m.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer,"onUpdate:modelValue":[t[47]||(t[47]=o=>s.form.customer=o),t[48]||(t[48]=o=>{s.form.customer_id=o==null?void 0:o.id,s.updateCustomer(o==null?void 0:o.id)})],"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.customer?(l(),n("p",zn,c(r.$page.props.errors.customer),1)):i("",!0)]),t[175]||(t[175]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",En,[m.team.length!==0?(l(),n("div",Fn,[P(f,{"deselect-label":"Selected already",options:m.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[49]||(t[49]=o=>s.form.incharge_id=o),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.incharge?(l(),n("p",Wn,c(r.$page.props.errors.incharge),1)):i("",!0)]),(d=m.user.role)!=null&&d.incident_oss?(l(),n(A,{key:0},[s.form.type!="plan_change"&&s.form.type!="suspension"&&s.form.type!="resume"&&s.form.type!="termination"?(l(),n(A,{key:0},[t[131]||(t[131]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Assign Supervisor : ")])],-1)),s.form.type!="plan_change"?(l(),n("div",Hn,[((W=m.supervisors)==null?void 0:W.length)!==0?(l(),n("div",qn,[P(f,{"deselect-label":"Selected already",options:m.supervisors,"track-by":"id",label:"name",modelValue:s.form.supervisor,"onUpdate:modelValue":[t[50]||(t[50]=o=>s.form.supervisor=o),t[51]||(t[51]=o=>s.form.supervisor_id=o==null?void 0:o.id)],"allow-empty":!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.supervisor_id?(l(),n("p",Yn,c(r.$page.props.errors.supervisor_id),1)):i("",!0)])):i("",!0)],64)):(l(),n(A,{key:1},[t[133]||(t[133]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Assign Team : ")])],-1)),e("div",Gn,[e("div",Kn,[y(e("select",{name:"partner",id:"partner","onUpdate:modelValue":t[52]||(t[52]=o=>s.form.partner_id=o),class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},[t[132]||(t[132]=e("option",{value:"default"},"Please Assign Partner",-1)),e("option",{value:s.form.customer_partner_id},c(s.form.customer_partner_name),9,Qn)],512),[[F,s.form.partner_id]])]),r.$page.props.errors.partner_id?(l(),n("p",Jn,c(r.$page.props.errors.partner_id),1)):i("",!0)])],64)),s.form.type=="termination"&&s.form.status==5?(l(),n(A,{key:2},[t[134]||(t[134]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Assign Supervisor : ")])],-1)),s.form.type!="plan_change"?(l(),n("div",Xn,[((q=m.supervisors)==null?void 0:q.length)!==0?(l(),n("div",Zn,[P(f,{"deselect-label":"Selected already",options:m.supervisors,"track-by":"id",label:"name",modelValue:s.form.supervisor,"onUpdate:modelValue":[t[53]||(t[53]=o=>s.form.supervisor=o),t[54]||(t[54]=o=>s.form.supervisor_id=o==null?void 0:o.id)],"allow-empty":!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.supervisor_id?(l(),n("p",$n,c(r.$page.props.errors.supervisor_id),1)):i("",!0)])):i("",!0)],64)):i("",!0)],64)):i("",!0),t[176]||(t[176]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",er,[e("div",tr,[y(e("select",{"onUpdate:modelValue":t[55]||(t[55]=o=>s.form.type=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:"",onChange:t[56]||(t[56]=o=>(s.form.topic=null,s.changeType(s.form.type))),disabled:s.checkDisable()},t[135]||(t[135]=[e("option",{value:"default"},"Please Choose Ticket Type",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"resume"},"Reopen",-1),e("option",{value:"termination"},"Termination",-1)]),40,sr),[[F,s.form.type]])]),r.$page.props.errors.type?(l(),n("p",or,c(r.$page.props.errors.type),1)):i("",!0)]),s.form.type=="service_complaint"||s.form.type=="onsite_complaint"|s.form.type=="technical_complaint"?(l(),n("div",lr,t[136]||(t[136]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):i("",!0),s.form.type=="service_complaint"?(l(),n("div",nr,[e("div",rr,[y(e("select",{"onUpdate:modelValue":t[57]||(t[57]=o=>s.form.topic=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},t[137]||(t[137]=[e("option",{value:"los_redlight"},"LOS Redlight",-1),e("option",{value:"pon_blinking"},"PON Blinking",-1),e("option",{value:"high_loss"},"High Loss",-1),e("option",{value:"dn_down"},"DN Down",-1),e("option",{value:"sn_down"},"SN Down",-1),e("option",{value:"relocation"},"Relocation",-1),e("option",{value:"maintenance"},"Maintenance",-1),e("option",{value:"other"},"Other",-1)]),8,ir),[[F,s.form.topic]])]),r.$page.props.errors.topic?(l(),n("p",ar,c(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),s.form.type=="onsite_complaint"?(l(),n("div",dr,[e("div",cr,[y(e("select",{"onUpdate:modelValue":t[58]||(t[58]=o=>s.form.topic=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},t[138]||(t[138]=[e("option",{value:"no_internet"},"No Internet",-1),e("option",{value:"slow_performance"},"Slow Performance",-1),e("option",{value:"wifi_issue"},"Wifi Issue",-1),e("option",{value:"coverage_issue"},"Coverage Issue",-1),e("option",{value:"onu_issue"},"ONU issue",-1),e("option",{value:"home_router_issue"},"Home Router Issue",-1),e("option",{value:"password_change"},"Password Change",-1),e("option",{value:"other"},"Other",-1)]),8,mr),[[F,s.form.topic]])]),r.$page.props.errors.topic?(l(),n("p",ur,c(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),s.form.type=="technical_complaint"?(l(),n("div",pr,[e("div",fr,[y(e("select",{"onUpdate:modelValue":t[59]||(t[59]=o=>s.form.topic=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},t[139]||(t[139]=[e("option",{value:"website_delay_issue"},"Website Delay Issue",-1),e("option",{value:"gaming_delay_issue"},"Gaming Delay Issue",-1),e("option",{value:"application_delay_issue"},"Application Delay Issue",-1),e("option",{value:"other"},"Other",-1)]),8,gr),[[F,s.form.topic]])]),r.$page.props.errors.topic?(l(),n("p",yr,c(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),t[177]||(t[177]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},[R(" Status : "),e("span",{class:"text-red-500"},"*")])])],-1)),e("div",br,[e("div",xr,[y(e("select",{"onUpdate:modelValue":t[60]||(t[60]=o=>s.form.status=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisableType()},[t[140]||(t[140]=e("option",{value:"1"},"Request",-1)),e("option",{value:"6",disabled:m.user.user_type!="internal"||s.form.type=="plan_change"}," Supervisor Assign ",8,vr),t[141]||(t[141]=e("option",{value:"2",disabled:""},"Team Assign",-1)),t[142]||(t[142]=e("option",{value:"7",disabled:""},"Waiting to Suspend",-1)),t[143]||(t[143]=e("option",{value:"8",disabled:""},"Waiting to Reopen",-1)),t[144]||(t[144]=e("option",{value:"9",disabled:""},"Waiting to Terminate",-1)),e("option",{value:"11",disabled:m.user.user_type!="internal"||s.form.type!="termination"},"Waiting to Dismantle",8,wr),e("option",{value:"10",disabled:m.user.user_type!="partner"||s.form.type!="plan_change"}," Waiting to Plan Change ",8,kr),e("option",{value:"5",disabled:m.user.user_type!="partner"},"Resolved Open",8,hr),t[145]||(t[145]=e("option",{value:"3"},"Closed",-1))],8,_r),[[F,s.form.status]])]),r.$page.props.errors.status?(l(),n("p",Cr,c(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==3?(l(),n("div",Sr,t[146]||(t[146]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):i("",!0),s.form.status==3?(l(),n("div",Tr,[e("div",Vr,[y(e("input",{type:"date","onUpdate:modelValue":t[61]||(t[61]=o=>s.form.close_date=o),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.close_date]])]),r.$page.props.errors.close_date?(l(),n("p",Dr,c(r.$page.props.errors.close_date),1)):i("",!0)])):i("",!0),s.form.status==3?(l(),n("div",Ur,[e("div",jr,[y(e("input",{type:"time","onUpdate:modelValue":t[62]||(t[62]=o=>s.form.close_time=o),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[v,s.form.close_time]])]),r.$page.props.errors.close_time?(l(),n("p",Ar,c(r.$page.props.errors.close_time),1)):i("",!0)])):i("",!0),s.form.status==5?(l(),n("div",Or,t[147]||(t[147]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):i("",!0),s.form.status==5?(l(),n("div",Pr,[e("div",Rr,[y(e("input",{type:"date","onUpdate:modelValue":t[63]||(t[63]=o=>s.form.resolved_date=o),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisableType()},null,8,Ir),[[v,s.form.resolved_date]])]),r.$page.props.errors.resolved_date?(l(),n("p",Mr,c(r.$page.props.errors.resolved_date),1)):i("",!0)])):i("",!0),s.form.status==5?(l(),n("div",Nr,[e("div",Lr,[y(e("input",{type:"time","onUpdate:modelValue":t[64]||(t[64]=o=>s.form.resolved_time=o),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisableType()},null,8,Br),[[v,s.form.resolved_time]])]),r.$page.props.errors.resolved_time?(l(),n("p",zr,c(r.$page.props.errors.resolved_time),1)):i("",!0)])):i("",!0),s.form.type=="suspension"?(l(),n("div",Er,t[148]||(t[148]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense From : ")],-1)]))):i("",!0),s.form.type=="suspension"?(l(),n("div",Fr,[e("div",Wr,[t[149]||(t[149]=e("span",{class:"-mt-1 z-10 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[65]||(t[65]=o=>s.form.start_date=o),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,Hr),[[v,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",qr,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="resume"?(l(),n(A,{key:13},[t[151]||(t[151]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspension Ticket : ")])],-1)),e("div",Yr,[((G=m.suspensionTickets)==null?void 0:G.length)!==0?(l(),n("div",Gr,[P(f,{"deselect-label":"Selected already",options:m.suspensionTickets,"track-by":"id",label:"edge_code",modelValue:s.form.suspension_incident,"onUpdate:modelValue":[t[66]||(t[66]=o=>s.form.suspension_incident=o),t[67]||(t[67]=o=>s.form.suspension_incident_id=o==null?void 0:o.id)],"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.suspension_incident_id?(l(),n("p",Kr,c(r.$page.props.errors.suspension_incident_id),1)):i("",!0)]),t[152]||(t[152]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")])],-1)),s.form.type=="resume"?(l(),n("div",Qr,[e("div",Jr,[t[150]||(t[150]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[68]||(t[68]=o=>s.form.start_date=o),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,Xr),[[v,s.form.start_date]])]),r.$page.props.errors.resume?(l(),n("p",Zr,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0)],64)):i("",!0),s.form.type=="termination"?(l(),n("div",$r,t[153]||(t[153]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):i("",!0),s.form.type=="termination"?(l(),n("div",ei,[e("div",ti,[t[154]||(t[154]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[69]||(t[69]=o=>s.form.start_date=o),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,si),[[v,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",oi,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",li,t[155]||(t[155]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",ni,[e("div",ri,[y(e("textarea",{"onUpdate:modelValue":t[70]||(t[70]=o=>s.form.new_address=o),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()}," ",8,ii),[[v,s.form.new_address]])]),r.$page.props.errors.new_address?(l(),n("p",ai,c(r.$page.props.errors.new_address),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",di,t[156]||(t[156]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",ci,[m.townships.length!==0?(l(),n("div",mi,[P(f,{"deselect-label":"Selected already",options:m.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[71]||(t[71]=o=>s.form.new_township=o),"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.new_township?(l(),n("p",ui,c(r.$page.props.errors.new_township),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",pi,t[157]||(t[157]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",fi,[e("div",gi,[e("div",yi,[e("div",bi,[t[158]||(t[158]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[72]||(t[72]=o=>s.form.latitude=o),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude",disabled:s.checkDisable()},null,8,xi),[[v,s.form.latitude]])]),r.$page.props.errors.latitude?(l(),n("p",_i,c(r.$page.props.errors.latitude),1)):i("",!0)]),e("div",vi,[e("div",wi,[t[159]||(t[159]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[73]||(t[73]=o=>s.form.longitude=o),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude",disabled:s.checkDisable()},null,8,ki),[[v,s.form.longitude]])]),r.$page.props.errors.longitude?(l(),n("p",hi,c(r.$page.props.errors.longitude),1)):i("",!0)])])])):i("",!0),s.form.type=="relocation"?(l(),n("div",Ci,t[160]||(t[160]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",Si,[e("div",Ti,[t[161]||(t[161]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[74]||(t[74]=o=>s.form.start_date=o),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,Vi),[[v,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",Di,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",Ui,t[162]||(t[162]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Relocation Service : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",ji,[e("div",Ai,[P(f,{"deselect-label":"Selected already",options:m.relocationServices,"track-by":"id",label:"name",modelValue:s.form.relocation_service,"onUpdate:modelValue":[t[75]||(t[75]=o=>s.form.relocation_service=o),t[76]||(t[76]=o=>s.form.relocation_service_id=o==null?void 0:o.id)],"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])]),r.$page.props.errors.relocation_service_id?(l(),n("p",Oi,c(r.$page.props.errors.relocation_service_id),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(l(),n(A,{key:26},[t[163]||(t[163]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"current_bandwidth",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Current Bandwidth : ")])],-1)),e("div",Pi,[e("div",Ri,[y(e("input",{type:"text","onUpdate:modelValue":t[77]||(t[77]=o=>s.form.current_bandwidth=o),name:"current_bandwidth",id:"current_bandwidth",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:""},null,512),[[v,s.form.current_bandwidth]])]),r.$page.props.errors.current_bandwidth?(l(),n("p",Ii,c(r.$page.props.errors.current_bandwidth),1)):i("",!0)]),t[164]||(t[164]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"current_maintenance_plan",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Current Maintenance Plan : ")])],-1)),e("div",Mi,[e("div",Ni,[y(e("input",{type:"text","onUpdate:modelValue":t[78]||(t[78]=o=>s.form.current_maintenance_plan=o),name:"current_maintenance_plan",id:"current_maintenance_plan",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:""},null,512),[[v,s.form.current_maintenance_plan]])]),r.$page.props.errors.current_maintenance_plan?(l(),n("p",Li,c(r.$page.props.errors.current_maintenance_plan),1)):i("",!0)]),t[165]||(t[165]=e("div",{class:"mt-1 flex"},[e("label",{for:"new_bandwidth",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Bandwidth: ")],-1)),e("div",Bi,[e("div",zi,[y(e("input",{type:"integer","onUpdate:modelValue":t[79]||(t[79]=o=>s.form.new_bandwidth=o),name:"new_bandwidth",id:"new_bandwidth",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()},null,8,Ei),[[v,s.form.new_bandwidth]])]),r.$page.props.errors.new_bandwidth?(l(),n("p",Fi,c(r.$page.props.errors.new_bandwidth),1)):i("",!0)]),t[166]||(t[166]=e("div",{class:"mt-1 flex"},[e("label",{for:"new_bandwidth",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Maintenance Plan: ")],-1)),e("div",Wi,[s.filteredMaintenanceServices.length!==0?(l(),n("div",Hi,[P(f,{"deselect-label":"Selected already",options:s.filteredMaintenanceServices,"track-by":"id",label:"name",modelValue:s.form.new_maintenance_plan,"onUpdate:modelValue":[t[80]||(t[80]=o=>s.form.new_maintenance_plan=o),t[81]||(t[81]=o=>s.form.new_maintenance_plan_id=o==null?void 0:o.id)],"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.new_maintenance_plan_id?(l(),n("p",qi,c(r.$page.props.errors.new_maintenance_plan_id),1)):i("",!0)])],64)):i("",!0),s.form.type=="plan_change"?(l(),n("div",Yi,t[167]||(t[167]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="plan_change"?(l(),n("div",Gi,[e("div",Ki,[t[168]||(t[168]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[82]||(t[82]=o=>s.form.start_date=o),min:s.nextMonthFirstDay,max:s.nextMonthFirstDay,class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!((K=m.user.role)!=null&&K.system_setting)},null,8,Qi),[[v,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",Ji,c(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),t[178]||(t[178]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",Xi,[e("div",Zi,[y(e("textarea",{"onUpdate:modelValue":t[83]||(t[83]=o=>s.form.description=o),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:s.checkDisable()}," ",8,$i),[[v,s.form.description]])]),r.$page.props.errors.description?(l(),n("p",ea,c(r.$page.props.errors.description),1)):i("",!0)]),s.editMode&&(s.form.status==5||s.form.status==3)?(l(),n(A,{key:29},[t[172]||(t[172]=e("div",{class:"col-span-5"},[e("hr")],-1)),s.form.type==="service_complaint"?(l(),n(A,{key:0},[t[169]||(t[169]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"rca",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," RCA : ")])],-1)),e("div",ta,[((H=m.rootCause)==null?void 0:H.length)!==0?(l(),n("div",sa,[P(f,{"deselect-label":"Selected already",options:m.rootCause,"track-by":"id",label:"name",modelValue:s.form.rca,"onUpdate:modelValue":[t[84]||(t[84]=o=>s.form.rca=o),t[85]||(t[85]=o=>s.form.root_cause_id=o==null?void 0:o.id)],"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.root_cause_id?(l(),n("p",oa,c(r.$page.props.errors.root_cause_id),1)):i("",!0)]),t[170]||(t[170]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"sub_rca",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Sub RCA : ")])],-1)),e("div",la,[((Q=s.subRCA)==null?void 0:Q.length)!==0?(l(),n("div",na,[P(f,{"deselect-label":"Selected already",options:s.subRCA,"track-by":"id",label:"name",modelValue:s.form.sub_rca,"onUpdate:modelValue":[t[86]||(t[86]=o=>s.form.sub_rca=o),t[87]||(t[87]=o=>s.form.sub_root_cause_id=o==null?void 0:o.id)],"allow-empty":!1,disabled:s.checkDisable()},null,8,["options","modelValue","disabled"])])):i("",!0),r.$page.props.errors.sub_root_cause_id?(l(),n("p",ra,c(r.$page.props.errors.sub_root_cause_id),1)):i("",!0)])],64)):i("",!0),s.checkDisable()==!1?(l(),n(A,{key:1},[t[171]||(t[171]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"rca_notes",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," RCA Note : ")])],-1)),e("div",ia,[e("div",aa,[y(e("textarea",{"onUpdate:modelValue":t[88]||(t[88]=o=>s.form.rca_notes=o),name:"rca_notes",id:"rca_notes",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",disabled:!m.write_permission}," ",8,da),[[v,s.form.rca_notes]])]),r.$page.props.errors.rca_notes?(l(),n("p",ca,c(r.$page.props.errors.rca_notes),1)):i("",!0)])],64)):i("",!0)],64)):i("",!0)])],2),s.checkDisable()==!1?(l(),n("div",{key:0,class:L(["p-4",[s.tab==2?"":"hidden"]])},[(l(),Y(oe,null,[s.tab==2?(l(),Y(h,{data:s.selected_id,errors:r.$page.props.errors,key:s.page_update},null,8,["data","errors"])):i("",!0)],1024))],2)):i("",!0),e("div",{class:L(["p-4",[s.tab==3?"":"hidden"]])},[(l(),Y(oe,null,[s.tab==3?(l(),Y(w,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:L(["p-4",[s.tab==4?"":"hidden"]])},[(l(),Y(oe,null,[s.tab==4?(l(),Y(O,{data:s.selected_id,user:m.user,key:s.page_update},null,8,["data","user"])):i("",!0)],1024))],2),e("div",{class:L(["p-4",[s.tab==5?"":"hidden"]])},[(l(),Y(oe,null,[s.tab==5?(l(),Y(g,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:L(["p-4",[s.tab==6?"":"hidden"]])},[(l(),Y(oe,null,[s.tab==6?(l(),Y(u,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2)])])])]),e("div",{class:L(["bg-indigo-50 px-3 py-3 sm:px-6 sm:flex sm:flex-row",[s.tab==1?"justify-between":"justify-end"]])},[s.tab==1&&(m.write_permission||m.user.user_type=="partner")?(l(),n("div",ma,[e("button",{class:"inline-flex items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-indigo-900 disabled:opacity-25 transition mr-1",onClick:t[89]||(t[89]=o=>s.submit())},[s.editMode?(l(),n("span",ua,"Update")):i("",!0),s.editMode==!1?(l(),n("span",pa,"Save")):i("",!0),t[179]||(t[179]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))]),y(e("button",{onClick:t[90]||(t[90]=(...o)=>s.deleteIncident&&s.deleteIncident(...o)),class:"inline-flex items-center px-4 py-3 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition mr-1"},t[180]||(t[180]=[R("Delete"),e("i",{class:"lg:ml-1 fas fa-trash opacity-75 text-sm"},null,-1)]),512),[[Oe,s.selected_id]])])):i("",!0),e("div",fa,[e("button",{onClick:t[91]||(t[91]=(...o)=>s.closeModal&&s.closeModal(...o)),type:"button",class:"inline-flex items-center px-4 py-3 bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-gray-600 uppercase tracking-widest hover:bg-gray-300 active:bg-gray-400 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition"},t[181]||(t[181]=[R("Close "),e("i",{class:"lg:ml-1 fas fa-times-circle opacity-75 text-sm"},null,-1)]))])],2)])])],512)):i("",!0),s.loading?(l(),n("div",ga,t[184]||(t[184]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):i("",!0)]}),_:1})}const Va=$(bl,[["render",ya]]);export{Va as default};
