import{A as N}from"./AppLayout-pcJZbVy4.js";import{P as B}from"./Pagination-Bc3QeMxU.js";import{o as l,d as i,a as e,t as p,C as E,r as x,T as z,y as D,B as L,z as v,c as G,w as j,N as I,j as u,k as S,e as m,v as C,g as b,F as h,l as V,f,b as F,n as J}from"./app-FicAaj9x.js";import{M as R}from"./vue3-multiselect.umd.min-CQ3csNzK.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DQsPNMjN.js";const q={name:"SmsGenerationProgress",emits:["dismiss"],props:{progress:Number},setup(r,t){function d(){t.emit("dismiss",!0)}return{dismiss:d}}},H={id:"toast-simple",class:"fixed top-5 right-5 flex items-center w-full max-w-xs p-4 space-x-4 rtl:space-x-reverse text-gray-500 bg-white divide-x rtl:divide-x-reverse divide-gray-100 rounded-lg shadow dark:text-gray-400 dark:divide-gray-700 space-x dark:bg-gray-800 z-20",role:"alert"},K={class:"relative w-full p-2"},Q={key:0,class:"text-xs"},W={key:1,class:"text-xs"},X={class:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-lightBlue-200"};function Y(r,t,d,a,w,y){return l(),i("div",H,[t[3]||(t[3]=e("i",{class:"fa fas fa-3x fa-location-arrow text-lightBlue-400","aria-hidden":"true"},null,-1)),e("div",K,[t[2]||(t[2]=e("h4",{class:"text-xs font-extrabold"},"OSS BSS System",-1)),d.progress!=100?(l(),i("label",Q,"Sending SMS in "+p(d.progress)+"% ",1)):(l(),i("label",W,"Sending SMS Completed ! ")),e("div",X,[e("div",{style:E(`width: ${d.progress}%`),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-lightBlue-500"},null,4)]),e("button",{type:"button",class:"absolute top-0 right-3 ms-auto -mx-1.5 -my-1.5 bg-white justify-center items-center flex-shrink-0 text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700","data-dismiss-target":"#toast-message-cta","aria-label":"Close",onClick:t[0]||(t[0]=n=>a.dismiss())},t[1]||(t[1]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))])])}const Z=M(q,[["render",Y]]),$={name:"Announcement",components:{AppLayout:N,Multiselect:R,Pagination:B,SmsGenerationProgress:Z},props:{announcement:Object,templates:Object,customers:Object,packages:Object,projects:Object,townships:Object,package_speed:Object,status:Object,errors:Object},setup(r){const t=x(!1),d=x(""),a=x(!1),w=x(0),y=x(!1),n=z({id:null,name:null,general:null,template:0,package_except:null,package:null,type:null,township:0,status_except:null,status:null,partner:0,payment:0,deposit_status:0});function _(){n.id=null,n.name=null,n.general=null,n.template=0,n.package_except=null,n.package=null,n.type=null,n.township=0,n.status_except=null,n.status=null,n.partner=0,n.payment=0,n.deposit_status=0}function g(s){if(n.id=s.id,n.name=s.name,n.general=s.general,n.template=s.template_id,n.package_except=!!s.packages_invert,s.packages&&(n.package=JSON.parse(s.packages)),s.customer_status)if(s.customer_status.indexOf(",")!==-1){let c=s.customer_status.split(",");n.status=r.status.filter(k=>c.includes(""+k.id))}else n.status=r.status.filter(c=>""+c.id==s.customer_status);if(n.township=s.townships,n.status_except=!!s.customer_status_invert,n.partner=s.projects,n.payment=s.payment_type,n.deposit_status=s.deposit_status,n.template!=0){let c=r.templates.filter(k=>k.id==parseInt(n.template))[0];n.type=c.type}}function o(){if(n.template!=0){let s=r.templates.filter(c=>c.id==n.template)[0];n.type=s.type}}const T=()=>{n.post("/announcement/detail/"+n.id+"/update",{onSuccess:s=>{t.value=!1,Toast.fire({icon:"success",title:s.props.flash.message})},onError:s=>{console.log(s)}})},P=()=>{n.post("/announcement/detail/"+n.id,{onSuccess:s=>{t.value=!0},onError:s=>{t.value=!1,console.log(s)}})},U=()=>{n.post("/announcement/detail/"+n.id+"/send",{onSuccess:s=>{t.value=!1,a.value=!1,Toast.fire({icon:"success",title:s.props.flash.message})},onError:s=>{a.value=!1,console.log(s)},onStart:s=>{a.value=!0}})},A=s=>{confirm("Are you sure want to Delete?")&&(s._method="DELETE",I.post("/announcement/"+s.id,s))},O=s=>{s&&(y.value=!s)};return D(()=>{r.packages.map(function(s){return s.item_data=`${s.speed}Mbps - ${s.name} - ${s.contract_period} Months`}),r.package_speed.map(function(s){return s.item_data=`${s.speed} Mbps - ${s.type.toUpperCase()}`}),r.announcement&&g(r.announcement)}),L(()=>{r.packages.map(function(s){return s.item_data=`${s.speed}Mbps - ${s.name} - ${s.contract_period} Months`}),r.package_speed.map(function(s){return s.item_data=`${s.speed} Mbps - ${s.type.toUpperCase()}`}),r.announcement&&g(r.announcement)}),{deleteRow:A,doSearch:P,template_change:o,sort:d,search:t,createForm:n,loading:a,updateForm:T,resetCreateForm:_,formFill:g,sendAnnouncement:U,dismiss:O,announcementsms:w,showSmsProgress:y}}},ee={class:"py-2"},te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 flex gap-2 content-center justify-center"},se={class:"mt-1 flex rounded-md shadow-sm w-4/5"},oe={key:0,class:"max-w-7xl mx-auto sm:px-6 lg:px-8 text-red-500"},ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"bg-white shadow sm:rounded-t-lg flex justify-between space-x-2 items-end py-2 px-2 md:px-2"},re={class:"grid grid-cols-1 md:grid-cols-4 gap-6 w-full"},le={class:"col-span-1 sm:col-span-1"},ie={class:"py-2"},de={class:"mt-1 flex rounded-md shadow-sm"},pe={key:0,class:"text-red-500"},me={class:"py-2"},ue={class:"mt-1 flex rounded-md shadow-sm"},ce=["value"],ge={key:0,class:"text-red-500"},xe={class:"col-span-1 sm:col-span-1"},fe={class:"py-2"},ye={class:"flex justify-between"},be={class:"inline-flex text-sm font-medium text-gray-700"},he={key:0,class:"mt-1 flex rounded-md shadow-sm"},we={key:0,class:"text-red-500"},_e={class:"py-2"},ke={class:"mt-1 flex rounded-md shadow-sm"},ve={key:0,class:"text-red-500"},Se={class:"col-span-1 sm:col-span-1"},Ce={class:"py-2"},Fe={class:"mt-1 flex rounded-md shadow-sm"},je=["value"],Ve={key:0,class:"text-red-500"},Me={class:"py-2"},Te={class:"flex justify-between"},Pe={class:"inline-flex text-sm font-medium text-gray-700"},Ue={key:0,class:"mt-1 flex rounded-md shadow-sm"},Ae={key:0,class:"text-red-500"},Oe={class:"col-span-1 sm:col-span-1"},Ne={class:"py-2"},Be={class:"mt-1 flex rounded-md shadow-sm"},Ee=["value"],ze={key:0,class:"text-red-500"},De={class:"mb-2 py-2 px-2 md:px-2 bg-white shadow rounded-b-lg flex justify-between"},Le={class:"flex"},Ge={class:"flex"},Ie={key:0,class:"bg-white overflow-auto shadow-xl sm:rounded-lg"},Je={class:"min-w-full divide-y divide-gray-200"},Re={class:"bg-white divide-y divide-gray-200 text-sm"},qe={class:"px-6 py-3 text-xs font-medium whitespace-nowrap"},He={class:"px-6 py-3 text-xs font-medium whitespace-nowrap"},Ke={class:"px-6 py-3 text-xs font-medium whitespace-nowrap"},Qe={class:"px-6 py-3 text-xs font-medium whitespace-nowrap"},We={class:"px-6 py-3 text-xs font-medium whitespace-nowrap"},Xe={class:"px-6 py-3 text-xs font-medium whitespace-nowrap"},Ye={key:1,class:"w-full block mt-4"},Ze={class:"text-xs text-gray-600"},$e={key:2},et={key:0,class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function tt(r,t,d,a,w,y){const n=v("multiselect"),_=v("pagination"),g=v("app-layout");return l(),G(g,null,{header:j(()=>t[14]||(t[14]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"Announcement",-1)])),default:j(()=>[e("div",ee,[e("div",te,[t[15]||(t[15]=e("label",{for:"name",class:"block text-sm font-bold text-gray-700 mt-4"},"Announcement Title ",-1)),e("div",se,[u(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>a.createForm.name=o),name:"name",id:"name",class:"py-2.5 focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Please Enter Announcement Name"},null,512),[[S,a.createForm.name]])])]),r.$page.props.errors.name?(l(),i("div",oe,p(r.$page.props.errors.name),1)):m("",!0),e("div",ne,[t[35]||(t[35]=e("label",{for:"name",class:"block text-sm font-bold text-indigo-700 mt-4"},"Announcement Preference",-1)),e("div",ae,[e("div",re,[e("div",le,[e("div",ie,[t[17]||(t[17]=e("label",{for:"sh_general",class:"block text-sm font-medium text-gray-700"},"General ",-1)),e("div",de,[t[16]||(t[16]=e("span",{class:"z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),u(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>a.createForm.general=o),name:"sh_general",id:"sh_general",class:"pl-10 py-2.5 focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Customer/Company Name etc.",tabindex:"1"},null,512),[[S,a.createForm.general]]),r.$page.props.errors.general?(l(),i("div",pe,p(r.$page.props.errors.general),1)):m("",!0)])]),e("div",me,[t[19]||(t[19]=e("label",{for:"sh_template",class:"block text-sm font-medium text-gray-700"},"Template ",-1)),e("div",ue,[u(e("select",{id:"sh_template","onUpdate:modelValue":t[2]||(t[2]=o=>a.createForm.template=o),name:"sh_template",class:"py-2.5 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"5",onChange:t[3]||(t[3]=(...o)=>a.template_change&&a.template_change(...o))},[t[18]||(t[18]=e("option",{value:"0"},"-Choose Template -",-1)),(l(!0),i(h,null,b(d.templates,o=>(l(),i("option",{key:o.id,value:o.id},p(o.name),9,ce))),128))],544),[[C,a.createForm.template]]),r.$page.props.errors.template?(l(),i("div",ge,p(r.$page.props.errors.template),1)):m("",!0)])])]),e("div",xe,[e("div",fe,[e("div",ye,[t[21]||(t[21]=e("label",{for:"sh_package",class:"inline-flex text-sm font-medium text-gray-700"},"Package ",-1)),e("label",be,[u(e("input",{class:"text-indigo-500 w-5 h-5 mr-2 focus:ring-indigo-400 focus:ring-opacity-25 border border-gray-300 rounded",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=o=>a.createForm.package_except=o)},null,512),[[V,a.createForm.package_except]]),t[20]||(t[20]=f(" Except "))])]),d.package_speed.length!==0?(l(),i("div",he,[F(n,{"deselect-label":"Selected already",options:d.package_speed,"track-by":"speed",label:"item_data",modelValue:a.createForm.package,"onUpdate:modelValue":t[5]||(t[5]=o=>a.createForm.package=o),"allow-empty":!0,multiple:!0,tabindex:"2"},null,8,["options","modelValue"]),r.$page.props.errors.package?(l(),i("div",we,p(r.$page.props.errors.package),1)):m("",!0)])):m("",!0)]),e("div",_e,[t[22]||(t[22]=e("label",{for:"sh_type",class:"block text-sm font-medium text-gray-700"},"Type ",-1)),e("div",ke,[u(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>a.createForm.type=o),name:"sh_type",id:"sh_type",class:"py-2.5 focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300 uppercase",tabindex:"6",disabled:""},null,512),[[S,a.createForm.type]])]),r.$page.props.errors.type?(l(),i("div",ve,p(r.$page.props.errors.type),1)):m("",!0)])]),e("div",Se,[e("div",Ce,[t[25]||(t[25]=e("label",{for:"sh_township",class:"block text-sm font-medium text-gray-700"},"Township ",-1)),e("div",Fe,[t[24]||(t[24]=e("span",{class:"z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),u(e("select",{id:"sh_township","onUpdate:modelValue":t[7]||(t[7]=o=>a.createForm.township=o),name:"sh_township",class:"pl-10 py-2.5 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"3"},[t[23]||(t[23]=e("option",{value:"0"},"-Choose Township -",-1)),(l(!0),i(h,null,b(d.townships,o=>(l(),i("option",{key:o.id,value:o.id},p(o.name),9,je))),128))],512),[[C,a.createForm.township]]),r.$page.props.errors.township?(l(),i("div",Ve,p(r.$page.props.errors.township),1)):m("",!0)])]),e("div",Me,[e("div",Te,[t[27]||(t[27]=e("label",{for:"sh_status",class:"block text-sm font-medium text-gray-700"},"Customer Status ",-1)),e("label",Pe,[u(e("input",{class:"text-indigo-500 w-5 h-5 mr-2 focus:ring-indigo-400 focus:ring-opacity-25 border border-gray-300 rounded",type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=o=>a.createForm.status_except=o)},null,512),[[V,a.createForm.status_except]]),t[26]||(t[26]=f(" Except "))])]),d.status.length!==0?(l(),i("div",Ue,[F(n,{"deselect-label":"Selected already",options:d.status,"track-by":"id",label:"name",modelValue:a.createForm.status,"onUpdate:modelValue":t[9]||(t[9]=o=>a.createForm.status=o),"allow-empty":!0,multiple:!0},null,8,["options","modelValue"]),r.$page.props.errors.status?(l(),i("div",Ae,p(r.$page.props.errors.status),1)):m("",!0)])):m("",!0)])]),e("div",Oe,[e("div",Ne,[t[30]||(t[30]=e("label",{for:"sh_partner",class:"block text-sm font-medium text-gray-700"},"Project ",-1)),e("div",Be,[t[29]||(t[29]=e("span",{class:"z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),u(e("select",{id:"sh_partner","onUpdate:modelValue":t[10]||(t[10]=o=>a.createForm.partner=o),name:"sh_partner",class:"pl-10 py-2.5 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"4"},[t[28]||(t[28]=e("option",{value:"0"},"-Choose Project/Partner -",-1)),(l(!0),i(h,null,b(d.projects,o=>(l(),i("option",{key:o.id,value:o.id},p(o.name),9,Ee))),128))],512),[[C,a.createForm.partner]]),r.$page.props.errors.partner?(l(),i("div",ze,p(r.$page.props.errors.partner),1)):m("",!0)])])])])]),e("div",De,[e("div",Le,[e("a",{onClick:t[11]||(t[11]=(...o)=>a.updateForm&&a.updateForm(...o)),class:"cursor-pointer inline-flex items-center px-4 py-2 bg-indigo-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:border-indigo-900 focus:ring focus:ring-indigo-300 disabled:opacity-25 transition"},t[31]||(t[31]=[f("1 Update "),e("i",{class:"ml-1 fa fa-save text-white",tabindex:"10"},null,-1)])),e("a",{onClick:t[12]||(t[12]=(...o)=>a.doSearch&&a.doSearch(...o)),class:"ml-2 cursor-pointer inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},t[32]||(t[32]=[f("2 Preview "),e("i",{class:"ml-1 fa fa-search text-white",tabindex:"11"},null,-1)]))]),e("div",Ge,[e("a",{onClick:t[13]||(t[13]=(...o)=>a.sendAnnouncement&&a.sendAnnouncement(...o)),class:"cursor-pointer inline-flex items-center px-4 py-2 bg-red-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-900 focus:outline-none focus:border-red-900 focus:ring focus:ring-red-300 disabled:opacity-25 transition"},t[33]||(t[33]=[f("3 Send Announcement"),e("i",{class:"ml-1 -mt-1 fa fa-bullhorn text-white",tabindex:"12"},null,-1)]))])]),e("div",null,[d.customers.data?(l(),i("div",Ie,[e("table",Je,[t[34]||(t[34]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Package"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Township"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status")])],-1)),e("tbody",Re,[(l(!0),i(h,null,b(d.customers.data,o=>(l(),i("tr",{key:o.id,class:J(" text-"+o.color)},[e("td",qe,p(o.ftth_id),1),e("td",He,p(o.order_date),1),e("td",Ke,p(o.name),1),e("td",Qe,p(o.package),1),e("td",We,p(o.township),1),e("td",Xe,p(o.status),1)],2))),128))])])])):m("",!0),d.customers.total?(l(),i("span",Ye,[e("label",Ze,p(d.customers.data.length)+" Customers in Current Page. Total Number of Customers : "+p(d.customers.total),1)])):m("",!0),d.customers.links?(l(),i("span",$e,[F(_,{class:"mt-4",links:d.customers.links},null,8,["links"])])):m("",!0)])])]),a.loading?(l(),i("div",et,t[36]||(t[36]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):m("",!0)]),_:1})}const it=M($,[["render",tt]]);export{it as default};
