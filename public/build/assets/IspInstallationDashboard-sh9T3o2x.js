import{A as H}from"./AppLayout-CiiA6I2_.js";import{L as P}from"./LineChart-CzF2yydG.js";import{m as G,r as p,q as T,z as k,c as z,w as f,N as M,o as n,a as t,b as F,f as v,d as r,g,F as x,t as a,j as D,v as U,i as Z,k as O,n as W}from"./app-CE8isyGN.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-C75W12rT.js";import"./chart-Kvy_m8bm.js";const E={name:"IspInstallationDashboard",components:{AppLayout:H,LineChart:P,Link:G},props:{matrix:Object,status_types:Array,grand_total:Object,zone_matrix:Array,zone_grand_total:Object,zones:Array,township_matrix:Array,township_grand_total:Object,townships:Array,sla_matrix:Array,sla_grand_total:Object,installation_services:Array,service_types:{type:Array,default:()=>["ALL"]},selected_installation_service:{type:[String,Number],default:"ALL"},months:Array,chart_data:Object,date_from:String,date_to:String},setup(d,{emit:e}){const l=p(d.date_from||""),o=p(d.date_to||""),i=p([...d.service_types]),y=p(d.selected_installation_service||"ALL"),u=p(0),w=T(()=>d.months.map(c=>{const[_,m]=c.split("-");return new Date(_,m-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})),L=T(()=>i.value.includes("ALL")),h=T(()=>i.value.includes("ALL")?["ALL"]:i.value);function s(c){return{active:"#10b981",disabled:"#f59e0b",suspense:"#ef4444",terminate:"#6b7280"}[c]||"#6366f1"}function b(c){const _=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16","#ec4899","#6b7280"];return _[c%_.length]}function N(){const c=d.months[0];return(c&&d.chart_data[c]?Object.keys(d.chart_data[c]):[]).map((m,A)=>({label:m,data:d.months.map(C=>d.chart_data[C]&&d.chart_data[C][m]?d.chart_data[C][m]:0),borderColor:b(A),backgroundColor:b(A)+"20",fill:!1,tension:.4}))}function j(c){c==="ALL"?i.value=["ALL"]:(i.value=i.value.filter(_=>_!=="ALL"),i.value.includes(c)?i.value=i.value.filter(_=>_!==c):i.value.push(c),i.value.length===0&&(i.value=["ALL"])),S()}function V(){I()}function B(){S()}function S(){M.post(route("isp.installation.dashboard"),{date_from:l.value,date_to:o.value,service_types:i.value},{onSuccess:()=>{u.value++}})}function I(){M.post(route("isp.installation.dashboard"),{date_from:l.value,date_to:o.value,service_types:i.value,selected_installation_service:y.value},{onSuccess:()=>{u.value++}})}return{date_from:l,date_to:o,service_types:i,selected_installation_service:y,isAllSelected:L,selectedServiceNames:h,chartLabels:w,getStatusColor:s,getServiceColor:b,getInstallationServiceDatasets:N,handleServiceTypeChange:j,handleInstallationServiceChange:V,applyDateFilter:B,applyFilter:S,applyInstallationServiceFilter:I,key:u}}},R={class:"py-12"},J={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 grid gap-4"},K={class:"bg-white shadow-xl sm:rounded-lg p-4"},Q={class:"flex flex-wrap gap-2"},X={class:"bg-white shadow-xl sm:rounded-lg p-6"},Y={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},$={class:"flex flex-wrap gap-2"},tt=["checked","onChange"],et={class:"text-sm font-medium text-gray-900"},st={class:"mt-2 text-xs text-gray-500"},at={class:"text-indigo-600"},lt=["value"],ot={class:"mt-2 text-xs text-gray-500"},nt={class:"text-indigo-600"},it={class:"col-span-2"},dt={class:"flex items-center gap-2"},rt={class:"flex items-center gap-2"},ct={class:"bg-white shadow-xl sm:rounded-lg p-6"},_t={class:"mb-6"},ut={class:"min-w-full divide-y divide-gray-200 mb-8"},gt={class:"bg-white divide-y divide-gray-200"},xt={class:"px-6 py-4 whitespace-nowrap font-bold"},mt={class:"px-6 py-4 whitespace-nowrap"},pt={class:"bg-gray-100 font-bold"},ht={class:"px-6 py-4 whitespace-nowrap"},bt={class:"mt-4 text-lg font-bold"},ft={class:"bg-white shadow-xl sm:rounded-lg p-6"},vt={class:"mb-6"},yt={class:"min-w-full divide-y divide-gray-200 mb-8"},wt={class:"bg-white divide-y divide-gray-200"},Lt={class:"px-6 py-4 whitespace-nowrap font-bold"},St={class:"px-6 py-4 whitespace-nowrap"},At={class:"bg-gray-100 font-bold"},Ct={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"mt-4 text-lg font-bold"},kt={class:"bg-white shadow-xl sm:rounded-lg p-6"},Dt={class:"mb-6"},It={class:"min-w-full divide-y divide-gray-200 mb-8"},zt={class:"bg-white divide-y divide-gray-200"},Mt={class:"px-6 py-4 whitespace-nowrap font-bold"},Ft={class:"px-6 py-4 whitespace-nowrap"},Ot={class:"bg-gray-100 font-bold"},Nt={class:"px-6 py-4 whitespace-nowrap"},jt={class:"mt-4 text-lg font-bold"},Vt={class:"bg-white shadow-xl sm:rounded-lg p-6"},Bt={class:"mb-6"},Ht={class:"min-w-full divide-y divide-gray-200 mb-8"},Pt={class:"bg-white divide-y divide-gray-200"},Gt={class:"px-6 py-4 whitespace-nowrap font-bold"},Ut={class:"text-xs text-gray-500 block"},Zt={class:"px-6 py-4 whitespace-nowrap"},Wt={class:"px-6 py-4 whitespace-nowrap"},qt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},Et={class:"px-6 py-4 whitespace-nowrap"},Rt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Jt={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},Kt={class:"bg-gray-100 font-bold"},Qt={class:"px-6 py-4 whitespace-nowrap"},Xt={class:"px-6 py-4 whitespace-nowrap"},Yt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},$t={class:"px-6 py-4 whitespace-nowrap"},te={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},ee={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},se={class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},ae={class:"bg-blue-50 p-3 rounded"},le={class:"text-xl font-bold text-blue-900"},oe={class:"bg-green-50 p-3 rounded"},ne={class:"text-xl font-bold text-green-900"},ie={class:"text-xs text-green-600"},de={class:"bg-red-50 p-3 rounded"},re={class:"text-xl font-bold text-red-900"},ce={class:"text-xs text-red-600"},_e={class:"bg-white shadow-xl sm:rounded-lg p-6"},ue={class:"mb-6"};function ge(d,e,l,o,i,y){const u=k("Link"),w=k("LineChart"),L=k("app-layout");return n(),z(L,null,{header:f(()=>e[5]||(e[5]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"},"ISP Installation Dashboard",-1)])),default:f(()=>{var h;return[t("div",R,[t("div",J,[t("div",K,[t("div",Q,[F(u,{href:d.route("isp.dashboard"),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition duration-150 ease-in-out"},{default:f(()=>e[6]||(e[6]=[t("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})],-1),v(" Main Dashboard ")])),_:1},8,["href"]),e[8]||(e[8]=t("div",{class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md"},[t("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 2L3 8v10a1 1 0 001 1h4a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1h4a1 1 0 001-1V8l-7-6z","clip-rule":"evenodd"})]),v(" Installation Dashboard "),t("span",{class:"ml-2 bg-green-500 text-xs px-2 py-1 rounded-full"},"Current")],-1)),F(u,{href:d.route("isp.maintenance.dashboard"),class:"inline-flex items-center px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white text-sm font-medium rounded-md transition duration-150 ease-in-out"},{default:f(()=>e[7]||(e[7]=[t("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1),v(" Maintenance Dashboard ")])),_:1},8,["href"])])]),t("div",X,[t("div",Y,[t("div",null,[e[10]||(e[10]=t("h3",{class:"text-lg font-bold mb-3 flex items-center gap-2"},[t("span",null,"Service Type Filter"),t("span",{class:"inline-block bg-indigo-100 text-indigo-600 text-xs px-2 py-1 rounded"},"Multi-select")],-1)),t("div",$,[(n(),r(x,null,g(["ALL","FTTH","DIA","DPLC","IPLC"],s=>t("label",{key:s,class:"flex items-center cursor-pointer bg-gray-50 px-2 py-1 rounded hover:bg-indigo-50 transition"},[t("input",{type:"checkbox",checked:o.service_types.includes(s),onChange:b=>o.handleServiceTypeChange(s),class:"mr-2 accent-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,40,tt),t("span",et,a(s),1)])),64))]),t("div",st,[e[9]||(e[9]=t("span",{class:"font-semibold"},"Selected:",-1)),t("span",at,a(o.selectedServiceNames.join(", ")),1)])]),t("div",null,[e[13]||(e[13]=t("h3",{class:"text-lg font-bold mb-3"},"Installation Service",-1)),D(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.selected_installation_service=s),onChange:e[1]||(e[1]=(...s)=>o.handleInstallationServiceChange&&o.handleInstallationServiceChange(...s)),class:"border rounded px-3 py-2 bg-white text-gray-900 focus:ring-indigo-500 focus:border-indigo-500 w-full"},[e[11]||(e[11]=t("option",{value:"ALL"},"ALL",-1)),(n(!0),r(x,null,g(l.installation_services,s=>(n(),r("option",{key:s.id,value:s.id},a(s.name),9,lt))),128))],544),[[U,o.selected_installation_service]]),t("div",ot,[e[12]||(e[12]=t("span",{class:"font-semibold"},"Selected:",-1)),t("span",nt,a(o.selected_installation_service==="ALL"?"ALL":((h=l.installation_services.find(s=>s.id==o.selected_installation_service))==null?void 0:h.name)||o.selected_installation_service),1)])]),t("div",it,[e[17]||(e[17]=t("h3",{class:"text-lg font-bold mb-3"},"Date Range Filter",-1)),t("form",{class:"inline-flex gap-2",onSubmit:e[4]||(e[4]=Z((...s)=>o.applyDateFilter&&o.applyDateFilter(...s),["prevent"]))},[t("div",dt,[e[14]||(e[14]=t("label",{class:"font-semibold text-sm"},"From:",-1)),D(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>o.date_from=s),class:"border rounded px-2 py-1 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[O,o.date_from]])]),t("div",rt,[e[15]||(e[15]=t("label",{class:"font-semibold text-sm"},"To:",-1)),D(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>o.date_to=s),class:"border rounded px-2 py-1 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[O,o.date_to]])]),e[16]||(e[16]=t("button",{type:"submit",class:"mt-2 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded transition font-semibold shadow"},"Apply Filter",-1))],32)])])]),t("div",ct,[t("div",_t,[e[20]||(e[20]=t("h3",{class:"text-lg font-bold mb-2"},"Customer Installation Service Dashboard",-1)),t("table",ut,[e[19]||(e[19]=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Installation Service"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Total Customers")])],-1)),t("tbody",gt,[(n(!0),r(x,null,g(l.matrix,s=>(n(),r("tr",{key:s.installation_service_id},[t("td",xt,a(s.installation_service_name),1),t("td",mt,a(s.total),1)]))),128)),t("tr",pt,[e[18]||(e[18]=t("td",{class:"px-6 py-4 whitespace-nowrap"},"Grand Total",-1)),t("td",ht,a(l.grand_total.total),1)])])]),t("div",bt,"Total Customers: "+a(l.grand_total.total),1)])]),t("div",ft,[t("div",vt,[e[23]||(e[23]=t("h3",{class:"text-lg font-bold mb-4"},"Zone Dashboard",-1)),t("table",yt,[e[22]||(e[22]=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Zone"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Total Customers")])],-1)),t("tbody",wt,[(n(!0),r(x,null,g(l.zone_matrix,s=>(n(),r("tr",{key:s.zone_id},[t("td",Lt,a(s.zone_name),1),t("td",St,a(s.total),1)]))),128)),t("tr",At,[e[21]||(e[21]=t("td",{class:"px-6 py-4 whitespace-nowrap"},"Grand Total",-1)),t("td",Ct,a(l.zone_grand_total.total),1)])])]),t("div",Tt,"Total Customers by Zone: "+a(l.zone_grand_total.total),1)])]),t("div",kt,[t("div",Dt,[e[26]||(e[26]=t("h3",{class:"text-lg font-bold mb-4"},"Township Dashboard",-1)),t("table",It,[e[25]||(e[25]=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Township"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Total Customers")])],-1)),t("tbody",zt,[(n(!0),r(x,null,g(l.township_matrix,s=>(n(),r("tr",{key:s.township_id},[t("td",Mt,a(s.township_name),1),t("td",Ft,a(s.total),1)]))),128)),t("tr",Ot,[e[24]||(e[24]=t("td",{class:"px-6 py-4 whitespace-nowrap"},"Grand Total",-1)),t("td",Nt,a(l.township_grand_total.total),1)])])]),t("div",jt,"Total Customers by Township: "+a(l.township_grand_total.total),1)])]),t("div",Vt,[t("div",Bt,[e[32]||(e[32]=t("h3",{class:"text-lg font-bold mb-4"},"SLA Performance Dashboard (FTTH Only)",-1)),e[33]||(e[33]=t("p",{class:"text-sm text-gray-600 mb-4"},"Shows installation performance against Service Level Agreement for FTTH customers",-1)),t("table",Ht,[e[28]||(e[28]=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Installation Service Name"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"No. of Customer"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Within SLA"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase"},"Over SLA")])],-1)),t("tbody",Pt,[(n(!0),r(x,null,g(l.sla_matrix,s=>(n(),r("tr",{key:s.installation_service_id,class:W({"bg-yellow-50":s.over_sla>0})},[t("td",Gt,[v(a(s.installation_service_name)+" ",1),t("span",Ut,"("+a(s.sla_hours)+"h SLA)",1)]),t("td",Zt,a(s.total_customers),1),t("td",Wt,[t("span",qt,a(s.within_sla),1)]),t("td",Et,[s.over_sla>0?(n(),r("span",Rt,a(s.over_sla),1)):(n(),r("span",Jt,a(s.over_sla),1))])],2))),128)),t("tr",Kt,[e[27]||(e[27]=t("td",{class:"px-6 py-4 whitespace-nowrap"},"Grand Total",-1)),t("td",Qt,a(l.sla_grand_total.total_customers),1),t("td",Xt,[t("span",Yt,a(l.sla_grand_total.within_sla),1)]),t("td",$t,[l.sla_grand_total.over_sla>0?(n(),r("span",te,a(l.sla_grand_total.over_sla),1)):(n(),r("span",ee,a(l.sla_grand_total.over_sla),1))])])])]),t("div",se,[t("div",ae,[e[29]||(e[29]=t("div",{class:"font-semibold text-blue-800"},"Total FTTH Installations:",-1)),t("div",le,a(l.sla_grand_total.total_customers),1)]),t("div",oe,[e[30]||(e[30]=t("div",{class:"font-semibold text-green-800"},"Within SLA:",-1)),t("div",ne,a(l.sla_grand_total.within_sla),1),t("div",ie,a(l.sla_grand_total.total_customers>0?Math.round(l.sla_grand_total.within_sla/l.sla_grand_total.total_customers*100):0)+"% Performance ",1)]),t("div",de,[e[31]||(e[31]=t("div",{class:"font-semibold text-red-800"},"Over SLA:",-1)),t("div",re,a(l.sla_grand_total.over_sla),1),t("div",ce,a(l.sla_grand_total.total_customers>0?Math.round(l.sla_grand_total.over_sla/l.sla_grand_total.total_customers*100):0)+"% Over Target ",1)])])])]),t("div",_e,[t("div",ue,[e[34]||(e[34]=t("h3",{class:"text-lg font-bold mb-2"},"Customer Trends by Installation Service (Monthly)",-1)),(n(),z(w,{"chart-id":"installation-service-trends-chart",title:"Total Customers by Installation Service Over Time",labels:o.chartLabels,datasets:o.getInstallationServiceDatasets(),key:o.key},null,8,["labels","datasets"]))])])])])]}),_:1})}const ve=q(E,[["render",ge]]);export{ve as default};
