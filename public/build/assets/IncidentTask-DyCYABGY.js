import{A as ne,N as de,C as re}from"./NoData-BXGXTZPk.js";import{P as ce}from"./Pagination-D63oj3yg.js";import{r as x,y as te,q as se,z as L,o as a,d as i,a as e,F as D,g as P,i as oe,f as z,t as n,e as m,j as k,A as Q,n as S,k as A,b as R,M as N,T as ae,m as me,E as ue,h as fe,x as pe,c as H,w as ee,N as J,O as xe}from"./app-D1-sh8eA.js";import{M as ge}from"./vue3-multiselect.umd.min-BSykfjub.js";import{_ as le,C as ie}from"./ImageUploader-DCb2Pbjb.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-gWyj0FPx.js";import"./Upload-DRs074RD.js";const _e={name:"TaskCheckList",components:{ImageUploader:le,CustomerFile:ie},props:{taskId:{type:[String,Number],required:!0}},setup(u){const s=x([]),f=x([]),t=x([]),y=x(null),v=x(!1),w=x({}),p=x(null),o=()=>{p.value=ae({task_id:u.taskId,...Object.fromEntries(Object.values(s.value).flatMap(c=>{var g,C,I,V;return[[`checklist_${c.id}_title`,((C=(g=t.value.checklist_values)==null?void 0:g[c.id])==null?void 0:C.title)||""],[`checklist_${c.id}_attachment`,null],[`checklist_${c.id}_status`,((V=(I=t.value.checklist_values)==null?void 0:I[c.id])==null?void 0:V.status)||""]]}))})},U=async()=>{try{const g=await(await fetch(`/getTaskCheckList/${u.taskId}`)).json();s.value=g.subconCheckList||[],f.value=g.checkListSummary||[],t.value=g.taskCheckList||[],o()}catch(c){console.error("Failed to fetch checklist data:",c)}};te(()=>{U()});const h=se(()=>y.value?(v.value=!!y.value,s.value.filter(c=>c.group_id===y.value)):null);function b(c){y.value=c,v.value=!0}function d(){y.value=null,v.value=!1}function j(c,g){const C=c.target.files[0];p.value&&(p.value[`checklist_${g}_attachment`]=C)}function T(){p.value&&p.value.post(route("taskCheckList.update",u.taskId),{preserveScroll:!0,onSuccess:c=>{Toast.fire({icon:"success",title:c.props.flash.message}),d()}})}return{subconCheckList:s,checkListSummary:f,selectedGroupId:y,showModal:v,form:p,filteredChecklists:h,taskCheckList:t,checklistImagePreviews:w,selectGroup:b,closeModal:d,handleFileUpload:j,submit:T}}},ye={class:"overflow-x-auto rounded-lg shadow mb-6 mt-4"},be={class:"min-w-full divide-y divide-gray-200 bg-white"},ke=["onClick"],he={class:"px-4 py-2 text-blue-600 underline font-medium"},ve={class:"px-4 py-2 text-center"},we={key:0,class:"px-2 py-1 rounded-xl bg-yellow-100 text-yellow-700 text-xs font-semibold"},Ce={key:1,class:"text-gray-400"},Se={class:"px-4 py-2 text-center"},Ue={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},je={key:1,class:"text-gray-400"},Te={class:"px-4 py-2 text-center"},Ie={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Ve={key:1,class:"text-gray-400"},Le={class:"px-4 py-2 text-center"},De={key:0,class:"px-2 py-1 rounded-xl bg-red-100 text-red-700 text-xs font-semibold"},Me={key:1,class:"text-gray-400"},Ae={class:"px-4 py-2 text-center"},Re={key:0,class:"px-2 py-1 rounded-xl bg-green-100 text-green-700 text-xs font-semibold"},Ne={key:1,class:"text-gray-400"},Oe={class:"px-4 py-2 text-center"},Pe={key:0,class:"px-2 py-1 rounded-xl bg-gray-100 text-gray-700 text-xs font-semibold"},Ge={key:1,class:"text-gray-400"},qe={key:0,ref:"showModal",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},ze={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Fe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-7xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Be={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ee={key:0,class:"mt-2 text-sm text-indigo-600 font-semibold"},$e={class:"underline"},We={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Ye={class:"block text-sm font-medium text-gray-700"},Ke=["onUpdate:modelValue"],He={key:0,class:"mt-2"},Je={class:"py-2"},Qe={class:"mt-2 flex"},Xe={class:"flex-auto items-center"},Ze=["name","onUpdate:modelValue"],et={class:"flex-auto items-center"},tt=["name","onUpdate:modelValue"],st={class:"flex-auto items-center"},ot=["name","onUpdate:modelValue"],at={class:"flex-auto items-center"},lt={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-red-600"},it={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-red-600"},nt={class:"flex-auto items-center"},dt={key:0,class:"mt-1 fa fa-lg fas fa-circle-check text-green-600"},rt={key:1,class:"mt-1 fa fa-lg fa-regular fa-circle text-green-600"},ct={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},mt={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},ut={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},ft={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},pt={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function xt(u,s,f,t,y,v){var p;const w=L("ImageUploader");return a(),i("div",null,[s[12]||(s[12]=e("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Data ",-1)),e("div",ye,[e("table",be,[s[2]||(s[2]=e("thead",{class:"bg-indigo-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Group Name"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Skip"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Requested"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Rejected"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Approved"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Remaining")])],-1)),e("tbody",null,[(a(!0),i(D,null,P(t.checkListSummary,o=>(a(),i("tr",{key:o.group_name,onClick:U=>t.selectGroup(o.id),class:S(["cursor-pointer transition-colors",t.selectedGroupId===o.id?"bg-indigo-100":"hover:bg-gray-50"])},[e("td",he,n(o.group_name),1),e("td",ve,[o.total>0?(a(),i("span",we,n(o.total),1)):(a(),i("span",Ce,n(o.total),1))]),e("td",Se,[o.skip>0?(a(),i("span",Ue,n(o.skip),1)):(a(),i("span",je,n(o.skip),1))]),e("td",Te,[o.requested>0?(a(),i("span",Ie,n(o.requested),1)):(a(),i("span",Ve,n(o.requested),1))]),e("td",Le,[o.rejected>0?(a(),i("span",De,n(o.rejected),1)):(a(),i("span",Me,n(o.rejected),1))]),e("td",Ae,[o.approved>0?(a(),i("span",Re,n(o.approved),1)):(a(),i("span",Ne,n(o.approved),1))]),e("td",Oe,[o.remaining>0?(a(),i("span",Pe,n(o.remaining),1)):(a(),i("span",Ge,n(o.remaining),1))])],10,ke))),128))])])]),t.filteredChecklists&&t.showModal?(a(),i("div",qe,[e("div",ze,[s[10]||(s[10]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[11]||(s[11]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e("div",Fe,[e("form",{onSubmit:s[1]||(s[1]=oe((...o)=>t.submit&&t.submit(...o),["prevent"]))},[e("div",Be,[e("div",null,[t.selectedGroupId?(a(),i("div",Ee,[s[3]||(s[3]=z(" Showing details for: ")),e("span",$e,n((p=t.checkListSummary.find(o=>o.id===t.selectedGroupId))==null?void 0:p.group_name),1)])):m("",!0),e("div",We,[(a(!0),i(D,null,P(t.filteredChecklists,(o,U)=>{var h;return a(),i("div",{key:o.id,class:"mt-6"},[e("label",Ye,n(o.name),1),k(e("input",{type:"text","onUpdate:modelValue":b=>t.form[`checklist_${o.id}_title`]=b,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Ke),[[A,t.form[`checklist_${o.id}_title`]]]),o.has_attachment?(a(),i("div",He,[R(w,{modelValue:t.form[`checklist_${o.id}_attachment`],"onUpdate:modelValue":b=>t.form[`checklist_${o.id}_attachment`]=b,imageUrl:t.checklistImagePreviews[o.id],"onUpdate:imageUrl":b=>t.checklistImagePreviews[o.id]=b,existingImage:t.taskCheckList.checklist_images&&t.taskCheckList.checklist_images[o.id]?`/storage/${t.taskCheckList.checklist_images[o.id]}`:null,"upload-text":`Upload ${o.name} image`,submitStatus:(h=t.taskCheckList.checklist_values[o.id])==null?void 0:h.status},null,8,["modelValue","onUpdate:modelValue","imageUrl","onUpdate:imageUrl","existingImage","upload-text","submitStatus"])])):m("",!0),e("div",Je,[s[9]||(s[9]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",Qe,[e("label",Xe,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-blue-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":b=>t.form[`checklist_${o.id}_status`]=b,value:""},null,8,Ze),[[N,t.form[`checklist_${o.id}_status`]]]),s[4]||(s[4]=e("span",{class:"ml-2 text-gray-700 text-sm"},"N/A",-1))]),e("label",et,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":b=>t.form[`checklist_${o.id}_status`]=b,value:"skip"},null,8,tt),[[N,t.form[`checklist_${o.id}_status`]]]),s[5]||(s[5]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Skip",-1))]),e("label",st,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:`checklist_${o.id}_status`,"onUpdate:modelValue":b=>t.form[`checklist_${o.id}_status`]=b,value:"requested"},null,8,ot),[[N,t.form[`checklist_${o.id}_status`]]]),s[6]||(s[6]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Request",-1))]),e("label",at,[t.form[`checklist_${o.id}_status`]=="declined"?(a(),i("i",lt)):(a(),i("i",it)),s[7]||(s[7]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Declined",-1))]),e("label",nt,[t.form[`checklist_${o.id}_status`]=="approved"?(a(),i("i",dt)):(a(),i("i",rt)),s[8]||(s[8]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Approved",-1))])])])])}),128))])])]),e("div",ct,[e("span",mt,[k(e("button",ut," Save ",512),[[Q,!t.form.id]]),k(e("button",ft," Update ",512),[[Q,t.form.id]])]),e("span",pt,[e("button",{onClick:s[0]||(s[0]=(...o)=>t.closeModal&&t.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):m("",!0)])}const gt=Z(_e,[["render",xt],["__scopeId","data-v-f744c14d"]]),_t={name:"TaskCheckList",components:{ImageUploader:le,CustomerFile:ie},props:{taskId:{type:[String,Number],required:!0},user:{type:Object,required:!0}},setup(u){const s=x([]),f=x([]),t=x([]),y=x(null),v=x(!1),w=x({}),p=x(null),o=()=>{p.value=ae({task_id:u.taskId,...Object.fromEntries(Object.values(s.value).flatMap(c=>{var g,C,I,V;return[[`checklist_${c.id}_title`,((C=(g=t.value.checklist_values)==null?void 0:g[c.id])==null?void 0:C.title)||""],[`checklist_${c.id}_attachment`,null],[`checklist_${c.id}_status`,((V=(I=t.value.checklist_values)==null?void 0:I[c.id])==null?void 0:V.status)||""]]}))})},U=async()=>{try{const g=await(await fetch(`/getTaskCheckList/${u.taskId}`)).json();s.value=g.subconCheckList||[],f.value=g.checkListSummary||[],t.value=g.taskCheckList||[],o()}catch(c){console.error("Failed to fetch checklist data:",c)}};te(()=>{U()});const h=se(()=>{if(!y.value)return null;const c=f.value.find(g=>g.id===y.value);return!c||c.total===c.remaining?null:s.value.filter(g=>g.group_id===y.value)});function b(c){y.value=c,v.value=!0}function d(){y.value=null,v.value=!1}function j(c,g){const C=c.target.files[0];p.value&&(p.value[`checklist_${g}_attachment`]=C)}function T(){p.value&&p.value.post(route("taskCheckList.update",u.taskId),{preserveScroll:!0,onSuccess:c=>{Toast.fire({icon:"success",title:c.props.flash.message}),d()}})}return{subconCheckList:s,checkListSummary:f,selectedGroupId:y,showModal:v,form:p,filteredChecklists:h,taskCheckList:t,checklistImagePreviews:w,selectGroup:b,closeModal:d,handleFileUpload:j,submit:T}}},yt={class:"overflow-x-auto rounded-lg shadow mb-6 mt-4"},bt={class:"min-w-full divide-y divide-gray-200 bg-white"},kt=["onClick"],ht={class:"px-4 py-2 text-blue-600 underline font-medium"},vt={class:"px-4 py-2 text-center"},wt={key:0,class:"px-2 py-1 rounded-xl bg-yellow-100 text-yellow-700 text-xs font-semibold"},Ct={key:1,class:"text-gray-400"},St={class:"px-4 py-2 text-center"},Ut={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},jt={key:1,class:"text-gray-400"},Tt={class:"px-4 py-2 text-center"},It={key:0,class:"px-2 py-1 rounded-xl bg-indigo-100 text-indigo-700 text-xs font-semibold"},Vt={key:1,class:"text-gray-400"},Lt={class:"px-4 py-2 text-center"},Dt={key:0,class:"px-2 py-1 rounded-xl bg-red-100 text-red-700 text-xs font-semibold"},Mt={key:1,class:"text-gray-400"},At={class:"px-4 py-2 text-center"},Rt={key:0,class:"px-2 py-1 rounded-xl bg-green-100 text-green-700 text-xs font-semibold"},Nt={key:1,class:"text-gray-400"},Ot={class:"px-4 py-2 text-center"},Pt={key:0,class:"px-2 py-1 rounded-xl bg-gray-100 text-gray-700 text-xs font-semibold"},Gt={key:1,class:"text-gray-400"},qt={key:0,ref:"showModal",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},zt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ft={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-7xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Bt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Et={key:0,class:"mt-2 text-sm text-indigo-600 font-semibold"},$t={class:"underline"},Wt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Yt={class:"block text-sm font-medium text-gray-700"},Kt=["onUpdate:modelValue"],Ht={key:0,class:"mt-2"},Jt={class:"py-2"},Qt={class:"mt-2 flex"},Xt={class:"flex-auto items-center"},Zt=["name","onUpdate:modelValue","disabled"],es={class:"flex-auto items-center"},ts=["name","onUpdate:modelValue","disabled"],ss={class:"flex-auto items-center"},os=["name","onUpdate:modelValue","disabled"],as={class:"flex-auto items-center"},ls=["name","onUpdate:modelValue","disabled"],is={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ns={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},ds={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},rs={type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},cs={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function ms(u,s,f,t,y,v){var p;const w=L("ImageUploader");return a(),i("div",null,[s[11]||(s[11]=e("h6",{class:"md:min-w-full text-indigo-700 text-xs uppercase font-bold block pt-1 no-underline"}," Installation Data ",-1)),e("div",yt,[e("table",bt,[s[2]||(s[2]=e("thead",{class:"bg-indigo-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Group Name"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Skip"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Requested"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Rejected"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Approved"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-indigo-700 uppercase tracking-wider"},"Remaining")])],-1)),e("tbody",null,[(a(!0),i(D,null,P(t.checkListSummary,o=>(a(),i("tr",{key:o.group_name,onClick:U=>t.selectGroup(o.id),class:S(["cursor-pointer transition-colors",t.selectedGroupId===o.id?"bg-indigo-100":"hover:bg-gray-50"])},[e("td",ht,n(o.group_name),1),e("td",vt,[o.total>0?(a(),i("span",wt,n(o.total),1)):(a(),i("span",Ct,n(o.total),1))]),e("td",St,[o.skip>0?(a(),i("span",Ut,n(o.skip),1)):(a(),i("span",jt,n(o.skip),1))]),e("td",Tt,[o.requested>0?(a(),i("span",It,n(o.requested),1)):(a(),i("span",Vt,n(o.requested),1))]),e("td",Lt,[o.rejected>0?(a(),i("span",Dt,n(o.rejected),1)):(a(),i("span",Mt,n(o.rejected),1))]),e("td",At,[o.approved>0?(a(),i("span",Rt,n(o.approved),1)):(a(),i("span",Nt,n(o.approved),1))]),e("td",Ot,[o.remaining>0?(a(),i("span",Pt,n(o.remaining),1)):(a(),i("span",Gt,n(o.remaining),1))])],10,kt))),128))])])]),t.filteredChecklists&&t.showModal?(a(),i("div",qt,[e("div",zt,[s[9]||(s[9]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[10]||(s[10]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e("div",Ft,[e("form",{onSubmit:s[1]||(s[1]=oe((...o)=>t.submit&&t.submit(...o),["prevent"]))},[e("div",Bt,[e("div",null,[t.selectedGroupId?(a(),i("div",Et,[s[3]||(s[3]=z(" Showing details for: ")),e("span",$t,n((p=t.checkListSummary.find(o=>o.id===t.selectedGroupId))==null?void 0:p.group_name),1)])):m("",!0),e("div",Wt,[(a(!0),i(D,null,P(t.filteredChecklists,(o,U)=>{var h,b,d,j,T;return a(),i("div",{key:o.id,class:"mt-6"},[e("label",Yt,n(o.name),1),k(e("input",{type:"text","onUpdate:modelValue":c=>t.form[`checklist_${o.id}_title`]=c,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Kt),[[A,t.form[`checklist_${o.id}_title`]]]),o.has_attachment?(a(),i("div",Ht,[R(w,{modelValue:t.form[`checklist_${o.id}_attachment`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_attachment`]=c,imageUrl:t.checklistImagePreviews[o.id],"onUpdate:imageUrl":c=>t.checklistImagePreviews[o.id]=c,existingImage:t.taskCheckList.checklist_images&&t.taskCheckList.checklist_images[o.id]?`/storage/${t.taskCheckList.checklist_images[o.id]}`:null,"upload-text":`Upload ${o.name} image`,submitStatus:(h=t.taskCheckList.checklist_values[o.id])==null?void 0:h.status},null,8,["modelValue","onUpdate:modelValue","imageUrl","onUpdate:imageUrl","existingImage","upload-text","submitStatus"])])):m("",!0),e("div",Jt,[s[8]||(s[8]=e("label",{for:"status",class:"block text-md font-medium text-gray-700"},"Status",-1)),e("div",Qt,[e("label",Xt,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"skip",disabled:(b=f.user.role)==null?void 0:b.incident_supervisor},null,8,Zt),[[N,t.form[`checklist_${o.id}_status`]]]),s[4]||(s[4]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Skip",-1))]),e("label",es,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-yellow-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"requested",disabled:(d=f.user.role)==null?void 0:d.incident_supervisor},null,8,ts),[[N,t.form[`checklist_${o.id}_status`]]]),s[5]||(s[5]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Request",-1))]),e("label",ss,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-red-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"declined",disabled:(j=f.user.role)==null?void 0:j.installation_oss},null,8,os),[[N,t.form[`checklist_${o.id}_status`]]]),s[6]||(s[6]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Declined",-1))]),e("label",as,[k(e("input",{type:"radio",class:"form-radio h-5 w-5 text-green-600",name:t.form[`checklist_${o.id}`],"onUpdate:modelValue":c=>t.form[`checklist_${o.id}_status`]=c,value:"approved",disabled:(T=f.user.role)==null?void 0:T.installation_oss},null,8,ls),[[N,t.form[`checklist_${o.id}_status`]]]),s[7]||(s[7]=e("span",{class:"ml-2 text-gray-700 text-sm"},"Approved",-1))])])])])}),128))])])]),e("div",is,[e("span",ns,[k(e("button",ds," Save ",512),[[Q,!t.form.id]]),k(e("button",rs," Update ",512),[[Q,t.form.id]])]),e("span",cs,[e("button",{onClick:s[0]||(s[0]=(...o)=>t.closeModal&&t.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):m("",!0)])}const us=Z(_t,[["render",ms],["__scopeId","data-v-31319be2"]]),fs={name:"IncidentTask",components:{AppLayout:ne,Pagination:ce,Multiselect:ge,NoData:de,Link:me,CustomerDetail:re,TaskCheckListSubcon:gt,TaskCheckListSupervisor:us},props:{tasks:Object,errors:Object,task_write:Boolean,user:Object,noc:Object,critical:Number,high:Number,normal:Number,role:Object,subcons:Object,subcon:Object,pendingRootCause:Object,subRootCause:Object,checklistValues:Object,checkListSummary:Object},setup(u){var q;const s=x("");x("");let f=x(!1),t=x(!1),y=x(!1),v=x(""),w=x(1),p=x("my"),o=x([]);x(1);let U=x(!1);U.value=((q=u.user.role)==null?void 0:q.incident_supervisor)??!1;const h=x([{id:"1",name:"WIP"},{id:"3",name:"Pending"},{id:"4",name:"Photo Upload Complete"},{id:"5",name:"Photo Upload Rejected",$isDisabled:!U.value},{id:"2",name:"Supervisor Approved",$isDisabled:!U.value},{id:"0",name:"Deleted",$isDisabled:!U.value}]),b=x({date:"YYYY-MM-DD",month:"MMM"});x(!1),ue("user",u.user);const d=fe({id:null,code:null,edge_code:null,priority:null,assigned:null,target:null,status:1,description:null,comment:null,incident_id:null,data:null,root_causes:null,sub_root_causes:null,root_causes_id:null,sub_root_causes_id:null,complete_date:null,statusData:null});function j(){d.id=null,d.code=null,d.edge_code=null,d.priority=null,d.assigned=null,d.target=null,d.status=1,d.description=null,d.comment=null,d.incident_id=u.data,d.root_causes=null,d.sub_root_causes=null,d.root_causes_id=null,d.sub_root_causes_id=null,d.complete_date=null,v.value=null,d.statusData=null}function T(r){h.value=h.value.map(_=>_.id==="4"?{..._,$isDisabled:r.remaining>0}:_),d.id=r.id,d.code=r.code,d.edge_code=r.edge_code,d.priority=r.priority,d.assigned=u.subcons.filter(_=>_.id==r.assigned)[0],d.description=r.description,d.incident_id=r.incident_id,d.comment=r.comment,d.status=r.status,d.target=r.target,d.data=r,d.statusData=h.value.find(_=>_.id==String(r.status)),d.root_causes=r.root_causes_id?u.pendingRootCause.filter(_=>_.id==r.root_causes_id)[0]:null,d.sub_root_causes=null,d.root_causes_id=r.root_causes_id,d.sub_root_causes_id=r.sub_root_causes_id,d.complete_date=r.complete_date,y.value=!0,t.value=!0,v.value=r.incident_id}function c(r){r.status!=2?Toast.fire({title:"Are you sure?",text:"Do you want to mark as completed !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(_=>{_.isConfirmed&&g(r,2)}):Toast.fire({title:"Are you sure?",text:"Do you want to mark as WIP !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(_=>{_.isConfirmed&&g(r,1)})}function g(r,_){d.id=r.id,d.assigned=u.subcons.filter(l=>l.id==r.assigned)[0],d.description=r.description,d.incident_id=r.incident_id,d.status=_,d.target=r.target,y.value=!0,t.value=!1,C()}function C(){y.value!=!0?(d._method="POST",J.post("/addTask",d,{preserveState:!0,onSuccess:r=>{t.value=!1,j(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}})):(d._method="PUT",J.post("/editTask/"+d.id,d,{onSuccess:r=>{t.value=!1,y.value=!1,j(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..",r)}}))}function I(){t.value=!1,preserveState=!0}function V(r){const _=h.value.find(l=>l.id==String(r));return _?_.name:"WIP"}function F(){J.get("/mytask/",{keyword:s.value,status:w.value,task:p.value},{preserveState:!0})}function M(){let r="/mytask/";s.value!=null&&(r=r+"?keyword="+s.value),w.value!=""&&(r=r+"&status="+w.value),p.value!=""&&(r=r+"&task="+p.value),J.get(r,{keyword:s.value},{preserveState:!0})}function B(r){w.value=r,M()}function E(){p.value="my",M()}function $(){p.value="all",M()}const W=r=>{let _=u.subcons.filter(l=>l.id==r)[0];return _?_.name:""};function Y(r){var l;o.value=[];let _=u.pendingRootCause.filter(O=>O.id==r.id);o.value=(l=_[0])==null?void 0:l.sub_root_causes,d.sub_root_causes_id&&(d.sub_root_causes=o.value.filter(O=>O.id==d.sub_root_causes_id)[0],d.sub_root_causes||(d.sub_root_causes_id=null))}pe(()=>d.root_causes,r=>{r&&Y(r)});const G=x(1);function K(r){G.value=r}return{search:s,loading:f,form:d,formatter:b,edit:t,editMode:y,search_status:w,task_user:p,getName:W,getStatus:V,editTask:T,completeIt:g,saveTask:C,cancelTask:I,completeTask:c,searchTask:F,goMyTasks:E,goAllTasks:$,changeStatus:M,subRCA:o,goSearch:B,tabClick:K,tab:G,selected_id:v,subconStatus:h}}},ps={class:"py-1"},xs={class:"mx-auto sm:px-6 lg:px-8"},gs={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-2 py-2 w-full justify-items-end"},_s={class:"flex w-full"},ys={class:"flex w-full items-center justify-end"},bs={class:"mr-3 text-sm font-medium text-gray-700"},ks={class:"inline-flex relative cursor-pointer"},hs=["checked"],vs={class:"flex w-full"},ws={key:1},Cs={key:0,class:"hidden md:block"},Ss={class:"min-w-full divide-y divide-gray-200 table-auto"},Us={class:"bg-white divide-y divide-gray-200 text-sm w-full text-left"},js={class:"px-2 py-3 whitespace-nowrap"},Ts={class:"px-6 py-3 whitespace-nowrap"},Is={class:"px-6 py-3 whitespace-nowrap"},Vs={class:"px-6 py-3 whitespace-nowrap"},Ls={class:"px-6 py-3 whitespace-nowrap"},Ds={class:"px-6 py-3 whitespace-nowrap"},Ms={class:"px-6 py-3 whitespace-nowrap"},As={class:"px-6 py-3 whitespace-nowrap"},Rs={class:"px-6 py-3 whitespace-nowrap"},Ns={class:"px-6 py-3 whitespace-nowrap"},Os=["onClick"],Ps={key:1,class:"grid grid-cols-1 sm:grid-cols-2 gap-2 md:hidden"},Gs={class:"flex items-center justify-between space-x-2 text-sm"},qs={class:"font-bold"},zs={class:"text-sm text-gray-600"},Fs={class:"font-sm p-2 capitalize"},Bs={class:"mt-4"},Es={class:"text-xs text-gray-700"},$s={class:"text-xs text-gray-700"},Ws={class:"text-xs text-gray-700"},Ys={class:"flex flex-wrap justify-end"},Ks=["onClick"],Hs={key:2,class:"w-full block mt-4"},Js={class:"text-xs text-gray-600"},Qs={key:3},Xs={key:2,class:"inline-flex w-full bg-gray-50 rounded-t-lg"},Zs={id:"tabs",class:"flex"},eo={id:"tab-contents"},to={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full bg-white p-4"},so={class:"md:py-2 md:col-span-3 col-span-1"},oo={class:"flex"},ao={for:"ftth_id",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2"},lo={class:"md:py-2 md:col-span-3 col-span-1"},io={class:"flex"},no={for:"ftth_id",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2"},ro={class:"md:py-2 md:col-span-3 col-span-1"},co={class:"flex"},mo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 capitalize"},uo={key:0,class:"py-2 col-span-1 w-full"},fo={key:1,class:"md:py-2 md:col-span-3 col-span-1"},po={class:"flex"},xo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 capitalize"},go={class:"md:py-2 md:col-span-3 col-span-1"},_o={class:"flex"},yo={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 whitespace-normal"},bo={class:"md:py-2 md:col-span-3 col-span-1"},ko={class:"flex"},ho={for:"type",class:"block text-sm font-bold text-gray-700 md:mt-2 md:mr-2 whitespace-normal"},vo={class:"md:py-2 md:col-span-3 col-span-1"},wo={class:"flex rounded-md shadow-sm"},Co={key:0,class:"flex rounded-md shadow-sm w-full"},So={key:1,class:"mt-2 text-sm text-red-500"},Uo={class:"md:py-2 col-span-1 md:col-span-3"},jo={class:"flex rounded-md shadow-sm"},To={key:0,class:"mt-2 text-sm text-red-500"},Io={class:"md:py-2 col-span-1 md:col-span-3"},Vo={class:"flex rounded-md shadow-sm"},Lo={key:0,class:"mt-2 text-sm text-red-500"},Do={class:"md:py-2 col-span-1 md:col-span-3"},Mo={key:0,class:"mt-2 text-sm text-red-500"},Ao={class:"md:py-2 col-span-1 md:col-span-3"},Ro={class:"flex rounded-md shadow-sm"},No={key:0,class:"mt-2 text-sm text-red-500"},Oo={class:"py-2 col-span-1 md:col-span-3"},Po={key:0,class:"flex rounded-md shadow-sm w-full"},Go={key:1,class:"mt-2 text-sm text-red-500"},qo={class:"py-2 col-span-1 md:col-span-3"},zo={key:0,class:"flex rounded-md shadow-sm w-full"},Fo={key:1,class:"mt-2 text-sm text-red-500"},Bo={class:"md:py-2 col-span-1 md:col-span-3"},Eo={class:"flex rounded-md shadow-sm"},$o={key:0,class:"mt-2 text-sm text-red-500"},Wo={class:"col-span-1 md:col-span-4 flex md:justify-end justify-between mt-4"},Yo={key:0},Ko={key:1},Ho={key:0},Jo={key:1},Qo={key:0,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function Xo(u,s,f,t,y,v){const w=L("pagination"),p=L("multiselect"),o=L("customer-detail"),U=L("task-check-list-supervisor"),h=L("task-check-list-subcon"),b=L("app-layout");return a(),H(b,null,{default:ee(()=>{var d,j,T,c,g,C,I,V,F,M,B,E,$,W,Y,G,K,q,r,_;return[e("div",ps,[e("div",xs,[t.edit?m("",!0):(a(),i("div",gs,[e("div",_s,[s[23]||(s[23]=e("span",{class:"z-10 mt-1 leading-snug font-normal text-center text-blueGray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-search"})],-1)),k(e("input",{type:"text",placeholder:"ID/Description",class:"pl-10 pr-12 py-2.5 w-full rounded-lg text-sm text-gray-700 placeholder-gray-400 transition-colors bg-white border border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-500 focus:ring-opacity-10 focus:outline-none dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 dark:placeholder-gray-500 dark:focus:border-indigo-500 dark:focus:ring-opacity-20",id:"search",tabindex:"1","onUpdate:modelValue":s[0]||(s[0]=l=>t.search=l),onKeyup:s[1]||(s[1]=xe((...l)=>t.searchTask&&t.searchTask(...l),["enter"]))},null,544),[[A,t.search]])]),e("div",ys,[e("span",bs,n(t.task_user==="my"?"My Tasks":"All Tasks"),1),e("label",ks,[e("input",{type:"checkbox",class:"sr-only peer",checked:t.task_user==="all",onChange:s[2]||(s[2]=l=>t.task_user==="my"?t.goAllTasks():t.goMyTasks())},null,40,hs),s[24]||(s[24]=e("div",{class:"w-14 h-8 bg-gray-400 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-6 peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600 shadow-sm"},null,-1))])]),e("div",vs,[e("button",{class:S(["w-32 btn py-3 px-8 bg-gray-400 rounded rounded-r-none focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-yellow-300 text-gray-600 font-bold":t.search_status==1}]),onClick:s[3]||(s[3]=l=>t.goSearch(1))},"WIP",2),e("button",{class:S(["w-32 btn py-3 px-8 bg-gray-400 focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-yellow-500 text-gray-600 font-bold":t.search_status==3}]),onClick:s[4]||(s[4]=l=>t.goSearch(3))},"Pending",2),e("button",{class:S(["w-32 btn py-3 px-8 bg-gray-400 focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase border-r-gray-300 border-r",{"bg-green-300 text-gray-600 font-bold":t.search_status==2}]),onClick:s[5]||(s[5]=l=>t.goSearch(2))},"Completed",2),e("button",{class:S(["w-32 btn py-3 px-8 bg-gray-400 rounded rounded-l-none focus:ring-0 focus:border-transparent focus:outline-none shadow-lg text-gray-50 text-xs font-semibold uppercase",{"bg-indigo-600 font-bold":t.search_status=="all"}]),onClick:s[6]||(s[6]=l=>t.goSearch("all"))},"All",2)])])),t.edit?m("",!0):(a(),i("div",ws,[(d=f.tasks)!=null&&d.data?(a(),i("div",Cs,[e("table",Ss,[s[26]||(s[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," EDGE Ticket "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned To"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned By"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Target Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Complete Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Action")])],-1)),e("tbody",Us,[(a(!0),i(D,null,P(f.tasks.data,(l,O)=>{var X;return a(),i("tr",{key:l.id},[e("td",js,[e("i",{class:S(["fa fa-circle mr-2",{"text-yellow-400":l.priority=="normal","text-yellow-600":l.priority=="high","text-red-600":l.priority=="critical"}])},null,2),z(" "+n(O+=f.tasks.from),1)]),e("td",Ts,n(l.edge_code),1),e("td",Is,n(l.ftth_id),1),e("td",Vs,n((X=l.description)==null?void 0:X.substring(0,50)),1),e("td",Ls,n(t.getName(l.assigned)),1),e("td",Ds,n(l.incharge.match(/\b\w/g).join("")),1),e("td",Ms,n(l.target),1),e("td",As,n(l.complete_date),1),e("td",Rs,n(t.getStatus(l.status)),1),e("td",Ns,[e("a",{href:"#",onClick:Zo=>t.editTask(l),class:"text-blue-600"},s[25]||(s[25]=[e("i",{class:"fa fa-edit"},null,-1)]),8,Os)])])}),128))])])])):m("",!0),(j=f.tasks)!=null&&j.data?(a(),i("div",Ps,[(a(!0),i(D,null,P(f.tasks.data,(l,O)=>(a(),i("div",{class:"bg-white p-4 rounded-lg shadow mt-2 space-y-1 text-gray-600",key:l.id},[e("div",Gs,[e("label",qs,n(l.ftth_id),1),e("div",null,[e("span",{class:S(["text-xs font-bold px-2.5 py-0.5 rounded items-center justify-center",{"bg-yellow-400":l.status==1,"bg-yellow-500":l.status==3,"bg-green-300":l.status!=1}])},n(t.getStatus(l.status)),3)])]),e("div",zs,[s[27]||(s[27]=e("label",{for:"details",class:"w-full font-bold"}," Instruction : ",-1)),e("p",Fs,n(l.description),1)]),e("span",Bs,[e("div",Es," Assigned To : "+n(l.assigned_to),1),e("div",$s," Assigned By : "+n(l.incharge),1),e("div",Ws," Target Date : "+n(l.target),1)]),e("div",Ys,[e("div",null,[e("a",{type:"button",onClick:X=>t.editTask(l),href:"#",class:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-30 items-center justify-center"},s[28]||(s[28]=[e("span",{class:"text-sm"},"Edit",-1),e("i",{class:"fa fa-angle-double-right fa-lg ml-2","aria-hidden":"true"},null,-1)]),8,Ks)])])]))),128))])):m("",!0),f.tasks.total?(a(),i("span",Hs,[e("label",Js,n(f.tasks.data.length)+" Tasks in Current Page. Total Number of Tasks : "+n(f.tasks.total),1)])):m("",!0),f.tasks.links?(a(),i("span",Qs,[R(w,{class:"mt-4",links:f.tasks.links},null,8,["links"])])):m("",!0)])),t.edit?(a(),i("div",Xs,[e("ul",Zs,[e("li",{class:S(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[7]||(s[7]=l=>t.tabClick(1)),"preserve-state":""},"Genaral")],2),e("li",{class:S(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[8]||(s[8]=l=>t.tabClick(2)),"preserve-state":""},"Customer Info")],2),e("li",{class:S(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[t.tab==3?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:s[9]||(s[9]=l=>t.tabClick(3)),"preserve-state":""},"Attachment Info")],2)])])):m("",!0),e("div",eo,[e("div",{class:S([t.tab==1?"":"hidden"])},[t.edit?(a(),i("div",to,[s[35]||(s[35]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Code : ")])],-1)),e("div",so,[e("div",oo,[e("label",ao,[e("i",{class:S(["fa fa-circle mr-2",{"text-yellow-400":((T=t.form.data)==null?void 0:T.priority)=="normal","text-yellow-600":((c=t.form.data)==null?void 0:c.priority)=="high","text-red-600":((g=t.form.data)==null?void 0:g.priority)=="critical"}])},null,2),z(" "+n((C=t.form.data)==null?void 0:C.code)+" | "+n((I=t.form.data)==null?void 0:I.edge_code),1)])])]),s[36]||(s[36]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Customer ID : ")])],-1)),e("div",lo,[e("div",io,[e("label",no,n((V=t.form.data)==null?void 0:V.ftth_id),1)])]),s[37]||(s[37]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Type : ")])],-1)),e("div",ro,[e("div",co,[e("label",mo,n((F=t.form.data)==null?void 0:F.type.replace("_"," ")),1)])]),(M=t.form.data)!=null&&M.topic?(a(),i("div",uo,s[29]||(s[29]=[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Topic : ")],-1)]))):m("",!0),(B=t.form.data)!=null&&B.topic?(a(),i("div",fo,[e("div",po,[e("label",xo,n((E=t.form.data)==null?void 0:E.topic.replace("_"," ")),1)])])):m("",!0),s[38]||(s[38]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Detail : ")])],-1)),e("div",go,[e("div",_o,[e("label",yo,n(($=t.form.data)==null?void 0:$.incident_description),1)])]),s[39]||(s[39]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Ticket Opened At : ")])],-1)),e("div",bo,[e("div",ko,[e("label",ho,n((W=t.form.data)==null?void 0:W.date)+" : "+n((Y=t.form.data)==null?void 0:Y.time),1)])]),s[40]||(s[40]=e("div",{class:"py-2 col-span-1 w-full"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Assigned : ")])],-1)),e("div",vo,[e("div",wo,[f.subcons.length!==0?(a(),i("div",Co,[R(p,{"deselect-label":"Selected already",options:f.subcons,"track-by":"id",label:"name",modelValue:t.form.assigned,"onUpdate:modelValue":s[10]||(s[10]=l=>t.form.assigned=l),"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.assigned?(a(),i("p",So,n(u.$page.props.errors.assigned),1)):m("",!0)])]),s[41]||(s[41]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Target : ")])],-1)),e("div",Uo,[e("div",jo,[k(e("input",{type:"date","onUpdate:modelValue":s[11]||(s[11]=l=>t.form.target=l),name:"target",id:"target",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[A,t.form.target]])]),u.$page.props.errors.target?(a(),i("p",To,n(u.$page.props.errors.target),1)):m("",!0)]),s[42]||(s[42]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Instruction : ")])],-1)),e("div",Io,[e("div",Vo,[k(e("textarea",{"onUpdate:modelValue":s[12]||(s[12]=l=>t.form.description=l),name:"description",id:"description",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[A,t.form.description]])]),u.$page.props.errors.description?(a(),i("p",Lo,n(u.$page.props.errors.description),1)):m("",!0)]),s[43]||(s[43]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"status",class:"block text-sm font-medium text-gray-700 md:mr-2"}," Status : ")])],-1)),e("div",Do,[R(p,{"deselect-label":"Selected already",options:t.subconStatus,"track-by":"id",label:"name",modelValue:t.form.statusData,"onUpdate:modelValue":[s[13]||(s[13]=l=>t.form.statusData=l),s[14]||(s[14]=l=>t.form.status=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,taggable:!1},{singleLabel:ee(({option:l})=>[e("strong",null,n(l.name),1)]),_:1},8,["options","modelValue"]),u.$page.props.errors.status?(a(),i("p",Mo,n(u.$page.props.errors.status),1)):m("",!0)]),t.form.status==2?(a(),i(D,{key:2},[s[30]||(s[30]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Complete At : ")])],-1)),e("div",Ao,[e("div",Ro,[k(e("input",{type:"date","onUpdate:modelValue":s[15]||(s[15]=l=>t.form.complete_date=l),name:"complete_date",id:"complete_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[A,t.form.complete_date]]),u.$page.props.errors.complete_date?(a(),i("p",No,n(u.$page.props.errors.complete_date)+">",1)):m("",!0)])])],64)):m("",!0),t.form.status==3?(a(),i(D,{key:3},[s[31]||(s[31]=e("div",{class:"py-2 col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"root_causes_id",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Root Cause for Pending : ")])],-1)),e("div",Oo,[((G=f.pendingRootCause)==null?void 0:G.length)!==0?(a(),i("div",Po,[R(p,{"deselect-label":"Selected already",options:f.pendingRootCause,"track-by":"id",label:"name",modelValue:t.form.root_causes,"onUpdate:modelValue":[s[16]||(s[16]=l=>t.form.root_causes=l),s[17]||(s[17]=l=>t.form.root_causes_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.root_causes_id?(a(),i("p",Go,n(u.$page.props.errors.root_causes_id),1)):m("",!0)]),s[32]||(s[32]=e("div",{class:"py-2 col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"sub_root_causes",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"},"Sub Root Cause : ")])],-1)),e("div",qo,[((K=t.subRCA)==null?void 0:K.length)!==0?(a(),i("div",zo,[R(p,{"deselect-label":"Selected already",options:t.subRCA,"track-by":"id",label:"name",modelValue:t.form.sub_root_causes,"onUpdate:modelValue":[s[18]||(s[18]=l=>t.form.sub_root_causes=l),s[19]||(s[19]=l=>t.form.sub_root_causes_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1},null,8,["options","modelValue"])])):m("",!0),u.$page.props.errors.sub_root_causes_id?(a(),i("p",Fo,n(u.$page.props.errors.sub_root_causes_id),1)):m("",!0)])],64)):m("",!0),s[44]||(s[44]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex md:justify-end"},[e("label",{for:"comment",class:"block text-sm font-medium text-gray-700 md:mt-2 md:mr-2"}," Comments : ")])],-1)),e("div",Bo,[e("div",Eo,[k(e("textarea",{"onUpdate:modelValue":s[20]||(s[20]=l=>t.form.comment=l),name:"comment",id:"comment",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[A,t.form.comment]])]),u.$page.props.errors.comment?(a(),i("p",$o,n(u.$page.props.errors.comment),1)):m("",!0)]),e("div",Wo,[e("a",{href:"#",onClick:s[21]||(s[21]=l=>t.saveTask()),class:"text-center px-4 py-3 bg-green-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-400 active:bg-green-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},[t.editMode?m("",!0):(a(),i("span",Yo,"Save Task")),t.editMode?(a(),i("span",Ko,"Update Task")):m("",!0),s[33]||(s[33]=e("i",{class:"fas fa-save opacity-75 ml-1 text-sm"},null,-1))]),e("a",{href:"#",onClick:s[22]||(s[22]=l=>t.cancelTask()),class:"text-center px-4 py-3 bg-gray-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition"},s[34]||(s[34]=[z("Cancel"),e("i",{class:"fas fa-save opacity-75 ml-1 text-sm"},null,-1)]))])])):m("",!0)],2),e("div",{class:S([t.tab==2?"":"hidden"])},[t.selected_id&&t.tab==2?(a(),H(o,{key:0,data:t.selected_id},null,8,["data"])):m("",!0)],2),e("div",{class:S([t.tab==3?"":"hidden"])},[(q=f.user.role)!=null&&q.incident_supervisor?(a(),i("span",Ho,[t.tab==3?(a(),H(U,{key:0,taskId:(r=t.form)==null?void 0:r.id,user:f.user},null,8,["taskId","user"])):m("",!0)])):m("",!0),f.user.user_type=="subcon"?(a(),i("span",Jo,[t.tab==3?(a(),H(h,{key:0,taskId:(_=t.form)==null?void 0:_.id},null,8,["taskId"])):m("",!0)])):m("",!0)],2)])])]),t.loading?(a(),i("div",Qo,s[45]||(s[45]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):m("",!0)]}),_:1})}const da=Z(fs,[["render",Xo]]);export{da as default};
