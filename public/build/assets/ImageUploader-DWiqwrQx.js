import{r as d,x as V,y as j,o as i,d as s,a as l,t as v,e as c,n as B,i as f,F as z}from"./app-BJW5LC8R.js";const M=["for"],P={class:"relative"},R=["disabled"],G={key:0,class:"space-y-1 text-center"},N={class:"text-sm text-gray-600"},T={class:"font-medium text-indigo-600 hover:text-indigo-500"},$={key:1,class:"relative w-full h-full"},L=["src","alt"],O={class:"absolute top-1 right-1 flex space-x-1 z-20"},W=["disabled","id"],A={key:1,class:"mt-2 text-sm text-red-500"},E={class:"relative"},J=["src","alt"],H={__name:"ImageUploader",props:{modelValue:{type:[File,null],default:null},imageUrl:{type:String,default:null},submitStatus:{type:String,default:null},existingImage:{type:String,default:null},label:{type:String,default:""},uploadText:{type:String,default:"Click to upload"},disabled:{type:Boolean,default:!1},error:{type:String,default:""},id:{type:String,default:()=>`file-upload-${Math.random().toString(36).substring(2,9)}`}},emits:["update:modelValue","update:imageUrl"],setup(a,{emit:h}){const n=a,r=h,x=d(null),g=d(!1),o=d(n.imageUrl||n.existingImage),m=d(!1),b=d(null);V(()=>n.existingImage,t=>{if(t){const e=t.replace(/\/customer\/\d+\//,"/");o.value=e,r("update:imageUrl",e)}}),j(()=>{if(n.existingImage){const t=n.existingImage.replace(/\/customer\/\d+\//,"/");o.value=t,r("update:imageUrl",t)}});function w(t){x.value=t}function k(){n.disabled||x.value.click()}function I(t){g.value=!0}function F(t){g.value=!1}function U(t){if(g.value=!1,n.disabled)return;const e=t.dataTransfer.files;if(e.length>0){const u=e[0];u.type.startsWith("image/")&&p(u)}}function S(t){const e=t.target.files[0];e&&p(e)}function p(t){if(t.size>10*1024*1024){alert("File size exceeds 10MB limit");return}r("update:modelValue",t);const e=new FileReader;e.onload=u=>{o.value=u.target.result,r("update:imageUrl",u.target.result)},e.readAsDataURL(t)}function C(t){t.stopPropagation(),r("update:modelValue",null),o.value=null,r("update:imageUrl",null)}function D(t){b.value=t,m.value=!0}function y(){m.value=!1,b.value=null}return(t,e)=>(i(),s(z,null,[l("div",null,[a.label?(i(),s("label",{key:0,for:a.id,class:"block text-sm font-medium text-gray-700 mb-1"},v(a.label),9,M)):c("",!0),l("div",P,[l("div",{class:B(["flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-md border-gray-300 hover:border-indigo-500 transition-colors duration-200 cursor-pointer bg-gray-50",{"border-indigo-500 bg-indigo-50":g.value}]),onClick:k,onDragover:f(I,["prevent"]),onDragleave:f(F,["prevent"]),onDrop:f(U,["prevent"]),disabled:a.disabled},[o.value?(i(),s("div",$,[l("img",{src:o.value,alt:`${a.label} Preview`,class:"object-contain w-full h-full rounded-md"},null,8,L),l("div",O,[l("button",{onClick:e[0]||(e[0]=f(u=>D(a.id),["stop"])),type:"button",class:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-blue-600 transition-colors duration-200",title:"Open Full View"},e[4]||(e[4]=[l("i",{class:"fas fa-external-link-alt text-xs"},null,-1)])),a.submitStatus!=="approved"?(i(),s("button",{key:0,onClick:f(C,["stop"]),type:"button",class:"bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors duration-200",title:"Remove image"},e[5]||(e[5]=[l("i",{class:"fas fa-times text-xs"},null,-1)]))):c("",!0)])])):(i(),s("div",G,[e[2]||(e[2]=l("i",{class:"fas fa-cloud-upload-alt text-3xl text-gray-400"},null,-1)),l("div",N,[l("span",T,v(a.uploadText),1),e[1]||(e[1]=l("span",null," or drag and drop",-1))]),e[3]||(e[3]=l("p",{class:"text-xs text-gray-500"}," PNG, JPG, GIF up to 10MB ",-1))]))],42,R),a.submitStatus!=="approved"?(i(),s("input",{key:0,ref:w,type:"file",onChange:S,accept:"image/*",class:"hidden",disabled:a.disabled,id:a.id},null,40,W)):c("",!0)]),a.error?(i(),s("p",A,v(a.error),1)):c("",!0)]),m.value?(i(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:y},[l("div",E,[l("img",{class:"max-h-[90vh] max-w-[90vw]",src:o.value,alt:a.label||"Image preview"},null,8,J),l("button",{class:"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full w-8 h-8 flex items-center justify-center",onClick:y},e[6]||(e[6]=[l("span",{class:"text-xl"},"Ã—",-1)]))])])):c("",!0)],64))}};export{H as _};
