import{r as w,T as A,x as P,q as S,c as x,w as f,o as d,a as s,i as F,u as o,d as r,t as a,e as u,b as m,f as T,m as L}from"./app-B5e6PWkm.js";import{A as N}from"./AppLayout-D9JTYuP9.js";import{M as n}from"./vue3-multiselect.umd.min-Dyiz4t_c.js";import"./DropdownLink-C4t8k3V8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"py-12"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={class:"bg-white shadow-xl sm:rounded-lg p-6"},E={class:"grid grid-cols-1 gap-6"},I={class:"grid grid-cols-3 gap-4"},J={key:1,class:"border-gray-200 border p-2 rounded-sm text-gray-600"},R={key:2,class:"text-red-500 text-sm mt-1"},W={key:1,class:"border-gray-200 border p-2 rounded-sm text-gray-600"},z={key:2,class:"text-red-500 text-sm mt-1"},H={key:1,class:"border-gray-200 border p-2 rounded-sm text-gray-600"},K={key:2,class:"text-red-500 text-sm mt-1"},Q={key:0,class:"text-red-500 text-sm mt-1"},X={key:0,class:"text-red-500 text-sm mt-1"},Y={class:"grid grid-cols-3 gap-4"},Z={key:0,class:"text-red-500 text-sm mt-1"},h={key:0,class:"text-red-500 text-sm mt-1"},$={key:0,class:"text-red-500 text-sm mt-1"},ee={key:0,class:"text-red-500 text-sm mt-1"},te={key:0,class:"text-red-500 text-sm mt-1"},oe={class:"flex justify-end space-x-3"},le=["disabled"],ue={__name:"Create",props:{fiberCables:Array,jcBoxes:Array,usedPorts:Object,pops:Object},setup(c){const g=c,b=w([]),y=w([]),t=A({source:"",source_id:"",source_color:"",source_color_id:"",source_port:"",source_port_id:"",dest:"",dest_id:"",dest_color:"",dest_color_id:"",dest_port:"",dest_port_id:"",jc:"",jc_id:"",status:"",status_id:"",pop:"",pop_id:"",pop_device:"",pop_device_id:""}),k=[{id:"blue",name:"Blue"},{id:"orange",name:"Orange"},{id:"green",name:"Green"},{id:"brown",name:"Brown"},{id:"gray",name:"Gray"},{id:"white",name:"White"},{id:"red",name:"Red"},{id:"black",name:"Black"}],C=[{id:"active",name:"Active"},{id:"plan",name:"Plan"},{id:"inactive",name:"Inactive"}],_=[{id:"1",name:"1"},{id:"2",name:"2"},{id:"3",name:"3"},{id:"4",name:"4"},{id:"5",name:"5"},{id:"6",name:"6"},{id:"7",name:"7"},{id:"8",name:"8"},{id:"9",name:"9"},{id:"10",name:"10"},{id:"11",name:"11"},{id:"12",name:"12"}],j=()=>{t.post(route("core-assignments.store"),{onSuccess:()=>{t.reset()}})},B=async()=>{if(!t.pop_id){b.value=[];return}try{const e=await(await fetch(`/getOLTByPOP/${t.pop_id}`)).json();b.value=e||[],console.log("fetch POP Devices")}catch(i){console.error("Failed to fetch POP devices",i)}},O=async()=>{if(!t.pop_device_id){y.value=[];return}try{const e=await(await fetch(`/getFeederByOLT/${t.pop_device_id}`)).json();y.value=e||[],console.log("fetch Feeder Cables")}catch(i){console.error("Failed to fetch Feeder Cables",i)}};P(()=>t.pop_id,()=>{B(),t.pop_device=null,t.pop_device_id=null}),P(()=>t.pop_device_id,()=>{O(),t.source=null,t.source_id=null,t.source_color=null,t.source_color_id=null,t.source_port=null,t.source_port_id=null});const D=S(()=>{var e;if(!t.source_id)return _;const i=((e=g.usedPorts[t.source_id])==null?void 0:e.source_ports)||[];return _.filter(p=>!i.includes(p.id))}),U=S(()=>{var e;if(!t.dest_id)return _;const i=((e=g.usedPorts[t.dest_id])==null?void 0:e.dest_ports)||[];return _.filter(p=>!i.includes(p.id))});return(i,e)=>(d(),x(N,{title:"Create Core Assignment"},{header:f(()=>e[20]||(e[20]=[s("h2",{class:"font-semibold text-xl text-white leading-tight"}," Create Core Assignment ",-1)])),default:f(()=>{var p,V,v;return[s("div",M,[s("div",G,[s("div",q,[s("form",{onSubmit:F(j,["prevent"])},[s("div",E,[s("div",I,[s("div",null,[e[21]||(e[21]=s("label",{class:"block text-sm font-medium text-gray-700"},"Source POP",-1)),((p=c.pops)==null?void 0:p.length)>0?(d(),x(o(n),{key:0,"deselect-label":"Selected already",options:c.pops,"track-by":"id",label:"site_name",modelValue:o(t).pop,"onUpdate:modelValue":[e[0]||(e[0]=l=>o(t).pop=l),e[1]||(e[1]=l=>o(t).pop_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"1"},null,8,["options","modelValue"])):(d(),r("span",J,"No POP Site")),o(t).errors.pop_id?(d(),r("div",R,a(o(t).errors.pop_id),1)):u("",!0)]),s("div",null,[e[22]||(e[22]=s("label",{class:"block text-sm font-medium text-gray-700"},"Source OLT (Pop Devices)",-1)),((V=b.value)==null?void 0:V.length)>0?(d(),x(o(n),{key:0,"deselect-label":"Selected already",options:b.value,"track-by":"id",label:"device_name",modelValue:o(t).pop_device,"onUpdate:modelValue":[e[2]||(e[2]=l=>o(t).pop_device=l),e[3]||(e[3]=l=>o(t).pop_device_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"1"},null,8,["options","modelValue"])):(d(),r("div",W,"Please Select Pop Site")),o(t).errors.pop_device_id?(d(),r("div",z,a(o(t).errors.pop_device_id),1)):u("",!0)]),s("div",null,[e[23]||(e[23]=s("label",{class:"block text-sm font-medium text-gray-700"},"Source Cable",-1)),((v=y.value)==null?void 0:v.length)>0?(d(),x(o(n),{key:0,"deselect-label":"Selected already",options:y.value,"track-by":"id",label:"name",modelValue:o(t).source,"onUpdate:modelValue":[e[4]||(e[4]=l=>o(t).source=l),e[5]||(e[5]=l=>o(t).source_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"1"},null,8,["options","modelValue"])):(d(),r("div",H,"Please Select OLT")),o(t).errors.source_id?(d(),r("div",K,a(o(t).errors.source_id),1)):u("",!0)]),s("div",null,[e[24]||(e[24]=s("label",{class:"block text-sm font-medium text-gray-700"},"Source Color",-1)),m(o(n),{"deselect-label":"Selected already",options:k,"track-by":"id",label:"name",modelValue:o(t).source_color,"onUpdate:modelValue":[e[6]||(e[6]=l=>o(t).source_color=l),e[7]||(e[7]=l=>o(t).source_color_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"2"},null,8,["modelValue"]),o(t).errors.source_color_id?(d(),r("div",Q,a(o(t).errors.source_color_id),1)):u("",!0)]),s("div",null,[e[25]||(e[25]=s("label",{class:"block text-sm font-medium text-gray-700"},"Source Port",-1)),m(o(n),{"deselect-label":"Selected already",options:D.value,"track-by":"id",label:"name",modelValue:o(t).source_port,"onUpdate:modelValue":[e[8]||(e[8]=l=>o(t).source_port=l),e[9]||(e[9]=l=>o(t).source_port_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"3"},null,8,["options","modelValue"]),o(t).errors.source_port_id?(d(),r("div",X,a(o(t).errors.source_port_id),1)):u("",!0)])]),s("div",Y,[s("div",null,[e[26]||(e[26]=s("label",{class:"block text-sm font-medium text-gray-700"},"Destination Cable",-1)),m(o(n),{"deselect-label":"Selected already",options:c.fiberCables,"track-by":"id",label:"name",modelValue:o(t).dest,"onUpdate:modelValue":[e[10]||(e[10]=l=>o(t).dest=l),e[11]||(e[11]=l=>o(t).dest_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"4"},null,8,["options","modelValue"]),o(t).errors.dest_id?(d(),r("div",Z,a(o(t).errors.dest_id),1)):u("",!0)]),s("div",null,[e[27]||(e[27]=s("label",{class:"block text-sm font-medium text-gray-700"},"Destination Color",-1)),m(o(n),{"deselect-label":"Selected already",options:k,"track-by":"id",label:"name",modelValue:o(t).dest_color,"onUpdate:modelValue":[e[12]||(e[12]=l=>o(t).dest_color=l),e[13]||(e[13]=l=>o(t).dest_color_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"5"},null,8,["modelValue"]),o(t).errors.dest_color_id?(d(),r("div",h,a(o(t).errors.dest_color_id),1)):u("",!0)]),s("div",null,[e[28]||(e[28]=s("label",{class:"block text-sm font-medium text-gray-700"},"Destination Port",-1)),m(o(n),{"deselect-label":"Selected already",options:U.value,"track-by":"id",label:"name",modelValue:o(t).dest_port,"onUpdate:modelValue":[e[14]||(e[14]=l=>o(t).dest_port=l),e[15]||(e[15]=l=>o(t).dest_port_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"6"},null,8,["options","modelValue"]),o(t).errors.dest_port_id?(d(),r("div",$,a(o(t).errors.dest_port_id),1)):u("",!0)])]),s("div",null,[e[29]||(e[29]=s("label",{class:"block text-sm font-medium text-gray-700"},"JC Box",-1)),m(o(n),{"deselect-label":"Selected already",options:c.jcBoxes,"track-by":"id",label:"name",modelValue:o(t).jc,"onUpdate:modelValue":[e[16]||(e[16]=l=>o(t).jc=l),e[17]||(e[17]=l=>o(t).jc_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"7"},null,8,["options","modelValue"]),o(t).errors.jc_id?(d(),r("div",ee,a(o(t).errors.jc_id),1)):u("",!0)]),s("div",null,[e[30]||(e[30]=s("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),m(o(n),{"deselect-label":"Selected already",options:C,"track-by":"id",label:"name",modelValue:o(t).status,"onUpdate:modelValue":[e[18]||(e[18]=l=>o(t).status=l),e[19]||(e[19]=l=>o(t).status_id=l==null?void 0:l.id)],"allow-empty":!1,multiple:!1,tabindex:"8"},null,8,["modelValue"]),o(t).errors.status_id?(d(),r("div",te,a(o(t).errors.status_id),1)):u("",!0)]),s("div",oe,[m(o(L),{href:i.route("core-assignments.index"),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},{default:f(()=>e[31]||(e[31]=[T(" Cancel ")])),_:1},8,["href"]),s("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:o(t).processing}," Create ",8,le)])])],32)])])])]}),_:1}))}};export{ue as default};
